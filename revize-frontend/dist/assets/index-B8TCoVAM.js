(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function i(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(l){if(l.ep)return;l.ep=!0;const c=i(l);fetch(l.href,c)}})();var sl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wx(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Vu={exports:{}},Na={},qu={exports:{}},ht={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sy;function m1(){if(Sy)return ht;Sy=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),d=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),k=Symbol.iterator;function E(W){return W===null||typeof W!="object"?null:(W=k&&W[k]||W["@@iterator"],typeof W=="function"?W:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,g={};function j(W,U,re){this.props=W,this.context=U,this.refs=g,this.updater=re||C}j.prototype.isReactComponent={},j.prototype.setState=function(W,U){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,U,"setState")},j.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function f(){}f.prototype=j.prototype;function b(W,U,re){this.props=W,this.context=U,this.refs=g,this.updater=re||C}var w=b.prototype=new f;w.constructor=b,N(w,j.prototype),w.isPureReactComponent=!0;var _=Array.isArray,A=Object.prototype.hasOwnProperty,B={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function $(W,U,re){var ae,ye={},ce=null,P=null;if(U!=null)for(ae in U.ref!==void 0&&(P=U.ref),U.key!==void 0&&(ce=""+U.key),U)A.call(U,ae)&&!M.hasOwnProperty(ae)&&(ye[ae]=U[ae]);var O=arguments.length-2;if(O===1)ye.children=re;else if(1<O){for(var te=Array(O),ee=0;ee<O;ee++)te[ee]=arguments[ee+2];ye.children=te}if(W&&W.defaultProps)for(ae in O=W.defaultProps,O)ye[ae]===void 0&&(ye[ae]=O[ae]);return{$$typeof:r,type:W,key:ce,ref:P,props:ye,_owner:B.current}}function D(W,U){return{$$typeof:r,type:W.type,key:U,ref:W.ref,props:W.props,_owner:W._owner}}function le(W){return typeof W=="object"&&W!==null&&W.$$typeof===r}function pe(W){var U={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(re){return U[re]})}var H=/\/+/g;function q(W,U){return typeof W=="object"&&W!==null&&W.key!=null?pe(""+W.key):U.toString(36)}function T(W,U,re,ae,ye){var ce=typeof W;(ce==="undefined"||ce==="boolean")&&(W=null);var P=!1;if(W===null)P=!0;else switch(ce){case"string":case"number":P=!0;break;case"object":switch(W.$$typeof){case r:case e:P=!0}}if(P)return P=W,ye=ye(P),W=ae===""?"."+q(P,0):ae,_(ye)?(re="",W!=null&&(re=W.replace(H,"$&/")+"/"),T(ye,U,re,"",function(ee){return ee})):ye!=null&&(le(ye)&&(ye=D(ye,re+(!ye.key||P&&P.key===ye.key?"":(""+ye.key).replace(H,"$&/")+"/")+W)),U.push(ye)),1;if(P=0,ae=ae===""?".":ae+":",_(W))for(var O=0;O<W.length;O++){ce=W[O];var te=ae+q(ce,O);P+=T(ce,U,re,te,ye)}else if(te=E(W),typeof te=="function")for(W=te.call(W),O=0;!(ce=W.next()).done;)ce=ce.value,te=ae+q(ce,O++),P+=T(ce,U,re,te,ye);else if(ce==="object")throw U=String(W),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return P}function Z(W,U,re){if(W==null)return W;var ae=[],ye=0;return T(W,ae,"","",function(ce){return U.call(re,ce,ye++)}),ae}function Q(W){if(W._status===-1){var U=W._result;U=U(),U.then(function(re){(W._status===0||W._status===-1)&&(W._status=1,W._result=re)},function(re){(W._status===0||W._status===-1)&&(W._status=2,W._result=re)}),W._status===-1&&(W._status=0,W._result=U)}if(W._status===1)return W._result.default;throw W._result}var Y={current:null},ne={transition:null},J={ReactCurrentDispatcher:Y,ReactCurrentBatchConfig:ne,ReactCurrentOwner:B};function ue(){throw Error("act(...) is not supported in production builds of React.")}return ht.Children={map:Z,forEach:function(W,U,re){Z(W,function(){U.apply(this,arguments)},re)},count:function(W){var U=0;return Z(W,function(){U++}),U},toArray:function(W){return Z(W,function(U){return U})||[]},only:function(W){if(!le(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},ht.Component=j,ht.Fragment=i,ht.Profiler=l,ht.PureComponent=b,ht.StrictMode=a,ht.Suspense=p,ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,ht.act=ue,ht.cloneElement=function(W,U,re){if(W==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+W+".");var ae=N({},W.props),ye=W.key,ce=W.ref,P=W._owner;if(U!=null){if(U.ref!==void 0&&(ce=U.ref,P=B.current),U.key!==void 0&&(ye=""+U.key),W.type&&W.type.defaultProps)var O=W.type.defaultProps;for(te in U)A.call(U,te)&&!M.hasOwnProperty(te)&&(ae[te]=U[te]===void 0&&O!==void 0?O[te]:U[te])}var te=arguments.length-2;if(te===1)ae.children=re;else if(1<te){O=Array(te);for(var ee=0;ee<te;ee++)O[ee]=arguments[ee+2];ae.children=O}return{$$typeof:r,type:W.type,key:ye,ref:ce,props:ae,_owner:P}},ht.createContext=function(W){return W={$$typeof:d,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},W.Provider={$$typeof:c,_context:W},W.Consumer=W},ht.createElement=$,ht.createFactory=function(W){var U=$.bind(null,W);return U.type=W,U},ht.createRef=function(){return{current:null}},ht.forwardRef=function(W){return{$$typeof:u,render:W}},ht.isValidElement=le,ht.lazy=function(W){return{$$typeof:v,_payload:{_status:-1,_result:W},_init:Q}},ht.memo=function(W,U){return{$$typeof:y,type:W,compare:U===void 0?null:U}},ht.startTransition=function(W){var U=ne.transition;ne.transition={};try{W()}finally{ne.transition=U}},ht.unstable_act=ue,ht.useCallback=function(W,U){return Y.current.useCallback(W,U)},ht.useContext=function(W){return Y.current.useContext(W)},ht.useDebugValue=function(){},ht.useDeferredValue=function(W){return Y.current.useDeferredValue(W)},ht.useEffect=function(W,U){return Y.current.useEffect(W,U)},ht.useId=function(){return Y.current.useId()},ht.useImperativeHandle=function(W,U,re){return Y.current.useImperativeHandle(W,U,re)},ht.useInsertionEffect=function(W,U){return Y.current.useInsertionEffect(W,U)},ht.useLayoutEffect=function(W,U){return Y.current.useLayoutEffect(W,U)},ht.useMemo=function(W,U){return Y.current.useMemo(W,U)},ht.useReducer=function(W,U,re){return Y.current.useReducer(W,U,re)},ht.useRef=function(W){return Y.current.useRef(W)},ht.useState=function(W){return Y.current.useState(W)},ht.useSyncExternalStore=function(W,U,re){return Y.current.useSyncExternalStore(W,U,re)},ht.useTransition=function(){return Y.current.useTransition()},ht.version="18.3.1",ht}var Ey;function bf(){return Ey||(Ey=1,qu.exports=m1()),qu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cy;function y1(){if(Cy)return Na;Cy=1;var r=bf(),e=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(u,p,y){var v,k={},E=null,C=null;y!==void 0&&(E=""+y),p.key!==void 0&&(E=""+p.key),p.ref!==void 0&&(C=p.ref);for(v in p)a.call(p,v)&&!c.hasOwnProperty(v)&&(k[v]=p[v]);if(u&&u.defaultProps)for(v in p=u.defaultProps,p)k[v]===void 0&&(k[v]=p[v]);return{$$typeof:e,type:u,key:E,ref:C,props:k,_owner:l.current}}return Na.Fragment=i,Na.jsx=d,Na.jsxs=d,Na}var Ty;function g1(){return Ty||(Ty=1,Vu.exports=y1()),Vu.exports}var n=g1(),V=bf();const nt=wx(V);var il={},Ku={exports:{}},kr={},Gu={exports:{}},Zu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ay;function v1(){return Ay||(Ay=1,(function(r){function e(ne,J){var ue=ne.length;ne.push(J);e:for(;0<ue;){var W=ue-1>>>1,U=ne[W];if(0<l(U,J))ne[W]=J,ne[ue]=U,ue=W;else break e}}function i(ne){return ne.length===0?null:ne[0]}function a(ne){if(ne.length===0)return null;var J=ne[0],ue=ne.pop();if(ue!==J){ne[0]=ue;e:for(var W=0,U=ne.length,re=U>>>1;W<re;){var ae=2*(W+1)-1,ye=ne[ae],ce=ae+1,P=ne[ce];if(0>l(ye,ue))ce<U&&0>l(P,ye)?(ne[W]=P,ne[ce]=ue,W=ce):(ne[W]=ye,ne[ae]=ue,W=ae);else if(ce<U&&0>l(P,ue))ne[W]=P,ne[ce]=ue,W=ce;else break e}}return J}function l(ne,J){var ue=ne.sortIndex-J.sortIndex;return ue!==0?ue:ne.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,u=d.now();r.unstable_now=function(){return d.now()-u}}var p=[],y=[],v=1,k=null,E=3,C=!1,N=!1,g=!1,j=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(ne){for(var J=i(y);J!==null;){if(J.callback===null)a(y);else if(J.startTime<=ne)a(y),J.sortIndex=J.expirationTime,e(p,J);else break;J=i(y)}}function _(ne){if(g=!1,w(ne),!N)if(i(p)!==null)N=!0,Q(A);else{var J=i(y);J!==null&&Y(_,J.startTime-ne)}}function A(ne,J){N=!1,g&&(g=!1,f($),$=-1),C=!0;var ue=E;try{for(w(J),k=i(p);k!==null&&(!(k.expirationTime>J)||ne&&!pe());){var W=k.callback;if(typeof W=="function"){k.callback=null,E=k.priorityLevel;var U=W(k.expirationTime<=J);J=r.unstable_now(),typeof U=="function"?k.callback=U:k===i(p)&&a(p),w(J)}else a(p);k=i(p)}if(k!==null)var re=!0;else{var ae=i(y);ae!==null&&Y(_,ae.startTime-J),re=!1}return re}finally{k=null,E=ue,C=!1}}var B=!1,M=null,$=-1,D=5,le=-1;function pe(){return!(r.unstable_now()-le<D)}function H(){if(M!==null){var ne=r.unstable_now();le=ne;var J=!0;try{J=M(!0,ne)}finally{J?q():(B=!1,M=null)}}else B=!1}var q;if(typeof b=="function")q=function(){b(H)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,Z=T.port2;T.port1.onmessage=H,q=function(){Z.postMessage(null)}}else q=function(){j(H,0)};function Q(ne){M=ne,B||(B=!0,q())}function Y(ne,J){$=j(function(){ne(r.unstable_now())},J)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ne){ne.callback=null},r.unstable_continueExecution=function(){N||C||(N=!0,Q(A))},r.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<ne?Math.floor(1e3/ne):5},r.unstable_getCurrentPriorityLevel=function(){return E},r.unstable_getFirstCallbackNode=function(){return i(p)},r.unstable_next=function(ne){switch(E){case 1:case 2:case 3:var J=3;break;default:J=E}var ue=E;E=J;try{return ne()}finally{E=ue}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ne,J){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var ue=E;E=ne;try{return J()}finally{E=ue}},r.unstable_scheduleCallback=function(ne,J,ue){var W=r.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?W+ue:W):ue=W,ne){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=ue+U,ne={id:v++,callback:J,priorityLevel:ne,startTime:ue,expirationTime:U,sortIndex:-1},ue>W?(ne.sortIndex=ue,e(y,ne),i(p)===null&&ne===i(y)&&(g?(f($),$=-1):g=!0,Y(_,ue-W))):(ne.sortIndex=U,e(p,ne),N||C||(N=!0,Q(A))),ne},r.unstable_shouldYield=pe,r.unstable_wrapCallback=function(ne){var J=E;return function(){var ue=E;E=J;try{return ne.apply(this,arguments)}finally{E=ue}}}})(Zu)),Zu}var Ry;function x1(){return Ry||(Ry=1,Gu.exports=v1()),Gu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Py;function w1(){if(Py)return kr;Py=1;var r=bf(),e=x1();function i(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,l={};function c(t,s){d(t,s),d(t+"Capture",s)}function d(t,s){for(l[t]=s,t=0;t<s.length;t++)a.add(s[t])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},k={};function E(t){return p.call(k,t)?!0:p.call(v,t)?!1:y.test(t)?k[t]=!0:(v[t]=!0,!1)}function C(t,s,o,h){if(o!==null&&o.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function N(t,s,o,h){if(s===null||typeof s>"u"||C(t,s,o,h))return!0;if(h)return!1;if(o!==null)switch(o.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function g(t,s,o,h,S,I,K){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=S,this.mustUseProperty=o,this.propertyName=t,this.type=s,this.sanitizeURL=I,this.removeEmptyString=K}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){j[t]=new g(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];j[s]=new g(s,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){j[t]=new g(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){j[t]=new g(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){j[t]=new g(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){j[t]=new g(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){j[t]=new g(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){j[t]=new g(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){j[t]=new g(t,5,!1,t.toLowerCase(),null,!1,!1)});var f=/[\-:]([a-z])/g;function b(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(f,b);j[s]=new g(s,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(f,b);j[s]=new g(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(f,b);j[s]=new g(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){j[t]=new g(t,1,!1,t.toLowerCase(),null,!1,!1)}),j.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){j[t]=new g(t,1,!1,t.toLowerCase(),null,!0,!0)});function w(t,s,o,h){var S=j.hasOwnProperty(s)?j[s]:null;(S!==null?S.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(N(s,o,S,h)&&(o=null),h||S===null?E(s)&&(o===null?t.removeAttribute(s):t.setAttribute(s,""+o)):S.mustUseProperty?t[S.propertyName]=o===null?S.type===3?!1:"":o:(s=S.attributeName,h=S.attributeNamespace,o===null?t.removeAttribute(s):(S=S.type,o=S===3||S===4&&o===!0?"":""+o,h?t.setAttributeNS(h,s,o):t.setAttribute(s,o))))}var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),B=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),le=Symbol.for("react.provider"),pe=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),Y=Symbol.for("react.offscreen"),ne=Symbol.iterator;function J(t){return t===null||typeof t!="object"?null:(t=ne&&t[ne]||t["@@iterator"],typeof t=="function"?t:null)}var ue=Object.assign,W;function U(t){if(W===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);W=s&&s[1]||""}return`
`+W+t}var re=!1;function ae(t,s){if(!t||re)return"";re=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(be){var h=be}Reflect.construct(t,[],s)}else{try{s.call()}catch(be){h=be}t.call(s.prototype)}else{try{throw Error()}catch(be){h=be}t()}}catch(be){if(be&&h&&typeof be.stack=="string"){for(var S=be.stack.split(`
`),I=h.stack.split(`
`),K=S.length-1,he=I.length-1;1<=K&&0<=he&&S[K]!==I[he];)he--;for(;1<=K&&0<=he;K--,he--)if(S[K]!==I[he]){if(K!==1||he!==1)do if(K--,he--,0>he||S[K]!==I[he]){var me=`
`+S[K].replace(" at new "," at ");return t.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",t.displayName)),me}while(1<=K&&0<=he);break}}}finally{re=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?U(t):""}function ye(t){switch(t.tag){case 5:return U(t.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return t=ae(t.type,!1),t;case 11:return t=ae(t.type.render,!1),t;case 1:return t=ae(t.type,!0),t;default:return""}}function ce(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case M:return"Fragment";case B:return"Portal";case D:return"Profiler";case $:return"StrictMode";case q:return"Suspense";case T:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case pe:return(t.displayName||"Context")+".Consumer";case le:return(t._context.displayName||"Context")+".Provider";case H:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Z:return s=t.displayName||null,s!==null?s:ce(t.type)||"Memo";case Q:s=t._payload,t=t._init;try{return ce(t(s))}catch{}}return null}function P(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(s);case 8:return s===$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function O(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function te(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ee(t){var s=te(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),h=""+t[s];if(!t.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var S=o.get,I=o.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return S.call(this)},set:function(K){h=""+K,I.call(this,K)}}),Object.defineProperty(t,s,{enumerable:o.enumerable}),{getValue:function(){return h},setValue:function(K){h=""+K},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function G(t){t._valueTracker||(t._valueTracker=ee(t))}function L(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var o=s.getValue(),h="";return t&&(h=te(t)?t.checked?"true":"false":t.value),t=h,t!==o?(s.setValue(t),!0):!1}function ie(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function z(t,s){var o=s.checked;return ue({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function fe(t,s){var o=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;o=O(s.value!=null?s.value:o),t._wrapperState={initialChecked:h,initialValue:o,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function F(t,s){s=s.checked,s!=null&&w(t,"checked",s,!1)}function x(t,s){F(t,s);var o=O(s.value),h=s.type;if(o!=null)h==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(h==="submit"||h==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?R(t,s.type,o):s.hasOwnProperty("defaultValue")&&R(t,s.type,O(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function m(t,s,o){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,o||s===t.value||(t.value=s),t.defaultValue=s}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function R(t,s,o){(s!=="number"||ie(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var X=Array.isArray;function oe(t,s,o,h){if(t=t.options,s){s={};for(var S=0;S<o.length;S++)s["$"+o[S]]=!0;for(o=0;o<t.length;o++)S=s.hasOwnProperty("$"+t[o].value),t[o].selected!==S&&(t[o].selected=S),S&&h&&(t[o].defaultSelected=!0)}else{for(o=""+O(o),s=null,S=0;S<t.length;S++){if(t[S].value===o){t[S].selected=!0,h&&(t[S].defaultSelected=!0);return}s!==null||t[S].disabled||(s=t[S])}s!==null&&(s.selected=!0)}}function se(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(i(91));return ue({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ge(t,s){var o=s.value;if(o==null){if(o=s.children,s=s.defaultValue,o!=null){if(s!=null)throw Error(i(92));if(X(o)){if(1<o.length)throw Error(i(93));o=o[0]}s=o}s==null&&(s=""),o=s}t._wrapperState={initialValue:O(o)}}function ke(t,s){var o=O(s.value),h=O(s.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),s.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),h!=null&&(t.defaultValue=""+h)}function Ce(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function Fe(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function He(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?Fe(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ye,Wt=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,o,h,S){MSApp.execUnsafeLocalFunction(function(){return t(s,o,h,S)})}:t})(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(Ye=Ye||document.createElement("div"),Ye.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Ye.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function ir(t,s){if(s){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=s;return}}t.textContent=s}var Jt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jn=["Webkit","ms","Moz","O"];Object.keys(Jt).forEach(function(t){jn.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Jt[s]=Jt[t]})});function Nt(t,s,o){return s==null||typeof s=="boolean"||s===""?"":o||typeof s!="number"||s===0||Jt.hasOwnProperty(t)&&Jt[t]?(""+s).trim():s+"px"}function Nn(t,s){t=t.style;for(var o in s)if(s.hasOwnProperty(o)){var h=o.indexOf("--")===0,S=Nt(o,s[o],h);o==="float"&&(o="cssFloat"),h?t.setProperty(o,S):t[o]=S}}var gs=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mr(t,s){if(s){if(gs[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(i(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(i(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(i(61))}if(s.style!=null&&typeof s.style!="object")throw Error(i(62))}}function Kn(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vs=null;function xs(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var un=null,Gr=null,de=null;function Ee(t){if(t=la(t)){if(typeof un!="function")throw Error(i(280));var s=t.stateNode;s&&(s=xo(s),un(t.stateNode,t.type,s))}}function _e(t){Gr?de?de.push(t):de=[t]:Gr=t}function Te(){if(Gr){var t=Gr,s=de;if(de=Gr=null,Ee(t),s)for(t=0;t<s.length;t++)Ee(s[t])}}function Le(t,s){return t(s)}function Oe(){}var De=!1;function Ze(t,s,o){if(De)return t(s,o);De=!0;try{return Le(t,s,o)}finally{De=!1,(Gr!==null||de!==null)&&(Oe(),Te())}}function Xe(t,s){var o=t.stateNode;if(o===null)return null;var h=xo(o);if(h===null)return null;o=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(t=t.type,h=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!h;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Je=!1;if(u)try{var Qe={};Object.defineProperty(Qe,"passive",{get:function(){Je=!0}}),window.addEventListener("test",Qe,Qe),window.removeEventListener("test",Qe,Qe)}catch{Je=!1}function st(t,s,o,h,S,I,K,he,me){var be=Array.prototype.slice.call(arguments,3);try{s.apply(o,be)}catch(Pe){this.onError(Pe)}}var pt=!1,xt=null,kt=!1,Rr=null,Zs={onError:function(t){pt=!0,xt=t}};function cc(t,s,o,h,S,I,K,he,me){pt=!1,xt=null,st.apply(Zs,arguments)}function uc(t,s,o,h,S,I,K,he,me){if(cc.apply(this,arguments),pt){if(pt){var be=xt;pt=!1,xt=null}else throw Error(i(198));kt||(kt=!0,Rr=be)}}function kn(t){var s=t,o=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(o=s.return),t=s.return;while(t)}return s.tag===3?o:null}function Ja(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function Hi(t){if(kn(t)!==t)throw Error(i(188))}function _w(t){var s=t.alternate;if(!s){if(s=kn(t),s===null)throw Error(i(188));return s!==t?null:t}for(var o=t,h=s;;){var S=o.return;if(S===null)break;var I=S.alternate;if(I===null){if(h=S.return,h!==null){o=h;continue}break}if(S.child===I.child){for(I=S.child;I;){if(I===o)return Hi(S),t;if(I===h)return Hi(S),s;I=I.sibling}throw Error(i(188))}if(o.return!==h.return)o=S,h=I;else{for(var K=!1,he=S.child;he;){if(he===o){K=!0,o=S,h=I;break}if(he===h){K=!0,h=S,o=I;break}he=he.sibling}if(!K){for(he=I.child;he;){if(he===o){K=!0,o=I,h=S;break}if(he===h){K=!0,h=I,o=S;break}he=he.sibling}if(!K)throw Error(i(189))}}if(o.alternate!==h)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?t:s}function Jf(t){return t=_w(t),t!==null?Yf(t):null}function Yf(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=Yf(t);if(s!==null)return s;t=t.sibling}return null}var Qf=e.unstable_scheduleCallback,ep=e.unstable_cancelCallback,Sw=e.unstable_shouldYield,Ew=e.unstable_requestPaint,Bt=e.unstable_now,Cw=e.unstable_getCurrentPriorityLevel,dc=e.unstable_ImmediatePriority,tp=e.unstable_UserBlockingPriority,Ya=e.unstable_NormalPriority,Tw=e.unstable_LowPriority,rp=e.unstable_IdlePriority,Qa=null,dn=null;function Aw(t){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(Qa,t,void 0,(t.current.flags&128)===128)}catch{}}var Zr=Math.clz32?Math.clz32:zw,Rw=Math.log,Pw=Math.LN2;function zw(t){return t>>>=0,t===0?32:31-(Rw(t)/Pw|0)|0}var eo=64,to=4194304;function Wi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ro(t,s){var o=t.pendingLanes;if(o===0)return 0;var h=0,S=t.suspendedLanes,I=t.pingedLanes,K=o&268435455;if(K!==0){var he=K&~S;he!==0?h=Wi(he):(I&=K,I!==0&&(h=Wi(I)))}else K=o&~S,K!==0?h=Wi(K):I!==0&&(h=Wi(I));if(h===0)return 0;if(s!==0&&s!==h&&(s&S)===0&&(S=h&-h,I=s&-s,S>=I||S===16&&(I&4194240)!==0))return s;if((h&4)!==0&&(h|=o&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=h;0<s;)o=31-Zr(s),S=1<<o,h|=t[o],s&=~S;return h}function Ow(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Iw(t,s){for(var o=t.suspendedLanes,h=t.pingedLanes,S=t.expirationTimes,I=t.pendingLanes;0<I;){var K=31-Zr(I),he=1<<K,me=S[K];me===-1?((he&o)===0||(he&h)!==0)&&(S[K]=Ow(he,s)):me<=s&&(t.expiredLanes|=he),I&=~he}}function hc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function np(){var t=eo;return eo<<=1,(eo&4194240)===0&&(eo=64),t}function fc(t){for(var s=[],o=0;31>o;o++)s.push(t);return s}function Vi(t,s,o){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-Zr(s),t[s]=o}function Fw(t,s){var o=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var h=t.eventTimes;for(t=t.expirationTimes;0<o;){var S=31-Zr(o),I=1<<S;s[S]=0,h[S]=-1,t[S]=-1,o&=~I}}function pc(t,s){var o=t.entangledLanes|=s;for(t=t.entanglements;o;){var h=31-Zr(o),S=1<<h;S&s|t[h]&s&&(t[h]|=s),o&=~S}}var gt=0;function sp(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var ip,mc,ap,op,lp,yc=!1,no=[],Gn=null,Zn=null,Xn=null,qi=new Map,Ki=new Map,Jn=[],Dw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cp(t,s){switch(t){case"focusin":case"focusout":Gn=null;break;case"dragenter":case"dragleave":Zn=null;break;case"mouseover":case"mouseout":Xn=null;break;case"pointerover":case"pointerout":qi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ki.delete(s.pointerId)}}function Gi(t,s,o,h,S,I){return t===null||t.nativeEvent!==I?(t={blockedOn:s,domEventName:o,eventSystemFlags:h,nativeEvent:I,targetContainers:[S]},s!==null&&(s=la(s),s!==null&&mc(s)),t):(t.eventSystemFlags|=h,s=t.targetContainers,S!==null&&s.indexOf(S)===-1&&s.push(S),t)}function Lw(t,s,o,h,S){switch(s){case"focusin":return Gn=Gi(Gn,t,s,o,h,S),!0;case"dragenter":return Zn=Gi(Zn,t,s,o,h,S),!0;case"mouseover":return Xn=Gi(Xn,t,s,o,h,S),!0;case"pointerover":var I=S.pointerId;return qi.set(I,Gi(qi.get(I)||null,t,s,o,h,S)),!0;case"gotpointercapture":return I=S.pointerId,Ki.set(I,Gi(Ki.get(I)||null,t,s,o,h,S)),!0}return!1}function up(t){var s=ws(t.target);if(s!==null){var o=kn(s);if(o!==null){if(s=o.tag,s===13){if(s=Ja(o),s!==null){t.blockedOn=s,lp(t.priority,function(){ap(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function so(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var o=vc(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var h=new o.constructor(o.type,o);vs=h,o.target.dispatchEvent(h),vs=null}else return s=la(o),s!==null&&mc(s),t.blockedOn=o,!1;s.shift()}return!0}function dp(t,s,o){so(t)&&o.delete(s)}function Bw(){yc=!1,Gn!==null&&so(Gn)&&(Gn=null),Zn!==null&&so(Zn)&&(Zn=null),Xn!==null&&so(Xn)&&(Xn=null),qi.forEach(dp),Ki.forEach(dp)}function Zi(t,s){t.blockedOn===s&&(t.blockedOn=null,yc||(yc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Bw)))}function Xi(t){function s(S){return Zi(S,t)}if(0<no.length){Zi(no[0],t);for(var o=1;o<no.length;o++){var h=no[o];h.blockedOn===t&&(h.blockedOn=null)}}for(Gn!==null&&Zi(Gn,t),Zn!==null&&Zi(Zn,t),Xn!==null&&Zi(Xn,t),qi.forEach(s),Ki.forEach(s),o=0;o<Jn.length;o++)h=Jn[o],h.blockedOn===t&&(h.blockedOn=null);for(;0<Jn.length&&(o=Jn[0],o.blockedOn===null);)up(o),o.blockedOn===null&&Jn.shift()}var Xs=_.ReactCurrentBatchConfig,io=!0;function Mw(t,s,o,h){var S=gt,I=Xs.transition;Xs.transition=null;try{gt=1,gc(t,s,o,h)}finally{gt=S,Xs.transition=I}}function Uw(t,s,o,h){var S=gt,I=Xs.transition;Xs.transition=null;try{gt=4,gc(t,s,o,h)}finally{gt=S,Xs.transition=I}}function gc(t,s,o,h){if(io){var S=vc(t,s,o,h);if(S===null)Ic(t,s,h,ao,o),cp(t,h);else if(Lw(S,t,s,o,h))h.stopPropagation();else if(cp(t,h),s&4&&-1<Dw.indexOf(t)){for(;S!==null;){var I=la(S);if(I!==null&&ip(I),I=vc(t,s,o,h),I===null&&Ic(t,s,h,ao,o),I===S)break;S=I}S!==null&&h.stopPropagation()}else Ic(t,s,h,null,o)}}var ao=null;function vc(t,s,o,h){if(ao=null,t=xs(h),t=ws(t),t!==null)if(s=kn(t),s===null)t=null;else if(o=s.tag,o===13){if(t=Ja(s),t!==null)return t;t=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return ao=t,null}function hp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cw()){case dc:return 1;case tp:return 4;case Ya:case Tw:return 16;case rp:return 536870912;default:return 16}default:return 16}}var Yn=null,xc=null,oo=null;function fp(){if(oo)return oo;var t,s=xc,o=s.length,h,S="value"in Yn?Yn.value:Yn.textContent,I=S.length;for(t=0;t<o&&s[t]===S[t];t++);var K=o-t;for(h=1;h<=K&&s[o-h]===S[I-h];h++);return oo=S.slice(t,1<h?1-h:void 0)}function lo(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function co(){return!0}function pp(){return!1}function Pr(t){function s(o,h,S,I,K){this._reactName=o,this._targetInst=S,this.type=h,this.nativeEvent=I,this.target=K,this.currentTarget=null;for(var he in t)t.hasOwnProperty(he)&&(o=t[he],this[he]=o?o(I):I[he]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?co:pp,this.isPropagationStopped=pp,this}return ue(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=co)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=co)},persist:function(){},isPersistent:co}),s}var Js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wc=Pr(Js),Ji=ue({},Js,{view:0,detail:0}),$w=Pr(Ji),bc,jc,Yi,uo=ue({},Ji,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Yi&&(Yi&&t.type==="mousemove"?(bc=t.screenX-Yi.screenX,jc=t.screenY-Yi.screenY):jc=bc=0,Yi=t),bc)},movementY:function(t){return"movementY"in t?t.movementY:jc}}),mp=Pr(uo),Hw=ue({},uo,{dataTransfer:0}),Ww=Pr(Hw),Vw=ue({},Ji,{relatedTarget:0}),Nc=Pr(Vw),qw=ue({},Js,{animationName:0,elapsedTime:0,pseudoElement:0}),Kw=Pr(qw),Gw=ue({},Js,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Zw=Pr(Gw),Xw=ue({},Js,{data:0}),yp=Pr(Xw),Jw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eb(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Qw[t])?!!s[t]:!1}function kc(){return eb}var tb=ue({},Ji,{key:function(t){if(t.key){var s=Jw[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=lo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Yw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kc,charCode:function(t){return t.type==="keypress"?lo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?lo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rb=Pr(tb),nb=ue({},uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gp=Pr(nb),sb=ue({},Ji,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kc}),ib=Pr(sb),ab=ue({},Js,{propertyName:0,elapsedTime:0,pseudoElement:0}),ob=Pr(ab),lb=ue({},uo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),cb=Pr(lb),ub=[9,13,27,32],_c=u&&"CompositionEvent"in window,Qi=null;u&&"documentMode"in document&&(Qi=document.documentMode);var db=u&&"TextEvent"in window&&!Qi,vp=u&&(!_c||Qi&&8<Qi&&11>=Qi),xp=" ",wp=!1;function bp(t,s){switch(t){case"keyup":return ub.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ys=!1;function hb(t,s){switch(t){case"compositionend":return jp(s);case"keypress":return s.which!==32?null:(wp=!0,xp);case"textInput":return t=s.data,t===xp&&wp?null:t;default:return null}}function fb(t,s){if(Ys)return t==="compositionend"||!_c&&bp(t,s)?(t=fp(),oo=xc=Yn=null,Ys=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return vp&&s.locale!=="ko"?null:s.data;default:return null}}var pb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Np(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!pb[t.type]:s==="textarea"}function kp(t,s,o,h){_e(h),s=yo(s,"onChange"),0<s.length&&(o=new wc("onChange","change",null,o,h),t.push({event:o,listeners:s}))}var ea=null,ta=null;function mb(t){$p(t,0)}function ho(t){var s=ni(t);if(L(s))return t}function yb(t,s){if(t==="change")return s}var _p=!1;if(u){var Sc;if(u){var Ec="oninput"in document;if(!Ec){var Sp=document.createElement("div");Sp.setAttribute("oninput","return;"),Ec=typeof Sp.oninput=="function"}Sc=Ec}else Sc=!1;_p=Sc&&(!document.documentMode||9<document.documentMode)}function Ep(){ea&&(ea.detachEvent("onpropertychange",Cp),ta=ea=null)}function Cp(t){if(t.propertyName==="value"&&ho(ta)){var s=[];kp(s,ta,t,xs(t)),Ze(mb,s)}}function gb(t,s,o){t==="focusin"?(Ep(),ea=s,ta=o,ea.attachEvent("onpropertychange",Cp)):t==="focusout"&&Ep()}function vb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ho(ta)}function xb(t,s){if(t==="click")return ho(s)}function wb(t,s){if(t==="input"||t==="change")return ho(s)}function bb(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Xr=typeof Object.is=="function"?Object.is:bb;function ra(t,s){if(Xr(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var o=Object.keys(t),h=Object.keys(s);if(o.length!==h.length)return!1;for(h=0;h<o.length;h++){var S=o[h];if(!p.call(s,S)||!Xr(t[S],s[S]))return!1}return!0}function Tp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ap(t,s){var o=Tp(t);t=0;for(var h;o;){if(o.nodeType===3){if(h=t+o.textContent.length,t<=s&&h>=s)return{node:o,offset:s-t};t=h}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Tp(o)}}function Rp(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Rp(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Pp(){for(var t=window,s=ie();s instanceof t.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)t=s.contentWindow;else break;s=ie(t.document)}return s}function Cc(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function jb(t){var s=Pp(),o=t.focusedElem,h=t.selectionRange;if(s!==o&&o&&o.ownerDocument&&Rp(o.ownerDocument.documentElement,o)){if(h!==null&&Cc(o)){if(s=h.start,t=h.end,t===void 0&&(t=s),"selectionStart"in o)o.selectionStart=s,o.selectionEnd=Math.min(t,o.value.length);else if(t=(s=o.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var S=o.textContent.length,I=Math.min(h.start,S);h=h.end===void 0?I:Math.min(h.end,S),!t.extend&&I>h&&(S=h,h=I,I=S),S=Ap(o,I);var K=Ap(o,h);S&&K&&(t.rangeCount!==1||t.anchorNode!==S.node||t.anchorOffset!==S.offset||t.focusNode!==K.node||t.focusOffset!==K.offset)&&(s=s.createRange(),s.setStart(S.node,S.offset),t.removeAllRanges(),I>h?(t.addRange(s),t.extend(K.node,K.offset)):(s.setEnd(K.node,K.offset),t.addRange(s)))}}for(s=[],t=o;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<s.length;o++)t=s[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Nb=u&&"documentMode"in document&&11>=document.documentMode,Qs=null,Tc=null,na=null,Ac=!1;function zp(t,s,o){var h=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Ac||Qs==null||Qs!==ie(h)||(h=Qs,"selectionStart"in h&&Cc(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),na&&ra(na,h)||(na=h,h=yo(Tc,"onSelect"),0<h.length&&(s=new wc("onSelect","select",null,s,o),t.push({event:s,listeners:h}),s.target=Qs)))}function fo(t,s){var o={};return o[t.toLowerCase()]=s.toLowerCase(),o["Webkit"+t]="webkit"+s,o["Moz"+t]="moz"+s,o}var ei={animationend:fo("Animation","AnimationEnd"),animationiteration:fo("Animation","AnimationIteration"),animationstart:fo("Animation","AnimationStart"),transitionend:fo("Transition","TransitionEnd")},Rc={},Op={};u&&(Op=document.createElement("div").style,"AnimationEvent"in window||(delete ei.animationend.animation,delete ei.animationiteration.animation,delete ei.animationstart.animation),"TransitionEvent"in window||delete ei.transitionend.transition);function po(t){if(Rc[t])return Rc[t];if(!ei[t])return t;var s=ei[t],o;for(o in s)if(s.hasOwnProperty(o)&&o in Op)return Rc[t]=s[o];return t}var Ip=po("animationend"),Fp=po("animationiteration"),Dp=po("animationstart"),Lp=po("transitionend"),Bp=new Map,Mp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qn(t,s){Bp.set(t,s),c(s,[t])}for(var Pc=0;Pc<Mp.length;Pc++){var zc=Mp[Pc],kb=zc.toLowerCase(),_b=zc[0].toUpperCase()+zc.slice(1);Qn(kb,"on"+_b)}Qn(Ip,"onAnimationEnd"),Qn(Fp,"onAnimationIteration"),Qn(Dp,"onAnimationStart"),Qn("dblclick","onDoubleClick"),Qn("focusin","onFocus"),Qn("focusout","onBlur"),Qn(Lp,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sb=new Set("cancel close invalid load scroll toggle".split(" ").concat(sa));function Up(t,s,o){var h=t.type||"unknown-event";t.currentTarget=o,uc(h,s,void 0,t),t.currentTarget=null}function $p(t,s){s=(s&4)!==0;for(var o=0;o<t.length;o++){var h=t[o],S=h.event;h=h.listeners;e:{var I=void 0;if(s)for(var K=h.length-1;0<=K;K--){var he=h[K],me=he.instance,be=he.currentTarget;if(he=he.listener,me!==I&&S.isPropagationStopped())break e;Up(S,he,be),I=me}else for(K=0;K<h.length;K++){if(he=h[K],me=he.instance,be=he.currentTarget,he=he.listener,me!==I&&S.isPropagationStopped())break e;Up(S,he,be),I=me}}}if(kt)throw t=Rr,kt=!1,Rr=null,t}function Et(t,s){var o=s[Uc];o===void 0&&(o=s[Uc]=new Set);var h=t+"__bubble";o.has(h)||(Hp(s,t,2,!1),o.add(h))}function Oc(t,s,o){var h=0;s&&(h|=4),Hp(o,t,h,s)}var mo="_reactListening"+Math.random().toString(36).slice(2);function ia(t){if(!t[mo]){t[mo]=!0,a.forEach(function(o){o!=="selectionchange"&&(Sb.has(o)||Oc(o,!1,t),Oc(o,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[mo]||(s[mo]=!0,Oc("selectionchange",!1,s))}}function Hp(t,s,o,h){switch(hp(s)){case 1:var S=Mw;break;case 4:S=Uw;break;default:S=gc}o=S.bind(null,s,o,t),S=void 0,!Je||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(S=!0),h?S!==void 0?t.addEventListener(s,o,{capture:!0,passive:S}):t.addEventListener(s,o,!0):S!==void 0?t.addEventListener(s,o,{passive:S}):t.addEventListener(s,o,!1)}function Ic(t,s,o,h,S){var I=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var K=h.tag;if(K===3||K===4){var he=h.stateNode.containerInfo;if(he===S||he.nodeType===8&&he.parentNode===S)break;if(K===4)for(K=h.return;K!==null;){var me=K.tag;if((me===3||me===4)&&(me=K.stateNode.containerInfo,me===S||me.nodeType===8&&me.parentNode===S))return;K=K.return}for(;he!==null;){if(K=ws(he),K===null)return;if(me=K.tag,me===5||me===6){h=I=K;continue e}he=he.parentNode}}h=h.return}Ze(function(){var be=I,Pe=xs(o),ze=[];e:{var Re=Bp.get(t);if(Re!==void 0){var Me=wc,Ve=t;switch(t){case"keypress":if(lo(o)===0)break e;case"keydown":case"keyup":Me=rb;break;case"focusin":Ve="focus",Me=Nc;break;case"focusout":Ve="blur",Me=Nc;break;case"beforeblur":case"afterblur":Me=Nc;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Me=mp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Me=Ww;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Me=ib;break;case Ip:case Fp:case Dp:Me=Kw;break;case Lp:Me=ob;break;case"scroll":Me=$w;break;case"wheel":Me=cb;break;case"copy":case"cut":case"paste":Me=Zw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Me=gp}var qe=(s&4)!==0,Mt=!qe&&t==="scroll",xe=qe?Re!==null?Re+"Capture":null:Re;qe=[];for(var ve=be,we;ve!==null;){we=ve;var Ie=we.stateNode;if(we.tag===5&&Ie!==null&&(we=Ie,xe!==null&&(Ie=Xe(ve,xe),Ie!=null&&qe.push(aa(ve,Ie,we)))),Mt)break;ve=ve.return}0<qe.length&&(Re=new Me(Re,Ve,null,o,Pe),ze.push({event:Re,listeners:qe}))}}if((s&7)===0){e:{if(Re=t==="mouseover"||t==="pointerover",Me=t==="mouseout"||t==="pointerout",Re&&o!==vs&&(Ve=o.relatedTarget||o.fromElement)&&(ws(Ve)||Ve[_n]))break e;if((Me||Re)&&(Re=Pe.window===Pe?Pe:(Re=Pe.ownerDocument)?Re.defaultView||Re.parentWindow:window,Me?(Ve=o.relatedTarget||o.toElement,Me=be,Ve=Ve?ws(Ve):null,Ve!==null&&(Mt=kn(Ve),Ve!==Mt||Ve.tag!==5&&Ve.tag!==6)&&(Ve=null)):(Me=null,Ve=be),Me!==Ve)){if(qe=mp,Ie="onMouseLeave",xe="onMouseEnter",ve="mouse",(t==="pointerout"||t==="pointerover")&&(qe=gp,Ie="onPointerLeave",xe="onPointerEnter",ve="pointer"),Mt=Me==null?Re:ni(Me),we=Ve==null?Re:ni(Ve),Re=new qe(Ie,ve+"leave",Me,o,Pe),Re.target=Mt,Re.relatedTarget=we,Ie=null,ws(Pe)===be&&(qe=new qe(xe,ve+"enter",Ve,o,Pe),qe.target=we,qe.relatedTarget=Mt,Ie=qe),Mt=Ie,Me&&Ve)t:{for(qe=Me,xe=Ve,ve=0,we=qe;we;we=ti(we))ve++;for(we=0,Ie=xe;Ie;Ie=ti(Ie))we++;for(;0<ve-we;)qe=ti(qe),ve--;for(;0<we-ve;)xe=ti(xe),we--;for(;ve--;){if(qe===xe||xe!==null&&qe===xe.alternate)break t;qe=ti(qe),xe=ti(xe)}qe=null}else qe=null;Me!==null&&Wp(ze,Re,Me,qe,!1),Ve!==null&&Mt!==null&&Wp(ze,Mt,Ve,qe,!0)}}e:{if(Re=be?ni(be):window,Me=Re.nodeName&&Re.nodeName.toLowerCase(),Me==="select"||Me==="input"&&Re.type==="file")var Ge=yb;else if(Np(Re))if(_p)Ge=wb;else{Ge=vb;var et=gb}else(Me=Re.nodeName)&&Me.toLowerCase()==="input"&&(Re.type==="checkbox"||Re.type==="radio")&&(Ge=xb);if(Ge&&(Ge=Ge(t,be))){kp(ze,Ge,o,Pe);break e}et&&et(t,Re,be),t==="focusout"&&(et=Re._wrapperState)&&et.controlled&&Re.type==="number"&&R(Re,"number",Re.value)}switch(et=be?ni(be):window,t){case"focusin":(Np(et)||et.contentEditable==="true")&&(Qs=et,Tc=be,na=null);break;case"focusout":na=Tc=Qs=null;break;case"mousedown":Ac=!0;break;case"contextmenu":case"mouseup":case"dragend":Ac=!1,zp(ze,o,Pe);break;case"selectionchange":if(Nb)break;case"keydown":case"keyup":zp(ze,o,Pe)}var tt;if(_c)e:{switch(t){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else Ys?bp(t,o)&&(rt="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(rt="onCompositionStart");rt&&(vp&&o.locale!=="ko"&&(Ys||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&Ys&&(tt=fp()):(Yn=Pe,xc="value"in Yn?Yn.value:Yn.textContent,Ys=!0)),et=yo(be,rt),0<et.length&&(rt=new yp(rt,t,null,o,Pe),ze.push({event:rt,listeners:et}),tt?rt.data=tt:(tt=jp(o),tt!==null&&(rt.data=tt)))),(tt=db?hb(t,o):fb(t,o))&&(be=yo(be,"onBeforeInput"),0<be.length&&(Pe=new yp("onBeforeInput","beforeinput",null,o,Pe),ze.push({event:Pe,listeners:be}),Pe.data=tt))}$p(ze,s)})}function aa(t,s,o){return{instance:t,listener:s,currentTarget:o}}function yo(t,s){for(var o=s+"Capture",h=[];t!==null;){var S=t,I=S.stateNode;S.tag===5&&I!==null&&(S=I,I=Xe(t,o),I!=null&&h.unshift(aa(t,I,S)),I=Xe(t,s),I!=null&&h.push(aa(t,I,S))),t=t.return}return h}function ti(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Wp(t,s,o,h,S){for(var I=s._reactName,K=[];o!==null&&o!==h;){var he=o,me=he.alternate,be=he.stateNode;if(me!==null&&me===h)break;he.tag===5&&be!==null&&(he=be,S?(me=Xe(o,I),me!=null&&K.unshift(aa(o,me,he))):S||(me=Xe(o,I),me!=null&&K.push(aa(o,me,he)))),o=o.return}K.length!==0&&t.push({event:s,listeners:K})}var Eb=/\r\n?/g,Cb=/\u0000|\uFFFD/g;function Vp(t){return(typeof t=="string"?t:""+t).replace(Eb,`
`).replace(Cb,"")}function go(t,s,o){if(s=Vp(s),Vp(t)!==s&&o)throw Error(i(425))}function vo(){}var Fc=null,Dc=null;function Lc(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Bc=typeof setTimeout=="function"?setTimeout:void 0,Tb=typeof clearTimeout=="function"?clearTimeout:void 0,qp=typeof Promise=="function"?Promise:void 0,Ab=typeof queueMicrotask=="function"?queueMicrotask:typeof qp<"u"?function(t){return qp.resolve(null).then(t).catch(Rb)}:Bc;function Rb(t){setTimeout(function(){throw t})}function Mc(t,s){var o=s,h=0;do{var S=o.nextSibling;if(t.removeChild(o),S&&S.nodeType===8)if(o=S.data,o==="/$"){if(h===0){t.removeChild(S),Xi(s);return}h--}else o!=="$"&&o!=="$?"&&o!=="$!"||h++;o=S}while(o);Xi(s)}function es(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function Kp(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return t;s--}else o==="/$"&&s++}t=t.previousSibling}return null}var ri=Math.random().toString(36).slice(2),hn="__reactFiber$"+ri,oa="__reactProps$"+ri,_n="__reactContainer$"+ri,Uc="__reactEvents$"+ri,Pb="__reactListeners$"+ri,zb="__reactHandles$"+ri;function ws(t){var s=t[hn];if(s)return s;for(var o=t.parentNode;o;){if(s=o[_n]||o[hn]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(t=Kp(t);t!==null;){if(o=t[hn])return o;t=Kp(t)}return s}t=o,o=t.parentNode}return null}function la(t){return t=t[hn]||t[_n],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ni(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(i(33))}function xo(t){return t[oa]||null}var $c=[],si=-1;function ts(t){return{current:t}}function Ct(t){0>si||(t.current=$c[si],$c[si]=null,si--)}function _t(t,s){si++,$c[si]=t.current,t.current=s}var rs={},ar=ts(rs),xr=ts(!1),bs=rs;function ii(t,s){var o=t.type.contextTypes;if(!o)return rs;var h=t.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var S={},I;for(I in o)S[I]=s[I];return h&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=S),S}function wr(t){return t=t.childContextTypes,t!=null}function wo(){Ct(xr),Ct(ar)}function Gp(t,s,o){if(ar.current!==rs)throw Error(i(168));_t(ar,s),_t(xr,o)}function Zp(t,s,o){var h=t.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return o;h=h.getChildContext();for(var S in h)if(!(S in s))throw Error(i(108,P(t)||"Unknown",S));return ue({},o,h)}function bo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||rs,bs=ar.current,_t(ar,t),_t(xr,xr.current),!0}function Xp(t,s,o){var h=t.stateNode;if(!h)throw Error(i(169));o?(t=Zp(t,s,bs),h.__reactInternalMemoizedMergedChildContext=t,Ct(xr),Ct(ar),_t(ar,t)):Ct(xr),_t(xr,o)}var Sn=null,jo=!1,Hc=!1;function Jp(t){Sn===null?Sn=[t]:Sn.push(t)}function Ob(t){jo=!0,Jp(t)}function ns(){if(!Hc&&Sn!==null){Hc=!0;var t=0,s=gt;try{var o=Sn;for(gt=1;t<o.length;t++){var h=o[t];do h=h(!0);while(h!==null)}Sn=null,jo=!1}catch(S){throw Sn!==null&&(Sn=Sn.slice(t+1)),Qf(dc,ns),S}finally{gt=s,Hc=!1}}return null}var ai=[],oi=0,No=null,ko=0,Lr=[],Br=0,js=null,En=1,Cn="";function Ns(t,s){ai[oi++]=ko,ai[oi++]=No,No=t,ko=s}function Yp(t,s,o){Lr[Br++]=En,Lr[Br++]=Cn,Lr[Br++]=js,js=t;var h=En;t=Cn;var S=32-Zr(h)-1;h&=~(1<<S),o+=1;var I=32-Zr(s)+S;if(30<I){var K=S-S%5;I=(h&(1<<K)-1).toString(32),h>>=K,S-=K,En=1<<32-Zr(s)+S|o<<S|h,Cn=I+t}else En=1<<I|o<<S|h,Cn=t}function Wc(t){t.return!==null&&(Ns(t,1),Yp(t,1,0))}function Vc(t){for(;t===No;)No=ai[--oi],ai[oi]=null,ko=ai[--oi],ai[oi]=null;for(;t===js;)js=Lr[--Br],Lr[Br]=null,Cn=Lr[--Br],Lr[Br]=null,En=Lr[--Br],Lr[Br]=null}var zr=null,Or=null,Tt=!1,Jr=null;function Qp(t,s){var o=Hr(5,null,null,0);o.elementType="DELETED",o.stateNode=s,o.return=t,s=t.deletions,s===null?(t.deletions=[o],t.flags|=16):s.push(o)}function em(t,s){switch(t.tag){case 5:var o=t.type;return s=s.nodeType!==1||o.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,zr=t,Or=es(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,zr=t,Or=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(o=js!==null?{id:En,overflow:Cn}:null,t.memoizedState={dehydrated:s,treeContext:o,retryLane:1073741824},o=Hr(18,null,null,0),o.stateNode=s,o.return=t,t.child=o,zr=t,Or=null,!0):!1;default:return!1}}function qc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Kc(t){if(Tt){var s=Or;if(s){var o=s;if(!em(t,s)){if(qc(t))throw Error(i(418));s=es(o.nextSibling);var h=zr;s&&em(t,s)?Qp(h,o):(t.flags=t.flags&-4097|2,Tt=!1,zr=t)}}else{if(qc(t))throw Error(i(418));t.flags=t.flags&-4097|2,Tt=!1,zr=t}}}function tm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zr=t}function _o(t){if(t!==zr)return!1;if(!Tt)return tm(t),Tt=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!Lc(t.type,t.memoizedProps)),s&&(s=Or)){if(qc(t))throw rm(),Error(i(418));for(;s;)Qp(t,s),s=es(s.nextSibling)}if(tm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(s===0){Or=es(t.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++}t=t.nextSibling}Or=null}}else Or=zr?es(t.stateNode.nextSibling):null;return!0}function rm(){for(var t=Or;t;)t=es(t.nextSibling)}function li(){Or=zr=null,Tt=!1}function Gc(t){Jr===null?Jr=[t]:Jr.push(t)}var Ib=_.ReactCurrentBatchConfig;function ca(t,s,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(i(309));var h=o.stateNode}if(!h)throw Error(i(147,t));var S=h,I=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===I?s.ref:(s=function(K){var he=S.refs;K===null?delete he[I]:he[I]=K},s._stringRef=I,s)}if(typeof t!="string")throw Error(i(284));if(!o._owner)throw Error(i(290,t))}return t}function So(t,s){throw t=Object.prototype.toString.call(s),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function nm(t){var s=t._init;return s(t._payload)}function sm(t){function s(xe,ve){if(t){var we=xe.deletions;we===null?(xe.deletions=[ve],xe.flags|=16):we.push(ve)}}function o(xe,ve){if(!t)return null;for(;ve!==null;)s(xe,ve),ve=ve.sibling;return null}function h(xe,ve){for(xe=new Map;ve!==null;)ve.key!==null?xe.set(ve.key,ve):xe.set(ve.index,ve),ve=ve.sibling;return xe}function S(xe,ve){return xe=ds(xe,ve),xe.index=0,xe.sibling=null,xe}function I(xe,ve,we){return xe.index=we,t?(we=xe.alternate,we!==null?(we=we.index,we<ve?(xe.flags|=2,ve):we):(xe.flags|=2,ve)):(xe.flags|=1048576,ve)}function K(xe){return t&&xe.alternate===null&&(xe.flags|=2),xe}function he(xe,ve,we,Ie){return ve===null||ve.tag!==6?(ve=Bu(we,xe.mode,Ie),ve.return=xe,ve):(ve=S(ve,we),ve.return=xe,ve)}function me(xe,ve,we,Ie){var Ge=we.type;return Ge===M?Pe(xe,ve,we.props.children,Ie,we.key):ve!==null&&(ve.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===Q&&nm(Ge)===ve.type)?(Ie=S(ve,we.props),Ie.ref=ca(xe,ve,we),Ie.return=xe,Ie):(Ie=Xo(we.type,we.key,we.props,null,xe.mode,Ie),Ie.ref=ca(xe,ve,we),Ie.return=xe,Ie)}function be(xe,ve,we,Ie){return ve===null||ve.tag!==4||ve.stateNode.containerInfo!==we.containerInfo||ve.stateNode.implementation!==we.implementation?(ve=Mu(we,xe.mode,Ie),ve.return=xe,ve):(ve=S(ve,we.children||[]),ve.return=xe,ve)}function Pe(xe,ve,we,Ie,Ge){return ve===null||ve.tag!==7?(ve=Rs(we,xe.mode,Ie,Ge),ve.return=xe,ve):(ve=S(ve,we),ve.return=xe,ve)}function ze(xe,ve,we){if(typeof ve=="string"&&ve!==""||typeof ve=="number")return ve=Bu(""+ve,xe.mode,we),ve.return=xe,ve;if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case A:return we=Xo(ve.type,ve.key,ve.props,null,xe.mode,we),we.ref=ca(xe,null,ve),we.return=xe,we;case B:return ve=Mu(ve,xe.mode,we),ve.return=xe,ve;case Q:var Ie=ve._init;return ze(xe,Ie(ve._payload),we)}if(X(ve)||J(ve))return ve=Rs(ve,xe.mode,we,null),ve.return=xe,ve;So(xe,ve)}return null}function Re(xe,ve,we,Ie){var Ge=ve!==null?ve.key:null;if(typeof we=="string"&&we!==""||typeof we=="number")return Ge!==null?null:he(xe,ve,""+we,Ie);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case A:return we.key===Ge?me(xe,ve,we,Ie):null;case B:return we.key===Ge?be(xe,ve,we,Ie):null;case Q:return Ge=we._init,Re(xe,ve,Ge(we._payload),Ie)}if(X(we)||J(we))return Ge!==null?null:Pe(xe,ve,we,Ie,null);So(xe,we)}return null}function Me(xe,ve,we,Ie,Ge){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return xe=xe.get(we)||null,he(ve,xe,""+Ie,Ge);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case A:return xe=xe.get(Ie.key===null?we:Ie.key)||null,me(ve,xe,Ie,Ge);case B:return xe=xe.get(Ie.key===null?we:Ie.key)||null,be(ve,xe,Ie,Ge);case Q:var et=Ie._init;return Me(xe,ve,we,et(Ie._payload),Ge)}if(X(Ie)||J(Ie))return xe=xe.get(we)||null,Pe(ve,xe,Ie,Ge,null);So(ve,Ie)}return null}function Ve(xe,ve,we,Ie){for(var Ge=null,et=null,tt=ve,rt=ve=0,er=null;tt!==null&&rt<we.length;rt++){tt.index>rt?(er=tt,tt=null):er=tt.sibling;var mt=Re(xe,tt,we[rt],Ie);if(mt===null){tt===null&&(tt=er);break}t&&tt&&mt.alternate===null&&s(xe,tt),ve=I(mt,ve,rt),et===null?Ge=mt:et.sibling=mt,et=mt,tt=er}if(rt===we.length)return o(xe,tt),Tt&&Ns(xe,rt),Ge;if(tt===null){for(;rt<we.length;rt++)tt=ze(xe,we[rt],Ie),tt!==null&&(ve=I(tt,ve,rt),et===null?Ge=tt:et.sibling=tt,et=tt);return Tt&&Ns(xe,rt),Ge}for(tt=h(xe,tt);rt<we.length;rt++)er=Me(tt,xe,rt,we[rt],Ie),er!==null&&(t&&er.alternate!==null&&tt.delete(er.key===null?rt:er.key),ve=I(er,ve,rt),et===null?Ge=er:et.sibling=er,et=er);return t&&tt.forEach(function(hs){return s(xe,hs)}),Tt&&Ns(xe,rt),Ge}function qe(xe,ve,we,Ie){var Ge=J(we);if(typeof Ge!="function")throw Error(i(150));if(we=Ge.call(we),we==null)throw Error(i(151));for(var et=Ge=null,tt=ve,rt=ve=0,er=null,mt=we.next();tt!==null&&!mt.done;rt++,mt=we.next()){tt.index>rt?(er=tt,tt=null):er=tt.sibling;var hs=Re(xe,tt,mt.value,Ie);if(hs===null){tt===null&&(tt=er);break}t&&tt&&hs.alternate===null&&s(xe,tt),ve=I(hs,ve,rt),et===null?Ge=hs:et.sibling=hs,et=hs,tt=er}if(mt.done)return o(xe,tt),Tt&&Ns(xe,rt),Ge;if(tt===null){for(;!mt.done;rt++,mt=we.next())mt=ze(xe,mt.value,Ie),mt!==null&&(ve=I(mt,ve,rt),et===null?Ge=mt:et.sibling=mt,et=mt);return Tt&&Ns(xe,rt),Ge}for(tt=h(xe,tt);!mt.done;rt++,mt=we.next())mt=Me(tt,xe,rt,mt.value,Ie),mt!==null&&(t&&mt.alternate!==null&&tt.delete(mt.key===null?rt:mt.key),ve=I(mt,ve,rt),et===null?Ge=mt:et.sibling=mt,et=mt);return t&&tt.forEach(function(p1){return s(xe,p1)}),Tt&&Ns(xe,rt),Ge}function Mt(xe,ve,we,Ie){if(typeof we=="object"&&we!==null&&we.type===M&&we.key===null&&(we=we.props.children),typeof we=="object"&&we!==null){switch(we.$$typeof){case A:e:{for(var Ge=we.key,et=ve;et!==null;){if(et.key===Ge){if(Ge=we.type,Ge===M){if(et.tag===7){o(xe,et.sibling),ve=S(et,we.props.children),ve.return=xe,xe=ve;break e}}else if(et.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===Q&&nm(Ge)===et.type){o(xe,et.sibling),ve=S(et,we.props),ve.ref=ca(xe,et,we),ve.return=xe,xe=ve;break e}o(xe,et);break}else s(xe,et);et=et.sibling}we.type===M?(ve=Rs(we.props.children,xe.mode,Ie,we.key),ve.return=xe,xe=ve):(Ie=Xo(we.type,we.key,we.props,null,xe.mode,Ie),Ie.ref=ca(xe,ve,we),Ie.return=xe,xe=Ie)}return K(xe);case B:e:{for(et=we.key;ve!==null;){if(ve.key===et)if(ve.tag===4&&ve.stateNode.containerInfo===we.containerInfo&&ve.stateNode.implementation===we.implementation){o(xe,ve.sibling),ve=S(ve,we.children||[]),ve.return=xe,xe=ve;break e}else{o(xe,ve);break}else s(xe,ve);ve=ve.sibling}ve=Mu(we,xe.mode,Ie),ve.return=xe,xe=ve}return K(xe);case Q:return et=we._init,Mt(xe,ve,et(we._payload),Ie)}if(X(we))return Ve(xe,ve,we,Ie);if(J(we))return qe(xe,ve,we,Ie);So(xe,we)}return typeof we=="string"&&we!==""||typeof we=="number"?(we=""+we,ve!==null&&ve.tag===6?(o(xe,ve.sibling),ve=S(ve,we),ve.return=xe,xe=ve):(o(xe,ve),ve=Bu(we,xe.mode,Ie),ve.return=xe,xe=ve),K(xe)):o(xe,ve)}return Mt}var ci=sm(!0),im=sm(!1),Eo=ts(null),Co=null,ui=null,Zc=null;function Xc(){Zc=ui=Co=null}function Jc(t){var s=Eo.current;Ct(Eo),t._currentValue=s}function Yc(t,s,o){for(;t!==null;){var h=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),t===o)break;t=t.return}}function di(t,s){Co=t,Zc=ui=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&s)!==0&&(br=!0),t.firstContext=null)}function Mr(t){var s=t._currentValue;if(Zc!==t)if(t={context:t,memoizedValue:s,next:null},ui===null){if(Co===null)throw Error(i(308));ui=t,Co.dependencies={lanes:0,firstContext:t}}else ui=ui.next=t;return s}var ks=null;function Qc(t){ks===null?ks=[t]:ks.push(t)}function am(t,s,o,h){var S=s.interleaved;return S===null?(o.next=o,Qc(s)):(o.next=S.next,S.next=o),s.interleaved=o,Tn(t,h)}function Tn(t,s){t.lanes|=s;var o=t.alternate;for(o!==null&&(o.lanes|=s),o=t,t=t.return;t!==null;)t.childLanes|=s,o=t.alternate,o!==null&&(o.childLanes|=s),o=t,t=t.return;return o.tag===3?o.stateNode:null}var ss=!1;function eu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function om(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function An(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function is(t,s,o){var h=t.updateQueue;if(h===null)return null;if(h=h.shared,(ft&2)!==0){var S=h.pending;return S===null?s.next=s:(s.next=S.next,S.next=s),h.pending=s,Tn(t,o)}return S=h.interleaved,S===null?(s.next=s,Qc(h)):(s.next=S.next,S.next=s),h.interleaved=s,Tn(t,o)}function To(t,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194240)!==0)){var h=s.lanes;h&=t.pendingLanes,o|=h,s.lanes=o,pc(t,o)}}function lm(t,s){var o=t.updateQueue,h=t.alternate;if(h!==null&&(h=h.updateQueue,o===h)){var S=null,I=null;if(o=o.firstBaseUpdate,o!==null){do{var K={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};I===null?S=I=K:I=I.next=K,o=o.next}while(o!==null);I===null?S=I=s:I=I.next=s}else S=I=s;o={baseState:h.baseState,firstBaseUpdate:S,lastBaseUpdate:I,shared:h.shared,effects:h.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=s:t.next=s,o.lastBaseUpdate=s}function Ao(t,s,o,h){var S=t.updateQueue;ss=!1;var I=S.firstBaseUpdate,K=S.lastBaseUpdate,he=S.shared.pending;if(he!==null){S.shared.pending=null;var me=he,be=me.next;me.next=null,K===null?I=be:K.next=be,K=me;var Pe=t.alternate;Pe!==null&&(Pe=Pe.updateQueue,he=Pe.lastBaseUpdate,he!==K&&(he===null?Pe.firstBaseUpdate=be:he.next=be,Pe.lastBaseUpdate=me))}if(I!==null){var ze=S.baseState;K=0,Pe=be=me=null,he=I;do{var Re=he.lane,Me=he.eventTime;if((h&Re)===Re){Pe!==null&&(Pe=Pe.next={eventTime:Me,lane:0,tag:he.tag,payload:he.payload,callback:he.callback,next:null});e:{var Ve=t,qe=he;switch(Re=s,Me=o,qe.tag){case 1:if(Ve=qe.payload,typeof Ve=="function"){ze=Ve.call(Me,ze,Re);break e}ze=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=qe.payload,Re=typeof Ve=="function"?Ve.call(Me,ze,Re):Ve,Re==null)break e;ze=ue({},ze,Re);break e;case 2:ss=!0}}he.callback!==null&&he.lane!==0&&(t.flags|=64,Re=S.effects,Re===null?S.effects=[he]:Re.push(he))}else Me={eventTime:Me,lane:Re,tag:he.tag,payload:he.payload,callback:he.callback,next:null},Pe===null?(be=Pe=Me,me=ze):Pe=Pe.next=Me,K|=Re;if(he=he.next,he===null){if(he=S.shared.pending,he===null)break;Re=he,he=Re.next,Re.next=null,S.lastBaseUpdate=Re,S.shared.pending=null}}while(!0);if(Pe===null&&(me=ze),S.baseState=me,S.firstBaseUpdate=be,S.lastBaseUpdate=Pe,s=S.shared.interleaved,s!==null){S=s;do K|=S.lane,S=S.next;while(S!==s)}else I===null&&(S.shared.lanes=0);Es|=K,t.lanes=K,t.memoizedState=ze}}function cm(t,s,o){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var h=t[s],S=h.callback;if(S!==null){if(h.callback=null,h=o,typeof S!="function")throw Error(i(191,S));S.call(h)}}}var ua={},fn=ts(ua),da=ts(ua),ha=ts(ua);function _s(t){if(t===ua)throw Error(i(174));return t}function tu(t,s){switch(_t(ha,s),_t(da,t),_t(fn,ua),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:He(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=He(s,t)}Ct(fn),_t(fn,s)}function hi(){Ct(fn),Ct(da),Ct(ha)}function um(t){_s(ha.current);var s=_s(fn.current),o=He(s,t.type);s!==o&&(_t(da,t),_t(fn,o))}function ru(t){da.current===t&&(Ct(fn),Ct(da))}var Rt=ts(0);function Ro(t){for(var s=t;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var nu=[];function su(){for(var t=0;t<nu.length;t++)nu[t]._workInProgressVersionPrimary=null;nu.length=0}var Po=_.ReactCurrentDispatcher,iu=_.ReactCurrentBatchConfig,Ss=0,Pt=null,Kt=null,Yt=null,zo=!1,fa=!1,pa=0,Fb=0;function or(){throw Error(i(321))}function au(t,s){if(s===null)return!1;for(var o=0;o<s.length&&o<t.length;o++)if(!Xr(t[o],s[o]))return!1;return!0}function ou(t,s,o,h,S,I){if(Ss=I,Pt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Po.current=t===null||t.memoizedState===null?Mb:Ub,t=o(h,S),fa){I=0;do{if(fa=!1,pa=0,25<=I)throw Error(i(301));I+=1,Yt=Kt=null,s.updateQueue=null,Po.current=$b,t=o(h,S)}while(fa)}if(Po.current=Fo,s=Kt!==null&&Kt.next!==null,Ss=0,Yt=Kt=Pt=null,zo=!1,s)throw Error(i(300));return t}function lu(){var t=pa!==0;return pa=0,t}function pn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?Pt.memoizedState=Yt=t:Yt=Yt.next=t,Yt}function Ur(){if(Kt===null){var t=Pt.alternate;t=t!==null?t.memoizedState:null}else t=Kt.next;var s=Yt===null?Pt.memoizedState:Yt.next;if(s!==null)Yt=s,Kt=t;else{if(t===null)throw Error(i(310));Kt=t,t={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},Yt===null?Pt.memoizedState=Yt=t:Yt=Yt.next=t}return Yt}function ma(t,s){return typeof s=="function"?s(t):s}function cu(t){var s=Ur(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=t;var h=Kt,S=h.baseQueue,I=o.pending;if(I!==null){if(S!==null){var K=S.next;S.next=I.next,I.next=K}h.baseQueue=S=I,o.pending=null}if(S!==null){I=S.next,h=h.baseState;var he=K=null,me=null,be=I;do{var Pe=be.lane;if((Ss&Pe)===Pe)me!==null&&(me=me.next={lane:0,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null}),h=be.hasEagerState?be.eagerState:t(h,be.action);else{var ze={lane:Pe,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null};me===null?(he=me=ze,K=h):me=me.next=ze,Pt.lanes|=Pe,Es|=Pe}be=be.next}while(be!==null&&be!==I);me===null?K=h:me.next=he,Xr(h,s.memoizedState)||(br=!0),s.memoizedState=h,s.baseState=K,s.baseQueue=me,o.lastRenderedState=h}if(t=o.interleaved,t!==null){S=t;do I=S.lane,Pt.lanes|=I,Es|=I,S=S.next;while(S!==t)}else S===null&&(o.lanes=0);return[s.memoizedState,o.dispatch]}function uu(t){var s=Ur(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=t;var h=o.dispatch,S=o.pending,I=s.memoizedState;if(S!==null){o.pending=null;var K=S=S.next;do I=t(I,K.action),K=K.next;while(K!==S);Xr(I,s.memoizedState)||(br=!0),s.memoizedState=I,s.baseQueue===null&&(s.baseState=I),o.lastRenderedState=I}return[I,h]}function dm(){}function hm(t,s){var o=Pt,h=Ur(),S=s(),I=!Xr(h.memoizedState,S);if(I&&(h.memoizedState=S,br=!0),h=h.queue,du(mm.bind(null,o,h,t),[t]),h.getSnapshot!==s||I||Yt!==null&&Yt.memoizedState.tag&1){if(o.flags|=2048,ya(9,pm.bind(null,o,h,S,s),void 0,null),Qt===null)throw Error(i(349));(Ss&30)!==0||fm(o,s,S)}return S}function fm(t,s,o){t.flags|=16384,t={getSnapshot:s,value:o},s=Pt.updateQueue,s===null?(s={lastEffect:null,stores:null},Pt.updateQueue=s,s.stores=[t]):(o=s.stores,o===null?s.stores=[t]:o.push(t))}function pm(t,s,o,h){s.value=o,s.getSnapshot=h,ym(s)&&gm(t)}function mm(t,s,o){return o(function(){ym(s)&&gm(t)})}function ym(t){var s=t.getSnapshot;t=t.value;try{var o=s();return!Xr(t,o)}catch{return!0}}function gm(t){var s=Tn(t,1);s!==null&&tn(s,t,1,-1)}function vm(t){var s=pn();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:t},s.queue=t,t=t.dispatch=Bb.bind(null,Pt,t),[s.memoizedState,t]}function ya(t,s,o,h){return t={tag:t,create:s,destroy:o,deps:h,next:null},s=Pt.updateQueue,s===null?(s={lastEffect:null,stores:null},Pt.updateQueue=s,s.lastEffect=t.next=t):(o=s.lastEffect,o===null?s.lastEffect=t.next=t:(h=o.next,o.next=t,t.next=h,s.lastEffect=t)),t}function xm(){return Ur().memoizedState}function Oo(t,s,o,h){var S=pn();Pt.flags|=t,S.memoizedState=ya(1|s,o,void 0,h===void 0?null:h)}function Io(t,s,o,h){var S=Ur();h=h===void 0?null:h;var I=void 0;if(Kt!==null){var K=Kt.memoizedState;if(I=K.destroy,h!==null&&au(h,K.deps)){S.memoizedState=ya(s,o,I,h);return}}Pt.flags|=t,S.memoizedState=ya(1|s,o,I,h)}function wm(t,s){return Oo(8390656,8,t,s)}function du(t,s){return Io(2048,8,t,s)}function bm(t,s){return Io(4,2,t,s)}function jm(t,s){return Io(4,4,t,s)}function Nm(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function km(t,s,o){return o=o!=null?o.concat([t]):null,Io(4,4,Nm.bind(null,s,t),o)}function hu(){}function _m(t,s){var o=Ur();s=s===void 0?null:s;var h=o.memoizedState;return h!==null&&s!==null&&au(s,h[1])?h[0]:(o.memoizedState=[t,s],t)}function Sm(t,s){var o=Ur();s=s===void 0?null:s;var h=o.memoizedState;return h!==null&&s!==null&&au(s,h[1])?h[0]:(t=t(),o.memoizedState=[t,s],t)}function Em(t,s,o){return(Ss&21)===0?(t.baseState&&(t.baseState=!1,br=!0),t.memoizedState=o):(Xr(o,s)||(o=np(),Pt.lanes|=o,Es|=o,t.baseState=!0),s)}function Db(t,s){var o=gt;gt=o!==0&&4>o?o:4,t(!0);var h=iu.transition;iu.transition={};try{t(!1),s()}finally{gt=o,iu.transition=h}}function Cm(){return Ur().memoizedState}function Lb(t,s,o){var h=cs(t);if(o={lane:h,action:o,hasEagerState:!1,eagerState:null,next:null},Tm(t))Am(s,o);else if(o=am(t,s,o,h),o!==null){var S=gr();tn(o,t,h,S),Rm(o,s,h)}}function Bb(t,s,o){var h=cs(t),S={lane:h,action:o,hasEagerState:!1,eagerState:null,next:null};if(Tm(t))Am(s,S);else{var I=t.alternate;if(t.lanes===0&&(I===null||I.lanes===0)&&(I=s.lastRenderedReducer,I!==null))try{var K=s.lastRenderedState,he=I(K,o);if(S.hasEagerState=!0,S.eagerState=he,Xr(he,K)){var me=s.interleaved;me===null?(S.next=S,Qc(s)):(S.next=me.next,me.next=S),s.interleaved=S;return}}catch{}finally{}o=am(t,s,S,h),o!==null&&(S=gr(),tn(o,t,h,S),Rm(o,s,h))}}function Tm(t){var s=t.alternate;return t===Pt||s!==null&&s===Pt}function Am(t,s){fa=zo=!0;var o=t.pending;o===null?s.next=s:(s.next=o.next,o.next=s),t.pending=s}function Rm(t,s,o){if((o&4194240)!==0){var h=s.lanes;h&=t.pendingLanes,o|=h,s.lanes=o,pc(t,o)}}var Fo={readContext:Mr,useCallback:or,useContext:or,useEffect:or,useImperativeHandle:or,useInsertionEffect:or,useLayoutEffect:or,useMemo:or,useReducer:or,useRef:or,useState:or,useDebugValue:or,useDeferredValue:or,useTransition:or,useMutableSource:or,useSyncExternalStore:or,useId:or,unstable_isNewReconciler:!1},Mb={readContext:Mr,useCallback:function(t,s){return pn().memoizedState=[t,s===void 0?null:s],t},useContext:Mr,useEffect:wm,useImperativeHandle:function(t,s,o){return o=o!=null?o.concat([t]):null,Oo(4194308,4,Nm.bind(null,s,t),o)},useLayoutEffect:function(t,s){return Oo(4194308,4,t,s)},useInsertionEffect:function(t,s){return Oo(4,2,t,s)},useMemo:function(t,s){var o=pn();return s=s===void 0?null:s,t=t(),o.memoizedState=[t,s],t},useReducer:function(t,s,o){var h=pn();return s=o!==void 0?o(s):s,h.memoizedState=h.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},h.queue=t,t=t.dispatch=Lb.bind(null,Pt,t),[h.memoizedState,t]},useRef:function(t){var s=pn();return t={current:t},s.memoizedState=t},useState:vm,useDebugValue:hu,useDeferredValue:function(t){return pn().memoizedState=t},useTransition:function(){var t=vm(!1),s=t[0];return t=Db.bind(null,t[1]),pn().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,o){var h=Pt,S=pn();if(Tt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),Qt===null)throw Error(i(349));(Ss&30)!==0||fm(h,s,o)}S.memoizedState=o;var I={value:o,getSnapshot:s};return S.queue=I,wm(mm.bind(null,h,I,t),[t]),h.flags|=2048,ya(9,pm.bind(null,h,I,o,s),void 0,null),o},useId:function(){var t=pn(),s=Qt.identifierPrefix;if(Tt){var o=Cn,h=En;o=(h&~(1<<32-Zr(h)-1)).toString(32)+o,s=":"+s+"R"+o,o=pa++,0<o&&(s+="H"+o.toString(32)),s+=":"}else o=Fb++,s=":"+s+"r"+o.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},Ub={readContext:Mr,useCallback:_m,useContext:Mr,useEffect:du,useImperativeHandle:km,useInsertionEffect:bm,useLayoutEffect:jm,useMemo:Sm,useReducer:cu,useRef:xm,useState:function(){return cu(ma)},useDebugValue:hu,useDeferredValue:function(t){var s=Ur();return Em(s,Kt.memoizedState,t)},useTransition:function(){var t=cu(ma)[0],s=Ur().memoizedState;return[t,s]},useMutableSource:dm,useSyncExternalStore:hm,useId:Cm,unstable_isNewReconciler:!1},$b={readContext:Mr,useCallback:_m,useContext:Mr,useEffect:du,useImperativeHandle:km,useInsertionEffect:bm,useLayoutEffect:jm,useMemo:Sm,useReducer:uu,useRef:xm,useState:function(){return uu(ma)},useDebugValue:hu,useDeferredValue:function(t){var s=Ur();return Kt===null?s.memoizedState=t:Em(s,Kt.memoizedState,t)},useTransition:function(){var t=uu(ma)[0],s=Ur().memoizedState;return[t,s]},useMutableSource:dm,useSyncExternalStore:hm,useId:Cm,unstable_isNewReconciler:!1};function Yr(t,s){if(t&&t.defaultProps){s=ue({},s),t=t.defaultProps;for(var o in t)s[o]===void 0&&(s[o]=t[o]);return s}return s}function fu(t,s,o,h){s=t.memoizedState,o=o(h,s),o=o==null?s:ue({},s,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var Do={isMounted:function(t){return(t=t._reactInternals)?kn(t)===t:!1},enqueueSetState:function(t,s,o){t=t._reactInternals;var h=gr(),S=cs(t),I=An(h,S);I.payload=s,o!=null&&(I.callback=o),s=is(t,I,S),s!==null&&(tn(s,t,S,h),To(s,t,S))},enqueueReplaceState:function(t,s,o){t=t._reactInternals;var h=gr(),S=cs(t),I=An(h,S);I.tag=1,I.payload=s,o!=null&&(I.callback=o),s=is(t,I,S),s!==null&&(tn(s,t,S,h),To(s,t,S))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var o=gr(),h=cs(t),S=An(o,h);S.tag=2,s!=null&&(S.callback=s),s=is(t,S,h),s!==null&&(tn(s,t,h,o),To(s,t,h))}};function Pm(t,s,o,h,S,I,K){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(h,I,K):s.prototype&&s.prototype.isPureReactComponent?!ra(o,h)||!ra(S,I):!0}function zm(t,s,o){var h=!1,S=rs,I=s.contextType;return typeof I=="object"&&I!==null?I=Mr(I):(S=wr(s)?bs:ar.current,h=s.contextTypes,I=(h=h!=null)?ii(t,S):rs),s=new s(o,I),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Do,t.stateNode=s,s._reactInternals=t,h&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=S,t.__reactInternalMemoizedMaskedChildContext=I),s}function Om(t,s,o,h){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,h),s.state!==t&&Do.enqueueReplaceState(s,s.state,null)}function pu(t,s,o,h){var S=t.stateNode;S.props=o,S.state=t.memoizedState,S.refs={},eu(t);var I=s.contextType;typeof I=="object"&&I!==null?S.context=Mr(I):(I=wr(s)?bs:ar.current,S.context=ii(t,I)),S.state=t.memoizedState,I=s.getDerivedStateFromProps,typeof I=="function"&&(fu(t,s,I,o),S.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(s=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),s!==S.state&&Do.enqueueReplaceState(S,S.state,null),Ao(t,o,S,h),S.state=t.memoizedState),typeof S.componentDidMount=="function"&&(t.flags|=4194308)}function fi(t,s){try{var o="",h=s;do o+=ye(h),h=h.return;while(h);var S=o}catch(I){S=`
Error generating stack: `+I.message+`
`+I.stack}return{value:t,source:s,stack:S,digest:null}}function mu(t,s,o){return{value:t,source:null,stack:o??null,digest:s??null}}function yu(t,s){try{console.error(s.value)}catch(o){setTimeout(function(){throw o})}}var Hb=typeof WeakMap=="function"?WeakMap:Map;function Im(t,s,o){o=An(-1,o),o.tag=3,o.payload={element:null};var h=s.value;return o.callback=function(){Wo||(Wo=!0,Ru=h),yu(t,s)},o}function Fm(t,s,o){o=An(-1,o),o.tag=3;var h=t.type.getDerivedStateFromError;if(typeof h=="function"){var S=s.value;o.payload=function(){return h(S)},o.callback=function(){yu(t,s)}}var I=t.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(o.callback=function(){yu(t,s),typeof h!="function"&&(os===null?os=new Set([this]):os.add(this));var K=s.stack;this.componentDidCatch(s.value,{componentStack:K!==null?K:""})}),o}function Dm(t,s,o){var h=t.pingCache;if(h===null){h=t.pingCache=new Hb;var S=new Set;h.set(s,S)}else S=h.get(s),S===void 0&&(S=new Set,h.set(s,S));S.has(o)||(S.add(o),t=n1.bind(null,t,s,o),s.then(t,t))}function Lm(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function Bm(t,s,o,h,S){return(t.mode&1)===0?(t===s?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(s=An(-1,1),s.tag=2,is(o,s,1))),o.lanes|=1),t):(t.flags|=65536,t.lanes=S,t)}var Wb=_.ReactCurrentOwner,br=!1;function yr(t,s,o,h){s.child=t===null?im(s,null,o,h):ci(s,t.child,o,h)}function Mm(t,s,o,h,S){o=o.render;var I=s.ref;return di(s,S),h=ou(t,s,o,h,I,S),o=lu(),t!==null&&!br?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~S,Rn(t,s,S)):(Tt&&o&&Wc(s),s.flags|=1,yr(t,s,h,S),s.child)}function Um(t,s,o,h,S){if(t===null){var I=o.type;return typeof I=="function"&&!Lu(I)&&I.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(s.tag=15,s.type=I,$m(t,s,I,h,S)):(t=Xo(o.type,null,h,s,s.mode,S),t.ref=s.ref,t.return=s,s.child=t)}if(I=t.child,(t.lanes&S)===0){var K=I.memoizedProps;if(o=o.compare,o=o!==null?o:ra,o(K,h)&&t.ref===s.ref)return Rn(t,s,S)}return s.flags|=1,t=ds(I,h),t.ref=s.ref,t.return=s,s.child=t}function $m(t,s,o,h,S){if(t!==null){var I=t.memoizedProps;if(ra(I,h)&&t.ref===s.ref)if(br=!1,s.pendingProps=h=I,(t.lanes&S)!==0)(t.flags&131072)!==0&&(br=!0);else return s.lanes=t.lanes,Rn(t,s,S)}return gu(t,s,o,h,S)}function Hm(t,s,o){var h=s.pendingProps,S=h.children,I=t!==null?t.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},_t(mi,Ir),Ir|=o;else{if((o&1073741824)===0)return t=I!==null?I.baseLanes|o:o,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,_t(mi,Ir),Ir|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=I!==null?I.baseLanes:o,_t(mi,Ir),Ir|=h}else I!==null?(h=I.baseLanes|o,s.memoizedState=null):h=o,_t(mi,Ir),Ir|=h;return yr(t,s,S,o),s.child}function Wm(t,s){var o=s.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(s.flags|=512,s.flags|=2097152)}function gu(t,s,o,h,S){var I=wr(o)?bs:ar.current;return I=ii(s,I),di(s,S),o=ou(t,s,o,h,I,S),h=lu(),t!==null&&!br?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~S,Rn(t,s,S)):(Tt&&h&&Wc(s),s.flags|=1,yr(t,s,o,S),s.child)}function Vm(t,s,o,h,S){if(wr(o)){var I=!0;bo(s)}else I=!1;if(di(s,S),s.stateNode===null)Bo(t,s),zm(s,o,h),pu(s,o,h,S),h=!0;else if(t===null){var K=s.stateNode,he=s.memoizedProps;K.props=he;var me=K.context,be=o.contextType;typeof be=="object"&&be!==null?be=Mr(be):(be=wr(o)?bs:ar.current,be=ii(s,be));var Pe=o.getDerivedStateFromProps,ze=typeof Pe=="function"||typeof K.getSnapshotBeforeUpdate=="function";ze||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(he!==h||me!==be)&&Om(s,K,h,be),ss=!1;var Re=s.memoizedState;K.state=Re,Ao(s,h,K,S),me=s.memoizedState,he!==h||Re!==me||xr.current||ss?(typeof Pe=="function"&&(fu(s,o,Pe,h),me=s.memoizedState),(he=ss||Pm(s,o,he,h,Re,me,be))?(ze||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(s.flags|=4194308)):(typeof K.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=me),K.props=h,K.state=me,K.context=be,h=he):(typeof K.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{K=s.stateNode,om(t,s),he=s.memoizedProps,be=s.type===s.elementType?he:Yr(s.type,he),K.props=be,ze=s.pendingProps,Re=K.context,me=o.contextType,typeof me=="object"&&me!==null?me=Mr(me):(me=wr(o)?bs:ar.current,me=ii(s,me));var Me=o.getDerivedStateFromProps;(Pe=typeof Me=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(he!==ze||Re!==me)&&Om(s,K,h,me),ss=!1,Re=s.memoizedState,K.state=Re,Ao(s,h,K,S);var Ve=s.memoizedState;he!==ze||Re!==Ve||xr.current||ss?(typeof Me=="function"&&(fu(s,o,Me,h),Ve=s.memoizedState),(be=ss||Pm(s,o,be,h,Re,Ve,me)||!1)?(Pe||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(h,Ve,me),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(h,Ve,me)),typeof K.componentDidUpdate=="function"&&(s.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof K.componentDidUpdate!="function"||he===t.memoizedProps&&Re===t.memoizedState||(s.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||he===t.memoizedProps&&Re===t.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=Ve),K.props=h,K.state=Ve,K.context=me,h=be):(typeof K.componentDidUpdate!="function"||he===t.memoizedProps&&Re===t.memoizedState||(s.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||he===t.memoizedProps&&Re===t.memoizedState||(s.flags|=1024),h=!1)}return vu(t,s,o,h,I,S)}function vu(t,s,o,h,S,I){Wm(t,s);var K=(s.flags&128)!==0;if(!h&&!K)return S&&Xp(s,o,!1),Rn(t,s,I);h=s.stateNode,Wb.current=s;var he=K&&typeof o.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,t!==null&&K?(s.child=ci(s,t.child,null,I),s.child=ci(s,null,he,I)):yr(t,s,he,I),s.memoizedState=h.state,S&&Xp(s,o,!0),s.child}function qm(t){var s=t.stateNode;s.pendingContext?Gp(t,s.pendingContext,s.pendingContext!==s.context):s.context&&Gp(t,s.context,!1),tu(t,s.containerInfo)}function Km(t,s,o,h,S){return li(),Gc(S),s.flags|=256,yr(t,s,o,h),s.child}var xu={dehydrated:null,treeContext:null,retryLane:0};function wu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Gm(t,s,o){var h=s.pendingProps,S=Rt.current,I=!1,K=(s.flags&128)!==0,he;if((he=K)||(he=t!==null&&t.memoizedState===null?!1:(S&2)!==0),he?(I=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(S|=1),_t(Rt,S&1),t===null)return Kc(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((s.mode&1)===0?s.lanes=1:t.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(K=h.children,t=h.fallback,I?(h=s.mode,I=s.child,K={mode:"hidden",children:K},(h&1)===0&&I!==null?(I.childLanes=0,I.pendingProps=K):I=Jo(K,h,0,null),t=Rs(t,h,o,null),I.return=s,t.return=s,I.sibling=t,s.child=I,s.child.memoizedState=wu(o),s.memoizedState=xu,t):bu(s,K));if(S=t.memoizedState,S!==null&&(he=S.dehydrated,he!==null))return Vb(t,s,K,h,he,S,o);if(I){I=h.fallback,K=s.mode,S=t.child,he=S.sibling;var me={mode:"hidden",children:h.children};return(K&1)===0&&s.child!==S?(h=s.child,h.childLanes=0,h.pendingProps=me,s.deletions=null):(h=ds(S,me),h.subtreeFlags=S.subtreeFlags&14680064),he!==null?I=ds(he,I):(I=Rs(I,K,o,null),I.flags|=2),I.return=s,h.return=s,h.sibling=I,s.child=h,h=I,I=s.child,K=t.child.memoizedState,K=K===null?wu(o):{baseLanes:K.baseLanes|o,cachePool:null,transitions:K.transitions},I.memoizedState=K,I.childLanes=t.childLanes&~o,s.memoizedState=xu,h}return I=t.child,t=I.sibling,h=ds(I,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=o),h.return=s,h.sibling=null,t!==null&&(o=s.deletions,o===null?(s.deletions=[t],s.flags|=16):o.push(t)),s.child=h,s.memoizedState=null,h}function bu(t,s){return s=Jo({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function Lo(t,s,o,h){return h!==null&&Gc(h),ci(s,t.child,null,o),t=bu(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Vb(t,s,o,h,S,I,K){if(o)return s.flags&256?(s.flags&=-257,h=mu(Error(i(422))),Lo(t,s,K,h)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(I=h.fallback,S=s.mode,h=Jo({mode:"visible",children:h.children},S,0,null),I=Rs(I,S,K,null),I.flags|=2,h.return=s,I.return=s,h.sibling=I,s.child=h,(s.mode&1)!==0&&ci(s,t.child,null,K),s.child.memoizedState=wu(K),s.memoizedState=xu,I);if((s.mode&1)===0)return Lo(t,s,K,null);if(S.data==="$!"){if(h=S.nextSibling&&S.nextSibling.dataset,h)var he=h.dgst;return h=he,I=Error(i(419)),h=mu(I,h,void 0),Lo(t,s,K,h)}if(he=(K&t.childLanes)!==0,br||he){if(h=Qt,h!==null){switch(K&-K){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(h.suspendedLanes|K))!==0?0:S,S!==0&&S!==I.retryLane&&(I.retryLane=S,Tn(t,S),tn(h,t,S,-1))}return Du(),h=mu(Error(i(421))),Lo(t,s,K,h)}return S.data==="$?"?(s.flags|=128,s.child=t.child,s=s1.bind(null,t),S._reactRetry=s,null):(t=I.treeContext,Or=es(S.nextSibling),zr=s,Tt=!0,Jr=null,t!==null&&(Lr[Br++]=En,Lr[Br++]=Cn,Lr[Br++]=js,En=t.id,Cn=t.overflow,js=s),s=bu(s,h.children),s.flags|=4096,s)}function Zm(t,s,o){t.lanes|=s;var h=t.alternate;h!==null&&(h.lanes|=s),Yc(t.return,s,o)}function ju(t,s,o,h,S){var I=t.memoizedState;I===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:o,tailMode:S}:(I.isBackwards=s,I.rendering=null,I.renderingStartTime=0,I.last=h,I.tail=o,I.tailMode=S)}function Xm(t,s,o){var h=s.pendingProps,S=h.revealOrder,I=h.tail;if(yr(t,s,h.children,o),h=Rt.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Zm(t,o,s);else if(t.tag===19)Zm(t,o,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}h&=1}if(_t(Rt,h),(s.mode&1)===0)s.memoizedState=null;else switch(S){case"forwards":for(o=s.child,S=null;o!==null;)t=o.alternate,t!==null&&Ro(t)===null&&(S=o),o=o.sibling;o=S,o===null?(S=s.child,s.child=null):(S=o.sibling,o.sibling=null),ju(s,!1,S,o,I);break;case"backwards":for(o=null,S=s.child,s.child=null;S!==null;){if(t=S.alternate,t!==null&&Ro(t)===null){s.child=S;break}t=S.sibling,S.sibling=o,o=S,S=t}ju(s,!0,o,null,I);break;case"together":ju(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Bo(t,s){(s.mode&1)===0&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function Rn(t,s,o){if(t!==null&&(s.dependencies=t.dependencies),Es|=s.lanes,(o&s.childLanes)===0)return null;if(t!==null&&s.child!==t.child)throw Error(i(153));if(s.child!==null){for(t=s.child,o=ds(t,t.pendingProps),s.child=o,o.return=s;t.sibling!==null;)t=t.sibling,o=o.sibling=ds(t,t.pendingProps),o.return=s;o.sibling=null}return s.child}function qb(t,s,o){switch(s.tag){case 3:qm(s),li();break;case 5:um(s);break;case 1:wr(s.type)&&bo(s);break;case 4:tu(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,S=s.memoizedProps.value;_t(Eo,h._currentValue),h._currentValue=S;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(_t(Rt,Rt.current&1),s.flags|=128,null):(o&s.child.childLanes)!==0?Gm(t,s,o):(_t(Rt,Rt.current&1),t=Rn(t,s,o),t!==null?t.sibling:null);_t(Rt,Rt.current&1);break;case 19:if(h=(o&s.childLanes)!==0,(t.flags&128)!==0){if(h)return Xm(t,s,o);s.flags|=128}if(S=s.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),_t(Rt,Rt.current),h)break;return null;case 22:case 23:return s.lanes=0,Hm(t,s,o)}return Rn(t,s,o)}var Jm,Nu,Ym,Qm;Jm=function(t,s){for(var o=s.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},Nu=function(){},Ym=function(t,s,o,h){var S=t.memoizedProps;if(S!==h){t=s.stateNode,_s(fn.current);var I=null;switch(o){case"input":S=z(t,S),h=z(t,h),I=[];break;case"select":S=ue({},S,{value:void 0}),h=ue({},h,{value:void 0}),I=[];break;case"textarea":S=se(t,S),h=se(t,h),I=[];break;default:typeof S.onClick!="function"&&typeof h.onClick=="function"&&(t.onclick=vo)}mr(o,h);var K;o=null;for(be in S)if(!h.hasOwnProperty(be)&&S.hasOwnProperty(be)&&S[be]!=null)if(be==="style"){var he=S[be];for(K in he)he.hasOwnProperty(K)&&(o||(o={}),o[K]="")}else be!=="dangerouslySetInnerHTML"&&be!=="children"&&be!=="suppressContentEditableWarning"&&be!=="suppressHydrationWarning"&&be!=="autoFocus"&&(l.hasOwnProperty(be)?I||(I=[]):(I=I||[]).push(be,null));for(be in h){var me=h[be];if(he=S?.[be],h.hasOwnProperty(be)&&me!==he&&(me!=null||he!=null))if(be==="style")if(he){for(K in he)!he.hasOwnProperty(K)||me&&me.hasOwnProperty(K)||(o||(o={}),o[K]="");for(K in me)me.hasOwnProperty(K)&&he[K]!==me[K]&&(o||(o={}),o[K]=me[K])}else o||(I||(I=[]),I.push(be,o)),o=me;else be==="dangerouslySetInnerHTML"?(me=me?me.__html:void 0,he=he?he.__html:void 0,me!=null&&he!==me&&(I=I||[]).push(be,me)):be==="children"?typeof me!="string"&&typeof me!="number"||(I=I||[]).push(be,""+me):be!=="suppressContentEditableWarning"&&be!=="suppressHydrationWarning"&&(l.hasOwnProperty(be)?(me!=null&&be==="onScroll"&&Et("scroll",t),I||he===me||(I=[])):(I=I||[]).push(be,me))}o&&(I=I||[]).push("style",o);var be=I;(s.updateQueue=be)&&(s.flags|=4)}},Qm=function(t,s,o,h){o!==h&&(s.flags|=4)};function ga(t,s){if(!Tt)switch(t.tailMode){case"hidden":s=t.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:h.sibling=null}}function lr(t){var s=t.alternate!==null&&t.alternate.child===t.child,o=0,h=0;if(s)for(var S=t.child;S!==null;)o|=S.lanes|S.childLanes,h|=S.subtreeFlags&14680064,h|=S.flags&14680064,S.return=t,S=S.sibling;else for(S=t.child;S!==null;)o|=S.lanes|S.childLanes,h|=S.subtreeFlags,h|=S.flags,S.return=t,S=S.sibling;return t.subtreeFlags|=h,t.childLanes=o,s}function Kb(t,s,o){var h=s.pendingProps;switch(Vc(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lr(s),null;case 1:return wr(s.type)&&wo(),lr(s),null;case 3:return h=s.stateNode,hi(),Ct(xr),Ct(ar),su(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(t===null||t.child===null)&&(_o(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Jr!==null&&(Ou(Jr),Jr=null))),Nu(t,s),lr(s),null;case 5:ru(s);var S=_s(ha.current);if(o=s.type,t!==null&&s.stateNode!=null)Ym(t,s,o,h,S),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(i(166));return lr(s),null}if(t=_s(fn.current),_o(s)){h=s.stateNode,o=s.type;var I=s.memoizedProps;switch(h[hn]=s,h[oa]=I,t=(s.mode&1)!==0,o){case"dialog":Et("cancel",h),Et("close",h);break;case"iframe":case"object":case"embed":Et("load",h);break;case"video":case"audio":for(S=0;S<sa.length;S++)Et(sa[S],h);break;case"source":Et("error",h);break;case"img":case"image":case"link":Et("error",h),Et("load",h);break;case"details":Et("toggle",h);break;case"input":fe(h,I),Et("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!I.multiple},Et("invalid",h);break;case"textarea":ge(h,I),Et("invalid",h)}mr(o,I),S=null;for(var K in I)if(I.hasOwnProperty(K)){var he=I[K];K==="children"?typeof he=="string"?h.textContent!==he&&(I.suppressHydrationWarning!==!0&&go(h.textContent,he,t),S=["children",he]):typeof he=="number"&&h.textContent!==""+he&&(I.suppressHydrationWarning!==!0&&go(h.textContent,he,t),S=["children",""+he]):l.hasOwnProperty(K)&&he!=null&&K==="onScroll"&&Et("scroll",h)}switch(o){case"input":G(h),m(h,I,!0);break;case"textarea":G(h),Ce(h);break;case"select":case"option":break;default:typeof I.onClick=="function"&&(h.onclick=vo)}h=S,s.updateQueue=h,h!==null&&(s.flags|=4)}else{K=S.nodeType===9?S:S.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Fe(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=K.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof h.is=="string"?t=K.createElement(o,{is:h.is}):(t=K.createElement(o),o==="select"&&(K=t,h.multiple?K.multiple=!0:h.size&&(K.size=h.size))):t=K.createElementNS(t,o),t[hn]=s,t[oa]=h,Jm(t,s,!1,!1),s.stateNode=t;e:{switch(K=Kn(o,h),o){case"dialog":Et("cancel",t),Et("close",t),S=h;break;case"iframe":case"object":case"embed":Et("load",t),S=h;break;case"video":case"audio":for(S=0;S<sa.length;S++)Et(sa[S],t);S=h;break;case"source":Et("error",t),S=h;break;case"img":case"image":case"link":Et("error",t),Et("load",t),S=h;break;case"details":Et("toggle",t),S=h;break;case"input":fe(t,h),S=z(t,h),Et("invalid",t);break;case"option":S=h;break;case"select":t._wrapperState={wasMultiple:!!h.multiple},S=ue({},h,{value:void 0}),Et("invalid",t);break;case"textarea":ge(t,h),S=se(t,h),Et("invalid",t);break;default:S=h}mr(o,S),he=S;for(I in he)if(he.hasOwnProperty(I)){var me=he[I];I==="style"?Nn(t,me):I==="dangerouslySetInnerHTML"?(me=me?me.__html:void 0,me!=null&&Wt(t,me)):I==="children"?typeof me=="string"?(o!=="textarea"||me!=="")&&ir(t,me):typeof me=="number"&&ir(t,""+me):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(l.hasOwnProperty(I)?me!=null&&I==="onScroll"&&Et("scroll",t):me!=null&&w(t,I,me,K))}switch(o){case"input":G(t),m(t,h,!1);break;case"textarea":G(t),Ce(t);break;case"option":h.value!=null&&t.setAttribute("value",""+O(h.value));break;case"select":t.multiple=!!h.multiple,I=h.value,I!=null?oe(t,!!h.multiple,I,!1):h.defaultValue!=null&&oe(t,!!h.multiple,h.defaultValue,!0);break;default:typeof S.onClick=="function"&&(t.onclick=vo)}switch(o){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return lr(s),null;case 6:if(t&&s.stateNode!=null)Qm(t,s,t.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(i(166));if(o=_s(ha.current),_s(fn.current),_o(s)){if(h=s.stateNode,o=s.memoizedProps,h[hn]=s,(I=h.nodeValue!==o)&&(t=zr,t!==null))switch(t.tag){case 3:go(h.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&go(h.nodeValue,o,(t.mode&1)!==0)}I&&(s.flags|=4)}else h=(o.nodeType===9?o:o.ownerDocument).createTextNode(h),h[hn]=s,s.stateNode=h}return lr(s),null;case 13:if(Ct(Rt),h=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Tt&&Or!==null&&(s.mode&1)!==0&&(s.flags&128)===0)rm(),li(),s.flags|=98560,I=!1;else if(I=_o(s),h!==null&&h.dehydrated!==null){if(t===null){if(!I)throw Error(i(318));if(I=s.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(i(317));I[hn]=s}else li(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;lr(s),I=!1}else Jr!==null&&(Ou(Jr),Jr=null),I=!0;if(!I)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=o,s):(h=h!==null,h!==(t!==null&&t.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(t===null||(Rt.current&1)!==0?Gt===0&&(Gt=3):Du())),s.updateQueue!==null&&(s.flags|=4),lr(s),null);case 4:return hi(),Nu(t,s),t===null&&ia(s.stateNode.containerInfo),lr(s),null;case 10:return Jc(s.type._context),lr(s),null;case 17:return wr(s.type)&&wo(),lr(s),null;case 19:if(Ct(Rt),I=s.memoizedState,I===null)return lr(s),null;if(h=(s.flags&128)!==0,K=I.rendering,K===null)if(h)ga(I,!1);else{if(Gt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(K=Ro(t),K!==null){for(s.flags|=128,ga(I,!1),h=K.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=o,o=s.child;o!==null;)I=o,t=h,I.flags&=14680066,K=I.alternate,K===null?(I.childLanes=0,I.lanes=t,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=K.childLanes,I.lanes=K.lanes,I.child=K.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=K.memoizedProps,I.memoizedState=K.memoizedState,I.updateQueue=K.updateQueue,I.type=K.type,t=K.dependencies,I.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return _t(Rt,Rt.current&1|2),s.child}t=t.sibling}I.tail!==null&&Bt()>yi&&(s.flags|=128,h=!0,ga(I,!1),s.lanes=4194304)}else{if(!h)if(t=Ro(K),t!==null){if(s.flags|=128,h=!0,o=t.updateQueue,o!==null&&(s.updateQueue=o,s.flags|=4),ga(I,!0),I.tail===null&&I.tailMode==="hidden"&&!K.alternate&&!Tt)return lr(s),null}else 2*Bt()-I.renderingStartTime>yi&&o!==1073741824&&(s.flags|=128,h=!0,ga(I,!1),s.lanes=4194304);I.isBackwards?(K.sibling=s.child,s.child=K):(o=I.last,o!==null?o.sibling=K:s.child=K,I.last=K)}return I.tail!==null?(s=I.tail,I.rendering=s,I.tail=s.sibling,I.renderingStartTime=Bt(),s.sibling=null,o=Rt.current,_t(Rt,h?o&1|2:o&1),s):(lr(s),null);case 22:case 23:return Fu(),h=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(Ir&1073741824)!==0&&(lr(s),s.subtreeFlags&6&&(s.flags|=8192)):lr(s),null;case 24:return null;case 25:return null}throw Error(i(156,s.tag))}function Gb(t,s){switch(Vc(s),s.tag){case 1:return wr(s.type)&&wo(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return hi(),Ct(xr),Ct(ar),su(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 5:return ru(s),null;case 13:if(Ct(Rt),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(i(340));li()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Ct(Rt),null;case 4:return hi(),null;case 10:return Jc(s.type._context),null;case 22:case 23:return Fu(),null;case 24:return null;default:return null}}var Mo=!1,cr=!1,Zb=typeof WeakSet=="function"?WeakSet:Set,$e=null;function pi(t,s){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(h){zt(t,s,h)}else o.current=null}function ku(t,s,o){try{o()}catch(h){zt(t,s,h)}}var ey=!1;function Xb(t,s){if(Fc=io,t=Pp(),Cc(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var h=o.getSelection&&o.getSelection();if(h&&h.rangeCount!==0){o=h.anchorNode;var S=h.anchorOffset,I=h.focusNode;h=h.focusOffset;try{o.nodeType,I.nodeType}catch{o=null;break e}var K=0,he=-1,me=-1,be=0,Pe=0,ze=t,Re=null;t:for(;;){for(var Me;ze!==o||S!==0&&ze.nodeType!==3||(he=K+S),ze!==I||h!==0&&ze.nodeType!==3||(me=K+h),ze.nodeType===3&&(K+=ze.nodeValue.length),(Me=ze.firstChild)!==null;)Re=ze,ze=Me;for(;;){if(ze===t)break t;if(Re===o&&++be===S&&(he=K),Re===I&&++Pe===h&&(me=K),(Me=ze.nextSibling)!==null)break;ze=Re,Re=ze.parentNode}ze=Me}o=he===-1||me===-1?null:{start:he,end:me}}else o=null}o=o||{start:0,end:0}}else o=null;for(Dc={focusedElem:t,selectionRange:o},io=!1,$e=s;$e!==null;)if(s=$e,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,$e=t;else for(;$e!==null;){s=$e;try{var Ve=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Ve!==null){var qe=Ve.memoizedProps,Mt=Ve.memoizedState,xe=s.stateNode,ve=xe.getSnapshotBeforeUpdate(s.elementType===s.type?qe:Yr(s.type,qe),Mt);xe.__reactInternalSnapshotBeforeUpdate=ve}break;case 3:var we=s.stateNode.containerInfo;we.nodeType===1?we.textContent="":we.nodeType===9&&we.documentElement&&we.removeChild(we.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(Ie){zt(s,s.return,Ie)}if(t=s.sibling,t!==null){t.return=s.return,$e=t;break}$e=s.return}return Ve=ey,ey=!1,Ve}function va(t,s,o){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var S=h=h.next;do{if((S.tag&t)===t){var I=S.destroy;S.destroy=void 0,I!==void 0&&ku(s,o,I)}S=S.next}while(S!==h)}}function Uo(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var o=s=s.next;do{if((o.tag&t)===t){var h=o.create;o.destroy=h()}o=o.next}while(o!==s)}}function _u(t){var s=t.ref;if(s!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof s=="function"?s(t):s.current=t}}function ty(t){var s=t.alternate;s!==null&&(t.alternate=null,ty(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[hn],delete s[oa],delete s[Uc],delete s[Pb],delete s[zb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ry(t){return t.tag===5||t.tag===3||t.tag===4}function ny(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ry(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Su(t,s,o){var h=t.tag;if(h===5||h===6)t=t.stateNode,s?o.nodeType===8?o.parentNode.insertBefore(t,s):o.insertBefore(t,s):(o.nodeType===8?(s=o.parentNode,s.insertBefore(t,o)):(s=o,s.appendChild(t)),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=vo));else if(h!==4&&(t=t.child,t!==null))for(Su(t,s,o),t=t.sibling;t!==null;)Su(t,s,o),t=t.sibling}function Eu(t,s,o){var h=t.tag;if(h===5||h===6)t=t.stateNode,s?o.insertBefore(t,s):o.appendChild(t);else if(h!==4&&(t=t.child,t!==null))for(Eu(t,s,o),t=t.sibling;t!==null;)Eu(t,s,o),t=t.sibling}var tr=null,Qr=!1;function as(t,s,o){for(o=o.child;o!==null;)sy(t,s,o),o=o.sibling}function sy(t,s,o){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(Qa,o)}catch{}switch(o.tag){case 5:cr||pi(o,s);case 6:var h=tr,S=Qr;tr=null,as(t,s,o),tr=h,Qr=S,tr!==null&&(Qr?(t=tr,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):tr.removeChild(o.stateNode));break;case 18:tr!==null&&(Qr?(t=tr,o=o.stateNode,t.nodeType===8?Mc(t.parentNode,o):t.nodeType===1&&Mc(t,o),Xi(t)):Mc(tr,o.stateNode));break;case 4:h=tr,S=Qr,tr=o.stateNode.containerInfo,Qr=!0,as(t,s,o),tr=h,Qr=S;break;case 0:case 11:case 14:case 15:if(!cr&&(h=o.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){S=h=h.next;do{var I=S,K=I.destroy;I=I.tag,K!==void 0&&((I&2)!==0||(I&4)!==0)&&ku(o,s,K),S=S.next}while(S!==h)}as(t,s,o);break;case 1:if(!cr&&(pi(o,s),h=o.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=o.memoizedProps,h.state=o.memoizedState,h.componentWillUnmount()}catch(he){zt(o,s,he)}as(t,s,o);break;case 21:as(t,s,o);break;case 22:o.mode&1?(cr=(h=cr)||o.memoizedState!==null,as(t,s,o),cr=h):as(t,s,o);break;default:as(t,s,o)}}function iy(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new Zb),s.forEach(function(h){var S=i1.bind(null,t,h);o.has(h)||(o.add(h),h.then(S,S))})}}function en(t,s){var o=s.deletions;if(o!==null)for(var h=0;h<o.length;h++){var S=o[h];try{var I=t,K=s,he=K;e:for(;he!==null;){switch(he.tag){case 5:tr=he.stateNode,Qr=!1;break e;case 3:tr=he.stateNode.containerInfo,Qr=!0;break e;case 4:tr=he.stateNode.containerInfo,Qr=!0;break e}he=he.return}if(tr===null)throw Error(i(160));sy(I,K,S),tr=null,Qr=!1;var me=S.alternate;me!==null&&(me.return=null),S.return=null}catch(be){zt(S,s,be)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)ay(s,t),s=s.sibling}function ay(t,s){var o=t.alternate,h=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(en(s,t),mn(t),h&4){try{va(3,t,t.return),Uo(3,t)}catch(qe){zt(t,t.return,qe)}try{va(5,t,t.return)}catch(qe){zt(t,t.return,qe)}}break;case 1:en(s,t),mn(t),h&512&&o!==null&&pi(o,o.return);break;case 5:if(en(s,t),mn(t),h&512&&o!==null&&pi(o,o.return),t.flags&32){var S=t.stateNode;try{ir(S,"")}catch(qe){zt(t,t.return,qe)}}if(h&4&&(S=t.stateNode,S!=null)){var I=t.memoizedProps,K=o!==null?o.memoizedProps:I,he=t.type,me=t.updateQueue;if(t.updateQueue=null,me!==null)try{he==="input"&&I.type==="radio"&&I.name!=null&&F(S,I),Kn(he,K);var be=Kn(he,I);for(K=0;K<me.length;K+=2){var Pe=me[K],ze=me[K+1];Pe==="style"?Nn(S,ze):Pe==="dangerouslySetInnerHTML"?Wt(S,ze):Pe==="children"?ir(S,ze):w(S,Pe,ze,be)}switch(he){case"input":x(S,I);break;case"textarea":ke(S,I);break;case"select":var Re=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!I.multiple;var Me=I.value;Me!=null?oe(S,!!I.multiple,Me,!1):Re!==!!I.multiple&&(I.defaultValue!=null?oe(S,!!I.multiple,I.defaultValue,!0):oe(S,!!I.multiple,I.multiple?[]:"",!1))}S[oa]=I}catch(qe){zt(t,t.return,qe)}}break;case 6:if(en(s,t),mn(t),h&4){if(t.stateNode===null)throw Error(i(162));S=t.stateNode,I=t.memoizedProps;try{S.nodeValue=I}catch(qe){zt(t,t.return,qe)}}break;case 3:if(en(s,t),mn(t),h&4&&o!==null&&o.memoizedState.isDehydrated)try{Xi(s.containerInfo)}catch(qe){zt(t,t.return,qe)}break;case 4:en(s,t),mn(t);break;case 13:en(s,t),mn(t),S=t.child,S.flags&8192&&(I=S.memoizedState!==null,S.stateNode.isHidden=I,!I||S.alternate!==null&&S.alternate.memoizedState!==null||(Au=Bt())),h&4&&iy(t);break;case 22:if(Pe=o!==null&&o.memoizedState!==null,t.mode&1?(cr=(be=cr)||Pe,en(s,t),cr=be):en(s,t),mn(t),h&8192){if(be=t.memoizedState!==null,(t.stateNode.isHidden=be)&&!Pe&&(t.mode&1)!==0)for($e=t,Pe=t.child;Pe!==null;){for(ze=$e=Pe;$e!==null;){switch(Re=$e,Me=Re.child,Re.tag){case 0:case 11:case 14:case 15:va(4,Re,Re.return);break;case 1:pi(Re,Re.return);var Ve=Re.stateNode;if(typeof Ve.componentWillUnmount=="function"){h=Re,o=Re.return;try{s=h,Ve.props=s.memoizedProps,Ve.state=s.memoizedState,Ve.componentWillUnmount()}catch(qe){zt(h,o,qe)}}break;case 5:pi(Re,Re.return);break;case 22:if(Re.memoizedState!==null){cy(ze);continue}}Me!==null?(Me.return=Re,$e=Me):cy(ze)}Pe=Pe.sibling}e:for(Pe=null,ze=t;;){if(ze.tag===5){if(Pe===null){Pe=ze;try{S=ze.stateNode,be?(I=S.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none"):(he=ze.stateNode,me=ze.memoizedProps.style,K=me!=null&&me.hasOwnProperty("display")?me.display:null,he.style.display=Nt("display",K))}catch(qe){zt(t,t.return,qe)}}}else if(ze.tag===6){if(Pe===null)try{ze.stateNode.nodeValue=be?"":ze.memoizedProps}catch(qe){zt(t,t.return,qe)}}else if((ze.tag!==22&&ze.tag!==23||ze.memoizedState===null||ze===t)&&ze.child!==null){ze.child.return=ze,ze=ze.child;continue}if(ze===t)break e;for(;ze.sibling===null;){if(ze.return===null||ze.return===t)break e;Pe===ze&&(Pe=null),ze=ze.return}Pe===ze&&(Pe=null),ze.sibling.return=ze.return,ze=ze.sibling}}break;case 19:en(s,t),mn(t),h&4&&iy(t);break;case 21:break;default:en(s,t),mn(t)}}function mn(t){var s=t.flags;if(s&2){try{e:{for(var o=t.return;o!==null;){if(ry(o)){var h=o;break e}o=o.return}throw Error(i(160))}switch(h.tag){case 5:var S=h.stateNode;h.flags&32&&(ir(S,""),h.flags&=-33);var I=ny(t);Eu(t,I,S);break;case 3:case 4:var K=h.stateNode.containerInfo,he=ny(t);Su(t,he,K);break;default:throw Error(i(161))}}catch(me){zt(t,t.return,me)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Jb(t,s,o){$e=t,oy(t)}function oy(t,s,o){for(var h=(t.mode&1)!==0;$e!==null;){var S=$e,I=S.child;if(S.tag===22&&h){var K=S.memoizedState!==null||Mo;if(!K){var he=S.alternate,me=he!==null&&he.memoizedState!==null||cr;he=Mo;var be=cr;if(Mo=K,(cr=me)&&!be)for($e=S;$e!==null;)K=$e,me=K.child,K.tag===22&&K.memoizedState!==null?uy(S):me!==null?(me.return=K,$e=me):uy(S);for(;I!==null;)$e=I,oy(I),I=I.sibling;$e=S,Mo=he,cr=be}ly(t)}else(S.subtreeFlags&8772)!==0&&I!==null?(I.return=S,$e=I):ly(t)}}function ly(t){for(;$e!==null;){var s=$e;if((s.flags&8772)!==0){var o=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:cr||Uo(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!cr)if(o===null)h.componentDidMount();else{var S=s.elementType===s.type?o.memoizedProps:Yr(s.type,o.memoizedProps);h.componentDidUpdate(S,o.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var I=s.updateQueue;I!==null&&cm(s,I,h);break;case 3:var K=s.updateQueue;if(K!==null){if(o=null,s.child!==null)switch(s.child.tag){case 5:o=s.child.stateNode;break;case 1:o=s.child.stateNode}cm(s,K,o)}break;case 5:var he=s.stateNode;if(o===null&&s.flags&4){o=he;var me=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":me.autoFocus&&o.focus();break;case"img":me.src&&(o.src=me.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var be=s.alternate;if(be!==null){var Pe=be.memoizedState;if(Pe!==null){var ze=Pe.dehydrated;ze!==null&&Xi(ze)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}cr||s.flags&512&&_u(s)}catch(Re){zt(s,s.return,Re)}}if(s===t){$e=null;break}if(o=s.sibling,o!==null){o.return=s.return,$e=o;break}$e=s.return}}function cy(t){for(;$e!==null;){var s=$e;if(s===t){$e=null;break}var o=s.sibling;if(o!==null){o.return=s.return,$e=o;break}$e=s.return}}function uy(t){for(;$e!==null;){var s=$e;try{switch(s.tag){case 0:case 11:case 15:var o=s.return;try{Uo(4,s)}catch(me){zt(s,o,me)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var S=s.return;try{h.componentDidMount()}catch(me){zt(s,S,me)}}var I=s.return;try{_u(s)}catch(me){zt(s,I,me)}break;case 5:var K=s.return;try{_u(s)}catch(me){zt(s,K,me)}}}catch(me){zt(s,s.return,me)}if(s===t){$e=null;break}var he=s.sibling;if(he!==null){he.return=s.return,$e=he;break}$e=s.return}}var Yb=Math.ceil,$o=_.ReactCurrentDispatcher,Cu=_.ReactCurrentOwner,$r=_.ReactCurrentBatchConfig,ft=0,Qt=null,Vt=null,rr=0,Ir=0,mi=ts(0),Gt=0,xa=null,Es=0,Ho=0,Tu=0,wa=null,jr=null,Au=0,yi=1/0,Pn=null,Wo=!1,Ru=null,os=null,Vo=!1,ls=null,qo=0,ba=0,Pu=null,Ko=-1,Go=0;function gr(){return(ft&6)!==0?Bt():Ko!==-1?Ko:Ko=Bt()}function cs(t){return(t.mode&1)===0?1:(ft&2)!==0&&rr!==0?rr&-rr:Ib.transition!==null?(Go===0&&(Go=np()),Go):(t=gt,t!==0||(t=window.event,t=t===void 0?16:hp(t.type)),t)}function tn(t,s,o,h){if(50<ba)throw ba=0,Pu=null,Error(i(185));Vi(t,o,h),((ft&2)===0||t!==Qt)&&(t===Qt&&((ft&2)===0&&(Ho|=o),Gt===4&&us(t,rr)),Nr(t,h),o===1&&ft===0&&(s.mode&1)===0&&(yi=Bt()+500,jo&&ns()))}function Nr(t,s){var o=t.callbackNode;Iw(t,s);var h=ro(t,t===Qt?rr:0);if(h===0)o!==null&&ep(o),t.callbackNode=null,t.callbackPriority=0;else if(s=h&-h,t.callbackPriority!==s){if(o!=null&&ep(o),s===1)t.tag===0?Ob(hy.bind(null,t)):Jp(hy.bind(null,t)),Ab(function(){(ft&6)===0&&ns()}),o=null;else{switch(sp(h)){case 1:o=dc;break;case 4:o=tp;break;case 16:o=Ya;break;case 536870912:o=rp;break;default:o=Ya}o=wy(o,dy.bind(null,t))}t.callbackPriority=s,t.callbackNode=o}}function dy(t,s){if(Ko=-1,Go=0,(ft&6)!==0)throw Error(i(327));var o=t.callbackNode;if(gi()&&t.callbackNode!==o)return null;var h=ro(t,t===Qt?rr:0);if(h===0)return null;if((h&30)!==0||(h&t.expiredLanes)!==0||s)s=Zo(t,h);else{s=h;var S=ft;ft|=2;var I=py();(Qt!==t||rr!==s)&&(Pn=null,yi=Bt()+500,Ts(t,s));do try{t1();break}catch(he){fy(t,he)}while(!0);Xc(),$o.current=I,ft=S,Vt!==null?s=0:(Qt=null,rr=0,s=Gt)}if(s!==0){if(s===2&&(S=hc(t),S!==0&&(h=S,s=zu(t,S))),s===1)throw o=xa,Ts(t,0),us(t,h),Nr(t,Bt()),o;if(s===6)us(t,h);else{if(S=t.current.alternate,(h&30)===0&&!Qb(S)&&(s=Zo(t,h),s===2&&(I=hc(t),I!==0&&(h=I,s=zu(t,I))),s===1))throw o=xa,Ts(t,0),us(t,h),Nr(t,Bt()),o;switch(t.finishedWork=S,t.finishedLanes=h,s){case 0:case 1:throw Error(i(345));case 2:As(t,jr,Pn);break;case 3:if(us(t,h),(h&130023424)===h&&(s=Au+500-Bt(),10<s)){if(ro(t,0)!==0)break;if(S=t.suspendedLanes,(S&h)!==h){gr(),t.pingedLanes|=t.suspendedLanes&S;break}t.timeoutHandle=Bc(As.bind(null,t,jr,Pn),s);break}As(t,jr,Pn);break;case 4:if(us(t,h),(h&4194240)===h)break;for(s=t.eventTimes,S=-1;0<h;){var K=31-Zr(h);I=1<<K,K=s[K],K>S&&(S=K),h&=~I}if(h=S,h=Bt()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*Yb(h/1960))-h,10<h){t.timeoutHandle=Bc(As.bind(null,t,jr,Pn),h);break}As(t,jr,Pn);break;case 5:As(t,jr,Pn);break;default:throw Error(i(329))}}}return Nr(t,Bt()),t.callbackNode===o?dy.bind(null,t):null}function zu(t,s){var o=wa;return t.current.memoizedState.isDehydrated&&(Ts(t,s).flags|=256),t=Zo(t,s),t!==2&&(s=jr,jr=o,s!==null&&Ou(s)),t}function Ou(t){jr===null?jr=t:jr.push.apply(jr,t)}function Qb(t){for(var s=t;;){if(s.flags&16384){var o=s.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var h=0;h<o.length;h++){var S=o[h],I=S.getSnapshot;S=S.value;try{if(!Xr(I(),S))return!1}catch{return!1}}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function us(t,s){for(s&=~Tu,s&=~Ho,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var o=31-Zr(s),h=1<<o;t[o]=-1,s&=~h}}function hy(t){if((ft&6)!==0)throw Error(i(327));gi();var s=ro(t,0);if((s&1)===0)return Nr(t,Bt()),null;var o=Zo(t,s);if(t.tag!==0&&o===2){var h=hc(t);h!==0&&(s=h,o=zu(t,h))}if(o===1)throw o=xa,Ts(t,0),us(t,s),Nr(t,Bt()),o;if(o===6)throw Error(i(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,As(t,jr,Pn),Nr(t,Bt()),null}function Iu(t,s){var o=ft;ft|=1;try{return t(s)}finally{ft=o,ft===0&&(yi=Bt()+500,jo&&ns())}}function Cs(t){ls!==null&&ls.tag===0&&(ft&6)===0&&gi();var s=ft;ft|=1;var o=$r.transition,h=gt;try{if($r.transition=null,gt=1,t)return t()}finally{gt=h,$r.transition=o,ft=s,(ft&6)===0&&ns()}}function Fu(){Ir=mi.current,Ct(mi)}function Ts(t,s){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,Tb(o)),Vt!==null)for(o=Vt.return;o!==null;){var h=o;switch(Vc(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&wo();break;case 3:hi(),Ct(xr),Ct(ar),su();break;case 5:ru(h);break;case 4:hi();break;case 13:Ct(Rt);break;case 19:Ct(Rt);break;case 10:Jc(h.type._context);break;case 22:case 23:Fu()}o=o.return}if(Qt=t,Vt=t=ds(t.current,null),rr=Ir=s,Gt=0,xa=null,Tu=Ho=Es=0,jr=wa=null,ks!==null){for(s=0;s<ks.length;s++)if(o=ks[s],h=o.interleaved,h!==null){o.interleaved=null;var S=h.next,I=o.pending;if(I!==null){var K=I.next;I.next=S,h.next=K}o.pending=h}ks=null}return t}function fy(t,s){do{var o=Vt;try{if(Xc(),Po.current=Fo,zo){for(var h=Pt.memoizedState;h!==null;){var S=h.queue;S!==null&&(S.pending=null),h=h.next}zo=!1}if(Ss=0,Yt=Kt=Pt=null,fa=!1,pa=0,Cu.current=null,o===null||o.return===null){Gt=1,xa=s,Vt=null;break}e:{var I=t,K=o.return,he=o,me=s;if(s=rr,he.flags|=32768,me!==null&&typeof me=="object"&&typeof me.then=="function"){var be=me,Pe=he,ze=Pe.tag;if((Pe.mode&1)===0&&(ze===0||ze===11||ze===15)){var Re=Pe.alternate;Re?(Pe.updateQueue=Re.updateQueue,Pe.memoizedState=Re.memoizedState,Pe.lanes=Re.lanes):(Pe.updateQueue=null,Pe.memoizedState=null)}var Me=Lm(K);if(Me!==null){Me.flags&=-257,Bm(Me,K,he,I,s),Me.mode&1&&Dm(I,be,s),s=Me,me=be;var Ve=s.updateQueue;if(Ve===null){var qe=new Set;qe.add(me),s.updateQueue=qe}else Ve.add(me);break e}else{if((s&1)===0){Dm(I,be,s),Du();break e}me=Error(i(426))}}else if(Tt&&he.mode&1){var Mt=Lm(K);if(Mt!==null){(Mt.flags&65536)===0&&(Mt.flags|=256),Bm(Mt,K,he,I,s),Gc(fi(me,he));break e}}I=me=fi(me,he),Gt!==4&&(Gt=2),wa===null?wa=[I]:wa.push(I),I=K;do{switch(I.tag){case 3:I.flags|=65536,s&=-s,I.lanes|=s;var xe=Im(I,me,s);lm(I,xe);break e;case 1:he=me;var ve=I.type,we=I.stateNode;if((I.flags&128)===0&&(typeof ve.getDerivedStateFromError=="function"||we!==null&&typeof we.componentDidCatch=="function"&&(os===null||!os.has(we)))){I.flags|=65536,s&=-s,I.lanes|=s;var Ie=Fm(I,he,s);lm(I,Ie);break e}}I=I.return}while(I!==null)}yy(o)}catch(Ge){s=Ge,Vt===o&&o!==null&&(Vt=o=o.return);continue}break}while(!0)}function py(){var t=$o.current;return $o.current=Fo,t===null?Fo:t}function Du(){(Gt===0||Gt===3||Gt===2)&&(Gt=4),Qt===null||(Es&268435455)===0&&(Ho&268435455)===0||us(Qt,rr)}function Zo(t,s){var o=ft;ft|=2;var h=py();(Qt!==t||rr!==s)&&(Pn=null,Ts(t,s));do try{e1();break}catch(S){fy(t,S)}while(!0);if(Xc(),ft=o,$o.current=h,Vt!==null)throw Error(i(261));return Qt=null,rr=0,Gt}function e1(){for(;Vt!==null;)my(Vt)}function t1(){for(;Vt!==null&&!Sw();)my(Vt)}function my(t){var s=xy(t.alternate,t,Ir);t.memoizedProps=t.pendingProps,s===null?yy(t):Vt=s,Cu.current=null}function yy(t){var s=t;do{var o=s.alternate;if(t=s.return,(s.flags&32768)===0){if(o=Kb(o,s,Ir),o!==null){Vt=o;return}}else{if(o=Gb(o,s),o!==null){o.flags&=32767,Vt=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Gt=6,Vt=null;return}}if(s=s.sibling,s!==null){Vt=s;return}Vt=s=t}while(s!==null);Gt===0&&(Gt=5)}function As(t,s,o){var h=gt,S=$r.transition;try{$r.transition=null,gt=1,r1(t,s,o,h)}finally{$r.transition=S,gt=h}return null}function r1(t,s,o,h){do gi();while(ls!==null);if((ft&6)!==0)throw Error(i(327));o=t.finishedWork;var S=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(i(177));t.callbackNode=null,t.callbackPriority=0;var I=o.lanes|o.childLanes;if(Fw(t,I),t===Qt&&(Vt=Qt=null,rr=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||Vo||(Vo=!0,wy(Ya,function(){return gi(),null})),I=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||I){I=$r.transition,$r.transition=null;var K=gt;gt=1;var he=ft;ft|=4,Cu.current=null,Xb(t,o),ay(o,t),jb(Dc),io=!!Fc,Dc=Fc=null,t.current=o,Jb(o),Ew(),ft=he,gt=K,$r.transition=I}else t.current=o;if(Vo&&(Vo=!1,ls=t,qo=S),I=t.pendingLanes,I===0&&(os=null),Aw(o.stateNode),Nr(t,Bt()),s!==null)for(h=t.onRecoverableError,o=0;o<s.length;o++)S=s[o],h(S.value,{componentStack:S.stack,digest:S.digest});if(Wo)throw Wo=!1,t=Ru,Ru=null,t;return(qo&1)!==0&&t.tag!==0&&gi(),I=t.pendingLanes,(I&1)!==0?t===Pu?ba++:(ba=0,Pu=t):ba=0,ns(),null}function gi(){if(ls!==null){var t=sp(qo),s=$r.transition,o=gt;try{if($r.transition=null,gt=16>t?16:t,ls===null)var h=!1;else{if(t=ls,ls=null,qo=0,(ft&6)!==0)throw Error(i(331));var S=ft;for(ft|=4,$e=t.current;$e!==null;){var I=$e,K=I.child;if(($e.flags&16)!==0){var he=I.deletions;if(he!==null){for(var me=0;me<he.length;me++){var be=he[me];for($e=be;$e!==null;){var Pe=$e;switch(Pe.tag){case 0:case 11:case 15:va(8,Pe,I)}var ze=Pe.child;if(ze!==null)ze.return=Pe,$e=ze;else for(;$e!==null;){Pe=$e;var Re=Pe.sibling,Me=Pe.return;if(ty(Pe),Pe===be){$e=null;break}if(Re!==null){Re.return=Me,$e=Re;break}$e=Me}}}var Ve=I.alternate;if(Ve!==null){var qe=Ve.child;if(qe!==null){Ve.child=null;do{var Mt=qe.sibling;qe.sibling=null,qe=Mt}while(qe!==null)}}$e=I}}if((I.subtreeFlags&2064)!==0&&K!==null)K.return=I,$e=K;else e:for(;$e!==null;){if(I=$e,(I.flags&2048)!==0)switch(I.tag){case 0:case 11:case 15:va(9,I,I.return)}var xe=I.sibling;if(xe!==null){xe.return=I.return,$e=xe;break e}$e=I.return}}var ve=t.current;for($e=ve;$e!==null;){K=$e;var we=K.child;if((K.subtreeFlags&2064)!==0&&we!==null)we.return=K,$e=we;else e:for(K=ve;$e!==null;){if(he=$e,(he.flags&2048)!==0)try{switch(he.tag){case 0:case 11:case 15:Uo(9,he)}}catch(Ge){zt(he,he.return,Ge)}if(he===K){$e=null;break e}var Ie=he.sibling;if(Ie!==null){Ie.return=he.return,$e=Ie;break e}$e=he.return}}if(ft=S,ns(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(Qa,t)}catch{}h=!0}return h}finally{gt=o,$r.transition=s}}return!1}function gy(t,s,o){s=fi(o,s),s=Im(t,s,1),t=is(t,s,1),s=gr(),t!==null&&(Vi(t,1,s),Nr(t,s))}function zt(t,s,o){if(t.tag===3)gy(t,t,o);else for(;s!==null;){if(s.tag===3){gy(s,t,o);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(os===null||!os.has(h))){t=fi(o,t),t=Fm(s,t,1),s=is(s,t,1),t=gr(),s!==null&&(Vi(s,1,t),Nr(s,t));break}}s=s.return}}function n1(t,s,o){var h=t.pingCache;h!==null&&h.delete(s),s=gr(),t.pingedLanes|=t.suspendedLanes&o,Qt===t&&(rr&o)===o&&(Gt===4||Gt===3&&(rr&130023424)===rr&&500>Bt()-Au?Ts(t,0):Tu|=o),Nr(t,s)}function vy(t,s){s===0&&((t.mode&1)===0?s=1:(s=to,to<<=1,(to&130023424)===0&&(to=4194304)));var o=gr();t=Tn(t,s),t!==null&&(Vi(t,s,o),Nr(t,o))}function s1(t){var s=t.memoizedState,o=0;s!==null&&(o=s.retryLane),vy(t,o)}function i1(t,s){var o=0;switch(t.tag){case 13:var h=t.stateNode,S=t.memoizedState;S!==null&&(o=S.retryLane);break;case 19:h=t.stateNode;break;default:throw Error(i(314))}h!==null&&h.delete(s),vy(t,o)}var xy;xy=function(t,s,o){if(t!==null)if(t.memoizedProps!==s.pendingProps||xr.current)br=!0;else{if((t.lanes&o)===0&&(s.flags&128)===0)return br=!1,qb(t,s,o);br=(t.flags&131072)!==0}else br=!1,Tt&&(s.flags&1048576)!==0&&Yp(s,ko,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Bo(t,s),t=s.pendingProps;var S=ii(s,ar.current);di(s,o),S=ou(null,s,h,t,S,o);var I=lu();return s.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,wr(h)?(I=!0,bo(s)):I=!1,s.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,eu(s),S.updater=Do,s.stateNode=S,S._reactInternals=s,pu(s,h,t,o),s=vu(null,s,h,!0,I,o)):(s.tag=0,Tt&&I&&Wc(s),yr(null,s,S,o),s=s.child),s;case 16:h=s.elementType;e:{switch(Bo(t,s),t=s.pendingProps,S=h._init,h=S(h._payload),s.type=h,S=s.tag=o1(h),t=Yr(h,t),S){case 0:s=gu(null,s,h,t,o);break e;case 1:s=Vm(null,s,h,t,o);break e;case 11:s=Mm(null,s,h,t,o);break e;case 14:s=Um(null,s,h,Yr(h.type,t),o);break e}throw Error(i(306,h,""))}return s;case 0:return h=s.type,S=s.pendingProps,S=s.elementType===h?S:Yr(h,S),gu(t,s,h,S,o);case 1:return h=s.type,S=s.pendingProps,S=s.elementType===h?S:Yr(h,S),Vm(t,s,h,S,o);case 3:e:{if(qm(s),t===null)throw Error(i(387));h=s.pendingProps,I=s.memoizedState,S=I.element,om(t,s),Ao(s,h,null,o);var K=s.memoizedState;if(h=K.element,I.isDehydrated)if(I={element:h,isDehydrated:!1,cache:K.cache,pendingSuspenseBoundaries:K.pendingSuspenseBoundaries,transitions:K.transitions},s.updateQueue.baseState=I,s.memoizedState=I,s.flags&256){S=fi(Error(i(423)),s),s=Km(t,s,h,o,S);break e}else if(h!==S){S=fi(Error(i(424)),s),s=Km(t,s,h,o,S);break e}else for(Or=es(s.stateNode.containerInfo.firstChild),zr=s,Tt=!0,Jr=null,o=im(s,null,h,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(li(),h===S){s=Rn(t,s,o);break e}yr(t,s,h,o)}s=s.child}return s;case 5:return um(s),t===null&&Kc(s),h=s.type,S=s.pendingProps,I=t!==null?t.memoizedProps:null,K=S.children,Lc(h,S)?K=null:I!==null&&Lc(h,I)&&(s.flags|=32),Wm(t,s),yr(t,s,K,o),s.child;case 6:return t===null&&Kc(s),null;case 13:return Gm(t,s,o);case 4:return tu(s,s.stateNode.containerInfo),h=s.pendingProps,t===null?s.child=ci(s,null,h,o):yr(t,s,h,o),s.child;case 11:return h=s.type,S=s.pendingProps,S=s.elementType===h?S:Yr(h,S),Mm(t,s,h,S,o);case 7:return yr(t,s,s.pendingProps,o),s.child;case 8:return yr(t,s,s.pendingProps.children,o),s.child;case 12:return yr(t,s,s.pendingProps.children,o),s.child;case 10:e:{if(h=s.type._context,S=s.pendingProps,I=s.memoizedProps,K=S.value,_t(Eo,h._currentValue),h._currentValue=K,I!==null)if(Xr(I.value,K)){if(I.children===S.children&&!xr.current){s=Rn(t,s,o);break e}}else for(I=s.child,I!==null&&(I.return=s);I!==null;){var he=I.dependencies;if(he!==null){K=I.child;for(var me=he.firstContext;me!==null;){if(me.context===h){if(I.tag===1){me=An(-1,o&-o),me.tag=2;var be=I.updateQueue;if(be!==null){be=be.shared;var Pe=be.pending;Pe===null?me.next=me:(me.next=Pe.next,Pe.next=me),be.pending=me}}I.lanes|=o,me=I.alternate,me!==null&&(me.lanes|=o),Yc(I.return,o,s),he.lanes|=o;break}me=me.next}}else if(I.tag===10)K=I.type===s.type?null:I.child;else if(I.tag===18){if(K=I.return,K===null)throw Error(i(341));K.lanes|=o,he=K.alternate,he!==null&&(he.lanes|=o),Yc(K,o,s),K=I.sibling}else K=I.child;if(K!==null)K.return=I;else for(K=I;K!==null;){if(K===s){K=null;break}if(I=K.sibling,I!==null){I.return=K.return,K=I;break}K=K.return}I=K}yr(t,s,S.children,o),s=s.child}return s;case 9:return S=s.type,h=s.pendingProps.children,di(s,o),S=Mr(S),h=h(S),s.flags|=1,yr(t,s,h,o),s.child;case 14:return h=s.type,S=Yr(h,s.pendingProps),S=Yr(h.type,S),Um(t,s,h,S,o);case 15:return $m(t,s,s.type,s.pendingProps,o);case 17:return h=s.type,S=s.pendingProps,S=s.elementType===h?S:Yr(h,S),Bo(t,s),s.tag=1,wr(h)?(t=!0,bo(s)):t=!1,di(s,o),zm(s,h,S),pu(s,h,S,o),vu(null,s,h,!0,t,o);case 19:return Xm(t,s,o);case 22:return Hm(t,s,o)}throw Error(i(156,s.tag))};function wy(t,s){return Qf(t,s)}function a1(t,s,o,h){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hr(t,s,o,h){return new a1(t,s,o,h)}function Lu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function o1(t){if(typeof t=="function")return Lu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===H)return 11;if(t===Z)return 14}return 2}function ds(t,s){var o=t.alternate;return o===null?(o=Hr(t.tag,s,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=s,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,s=t.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function Xo(t,s,o,h,S,I){var K=2;if(h=t,typeof t=="function")Lu(t)&&(K=1);else if(typeof t=="string")K=5;else e:switch(t){case M:return Rs(o.children,S,I,s);case $:K=8,S|=8;break;case D:return t=Hr(12,o,s,S|2),t.elementType=D,t.lanes=I,t;case q:return t=Hr(13,o,s,S),t.elementType=q,t.lanes=I,t;case T:return t=Hr(19,o,s,S),t.elementType=T,t.lanes=I,t;case Y:return Jo(o,S,I,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case le:K=10;break e;case pe:K=9;break e;case H:K=11;break e;case Z:K=14;break e;case Q:K=16,h=null;break e}throw Error(i(130,t==null?t:typeof t,""))}return s=Hr(K,o,s,S),s.elementType=t,s.type=h,s.lanes=I,s}function Rs(t,s,o,h){return t=Hr(7,t,h,s),t.lanes=o,t}function Jo(t,s,o,h){return t=Hr(22,t,h,s),t.elementType=Y,t.lanes=o,t.stateNode={isHidden:!1},t}function Bu(t,s,o){return t=Hr(6,t,null,s),t.lanes=o,t}function Mu(t,s,o){return s=Hr(4,t.children!==null?t.children:[],t.key,s),s.lanes=o,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function l1(t,s,o,h,S){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fc(0),this.expirationTimes=fc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fc(0),this.identifierPrefix=h,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function Uu(t,s,o,h,S,I,K,he,me){return t=new l1(t,s,o,he,me),s===1?(s=1,I===!0&&(s|=8)):s=0,I=Hr(3,null,null,s),t.current=I,I.stateNode=t,I.memoizedState={element:h,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},eu(I),t}function c1(t,s,o){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:h==null?null:""+h,children:t,containerInfo:s,implementation:o}}function by(t){if(!t)return rs;t=t._reactInternals;e:{if(kn(t)!==t||t.tag!==1)throw Error(i(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(wr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(i(171))}if(t.tag===1){var o=t.type;if(wr(o))return Zp(t,o,s)}return s}function jy(t,s,o,h,S,I,K,he,me){return t=Uu(o,h,!0,t,S,I,K,he,me),t.context=by(null),o=t.current,h=gr(),S=cs(o),I=An(h,S),I.callback=s??null,is(o,I,S),t.current.lanes=S,Vi(t,S,h),Nr(t,h),t}function Yo(t,s,o,h){var S=s.current,I=gr(),K=cs(S);return o=by(o),s.context===null?s.context=o:s.pendingContext=o,s=An(I,K),s.payload={element:t},h=h===void 0?null:h,h!==null&&(s.callback=h),t=is(S,s,K),t!==null&&(tn(t,S,K,I),To(t,S,K)),K}function Qo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ny(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<s?o:s}}function $u(t,s){Ny(t,s),(t=t.alternate)&&Ny(t,s)}function u1(){return null}var ky=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hu(t){this._internalRoot=t}el.prototype.render=Hu.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(i(409));Yo(t,s,null,null)},el.prototype.unmount=Hu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Cs(function(){Yo(null,t,null,null)}),s[_n]=null}};function el(t){this._internalRoot=t}el.prototype.unstable_scheduleHydration=function(t){if(t){var s=op();t={blockedOn:null,target:t,priority:s};for(var o=0;o<Jn.length&&s!==0&&s<Jn[o].priority;o++);Jn.splice(o,0,t),o===0&&up(t)}};function Wu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function tl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function _y(){}function d1(t,s,o,h,S){if(S){if(typeof h=="function"){var I=h;h=function(){var be=Qo(K);I.call(be)}}var K=jy(s,h,t,0,null,!1,!1,"",_y);return t._reactRootContainer=K,t[_n]=K.current,ia(t.nodeType===8?t.parentNode:t),Cs(),K}for(;S=t.lastChild;)t.removeChild(S);if(typeof h=="function"){var he=h;h=function(){var be=Qo(me);he.call(be)}}var me=Uu(t,0,!1,null,null,!1,!1,"",_y);return t._reactRootContainer=me,t[_n]=me.current,ia(t.nodeType===8?t.parentNode:t),Cs(function(){Yo(s,me,o,h)}),me}function rl(t,s,o,h,S){var I=o._reactRootContainer;if(I){var K=I;if(typeof S=="function"){var he=S;S=function(){var me=Qo(K);he.call(me)}}Yo(s,K,t,S)}else K=d1(o,s,t,S,h);return Qo(K)}ip=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var o=Wi(s.pendingLanes);o!==0&&(pc(s,o|1),Nr(s,Bt()),(ft&6)===0&&(yi=Bt()+500,ns()))}break;case 13:Cs(function(){var h=Tn(t,1);if(h!==null){var S=gr();tn(h,t,1,S)}}),$u(t,1)}},mc=function(t){if(t.tag===13){var s=Tn(t,134217728);if(s!==null){var o=gr();tn(s,t,134217728,o)}$u(t,134217728)}},ap=function(t){if(t.tag===13){var s=cs(t),o=Tn(t,s);if(o!==null){var h=gr();tn(o,t,s,h)}$u(t,s)}},op=function(){return gt},lp=function(t,s){var o=gt;try{return gt=t,s()}finally{gt=o}},un=function(t,s,o){switch(s){case"input":if(x(t,o),s=o.name,o.type==="radio"&&s!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<o.length;s++){var h=o[s];if(h!==t&&h.form===t.form){var S=xo(h);if(!S)throw Error(i(90));L(h),x(h,S)}}}break;case"textarea":ke(t,o);break;case"select":s=o.value,s!=null&&oe(t,!!o.multiple,s,!1)}},Le=Iu,Oe=Cs;var h1={usingClientEntryPoint:!1,Events:[la,ni,xo,_e,Te,Iu]},ja={findFiberByHostInstance:ws,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},f1={bundleType:ja.bundleType,version:ja.version,rendererPackageName:ja.rendererPackageName,rendererConfig:ja.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Jf(t),t===null?null:t.stateNode},findFiberByHostInstance:ja.findFiberByHostInstance||u1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nl.isDisabled&&nl.supportsFiber)try{Qa=nl.inject(f1),dn=nl}catch{}}return kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=h1,kr.createPortal=function(t,s){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wu(s))throw Error(i(200));return c1(t,s,null,o)},kr.createRoot=function(t,s){if(!Wu(t))throw Error(i(299));var o=!1,h="",S=ky;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(S=s.onRecoverableError)),s=Uu(t,1,!1,null,null,o,!1,h,S),t[_n]=s.current,ia(t.nodeType===8?t.parentNode:t),new Hu(s)},kr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=Jf(s),t=t===null?null:t.stateNode,t},kr.flushSync=function(t){return Cs(t)},kr.hydrate=function(t,s,o){if(!tl(s))throw Error(i(200));return rl(null,t,s,!0,o)},kr.hydrateRoot=function(t,s,o){if(!Wu(t))throw Error(i(405));var h=o!=null&&o.hydratedSources||null,S=!1,I="",K=ky;if(o!=null&&(o.unstable_strictMode===!0&&(S=!0),o.identifierPrefix!==void 0&&(I=o.identifierPrefix),o.onRecoverableError!==void 0&&(K=o.onRecoverableError)),s=jy(s,null,t,1,o??null,S,!1,I,K),t[_n]=s.current,ia(t),h)for(t=0;t<h.length;t++)o=h[t],S=o._getVersion,S=S(o._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[o,S]:s.mutableSourceEagerHydrationData.push(o,S);return new el(s)},kr.render=function(t,s,o){if(!tl(s))throw Error(i(200));return rl(null,t,s,!1,o)},kr.unmountComponentAtNode=function(t){if(!tl(t))throw Error(i(40));return t._reactRootContainer?(Cs(function(){rl(null,null,t,!1,function(){t._reactRootContainer=null,t[_n]=null})}),!0):!1},kr.unstable_batchedUpdates=Iu,kr.unstable_renderSubtreeIntoContainer=function(t,s,o,h){if(!tl(o))throw Error(i(200));if(t==null||t._reactInternals===void 0)throw Error(i(38));return rl(t,s,o,!1,h)},kr.version="18.3.1-next-f1338f8080-20240426",kr}var zy;function b1(){if(zy)return Ku.exports;zy=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Ku.exports=w1(),Ku.exports}var Oy;function j1(){if(Oy)return il;Oy=1;var r=b1();return il.createRoot=r.createRoot,il.hydrateRoot=r.hydrateRoot,il}var N1=j1();const k1=wx(N1);/**
 * react-router v7.7.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Iy="popstate";function _1(r={}){function e(a,l){let{pathname:c,search:d,hash:u}=a.location;return Fl("",{pathname:c,search:d,hash:u},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function i(a,l){return typeof l=="string"?l:Ci(l)}return bx(e,i,null,r)}function S1(r={}){function e(l,c){let{pathname:d="/",search:u="",hash:p=""}=Vs(l.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),Fl("",{pathname:d,search:u,hash:p},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function i(l,c){let d=l.document.querySelector("base"),u="";if(d&&d.getAttribute("href")){let p=l.location.href,y=p.indexOf("#");u=y===-1?p:p.slice(0,y)}return u+"#"+(typeof c=="string"?c:Ci(c))}function a(l,c){Kr(l.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(c)})`)}return bx(e,i,a,r)}function At(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Kr(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function E1(){return Math.random().toString(36).substring(2,10)}function Fy(r,e){return{usr:r.state,key:r.key,idx:e}}function Fl(r,e,i=null,a){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Vs(e):e,state:i,key:e&&e.key||a||E1()}}function Ci({pathname:r="/",search:e="",hash:i=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),i&&i!=="#"&&(r+=i.charAt(0)==="#"?i:"#"+i),r}function Vs(r){let e={};if(r){let i=r.indexOf("#");i>=0&&(e.hash=r.substring(i),r=r.substring(0,i));let a=r.indexOf("?");a>=0&&(e.search=r.substring(a),r=r.substring(0,a)),r&&(e.pathname=r)}return e}function bx(r,e,i,a={}){let{window:l=document.defaultView,v5Compat:c=!1}=a,d=l.history,u="POP",p=null,y=v();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function v(){return(d.state||{idx:null}).idx}function k(){u="POP";let j=v(),f=j==null?null:j-y;y=j,p&&p({action:u,location:g.location,delta:f})}function E(j,f){u="PUSH";let b=Fl(g.location,j,f);i&&i(b,j),y=v()+1;let w=Fy(b,y),_=g.createHref(b);try{d.pushState(w,"",_)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;l.location.assign(_)}c&&p&&p({action:u,location:g.location,delta:1})}function C(j,f){u="REPLACE";let b=Fl(g.location,j,f);i&&i(b,j),y=v();let w=Fy(b,y),_=g.createHref(b);d.replaceState(w,"",_),c&&p&&p({action:u,location:g.location,delta:0})}function N(j){return C1(j)}let g={get action(){return u},get location(){return r(l,d)},listen(j){if(p)throw new Error("A history only accepts one active listener");return l.addEventListener(Iy,k),p=j,()=>{l.removeEventListener(Iy,k),p=null}},createHref(j){return e(l,j)},createURL:N,encodeLocation(j){let f=N(j);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:E,replace:C,go(j){return d.go(j)}};return g}function C1(r,e=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),At(i,"No window.location.(origin|href) available to create URL");let a=typeof r=="string"?r:Ci(r);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=i+a),new URL(a,i)}function jx(r,e,i="/"){return T1(r,e,i,!1)}function T1(r,e,i,a){let l=typeof e=="string"?Vs(e):e,c=$n(l.pathname||"/",i);if(c==null)return null;let d=Nx(r);A1(d);let u=null;for(let p=0;u==null&&p<d.length;++p){let y=U1(c);u=B1(d[p],y,a)}return u}function Nx(r,e=[],i=[],a=""){let l=(c,d,u)=>{let p={relativePath:u===void 0?c.path||"":u,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};p.relativePath.startsWith("/")&&(At(p.relativePath.startsWith(a),`Absolute route path "${p.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(a.length));let y=Mn([a,p.relativePath]),v=i.concat(p);c.children&&c.children.length>0&&(At(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),Nx(c.children,e,v,y)),!(c.path==null&&!c.index)&&e.push({path:y,score:D1(y,c.index),routesMeta:v})};return r.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))l(c,d);else for(let u of kx(c.path))l(c,d,u)}),e}function kx(r){let e=r.split("/");if(e.length===0)return[];let[i,...a]=e,l=i.endsWith("?"),c=i.replace(/\?$/,"");if(a.length===0)return l?[c,""]:[c];let d=kx(a.join("/")),u=[];return u.push(...d.map(p=>p===""?c:[c,p].join("/"))),l&&u.push(...d),u.map(p=>r.startsWith("/")&&p===""?"/":p)}function A1(r){r.sort((e,i)=>e.score!==i.score?i.score-e.score:L1(e.routesMeta.map(a=>a.childrenIndex),i.routesMeta.map(a=>a.childrenIndex)))}var R1=/^:[\w-]+$/,P1=3,z1=2,O1=1,I1=10,F1=-2,Dy=r=>r==="*";function D1(r,e){let i=r.split("/"),a=i.length;return i.some(Dy)&&(a+=F1),e&&(a+=z1),i.filter(l=>!Dy(l)).reduce((l,c)=>l+(R1.test(c)?P1:c===""?O1:I1),a)}function L1(r,e){return r.length===e.length&&r.slice(0,-1).every((a,l)=>a===e[l])?r[r.length-1]-e[e.length-1]:0}function B1(r,e,i=!1){let{routesMeta:a}=r,l={},c="/",d=[];for(let u=0;u<a.length;++u){let p=a[u],y=u===a.length-1,v=c==="/"?e:e.slice(c.length)||"/",k=Dl({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},v),E=p.route;if(!k&&y&&i&&!a[a.length-1].route.index&&(k=Dl({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!k)return null;Object.assign(l,k.params),d.push({params:l,pathname:Mn([c,k.pathname]),pathnameBase:V1(Mn([c,k.pathnameBase])),route:E}),k.pathnameBase!=="/"&&(c=Mn([c,k.pathnameBase]))}return d}function Dl(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[i,a]=M1(r.path,r.caseSensitive,r.end),l=e.match(i);if(!l)return null;let c=l[0],d=c.replace(/(.)\/+$/,"$1"),u=l.slice(1);return{params:a.reduce((y,{paramName:v,isOptional:k},E)=>{if(v==="*"){let N=u[E]||"";d=c.slice(0,c.length-N.length).replace(/(.)\/+$/,"$1")}const C=u[E];return k&&!C?y[v]=void 0:y[v]=(C||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:d,pattern:r}}function M1(r,e=!1,i=!0){Kr(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let a=[],l="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,u,p)=>(a.push({paramName:u,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(a.push({paramName:"*"}),l+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?l+="\\/*$":r!==""&&r!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),a]}function U1(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Kr(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function $n(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let i=e.endsWith("/")?e.length-1:e.length,a=r.charAt(i);return a&&a!=="/"?null:r.slice(i)||"/"}function $1(r,e="/"){let{pathname:i,search:a="",hash:l=""}=typeof r=="string"?Vs(r):r;return{pathname:i?i.startsWith("/")?i:H1(i,e):e,search:q1(a),hash:K1(l)}}function H1(r,e){let i=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(l=>{l===".."?i.length>1&&i.pop():l!=="."&&i.push(l)}),i.length>1?i.join("/"):"/"}function Xu(r,e,i,a){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function W1(r){return r.filter((e,i)=>i===0||e.route.path&&e.route.path.length>0)}function jf(r){let e=W1(r);return e.map((i,a)=>a===e.length-1?i.pathname:i.pathnameBase)}function Nf(r,e,i,a=!1){let l;typeof r=="string"?l=Vs(r):(l={...r},At(!l.pathname||!l.pathname.includes("?"),Xu("?","pathname","search",l)),At(!l.pathname||!l.pathname.includes("#"),Xu("#","pathname","hash",l)),At(!l.search||!l.search.includes("#"),Xu("#","search","hash",l)));let c=r===""||l.pathname==="",d=c?"/":l.pathname,u;if(d==null)u=i;else{let k=e.length-1;if(!a&&d.startsWith("..")){let E=d.split("/");for(;E[0]==="..";)E.shift(),k-=1;l.pathname=E.join("/")}u=k>=0?e[k]:"/"}let p=$1(l,u),y=d&&d!=="/"&&d.endsWith("/"),v=(c||d===".")&&i.endsWith("/");return!p.pathname.endsWith("/")&&(y||v)&&(p.pathname+="/"),p}var Mn=r=>r.join("/").replace(/\/\/+/g,"/"),V1=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),q1=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,K1=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function G1(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var _x=["POST","PUT","PATCH","DELETE"];new Set(_x);var Z1=["GET",..._x];new Set(Z1);var Fi=V.createContext(null);Fi.displayName="DataRouter";var Vl=V.createContext(null);Vl.displayName="DataRouterState";V.createContext(!1);var Sx=V.createContext({isTransitioning:!1});Sx.displayName="ViewTransition";var X1=V.createContext(new Map);X1.displayName="Fetchers";var J1=V.createContext(null);J1.displayName="Await";var sn=V.createContext(null);sn.displayName="Navigation";var La=V.createContext(null);La.displayName="Location";var an=V.createContext({outlet:null,matches:[],isDataRoute:!1});an.displayName="Route";var kf=V.createContext(null);kf.displayName="RouteError";function Y1(r,{relative:e}={}){At(Di(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:a}=V.useContext(sn),{hash:l,pathname:c,search:d}=Ma(r,{relative:e}),u=c;return i!=="/"&&(u=c==="/"?i:Mn([i,c])),a.createHref({pathname:u,search:d,hash:l})}function Di(){return V.useContext(La)!=null}function on(){return At(Di(),"useLocation() may be used only in the context of a <Router> component."),V.useContext(La).location}var Ex="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Cx(r){V.useContext(sn).static||V.useLayoutEffect(r)}function qs(){let{isDataRoute:r}=V.useContext(an);return r?dj():Q1()}function Q1(){At(Di(),"useNavigate() may be used only in the context of a <Router> component.");let r=V.useContext(Fi),{basename:e,navigator:i}=V.useContext(sn),{matches:a}=V.useContext(an),{pathname:l}=on(),c=JSON.stringify(jf(a)),d=V.useRef(!1);return Cx(()=>{d.current=!0}),V.useCallback((p,y={})=>{if(Kr(d.current,Ex),!d.current)return;if(typeof p=="number"){i.go(p);return}let v=Nf(p,JSON.parse(c),l,y.relative==="path");r==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Mn([e,v.pathname])),(y.replace?i.replace:i.push)(v,y.state,y)},[e,i,c,l,r])}V.createContext(null);function Ba(){let{matches:r}=V.useContext(an),e=r[r.length-1];return e?e.params:{}}function Ma(r,{relative:e}={}){let{matches:i}=V.useContext(an),{pathname:a}=on(),l=JSON.stringify(jf(i));return V.useMemo(()=>Nf(r,JSON.parse(l),a,e==="path"),[r,l,a,e])}function ej(r,e){return Tx(r,e)}function Tx(r,e,i,a){At(Di(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=V.useContext(sn),{matches:c}=V.useContext(an),d=c[c.length-1],u=d?d.params:{},p=d?d.pathname:"/",y=d?d.pathnameBase:"/",v=d&&d.route;{let f=v&&v.path||"";Ax(p,!v||f.endsWith("*")||f.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${f}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${f}"> to <Route path="${f==="/"?"*":`${f}/*`}">.`)}let k=on(),E;if(e){let f=typeof e=="string"?Vs(e):e;At(y==="/"||f.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${f.pathname}" was given in the \`location\` prop.`),E=f}else E=k;let C=E.pathname||"/",N=C;if(y!=="/"){let f=y.replace(/^\//,"").split("/");N="/"+C.replace(/^\//,"").split("/").slice(f.length).join("/")}let g=jx(r,{pathname:N});Kr(v||g!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),Kr(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=ij(g&&g.map(f=>Object.assign({},f,{params:Object.assign({},u,f.params),pathname:Mn([y,l.encodeLocation?l.encodeLocation(f.pathname).pathname:f.pathname]),pathnameBase:f.pathnameBase==="/"?y:Mn([y,l.encodeLocation?l.encodeLocation(f.pathnameBase).pathname:f.pathnameBase])})),c,i,a);return e&&j?V.createElement(La.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},j):j}function tj(){let r=uj(),e=G1(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),i=r instanceof Error?r.stack:null,a="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:a},c={padding:"2px 4px",backgroundColor:a},d=null;return console.error("Error handled by React Router default ErrorBoundary:",r),d=V.createElement(V.Fragment,null,V.createElement("p",null," Hey developer "),V.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",V.createElement("code",{style:c},"ErrorBoundary")," or"," ",V.createElement("code",{style:c},"errorElement")," prop on your route.")),V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),i?V.createElement("pre",{style:l},i):null,d)}var rj=V.createElement(tj,null),nj=class extends V.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?V.createElement(an.Provider,{value:this.props.routeContext},V.createElement(kf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function sj({routeContext:r,match:e,children:i}){let a=V.useContext(Fi);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),V.createElement(an.Provider,{value:r},i)}function ij(r,e=[],i=null,a=null){if(r==null){if(!i)return null;if(i.errors)r=i.matches;else if(e.length===0&&!i.initialized&&i.matches.length>0)r=i.matches;else return null}let l=r,c=i?.errors;if(c!=null){let p=l.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);At(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,p+1))}let d=!1,u=-1;if(i)for(let p=0;p<l.length;p++){let y=l[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(u=p),y.route.id){let{loaderData:v,errors:k}=i,E=y.route.loader&&!v.hasOwnProperty(y.route.id)&&(!k||k[y.route.id]===void 0);if(y.route.lazy||E){d=!0,u>=0?l=l.slice(0,u+1):l=[l[0]];break}}}return l.reduceRight((p,y,v)=>{let k,E=!1,C=null,N=null;i&&(k=c&&y.route.id?c[y.route.id]:void 0,C=y.route.errorElement||rj,d&&(u<0&&v===0?(Ax("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,N=null):u===v&&(E=!0,N=y.route.hydrateFallbackElement||null)));let g=e.concat(l.slice(0,v+1)),j=()=>{let f;return k?f=C:E?f=N:y.route.Component?f=V.createElement(y.route.Component,null):y.route.element?f=y.route.element:f=p,V.createElement(sj,{match:y,routeContext:{outlet:p,matches:g,isDataRoute:i!=null},children:f})};return i&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?V.createElement(nj,{location:i.location,revalidation:i.revalidation,component:C,error:k,children:j(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):j()},null)}function _f(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aj(r){let e=V.useContext(Fi);return At(e,_f(r)),e}function oj(r){let e=V.useContext(Vl);return At(e,_f(r)),e}function lj(r){let e=V.useContext(an);return At(e,_f(r)),e}function Sf(r){let e=lj(r),i=e.matches[e.matches.length-1];return At(i.route.id,`${r} can only be used on routes that contain a unique "id"`),i.route.id}function cj(){return Sf("useRouteId")}function uj(){let r=V.useContext(kf),e=oj("useRouteError"),i=Sf("useRouteError");return r!==void 0?r:e.errors?.[i]}function dj(){let{router:r}=aj("useNavigate"),e=Sf("useNavigate"),i=V.useRef(!1);return Cx(()=>{i.current=!0}),V.useCallback(async(l,c={})=>{Kr(i.current,Ex),i.current&&(typeof l=="number"?r.navigate(l):await r.navigate(l,{fromRouteId:e,...c}))},[r,e])}var Ly={};function Ax(r,e,i){!e&&!Ly[r]&&(Ly[r]=!0,Kr(!1,i))}V.memo(hj);function hj({routes:r,future:e,state:i}){return Tx(r,void 0,i,e)}function rf({to:r,replace:e,state:i,relative:a}){At(Di(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=V.useContext(sn);Kr(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=V.useContext(an),{pathname:d}=on(),u=qs(),p=Nf(r,jf(c),d,a==="path"),y=JSON.stringify(p);return V.useEffect(()=>{u(JSON.parse(y),{replace:e,state:i,relative:a})},[u,y,a,e,i]),null}function dr(r){At(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Rx({basename:r="/",children:e=null,location:i,navigationType:a="POP",navigator:l,static:c=!1}){At(!Di(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=r.replace(/^\/*/,"/"),u=V.useMemo(()=>({basename:d,navigator:l,static:c,future:{}}),[d,l,c]);typeof i=="string"&&(i=Vs(i));let{pathname:p="/",search:y="",hash:v="",state:k=null,key:E="default"}=i,C=V.useMemo(()=>{let N=$n(p,d);return N==null?null:{location:{pathname:N,search:y,hash:v,state:k,key:E},navigationType:a}},[d,p,y,v,k,E,a]);return Kr(C!=null,`<Router basename="${d}"> is not able to match the URL "${p}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:V.createElement(sn.Provider,{value:u},V.createElement(La.Provider,{children:e,value:C}))}function fj({children:r,location:e}){return ej(nf(r),e)}function nf(r,e=[]){let i=[];return V.Children.forEach(r,(a,l)=>{if(!V.isValidElement(a))return;let c=[...e,l];if(a.type===V.Fragment){i.push.apply(i,nf(a.props.children,c));return}At(a.type===dr,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),At(!a.props.index||!a.props.children,"An index route cannot have child routes.");let d={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=nf(a.props.children,c)),i.push(d)}),i}var Sl="get",El="application/x-www-form-urlencoded";function ql(r){return r!=null&&typeof r.tagName=="string"}function pj(r){return ql(r)&&r.tagName.toLowerCase()==="button"}function mj(r){return ql(r)&&r.tagName.toLowerCase()==="form"}function yj(r){return ql(r)&&r.tagName.toLowerCase()==="input"}function gj(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function vj(r,e){return r.button===0&&(!e||e==="_self")&&!gj(r)}var al=null;function xj(){if(al===null)try{new FormData(document.createElement("form"),0),al=!1}catch{al=!0}return al}var wj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ju(r){return r!=null&&!wj.has(r)?(Kr(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${El}"`),null):r}function bj(r,e){let i,a,l,c,d;if(mj(r)){let u=r.getAttribute("action");a=u?$n(u,e):null,i=r.getAttribute("method")||Sl,l=Ju(r.getAttribute("enctype"))||El,c=new FormData(r)}else if(pj(r)||yj(r)&&(r.type==="submit"||r.type==="image")){let u=r.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||u.getAttribute("action");if(a=p?$n(p,e):null,i=r.getAttribute("formmethod")||u.getAttribute("method")||Sl,l=Ju(r.getAttribute("formenctype"))||Ju(u.getAttribute("enctype"))||El,c=new FormData(u,r),!xj()){let{name:y,type:v,value:k}=r;if(v==="image"){let E=y?`${y}.`:"";c.append(`${E}x`,"0"),c.append(`${E}y`,"0")}else y&&c.append(y,k)}}else{if(ql(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=Sl,a=null,l=El,d=r}return c&&l==="text/plain"&&(d=c,c=void 0),{action:a,method:i.toLowerCase(),encType:l,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ef(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function jj(r,e,i){let a=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return a.pathname==="/"?a.pathname=`_root.${i}`:e&&$n(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${i}`,a}async function Nj(r,e){if(r.id in e)return e[r.id];try{let i=await import(r.module);return e[r.id]=i,i}catch(i){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function kj(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function _j(r,e,i){let a=await Promise.all(r.map(async l=>{let c=e.routes[l.route.id];if(c){let d=await Nj(c,i);return d.links?d.links():[]}return[]}));return Tj(a.flat(1).filter(kj).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function By(r,e,i,a,l,c){let d=(p,y)=>i[y]?p.route.id!==i[y].route.id:!0,u=(p,y)=>i[y].pathname!==p.pathname||i[y].route.path?.endsWith("*")&&i[y].params["*"]!==p.params["*"];return c==="assets"?e.filter((p,y)=>d(p,y)||u(p,y)):c==="data"?e.filter((p,y)=>{let v=a.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(d(p,y)||u(p,y))return!0;if(p.route.shouldRevalidate){let k=p.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof k=="boolean")return k}return!0}):[]}function Sj(r,e,{includeHydrateFallback:i}={}){return Ej(r.map(a=>{let l=e.routes[a.route.id];if(!l)return[];let c=[l.module];return l.clientActionModule&&(c=c.concat(l.clientActionModule)),l.clientLoaderModule&&(c=c.concat(l.clientLoaderModule)),i&&l.hydrateFallbackModule&&(c=c.concat(l.hydrateFallbackModule)),l.imports&&(c=c.concat(l.imports)),c}).flat(1))}function Ej(r){return[...new Set(r)]}function Cj(r){let e={},i=Object.keys(r).sort();for(let a of i)e[a]=r[a];return e}function Tj(r,e){let i=new Set;return new Set(e),r.reduce((a,l)=>{let c=JSON.stringify(Cj(l));return i.has(c)||(i.add(c),a.push({key:c,link:l})),a},[])}function Px(){let r=V.useContext(Fi);return Ef(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Aj(){let r=V.useContext(Vl);return Ef(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Cf=V.createContext(void 0);Cf.displayName="FrameworkContext";function zx(){let r=V.useContext(Cf);return Ef(r,"You must render this element inside a <HydratedRouter> element"),r}function Rj(r,e){let i=V.useContext(Cf),[a,l]=V.useState(!1),[c,d]=V.useState(!1),{onFocus:u,onBlur:p,onMouseEnter:y,onMouseLeave:v,onTouchStart:k}=e,E=V.useRef(null);V.useEffect(()=>{if(r==="render"&&d(!0),r==="viewport"){let g=f=>{f.forEach(b=>{d(b.isIntersecting)})},j=new IntersectionObserver(g,{threshold:.5});return E.current&&j.observe(E.current),()=>{j.disconnect()}}},[r]),V.useEffect(()=>{if(a){let g=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(g)}}},[a]);let C=()=>{l(!0)},N=()=>{l(!1),d(!1)};return i?r!=="intent"?[c,E,{}]:[c,E,{onFocus:ka(u,C),onBlur:ka(p,N),onMouseEnter:ka(y,C),onMouseLeave:ka(v,N),onTouchStart:ka(k,C)}]:[!1,E,{}]}function ka(r,e){return i=>{r&&r(i),i.defaultPrevented||e(i)}}function Pj({page:r,...e}){let{router:i}=Px(),a=V.useMemo(()=>jx(i.routes,r,i.basename),[i.routes,r,i.basename]);return a?V.createElement(Oj,{page:r,matches:a,...e}):null}function zj(r){let{manifest:e,routeModules:i}=zx(),[a,l]=V.useState([]);return V.useEffect(()=>{let c=!1;return _j(r,e,i).then(d=>{c||l(d)}),()=>{c=!0}},[r,e,i]),a}function Oj({page:r,matches:e,...i}){let a=on(),{manifest:l,routeModules:c}=zx(),{basename:d}=Px(),{loaderData:u,matches:p}=Aj(),y=V.useMemo(()=>By(r,e,p,l,a,"data"),[r,e,p,l,a]),v=V.useMemo(()=>By(r,e,p,l,a,"assets"),[r,e,p,l,a]),k=V.useMemo(()=>{if(r===a.pathname+a.search+a.hash)return[];let N=new Set,g=!1;if(e.forEach(f=>{let b=l.routes[f.route.id];!b||!b.hasLoader||(!y.some(w=>w.route.id===f.route.id)&&f.route.id in u&&c[f.route.id]?.shouldRevalidate||b.hasClientLoader?g=!0:N.add(f.route.id))}),N.size===0)return[];let j=jj(r,d,"data");return g&&N.size>0&&j.searchParams.set("_routes",e.filter(f=>N.has(f.route.id)).map(f=>f.route.id).join(",")),[j.pathname+j.search]},[d,u,a,l,y,e,r,c]),E=V.useMemo(()=>Sj(v,l),[v,l]),C=zj(v);return V.createElement(V.Fragment,null,k.map(N=>V.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...i})),E.map(N=>V.createElement("link",{key:N,rel:"modulepreload",href:N,...i})),C.map(({key:N,link:g})=>V.createElement("link",{key:N,...g})))}function Ij(...r){return e=>{r.forEach(i=>{typeof i=="function"?i(e):i!=null&&(i.current=e)})}}var Ox=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ox&&(window.__reactRouterVersion="7.7.0")}catch{}function Fj({basename:r,children:e,window:i}){let a=V.useRef();a.current==null&&(a.current=_1({window:i,v5Compat:!0}));let l=a.current,[c,d]=V.useState({action:l.action,location:l.location}),u=V.useCallback(p=>{V.startTransition(()=>d(p))},[d]);return V.useLayoutEffect(()=>l.listen(u),[l,u]),V.createElement(Rx,{basename:r,children:e,location:c.location,navigationType:c.action,navigator:l})}function Dj({basename:r,children:e,window:i}){let a=V.useRef();a.current==null&&(a.current=S1({window:i,v5Compat:!0}));let l=a.current,[c,d]=V.useState({action:l.action,location:l.location}),u=V.useCallback(p=>{V.startTransition(()=>d(p))},[d]);return V.useLayoutEffect(()=>l.listen(u),[l,u]),V.createElement(Rx,{basename:r,children:e,location:c.location,navigationType:c.action,navigator:l})}var Ix=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Kl=V.forwardRef(function({onClick:e,discover:i="render",prefetch:a="none",relative:l,reloadDocument:c,replace:d,state:u,target:p,to:y,preventScrollReset:v,viewTransition:k,...E},C){let{basename:N}=V.useContext(sn),g=typeof y=="string"&&Ix.test(y),j,f=!1;if(typeof y=="string"&&g&&(j=y,Ox))try{let D=new URL(window.location.href),le=y.startsWith("//")?new URL(D.protocol+y):new URL(y),pe=$n(le.pathname,N);le.origin===D.origin&&pe!=null?y=pe+le.search+le.hash:f=!0}catch{Kr(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=Y1(y,{relative:l}),[w,_,A]=Rj(a,E),B=Uj(y,{replace:d,state:u,target:p,preventScrollReset:v,relative:l,viewTransition:k});function M(D){e&&e(D),D.defaultPrevented||B(D)}let $=V.createElement("a",{...E,...A,href:j||b,onClick:f||c?e:M,ref:Ij(C,_),target:p,"data-discover":!g&&i==="render"?"true":void 0});return w&&!g?V.createElement(V.Fragment,null,$,V.createElement(Pj,{page:b})):$});Kl.displayName="Link";var Lj=V.forwardRef(function({"aria-current":e="page",caseSensitive:i=!1,className:a="",end:l=!1,style:c,to:d,viewTransition:u,children:p,...y},v){let k=Ma(d,{relative:y.relative}),E=on(),C=V.useContext(Vl),{navigator:N,basename:g}=V.useContext(sn),j=C!=null&&qj(k)&&u===!0,f=N.encodeLocation?N.encodeLocation(k).pathname:k.pathname,b=E.pathname,w=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;i||(b=b.toLowerCase(),w=w?w.toLowerCase():null,f=f.toLowerCase()),w&&g&&(w=$n(w,g)||w);const _=f!=="/"&&f.endsWith("/")?f.length-1:f.length;let A=b===f||!l&&b.startsWith(f)&&b.charAt(_)==="/",B=w!=null&&(w===f||!l&&w.startsWith(f)&&w.charAt(f.length)==="/"),M={isActive:A,isPending:B,isTransitioning:j},$=A?e:void 0,D;typeof a=="function"?D=a(M):D=[a,A?"active":null,B?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let le=typeof c=="function"?c(M):c;return V.createElement(Kl,{...y,"aria-current":$,className:D,ref:v,style:le,to:d,viewTransition:u},typeof p=="function"?p(M):p)});Lj.displayName="NavLink";var Bj=V.forwardRef(({discover:r="render",fetcherKey:e,navigate:i,reloadDocument:a,replace:l,state:c,method:d=Sl,action:u,onSubmit:p,relative:y,preventScrollReset:v,viewTransition:k,...E},C)=>{let N=Wj(),g=Vj(u,{relative:y}),j=d.toLowerCase()==="get"?"get":"post",f=typeof u=="string"&&Ix.test(u),b=w=>{if(p&&p(w),w.defaultPrevented)return;w.preventDefault();let _=w.nativeEvent.submitter,A=_?.getAttribute("formmethod")||d;N(_||w.currentTarget,{fetcherKey:e,method:A,navigate:i,replace:l,state:c,relative:y,preventScrollReset:v,viewTransition:k})};return V.createElement("form",{ref:C,method:j,action:g,onSubmit:a?p:b,...E,"data-discover":!f&&r==="render"?"true":void 0})});Bj.displayName="Form";function Mj(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Fx(r){let e=V.useContext(Fi);return At(e,Mj(r)),e}function Uj(r,{target:e,replace:i,state:a,preventScrollReset:l,relative:c,viewTransition:d}={}){let u=qs(),p=on(),y=Ma(r,{relative:c});return V.useCallback(v=>{if(vj(v,e)){v.preventDefault();let k=i!==void 0?i:Ci(p)===Ci(y);u(r,{replace:k,state:a,preventScrollReset:l,relative:c,viewTransition:d})}},[p,u,y,i,a,e,r,l,c,d])}var $j=0,Hj=()=>`__${String(++$j)}__`;function Wj(){let{router:r}=Fx("useSubmit"),{basename:e}=V.useContext(sn),i=cj();return V.useCallback(async(a,l={})=>{let{action:c,method:d,encType:u,formData:p,body:y}=bj(a,e);if(l.navigate===!1){let v=l.fetcherKey||Hj();await r.fetch(v,i,l.action||c,{preventScrollReset:l.preventScrollReset,formData:p,body:y,formMethod:l.method||d,formEncType:l.encType||u,flushSync:l.flushSync})}else await r.navigate(l.action||c,{preventScrollReset:l.preventScrollReset,formData:p,body:y,formMethod:l.method||d,formEncType:l.encType||u,replace:l.replace,state:l.state,fromRouteId:i,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,e,i])}function Vj(r,{relative:e}={}){let{basename:i}=V.useContext(sn),a=V.useContext(an);At(a,"useFormAction must be used inside a RouteContext");let[l]=a.matches.slice(-1),c={...Ma(r||".",{relative:e})},d=on();if(r==null){c.search=d.search;let u=new URLSearchParams(c.search),p=u.getAll("index");if(p.some(v=>v==="")){u.delete("index"),p.filter(k=>k).forEach(k=>u.append("index",k));let v=u.toString();c.search=v?`?${v}`:""}}return(!r||r===".")&&l.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(c.pathname=c.pathname==="/"?i:Mn([i,c.pathname])),Ci(c)}function qj(r,e={}){let i=V.useContext(Sx);At(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Fx("useViewTransitionState"),l=Ma(r,{relative:e.relative});if(!i.isTransitioning)return!1;let c=$n(i.currentLocation.pathname,a)||i.currentLocation.pathname,d=$n(i.nextLocation.pathname,a)||i.nextLocation.pathname;return Dl(l.pathname,d)!=null||Dl(l.pathname,c)!=null}const Kj=typeof window<"u"?window.__APP_CONFIG__?.apiOrigin:void 0,Ti=Xj("http://localhost:8000",Kj),Gj=Ti.baseUrl;Ti.isAbsolute;const Zj=Yj(Ti);Ti.baseUrl||console.warn("API origin nen nastaven  pouvm stejn origin jako frontend. Pokud m backend na jin domn, nastav VITE_API_URL nebo window.__APP_CONFIG__.apiOrigin.");const yt=r=>{const e=r.startsWith("/")?r:`/${r}`;return Ti.baseUrl?`${Ti.baseUrl}${e}`:e};function Xj(r,e){const i=[r,e];for(const a of i){const l=Jj(a);if(l)return l}return{baseUrl:"",isAbsolute:!1}}function Jj(r){if(r==null)return null;const e=`${r}`.trim();if(!e)return{baseUrl:"",isAbsolute:!1};let i=e.replace(/\/+$/,"");if(!i)return{baseUrl:"",isAbsolute:!1};const a=/^https?:\/\//i.test(i);return!a&&!i.startsWith("/")&&(i=`/${i}`),{baseUrl:i,isAbsolute:a}}function Yj(r){return r.isAbsolute?r.baseUrl:typeof window<"u"?`${window.location.origin??""}${r.baseUrl}`:r.baseUrl}const Dt=r=>r?{Authorization:`Bearer ${r}`}:{};async function Tf(r){if(!r.ok){let e="";try{const i=await r.json();e=(i&&(i.detail||i.message))??""}catch{}throw new Error(e||`${r.status} ${r.statusText}`)}}async function Qj(r,e){const i=new URLSearchParams;i.set("username",r),i.set("password",e);const a=await fetch(yt("/auth/login"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:i});return await Tf(a),await a.json()}async function eN(r){const e=await fetch(yt("/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});await Tf(e),await e.json()}async function tN(r){const e=await fetch(yt("/auth/rt/lookup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});return await Tf(e),await e.json()}const Dx=V.createContext(void 0),Yu="revize_jwt",Qu="revize_email",rN=({children:r})=>{const[e,i]=V.useState(()=>localStorage.getItem(Yu)),[a,l]=V.useState(()=>localStorage.getItem(Qu)),c=V.useCallback((v,k)=>{i(v),l(k),localStorage.setItem(Yu,v),localStorage.setItem(Qu,k)},[]),d=V.useCallback(async(v,k)=>{const{access_token:E}=await Qj(v,k);c(E,v)},[c]),u=V.useCallback(async v=>{await eN(v)},[]),p=V.useCallback(()=>{i(null),l(null),localStorage.removeItem(Yu),localStorage.removeItem(Qu)},[]);V.useEffect(()=>{if(!e)return;const[,v]=e.split(".");try{const{exp:k}=JSON.parse(atob(v)),E=k*1e3-Date.now();if(E<=0)p();else{const C=setTimeout(p,E);return()=>clearTimeout(C)}}catch{p()}},[e,p]);const y={token:e,userEmail:a,login:d,register:u,logout:p};return n.jsx(Dx.Provider,{value:y,children:r})},Dr=()=>{const r=V.useContext(Dx);if(!r)throw new Error("useAuth must be used within AuthProvider");return r},Lx=V.createContext({profile:null,company:null,companies:[],loading:!0,loadingCompanies:!1,error:null,refreshUser:async()=>{},refreshCompanies:async()=>{},setActiveCompany:async()=>{}});async function ed(r){const e=r.headers.get("content-type")||"",i=await r.text();if(e.includes("application/json"))try{const a=JSON.parse(i);throw new Error(a?.detail||JSON.stringify(a))}catch{}throw new Error(`HTTP ${r.status}: ${i.slice(0,400)}`)}function nN(r){return{id:r?.id??r?.user_id??r?.userId,fullName:r?.full_name??r?.fullName??r?.name??"",email:r?.email??void 0,isAdmin:!!(r?.is_admin??r?.isAdmin??!1),phone:r?.phone??void 0,certificateNumber:r?.certificate_number??r?.certificateNumber??void 0,authorizationNumber:r?.authorization_number??r?.authorizationNumber??void 0,ico:r?.ico??void 0,dic:r?.dic??void 0,address:r?.address??void 0,activeCompanyId:r?.active_company_id??null}}function sN(r){return{id:r?.id??r?.company_id??r?._id??"",name:r?.name??r?.companyName??"",ico:r?.ico??r?.icoNumber??void 0,dic:r?.dic??r?.taxId??void 0,address:r?.address??void 0,phone:r?.phone??void 0,email:r?.email??void 0,is_active:r?.is_active??r?.active??null}}function My(r,e){return!e||!((r.name||"").toUpperCase()==="OSV")?r:{...r,dic:e.dic&&(!r.dic||!/^CZ/i.test(String(r.dic)))?e.dic:r.dic,ico:r.ico||e.ico,address:r.address||e.address,email:r.email||e.email,phone:r.phone||e.phone}}function iN({children:r}){const{token:e}=Dr(),[i,a]=V.useState(null),[l,c]=V.useState([]),[d,u]=V.useState(null),[p,y]=V.useState(!0),[v,k]=V.useState(!1),[E,C]=V.useState(null),N=V.useRef(!1),g=V.useCallback(async()=>{if(!e)return null;const A=await fetch(yt("users/me"),{headers:{Authorization:`Bearer ${e}`}});A.ok||await ed(A);const B=await A.json();return nN(B)},[e]),j=V.useCallback(async()=>{if(!e)return[];const A=await fetch(yt("users/companies"),{headers:{Authorization:`Bearer ${e}`}});A.ok||await ed(A);const B=await A.json();return(Array.isArray(B)?B:B?.items??[]).map(sN)},[e]),f=V.useCallback(async()=>{if(!e){a(null),c([]),u(null),y(!1),k(!1),C(null);return}if(!N.current){N.current=!0,y(!0),k(!0),C(null);try{const[A,B]=await Promise.all([g(),j()]),M=B.map(le=>My(le,A));a(A),c(M);const $=A?.activeCompanyId;let D=null;$!=null&&(D=M.find(le=>String(le.id)===String($))||null),D||(D=M.find(le=>(le.name||"").toUpperCase()==="OSV")||null),u(D),C(null)}catch(A){a(null),c([]),u(null),C(A?.message||"Naten profilu/firm selhalo")}finally{y(!1),k(!1),N.current=!1}}},[e,g,j]),b=V.useCallback(async()=>{if(!e){c([]),u(null);return}k(!0);try{const A=i??await g(),M=(await j()).map(le=>My(le,A||null));c(M);const $=A?.activeCompanyId;let D=null;$!=null&&(D=M.find(le=>String(le.id)===String($))||null),D||(D=M.find(le=>(le.name||"").toUpperCase()==="OSV")||null),u(D)}catch(A){C(A?.message||"Naten firem selhalo"),c([]),u(null)}finally{k(!1)}},[e,i,g,j]),w=V.useCallback(async A=>{if(!e)return;let B=null;if(A==="osvc"){const D=l.find(le=>(le.name||"").toUpperCase()==="OSV");B=D?D.id:null}else B=A;const M=B!=null&&l.find(D=>String(D.id)===String(B))||null;u(M),a(D=>D&&{...D,activeCompanyId:B});const $=await fetch(yt("users/me"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({active_company_id:B})});$.ok||await ed($),await f()},[e,l,f]);V.useEffect(()=>{f()},[f]),V.useEffect(()=>{const A=()=>{document.visibilityState==="visible"&&f()};return window.addEventListener("focus",A),()=>window.removeEventListener("focus",A)},[f]);const _=V.useMemo(()=>({profile:i,company:d,companies:l,loading:p,loadingCompanies:v,error:E,refreshUser:f,refreshCompanies:b,setActiveCompany:w}),[i,d,l,p,v,E,f,b,w]);return n.jsx(Lx.Provider,{value:_,children:r})}function ps(){return V.useContext(Lx)}function Bx(r,e){return function(){return r.apply(e,arguments)}}const{toString:aN}=Object.prototype,{getPrototypeOf:Af}=Object,{iterator:Gl,toStringTag:Mx}=Symbol,Zl=(r=>e=>{const i=aN.call(e);return r[i]||(r[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),ln=r=>(r=r.toLowerCase(),e=>Zl(e)===r),Xl=r=>e=>typeof e===r,{isArray:Li}=Array,Da=Xl("undefined");function Ua(r){return r!==null&&!Da(r)&&r.constructor!==null&&!Da(r.constructor)&&Er(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const Ux=ln("ArrayBuffer");function oN(r){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&Ux(r.buffer),e}const lN=Xl("string"),Er=Xl("function"),$x=Xl("number"),$a=r=>r!==null&&typeof r=="object",cN=r=>r===!0||r===!1,Cl=r=>{if(Zl(r)!=="object")return!1;const e=Af(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Mx in r)&&!(Gl in r)},uN=r=>{if(!$a(r)||Ua(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},dN=ln("Date"),hN=ln("File"),fN=ln("Blob"),pN=ln("FileList"),mN=r=>$a(r)&&Er(r.pipe),yN=r=>{let e;return r&&(typeof FormData=="function"&&r instanceof FormData||Er(r.append)&&((e=Zl(r))==="formdata"||e==="object"&&Er(r.toString)&&r.toString()==="[object FormData]"))},gN=ln("URLSearchParams"),[vN,xN,wN,bN]=["ReadableStream","Request","Response","Headers"].map(ln),jN=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ha(r,e,{allOwnKeys:i=!1}={}){if(r===null||typeof r>"u")return;let a,l;if(typeof r!="object"&&(r=[r]),Li(r))for(a=0,l=r.length;a<l;a++)e.call(null,r[a],a,r);else{if(Ua(r))return;const c=i?Object.getOwnPropertyNames(r):Object.keys(r),d=c.length;let u;for(a=0;a<d;a++)u=c[a],e.call(null,r[u],u,r)}}function Hx(r,e){if(Ua(r))return null;e=e.toLowerCase();const i=Object.keys(r);let a=i.length,l;for(;a-- >0;)if(l=i[a],e===l.toLowerCase())return l;return null}const Ls=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Wx=r=>!Da(r)&&r!==Ls;function sf(){const{caseless:r}=Wx(this)&&this||{},e={},i=(a,l)=>{const c=r&&Hx(e,l)||l;Cl(e[c])&&Cl(a)?e[c]=sf(e[c],a):Cl(a)?e[c]=sf({},a):Li(a)?e[c]=a.slice():e[c]=a};for(let a=0,l=arguments.length;a<l;a++)arguments[a]&&Ha(arguments[a],i);return e}const NN=(r,e,i,{allOwnKeys:a}={})=>(Ha(e,(l,c)=>{i&&Er(l)?r[c]=Bx(l,i):r[c]=l},{allOwnKeys:a}),r),kN=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),_N=(r,e,i,a)=>{r.prototype=Object.create(e.prototype,a),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:e.prototype}),i&&Object.assign(r.prototype,i)},SN=(r,e,i,a)=>{let l,c,d;const u={};if(e=e||{},r==null)return e;do{for(l=Object.getOwnPropertyNames(r),c=l.length;c-- >0;)d=l[c],(!a||a(d,r,e))&&!u[d]&&(e[d]=r[d],u[d]=!0);r=i!==!1&&Af(r)}while(r&&(!i||i(r,e))&&r!==Object.prototype);return e},EN=(r,e,i)=>{r=String(r),(i===void 0||i>r.length)&&(i=r.length),i-=e.length;const a=r.indexOf(e,i);return a!==-1&&a===i},CN=r=>{if(!r)return null;if(Li(r))return r;let e=r.length;if(!$x(e))return null;const i=new Array(e);for(;e-- >0;)i[e]=r[e];return i},TN=(r=>e=>r&&e instanceof r)(typeof Uint8Array<"u"&&Af(Uint8Array)),AN=(r,e)=>{const a=(r&&r[Gl]).call(r);let l;for(;(l=a.next())&&!l.done;){const c=l.value;e.call(r,c[0],c[1])}},RN=(r,e)=>{let i;const a=[];for(;(i=r.exec(e))!==null;)a.push(i);return a},PN=ln("HTMLFormElement"),zN=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,a,l){return a.toUpperCase()+l}),Uy=(({hasOwnProperty:r})=>(e,i)=>r.call(e,i))(Object.prototype),ON=ln("RegExp"),Vx=(r,e)=>{const i=Object.getOwnPropertyDescriptors(r),a={};Ha(i,(l,c)=>{let d;(d=e(l,c,r))!==!1&&(a[c]=d||l)}),Object.defineProperties(r,a)},IN=r=>{Vx(r,(e,i)=>{if(Er(r)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const a=r[i];if(Er(a)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},FN=(r,e)=>{const i={},a=l=>{l.forEach(c=>{i[c]=!0})};return Li(r)?a(r):a(String(r).split(e)),i},DN=()=>{},LN=(r,e)=>r!=null&&Number.isFinite(r=+r)?r:e;function BN(r){return!!(r&&Er(r.append)&&r[Mx]==="FormData"&&r[Gl])}const MN=r=>{const e=new Array(10),i=(a,l)=>{if($a(a)){if(e.indexOf(a)>=0)return;if(Ua(a))return a;if(!("toJSON"in a)){e[l]=a;const c=Li(a)?[]:{};return Ha(a,(d,u)=>{const p=i(d,l+1);!Da(p)&&(c[u]=p)}),e[l]=void 0,c}}return a};return i(r,0)},UN=ln("AsyncFunction"),$N=r=>r&&($a(r)||Er(r))&&Er(r.then)&&Er(r.catch),qx=((r,e)=>r?setImmediate:e?((i,a)=>(Ls.addEventListener("message",({source:l,data:c})=>{l===Ls&&c===i&&a.length&&a.shift()()},!1),l=>{a.push(l),Ls.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",Er(Ls.postMessage)),HN=typeof queueMicrotask<"u"?queueMicrotask.bind(Ls):typeof process<"u"&&process.nextTick||qx,WN=r=>r!=null&&Er(r[Gl]),Se={isArray:Li,isArrayBuffer:Ux,isBuffer:Ua,isFormData:yN,isArrayBufferView:oN,isString:lN,isNumber:$x,isBoolean:cN,isObject:$a,isPlainObject:Cl,isEmptyObject:uN,isReadableStream:vN,isRequest:xN,isResponse:wN,isHeaders:bN,isUndefined:Da,isDate:dN,isFile:hN,isBlob:fN,isRegExp:ON,isFunction:Er,isStream:mN,isURLSearchParams:gN,isTypedArray:TN,isFileList:pN,forEach:Ha,merge:sf,extend:NN,trim:jN,stripBOM:kN,inherits:_N,toFlatObject:SN,kindOf:Zl,kindOfTest:ln,endsWith:EN,toArray:CN,forEachEntry:AN,matchAll:RN,isHTMLForm:PN,hasOwnProperty:Uy,hasOwnProp:Uy,reduceDescriptors:Vx,freezeMethods:IN,toObjectSet:FN,toCamelCase:zN,noop:DN,toFiniteNumber:LN,findKey:Hx,global:Ls,isContextDefined:Wx,isSpecCompliantForm:BN,toJSONObject:MN,isAsyncFn:UN,isThenable:$N,setImmediate:qx,asap:HN,isIterable:WN};function it(r,e,i,a,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",e&&(this.code=e),i&&(this.config=i),a&&(this.request=a),l&&(this.response=l,this.status=l.status?l.status:null)}Se.inherits(it,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Se.toJSONObject(this.config),code:this.code,status:this.status}}});const Kx=it.prototype,Gx={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{Gx[r]={value:r}});Object.defineProperties(it,Gx);Object.defineProperty(Kx,"isAxiosError",{value:!0});it.from=(r,e,i,a,l,c)=>{const d=Object.create(Kx);return Se.toFlatObject(r,d,function(p){return p!==Error.prototype},u=>u!=="isAxiosError"),it.call(d,r.message,e,i,a,l),d.cause=r,d.name=r.name,c&&Object.assign(d,c),d};const VN=null;function af(r){return Se.isPlainObject(r)||Se.isArray(r)}function Zx(r){return Se.endsWith(r,"[]")?r.slice(0,-2):r}function $y(r,e,i){return r?r.concat(e).map(function(l,c){return l=Zx(l),!i&&c?"["+l+"]":l}).join(i?".":""):e}function qN(r){return Se.isArray(r)&&!r.some(af)}const KN=Se.toFlatObject(Se,{},null,function(e){return/^is[A-Z]/.test(e)});function Jl(r,e,i){if(!Se.isObject(r))throw new TypeError("target must be an object");e=e||new FormData,i=Se.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,j){return!Se.isUndefined(j[g])});const a=i.metaTokens,l=i.visitor||v,c=i.dots,d=i.indexes,p=(i.Blob||typeof Blob<"u"&&Blob)&&Se.isSpecCompliantForm(e);if(!Se.isFunction(l))throw new TypeError("visitor must be a function");function y(N){if(N===null)return"";if(Se.isDate(N))return N.toISOString();if(Se.isBoolean(N))return N.toString();if(!p&&Se.isBlob(N))throw new it("Blob is not supported. Use a Buffer instead.");return Se.isArrayBuffer(N)||Se.isTypedArray(N)?p&&typeof Blob=="function"?new Blob([N]):Buffer.from(N):N}function v(N,g,j){let f=N;if(N&&!j&&typeof N=="object"){if(Se.endsWith(g,"{}"))g=a?g:g.slice(0,-2),N=JSON.stringify(N);else if(Se.isArray(N)&&qN(N)||(Se.isFileList(N)||Se.endsWith(g,"[]"))&&(f=Se.toArray(N)))return g=Zx(g),f.forEach(function(w,_){!(Se.isUndefined(w)||w===null)&&e.append(d===!0?$y([g],_,c):d===null?g:g+"[]",y(w))}),!1}return af(N)?!0:(e.append($y(j,g,c),y(N)),!1)}const k=[],E=Object.assign(KN,{defaultVisitor:v,convertValue:y,isVisitable:af});function C(N,g){if(!Se.isUndefined(N)){if(k.indexOf(N)!==-1)throw Error("Circular reference detected in "+g.join("."));k.push(N),Se.forEach(N,function(f,b){(!(Se.isUndefined(f)||f===null)&&l.call(e,f,Se.isString(b)?b.trim():b,g,E))===!0&&C(f,g?g.concat(b):[b])}),k.pop()}}if(!Se.isObject(r))throw new TypeError("data must be an object");return C(r),e}function Hy(r){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(a){return e[a]})}function Rf(r,e){this._pairs=[],r&&Jl(r,this,e)}const Xx=Rf.prototype;Xx.append=function(e,i){this._pairs.push([e,i])};Xx.toString=function(e){const i=e?function(a){return e.call(this,a,Hy)}:Hy;return this._pairs.map(function(l){return i(l[0])+"="+i(l[1])},"").join("&")};function GN(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Jx(r,e,i){if(!e)return r;const a=i&&i.encode||GN;Se.isFunction(i)&&(i={serialize:i});const l=i&&i.serialize;let c;if(l?c=l(e,i):c=Se.isURLSearchParams(e)?e.toString():new Rf(e,i).toString(a),c){const d=r.indexOf("#");d!==-1&&(r=r.slice(0,d)),r+=(r.indexOf("?")===-1?"?":"&")+c}return r}class Wy{constructor(){this.handlers=[]}use(e,i,a){return this.handlers.push({fulfilled:e,rejected:i,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Se.forEach(this.handlers,function(a){a!==null&&e(a)})}}const Yx={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ZN=typeof URLSearchParams<"u"?URLSearchParams:Rf,XN=typeof FormData<"u"?FormData:null,JN=typeof Blob<"u"?Blob:null,YN={isBrowser:!0,classes:{URLSearchParams:ZN,FormData:XN,Blob:JN},protocols:["http","https","file","blob","url","data"]},Pf=typeof window<"u"&&typeof document<"u",of=typeof navigator=="object"&&navigator||void 0,QN=Pf&&(!of||["ReactNative","NativeScript","NS"].indexOf(of.product)<0),ek=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",tk=Pf&&window.location.href||"http://localhost",rk=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Pf,hasStandardBrowserEnv:QN,hasStandardBrowserWebWorkerEnv:ek,navigator:of,origin:tk},Symbol.toStringTag,{value:"Module"})),hr={...rk,...YN};function nk(r,e){return Jl(r,new hr.classes.URLSearchParams,{visitor:function(i,a,l,c){return hr.isNode&&Se.isBuffer(i)?(this.append(a,i.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)},...e})}function sk(r){return Se.matchAll(/\w+|\[(\w*)]/g,r).map(e=>e[0]==="[]"?"":e[1]||e[0])}function ik(r){const e={},i=Object.keys(r);let a;const l=i.length;let c;for(a=0;a<l;a++)c=i[a],e[c]=r[c];return e}function Qx(r){function e(i,a,l,c){let d=i[c++];if(d==="__proto__")return!0;const u=Number.isFinite(+d),p=c>=i.length;return d=!d&&Se.isArray(l)?l.length:d,p?(Se.hasOwnProp(l,d)?l[d]=[l[d],a]:l[d]=a,!u):((!l[d]||!Se.isObject(l[d]))&&(l[d]=[]),e(i,a,l[d],c)&&Se.isArray(l[d])&&(l[d]=ik(l[d])),!u)}if(Se.isFormData(r)&&Se.isFunction(r.entries)){const i={};return Se.forEachEntry(r,(a,l)=>{e(sk(a),l,i,0)}),i}return null}function ak(r,e,i){if(Se.isString(r))try{return(e||JSON.parse)(r),Se.trim(r)}catch(a){if(a.name!=="SyntaxError")throw a}return(i||JSON.stringify)(r)}const Wa={transitional:Yx,adapter:["xhr","http","fetch"],transformRequest:[function(e,i){const a=i.getContentType()||"",l=a.indexOf("application/json")>-1,c=Se.isObject(e);if(c&&Se.isHTMLForm(e)&&(e=new FormData(e)),Se.isFormData(e))return l?JSON.stringify(Qx(e)):e;if(Se.isArrayBuffer(e)||Se.isBuffer(e)||Se.isStream(e)||Se.isFile(e)||Se.isBlob(e)||Se.isReadableStream(e))return e;if(Se.isArrayBufferView(e))return e.buffer;if(Se.isURLSearchParams(e))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(c){if(a.indexOf("application/x-www-form-urlencoded")>-1)return nk(e,this.formSerializer).toString();if((u=Se.isFileList(e))||a.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return Jl(u?{"files[]":e}:e,p&&new p,this.formSerializer)}}return c||l?(i.setContentType("application/json",!1),ak(e)):e}],transformResponse:[function(e){const i=this.transitional||Wa.transitional,a=i&&i.forcedJSONParsing,l=this.responseType==="json";if(Se.isResponse(e)||Se.isReadableStream(e))return e;if(e&&Se.isString(e)&&(a&&!this.responseType||l)){const d=!(i&&i.silentJSONParsing)&&l;try{return JSON.parse(e)}catch(u){if(d)throw u.name==="SyntaxError"?it.from(u,it.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:hr.classes.FormData,Blob:hr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Se.forEach(["delete","get","head","post","put","patch"],r=>{Wa.headers[r]={}});const ok=Se.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),lk=r=>{const e={};let i,a,l;return r&&r.split(`
`).forEach(function(d){l=d.indexOf(":"),i=d.substring(0,l).trim().toLowerCase(),a=d.substring(l+1).trim(),!(!i||e[i]&&ok[i])&&(i==="set-cookie"?e[i]?e[i].push(a):e[i]=[a]:e[i]=e[i]?e[i]+", "+a:a)}),e},Vy=Symbol("internals");function _a(r){return r&&String(r).trim().toLowerCase()}function Tl(r){return r===!1||r==null?r:Se.isArray(r)?r.map(Tl):String(r)}function ck(r){const e=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=i.exec(r);)e[a[1]]=a[2];return e}const uk=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function td(r,e,i,a,l){if(Se.isFunction(a))return a.call(this,e,i);if(l&&(e=i),!!Se.isString(e)){if(Se.isString(a))return e.indexOf(a)!==-1;if(Se.isRegExp(a))return a.test(e)}}function dk(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,i,a)=>i.toUpperCase()+a)}function hk(r,e){const i=Se.toCamelCase(" "+e);["get","set","has"].forEach(a=>{Object.defineProperty(r,a+i,{value:function(l,c,d){return this[a].call(this,e,l,c,d)},configurable:!0})})}let Cr=class{constructor(e){e&&this.set(e)}set(e,i,a){const l=this;function c(u,p,y){const v=_a(p);if(!v)throw new Error("header name must be a non-empty string");const k=Se.findKey(l,v);(!k||l[k]===void 0||y===!0||y===void 0&&l[k]!==!1)&&(l[k||p]=Tl(u))}const d=(u,p)=>Se.forEach(u,(y,v)=>c(y,v,p));if(Se.isPlainObject(e)||e instanceof this.constructor)d(e,i);else if(Se.isString(e)&&(e=e.trim())&&!uk(e))d(lk(e),i);else if(Se.isObject(e)&&Se.isIterable(e)){let u={},p,y;for(const v of e){if(!Se.isArray(v))throw TypeError("Object iterator must return a key-value pair");u[y=v[0]]=(p=u[y])?Se.isArray(p)?[...p,v[1]]:[p,v[1]]:v[1]}d(u,i)}else e!=null&&c(i,e,a);return this}get(e,i){if(e=_a(e),e){const a=Se.findKey(this,e);if(a){const l=this[a];if(!i)return l;if(i===!0)return ck(l);if(Se.isFunction(i))return i.call(this,l,a);if(Se.isRegExp(i))return i.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,i){if(e=_a(e),e){const a=Se.findKey(this,e);return!!(a&&this[a]!==void 0&&(!i||td(this,this[a],a,i)))}return!1}delete(e,i){const a=this;let l=!1;function c(d){if(d=_a(d),d){const u=Se.findKey(a,d);u&&(!i||td(a,a[u],u,i))&&(delete a[u],l=!0)}}return Se.isArray(e)?e.forEach(c):c(e),l}clear(e){const i=Object.keys(this);let a=i.length,l=!1;for(;a--;){const c=i[a];(!e||td(this,this[c],c,e,!0))&&(delete this[c],l=!0)}return l}normalize(e){const i=this,a={};return Se.forEach(this,(l,c)=>{const d=Se.findKey(a,c);if(d){i[d]=Tl(l),delete i[c];return}const u=e?dk(c):String(c).trim();u!==c&&delete i[c],i[u]=Tl(l),a[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const i=Object.create(null);return Se.forEach(this,(a,l)=>{a!=null&&a!==!1&&(i[l]=e&&Se.isArray(a)?a.join(", "):a)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,i])=>e+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...i){const a=new this(e);return i.forEach(l=>a.set(l)),a}static accessor(e){const a=(this[Vy]=this[Vy]={accessors:{}}).accessors,l=this.prototype;function c(d){const u=_a(d);a[u]||(hk(l,d),a[u]=!0)}return Se.isArray(e)?e.forEach(c):c(e),this}};Cr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Se.reduceDescriptors(Cr.prototype,({value:r},e)=>{let i=e[0].toUpperCase()+e.slice(1);return{get:()=>r,set(a){this[i]=a}}});Se.freezeMethods(Cr);function rd(r,e){const i=this||Wa,a=e||i,l=Cr.from(a.headers);let c=a.data;return Se.forEach(r,function(u){c=u.call(i,c,l.normalize(),e?e.status:void 0)}),l.normalize(),c}function e0(r){return!!(r&&r.__CANCEL__)}function Bi(r,e,i){it.call(this,r??"canceled",it.ERR_CANCELED,e,i),this.name="CanceledError"}Se.inherits(Bi,it,{__CANCEL__:!0});function t0(r,e,i){const a=i.config.validateStatus;!i.status||!a||a(i.status)?r(i):e(new it("Request failed with status code "+i.status,[it.ERR_BAD_REQUEST,it.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function fk(r){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return e&&e[1]||""}function pk(r,e){r=r||10;const i=new Array(r),a=new Array(r);let l=0,c=0,d;return e=e!==void 0?e:1e3,function(p){const y=Date.now(),v=a[c];d||(d=y),i[l]=p,a[l]=y;let k=c,E=0;for(;k!==l;)E+=i[k++],k=k%r;if(l=(l+1)%r,l===c&&(c=(c+1)%r),y-d<e)return;const C=v&&y-v;return C?Math.round(E*1e3/C):void 0}}function mk(r,e){let i=0,a=1e3/e,l,c;const d=(y,v=Date.now())=>{i=v,l=null,c&&(clearTimeout(c),c=null),r(...y)};return[(...y)=>{const v=Date.now(),k=v-i;k>=a?d(y,v):(l=y,c||(c=setTimeout(()=>{c=null,d(l)},a-k)))},()=>l&&d(l)]}const Ll=(r,e,i=3)=>{let a=0;const l=pk(50,250);return mk(c=>{const d=c.loaded,u=c.lengthComputable?c.total:void 0,p=d-a,y=l(p),v=d<=u;a=d;const k={loaded:d,total:u,progress:u?d/u:void 0,bytes:p,rate:y||void 0,estimated:y&&u&&v?(u-d)/y:void 0,event:c,lengthComputable:u!=null,[e?"download":"upload"]:!0};r(k)},i)},qy=(r,e)=>{const i=r!=null;return[a=>e[0]({lengthComputable:i,total:r,loaded:a}),e[1]]},Ky=r=>(...e)=>Se.asap(()=>r(...e)),yk=hr.hasStandardBrowserEnv?((r,e)=>i=>(i=new URL(i,hr.origin),r.protocol===i.protocol&&r.host===i.host&&(e||r.port===i.port)))(new URL(hr.origin),hr.navigator&&/(msie|trident)/i.test(hr.navigator.userAgent)):()=>!0,gk=hr.hasStandardBrowserEnv?{write(r,e,i,a,l,c){const d=[r+"="+encodeURIComponent(e)];Se.isNumber(i)&&d.push("expires="+new Date(i).toGMTString()),Se.isString(a)&&d.push("path="+a),Se.isString(l)&&d.push("domain="+l),c===!0&&d.push("secure"),document.cookie=d.join("; ")},read(r){const e=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(r){this.write(r,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function vk(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function xk(r,e){return e?r.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):r}function r0(r,e,i){let a=!vk(e);return r&&(a||i==!1)?xk(r,e):e}const Gy=r=>r instanceof Cr?{...r}:r;function Hs(r,e){e=e||{};const i={};function a(y,v,k,E){return Se.isPlainObject(y)&&Se.isPlainObject(v)?Se.merge.call({caseless:E},y,v):Se.isPlainObject(v)?Se.merge({},v):Se.isArray(v)?v.slice():v}function l(y,v,k,E){if(Se.isUndefined(v)){if(!Se.isUndefined(y))return a(void 0,y,k,E)}else return a(y,v,k,E)}function c(y,v){if(!Se.isUndefined(v))return a(void 0,v)}function d(y,v){if(Se.isUndefined(v)){if(!Se.isUndefined(y))return a(void 0,y)}else return a(void 0,v)}function u(y,v,k){if(k in e)return a(y,v);if(k in r)return a(void 0,y)}const p={url:c,method:c,data:c,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:u,headers:(y,v,k)=>l(Gy(y),Gy(v),k,!0)};return Se.forEach(Object.keys({...r,...e}),function(v){const k=p[v]||l,E=k(r[v],e[v],v);Se.isUndefined(E)&&k!==u||(i[v]=E)}),i}const n0=r=>{const e=Hs({},r);let{data:i,withXSRFToken:a,xsrfHeaderName:l,xsrfCookieName:c,headers:d,auth:u}=e;e.headers=d=Cr.from(d),e.url=Jx(r0(e.baseURL,e.url,e.allowAbsoluteUrls),r.params,r.paramsSerializer),u&&d.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let p;if(Se.isFormData(i)){if(hr.hasStandardBrowserEnv||hr.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if((p=d.getContentType())!==!1){const[y,...v]=p?p.split(";").map(k=>k.trim()).filter(Boolean):[];d.setContentType([y||"multipart/form-data",...v].join("; "))}}if(hr.hasStandardBrowserEnv&&(a&&Se.isFunction(a)&&(a=a(e)),a||a!==!1&&yk(e.url))){const y=l&&c&&gk.read(c);y&&d.set(l,y)}return e},wk=typeof XMLHttpRequest<"u",bk=wk&&function(r){return new Promise(function(i,a){const l=n0(r);let c=l.data;const d=Cr.from(l.headers).normalize();let{responseType:u,onUploadProgress:p,onDownloadProgress:y}=l,v,k,E,C,N;function g(){C&&C(),N&&N(),l.cancelToken&&l.cancelToken.unsubscribe(v),l.signal&&l.signal.removeEventListener("abort",v)}let j=new XMLHttpRequest;j.open(l.method.toUpperCase(),l.url,!0),j.timeout=l.timeout;function f(){if(!j)return;const w=Cr.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),A={data:!u||u==="text"||u==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:w,config:r,request:j};t0(function(M){i(M),g()},function(M){a(M),g()},A),j=null}"onloadend"in j?j.onloadend=f:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(f)},j.onabort=function(){j&&(a(new it("Request aborted",it.ECONNABORTED,r,j)),j=null)},j.onerror=function(){a(new it("Network Error",it.ERR_NETWORK,r,j)),j=null},j.ontimeout=function(){let _=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const A=l.transitional||Yx;l.timeoutErrorMessage&&(_=l.timeoutErrorMessage),a(new it(_,A.clarifyTimeoutError?it.ETIMEDOUT:it.ECONNABORTED,r,j)),j=null},c===void 0&&d.setContentType(null),"setRequestHeader"in j&&Se.forEach(d.toJSON(),function(_,A){j.setRequestHeader(A,_)}),Se.isUndefined(l.withCredentials)||(j.withCredentials=!!l.withCredentials),u&&u!=="json"&&(j.responseType=l.responseType),y&&([E,N]=Ll(y,!0),j.addEventListener("progress",E)),p&&j.upload&&([k,C]=Ll(p),j.upload.addEventListener("progress",k),j.upload.addEventListener("loadend",C)),(l.cancelToken||l.signal)&&(v=w=>{j&&(a(!w||w.type?new Bi(null,r,j):w),j.abort(),j=null)},l.cancelToken&&l.cancelToken.subscribe(v),l.signal&&(l.signal.aborted?v():l.signal.addEventListener("abort",v)));const b=fk(l.url);if(b&&hr.protocols.indexOf(b)===-1){a(new it("Unsupported protocol "+b+":",it.ERR_BAD_REQUEST,r));return}j.send(c||null)})},jk=(r,e)=>{const{length:i}=r=r?r.filter(Boolean):[];if(e||i){let a=new AbortController,l;const c=function(y){if(!l){l=!0,u();const v=y instanceof Error?y:this.reason;a.abort(v instanceof it?v:new Bi(v instanceof Error?v.message:v))}};let d=e&&setTimeout(()=>{d=null,c(new it(`timeout ${e} of ms exceeded`,it.ETIMEDOUT))},e);const u=()=>{r&&(d&&clearTimeout(d),d=null,r.forEach(y=>{y.unsubscribe?y.unsubscribe(c):y.removeEventListener("abort",c)}),r=null)};r.forEach(y=>y.addEventListener("abort",c));const{signal:p}=a;return p.unsubscribe=()=>Se.asap(u),p}},Nk=function*(r,e){let i=r.byteLength;if(i<e){yield r;return}let a=0,l;for(;a<i;)l=a+e,yield r.slice(a,l),a=l},kk=async function*(r,e){for await(const i of _k(r))yield*Nk(i,e)},_k=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const e=r.getReader();try{for(;;){const{done:i,value:a}=await e.read();if(i)break;yield a}}finally{await e.cancel()}},Zy=(r,e,i,a)=>{const l=kk(r,e);let c=0,d,u=p=>{d||(d=!0,a&&a(p))};return new ReadableStream({async pull(p){try{const{done:y,value:v}=await l.next();if(y){u(),p.close();return}let k=v.byteLength;if(i){let E=c+=k;i(E)}p.enqueue(new Uint8Array(v))}catch(y){throw u(y),y}},cancel(p){return u(p),l.return()}},{highWaterMark:2})},Yl=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",s0=Yl&&typeof ReadableStream=="function",Sk=Yl&&(typeof TextEncoder=="function"?(r=>e=>r.encode(e))(new TextEncoder):async r=>new Uint8Array(await new Response(r).arrayBuffer())),i0=(r,...e)=>{try{return!!r(...e)}catch{return!1}},Ek=s0&&i0(()=>{let r=!1;const e=new Request(hr.origin,{body:new ReadableStream,method:"POST",get duplex(){return r=!0,"half"}}).headers.has("Content-Type");return r&&!e}),Xy=64*1024,lf=s0&&i0(()=>Se.isReadableStream(new Response("").body)),Bl={stream:lf&&(r=>r.body)};Yl&&(r=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Bl[e]&&(Bl[e]=Se.isFunction(r[e])?i=>i[e]():(i,a)=>{throw new it(`Response type '${e}' is not supported`,it.ERR_NOT_SUPPORT,a)})})})(new Response);const Ck=async r=>{if(r==null)return 0;if(Se.isBlob(r))return r.size;if(Se.isSpecCompliantForm(r))return(await new Request(hr.origin,{method:"POST",body:r}).arrayBuffer()).byteLength;if(Se.isArrayBufferView(r)||Se.isArrayBuffer(r))return r.byteLength;if(Se.isURLSearchParams(r)&&(r=r+""),Se.isString(r))return(await Sk(r)).byteLength},Tk=async(r,e)=>{const i=Se.toFiniteNumber(r.getContentLength());return i??Ck(e)},Ak=Yl&&(async r=>{let{url:e,method:i,data:a,signal:l,cancelToken:c,timeout:d,onDownloadProgress:u,onUploadProgress:p,responseType:y,headers:v,withCredentials:k="same-origin",fetchOptions:E}=n0(r);y=y?(y+"").toLowerCase():"text";let C=jk([l,c&&c.toAbortSignal()],d),N;const g=C&&C.unsubscribe&&(()=>{C.unsubscribe()});let j;try{if(p&&Ek&&i!=="get"&&i!=="head"&&(j=await Tk(v,a))!==0){let A=new Request(e,{method:"POST",body:a,duplex:"half"}),B;if(Se.isFormData(a)&&(B=A.headers.get("content-type"))&&v.setContentType(B),A.body){const[M,$]=qy(j,Ll(Ky(p)));a=Zy(A.body,Xy,M,$)}}Se.isString(k)||(k=k?"include":"omit");const f="credentials"in Request.prototype;N=new Request(e,{...E,signal:C,method:i.toUpperCase(),headers:v.normalize().toJSON(),body:a,duplex:"half",credentials:f?k:void 0});let b=await fetch(N,E);const w=lf&&(y==="stream"||y==="response");if(lf&&(u||w&&g)){const A={};["status","statusText","headers"].forEach(D=>{A[D]=b[D]});const B=Se.toFiniteNumber(b.headers.get("content-length")),[M,$]=u&&qy(B,Ll(Ky(u),!0))||[];b=new Response(Zy(b.body,Xy,M,()=>{$&&$(),g&&g()}),A)}y=y||"text";let _=await Bl[Se.findKey(Bl,y)||"text"](b,r);return!w&&g&&g(),await new Promise((A,B)=>{t0(A,B,{data:_,headers:Cr.from(b.headers),status:b.status,statusText:b.statusText,config:r,request:N})})}catch(f){throw g&&g(),f&&f.name==="TypeError"&&/Load failed|fetch/i.test(f.message)?Object.assign(new it("Network Error",it.ERR_NETWORK,r,N),{cause:f.cause||f}):it.from(f,f&&f.code,r,N)}}),cf={http:VN,xhr:bk,fetch:Ak};Se.forEach(cf,(r,e)=>{if(r){try{Object.defineProperty(r,"name",{value:e})}catch{}Object.defineProperty(r,"adapterName",{value:e})}});const Jy=r=>`- ${r}`,Rk=r=>Se.isFunction(r)||r===null||r===!1,a0={getAdapter:r=>{r=Se.isArray(r)?r:[r];const{length:e}=r;let i,a;const l={};for(let c=0;c<e;c++){i=r[c];let d;if(a=i,!Rk(i)&&(a=cf[(d=String(i)).toLowerCase()],a===void 0))throw new it(`Unknown adapter '${d}'`);if(a)break;l[d||"#"+c]=a}if(!a){const c=Object.entries(l).map(([u,p])=>`adapter ${u} `+(p===!1?"is not supported by the environment":"is not available in the build"));let d=e?c.length>1?`since :
`+c.map(Jy).join(`
`):" "+Jy(c[0]):"as no adapter specified";throw new it("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return a},adapters:cf};function nd(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new Bi(null,r)}function Yy(r){return nd(r),r.headers=Cr.from(r.headers),r.data=rd.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),a0.getAdapter(r.adapter||Wa.adapter)(r).then(function(a){return nd(r),a.data=rd.call(r,r.transformResponse,a),a.headers=Cr.from(a.headers),a},function(a){return e0(a)||(nd(r),a&&a.response&&(a.response.data=rd.call(r,r.transformResponse,a.response),a.response.headers=Cr.from(a.response.headers))),Promise.reject(a)})}const o0="1.11.0",Ql={};["object","boolean","number","function","string","symbol"].forEach((r,e)=>{Ql[r]=function(a){return typeof a===r||"a"+(e<1?"n ":" ")+r}});const Qy={};Ql.transitional=function(e,i,a){function l(c,d){return"[Axios v"+o0+"] Transitional option '"+c+"'"+d+(a?". "+a:"")}return(c,d,u)=>{if(e===!1)throw new it(l(d," has been removed"+(i?" in "+i:"")),it.ERR_DEPRECATED);return i&&!Qy[d]&&(Qy[d]=!0,console.warn(l(d," has been deprecated since v"+i+" and will be removed in the near future"))),e?e(c,d,u):!0}};Ql.spelling=function(e){return(i,a)=>(console.warn(`${a} is likely a misspelling of ${e}`),!0)};function Pk(r,e,i){if(typeof r!="object")throw new it("options must be an object",it.ERR_BAD_OPTION_VALUE);const a=Object.keys(r);let l=a.length;for(;l-- >0;){const c=a[l],d=e[c];if(d){const u=r[c],p=u===void 0||d(u,c,r);if(p!==!0)throw new it("option "+c+" must be "+p,it.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new it("Unknown option "+c,it.ERR_BAD_OPTION)}}const Al={assertOptions:Pk,validators:Ql},yn=Al.validators;let Us=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Wy,response:new Wy}}async request(e,i){try{return await this._request(e,i)}catch(a){if(a instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const c=l.stack?l.stack.replace(/^.+\n/,""):"";try{a.stack?c&&!String(a.stack).endsWith(c.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+c):a.stack=c}catch{}}throw a}}_request(e,i){typeof e=="string"?(i=i||{},i.url=e):i=e||{},i=Hs(this.defaults,i);const{transitional:a,paramsSerializer:l,headers:c}=i;a!==void 0&&Al.assertOptions(a,{silentJSONParsing:yn.transitional(yn.boolean),forcedJSONParsing:yn.transitional(yn.boolean),clarifyTimeoutError:yn.transitional(yn.boolean)},!1),l!=null&&(Se.isFunction(l)?i.paramsSerializer={serialize:l}:Al.assertOptions(l,{encode:yn.function,serialize:yn.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),Al.assertOptions(i,{baseUrl:yn.spelling("baseURL"),withXsrfToken:yn.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let d=c&&Se.merge(c.common,c[i.method]);c&&Se.forEach(["delete","get","head","post","put","patch","common"],N=>{delete c[N]}),i.headers=Cr.concat(d,c);const u=[];let p=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(i)===!1||(p=p&&g.synchronous,u.unshift(g.fulfilled,g.rejected))});const y=[];this.interceptors.response.forEach(function(g){y.push(g.fulfilled,g.rejected)});let v,k=0,E;if(!p){const N=[Yy.bind(this),void 0];for(N.unshift(...u),N.push(...y),E=N.length,v=Promise.resolve(i);k<E;)v=v.then(N[k++],N[k++]);return v}E=u.length;let C=i;for(k=0;k<E;){const N=u[k++],g=u[k++];try{C=N(C)}catch(j){g.call(this,j);break}}try{v=Yy.call(this,C)}catch(N){return Promise.reject(N)}for(k=0,E=y.length;k<E;)v=v.then(y[k++],y[k++]);return v}getUri(e){e=Hs(this.defaults,e);const i=r0(e.baseURL,e.url,e.allowAbsoluteUrls);return Jx(i,e.params,e.paramsSerializer)}};Se.forEach(["delete","get","head","options"],function(e){Us.prototype[e]=function(i,a){return this.request(Hs(a||{},{method:e,url:i,data:(a||{}).data}))}});Se.forEach(["post","put","patch"],function(e){function i(a){return function(c,d,u){return this.request(Hs(u||{},{method:e,headers:a?{"Content-Type":"multipart/form-data"}:{},url:c,data:d}))}}Us.prototype[e]=i(),Us.prototype[e+"Form"]=i(!0)});let zk=class l0{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(c){i=c});const a=this;this.promise.then(l=>{if(!a._listeners)return;let c=a._listeners.length;for(;c-- >0;)a._listeners[c](l);a._listeners=null}),this.promise.then=l=>{let c;const d=new Promise(u=>{a.subscribe(u),c=u}).then(l);return d.cancel=function(){a.unsubscribe(c)},d},e(function(c,d,u){a.reason||(a.reason=new Bi(c,d,u),i(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const i=this._listeners.indexOf(e);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const e=new AbortController,i=a=>{e.abort(a)};return this.subscribe(i),e.signal.unsubscribe=()=>this.unsubscribe(i),e.signal}static source(){let e;return{token:new l0(function(l){e=l}),cancel:e}}};function Ok(r){return function(i){return r.apply(null,i)}}function Ik(r){return Se.isObject(r)&&r.isAxiosError===!0}const uf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(uf).forEach(([r,e])=>{uf[e]=r});function c0(r){const e=new Us(r),i=Bx(Us.prototype.request,e);return Se.extend(i,Us.prototype,e,{allOwnKeys:!0}),Se.extend(i,e,null,{allOwnKeys:!0}),i.create=function(l){return c0(Hs(r,l))},i}const $t=c0(Wa);$t.Axios=Us;$t.CanceledError=Bi;$t.CancelToken=zk;$t.isCancel=e0;$t.VERSION=o0;$t.toFormData=Jl;$t.AxiosError=it;$t.Cancel=$t.CanceledError;$t.all=function(e){return Promise.all(e)};$t.spread=Ok;$t.isAxiosError=Ik;$t.mergeConfig=Hs;$t.AxiosHeaders=Cr;$t.formToJSON=r=>Qx(Se.isHTMLForm(r)?new FormData(r):r);$t.getAdapter=a0.getAdapter;$t.HttpStatusCode=uf;$t.default=$t;const{Axios:VA,AxiosError:qA,CanceledError:KA,isCancel:GA,CancelToken:ZA,VERSION:XA,all:JA,Cancel:YA,isAxiosError:QA,spread:e4,toFormData:t4,AxiosHeaders:r4,HttpStatusCode:n4,formToJSON:s4,getAdapter:i4,mergeConfig:a4}=$t,Ke=$t.create({baseURL:Gj||void 0});Ke.interceptors.request.use(r=>{const e=localStorage.getItem("revize_jwt");return e&&(r.headers=r.headers??{},r.headers.Authorization=`Bearer ${e}`),r});const u0=V.createContext(null);function Fk({children:r}){const[e,i]=V.useState([]),a=y=>e.find(v=>v.id===y),l=async(y,v)=>{const k=crypto.randomUUID(),C={objectName:"",address:"",preparedBy:"",date:new Date().toISOString().slice(0,10),committee:[{role:"Pedseda",name:""}],spaces:[{id:crypto.randomUUID(),name:"Hlavn prostor",note:"",selections:{},measures:"",intervals:""}],...v},N={id:k,project_id:Number(y),data_json:C},g=await Ke.post("/vv",N),j={id:g.data.id,number:g.data.number,projectId:g.data.project_id,data:g.data.data_json,createdAt:g.data.created_at,updatedAt:g.data.updated_at};return i(f=>[...f,j]),j},c=(y,v)=>{i(k=>k.map(E=>E.id===y?{...E,...v}:E))},d=async y=>{try{const v=await Ke.get(`/vv/${y}`),k={id:v.data.id,number:v.data.number,projectId:v.data.project_id,data:v.data.data_json,createdAt:v.data.created_at,updatedAt:v.data.updated_at};return i(E=>{const C=E.findIndex(g=>g.id===y);if(C===-1)return[...E,k];const N=[...E];return N[C]=k,N}),k}catch{return}},u=async y=>{const v=a(y);if(!v)return;const k={id:v.id,project_id:Number(v.projectId),data_json:v.data},E=await Ke.put(`/vv/${y}`,k);i(C=>C.map(N=>N.id===y?{...N,number:E.data.number,projectId:E.data.project_id,data:E.data.data_json,createdAt:E.data.created_at,updatedAt:E.data.updated_at}:N))},p=V.useMemo(()=>({docs:e,getById:a,add:l,update:c,loadFromServer:d,saveToServer:u}),[e]);return n.jsx(u0.Provider,{value:p,children:r})}function Dk(){const r=V.useContext(u0);if(!r)throw new Error("useVvDocs must be used inside <VvDocsProvider>");return r}/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Bk=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,i,a)=>a?a.toUpperCase():i.toLowerCase()),eg=r=>{const e=Bk(r);return e.charAt(0).toUpperCase()+e.slice(1)},d0=(...r)=>r.filter((e,i,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===i).join(" ").trim(),Mk=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Uk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=V.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:c,iconNode:d,...u},p)=>V.createElement("svg",{ref:p,...Uk,width:e,height:e,stroke:r,strokeWidth:a?Number(i)*24/Number(e):i,className:d0("lucide",l),...!c&&!Mk(u)&&{"aria-hidden":"true"},...u},[...d.map(([y,v])=>V.createElement(y,v)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=(r,e)=>{const i=V.forwardRef(({className:a,...l},c)=>V.createElement($k,{ref:c,iconNode:e,className:d0(`lucide-${Lk(eg(r))}`,`lucide-${r}`,a),...l}));return i.displayName=eg(r),i};/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],tg=Ar("badge-check",Hk);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]],Vk=Ar("bolt",Wk);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Sa=Ar("circle-check-big",qk);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Gk=Ar("circle-check",Kk);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Xk=Ar("circle-x",Zk);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Yk=Ar("download",Jk);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],sd=Ar("info",Qk);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],df=Ar("loader-circle",e_);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],r_=Ar("log-in",t_);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],rg=Ar("plus",n_);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],i_=Ar("printer",s_);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ng=Ar("trash-2",a_);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],l_=Ar("triangle-alert",o_);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],u_=Ar("user-plus",c_),d_=()=>{const r=qs(),{login:e,token:i}=Dr(),[a,l]=V.useState(""),[c,d]=V.useState(""),[u,p]=V.useState(null),[y,v]=V.useState(!1),k=async E=>{E.preventDefault();try{v(!0),await e(a,c),r("/",{replace:!0})}catch(C){p(C.message)}finally{v(!1)}};return n.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-primary to-secondary text-base-content px-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-8 select-none",children:[n.jsx(Vk,{className:"w-10 h-10 text-accent"}),n.jsxs("h1",{className:"text-4xl font-extrabold tracking-tight",children:["Revizor ",n.jsx("span",{className:"text-accent-content",children:"0.1"}),n.jsx("span",{className:"text-sm font-normal ml-2",children:"by JB"})]})]}),n.jsx("div",{className:"card w-full max-w-md backdrop-blur-md bg-base-100/70 shadow-2xl border border-base-200",children:n.jsxs("div",{className:"card-body p-8 sm:p-10",children:[n.jsx("h2",{className:"card-title justify-center mb-6 text-2xl font-semibold",children:"Pihlen"}),n.jsxs("form",{onSubmit:k,className:"flex flex-col gap-5",children:[n.jsx("input",{required:!0,type:"email",placeholder:"E-mail",className:"input input-bordered w-full input-primary",value:a,onChange:E=>l(E.target.value)}),n.jsx("input",{required:!0,type:"password",placeholder:"Heslo",className:"input input-bordered w-full input-primary",value:c,onChange:E=>d(E.target.value)}),u&&n.jsx("p",{className:"text-error text-sm -mt-2",children:u}),n.jsx("button",{type:"submit",className:"btn btn-accent w-full",disabled:y,children:y?"Pihlauji":"Pihlsit se"})]}),n.jsxs("p",{className:"mt-6 text-sm text-center",children:["Nemte et? ",n.jsx(Kl,{to:"/register",className:"link link-secondary",children:"Registrace"})]})]})})]})},sg={name:"",email:"",password:"",phone:"",certificate_number:"",authorization_number:"",address:"",ico:"",dic:""},h_=()=>{const r=qs(),{register:e}=Dr(),[i,a]=V.useState(sg),[l,c]=V.useState(""),[d,u]=V.useState(null),[p,y]=V.useState(null),[v,k]=V.useState(!1),[E,C]=V.useState(!1),[N,g]=V.useState(null),[j,f]=V.useState(null),b=V.useMemo(()=>i.password.length>0&&i.password.length<8,[i.password]),w=V.useMemo(()=>l.length>0&&l!==i.password,[l,i.password]),_=$=>{a({...i,[$.target.name]:$.target.value})},A=async $=>{if($.preventDefault(),u(null),y(null),w){u("Hesla se neshoduj.");return}if(b){u("Heslo mus mt alespo 8 znak.");return}if(!i.certificate_number.trim()){u("Vyplte slo osvden.");return}try{k(!0);const D=await tN({name:i.name,certificate_number:i.certificate_number});f(D),D.status==="verified"?(u(null),g("verified")):(g("not-found"),u("Technik nebyl nalezen v databzi TIR. Zkontrolujte prosm zadan daje."))}catch(D){const le=D?.response?.data?.detail||D.message||"Oven TIR se nepodailo.";u(le),g(null),f(null)}finally{k(!1)}},B=async()=>{if(N!=="verified"||j?.status!=="verified"){g(null);return}try{C(!0),await e(i),u(null),y("spn zaregistrovno. Zkuste se pihlsit."),a(sg),c(""),g("success"),f(null),setTimeout(()=>r("/login",{replace:!0}),2e3)}catch($){const D=$?.response?.data?.detail||$.message||"Registrace se nepodaila.";u(D),g(null)}finally{C(!1)}},M=()=>{E||(g(null),N!=="success"&&f(null))};return n.jsxs("div",{className:"min-h-screen bg-slate-100 text-slate-900",children:[n.jsxs("div",{className:"mx-auto flex min-h-screen w-full max-w-6xl flex-col px-4 py-10 lg:py-16",children:[n.jsxs("header",{className:"flex flex-col items-center gap-3 text-center",children:[n.jsx(u_,{className:"h-12 w-12 text-sky-600"}),n.jsx("h1",{className:"text-3xl font-semibold sm:text-4xl",children:"Registrace technika"}),n.jsx("p",{className:"max-w-2xl text-base text-slate-600",children:"Vytvote si et v Revizoru, ovte sv daje v databzi TIR a zskejte pstup k modernm nstrojm pro sprvu reviznch zprv, pehledm i exportm."})]}),n.jsxs("main",{className:"mt-12 grid gap-10 lg:grid-cols-[1.1fr,1fr]",children:[n.jsx("section",{className:"order-2 rounded-3xl bg-white shadow-xl ring-1 ring-slate-100 lg:order-1",children:n.jsxs("div",{className:"px-6 py-10 sm:px-10",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Vyplte registran daje"}),n.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Formul je jednodue v jednom sloupci, abyste mohli daje vyplnit rychle a bez zbytenho peskakovn pohledem."}),n.jsxs("form",{className:"mt-8 flex w-full flex-col gap-5",onSubmit:A,children:[n.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:["Jmno",n.jsx("input",{required:!0,name:"name",placeholder:"nap. Jan Svoboda",className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-base font-normal text-slate-900 shadow-sm transition focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-200",value:i.name,onChange:_})]}),n.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:["E-mail",n.jsx("input",{required:!0,type:"email",name:"email",placeholder:"nap. jan.svoboda@example.com",className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-base font-normal text-slate-900 shadow-sm transition focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-200",value:i.email,onChange:_})]}),n.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:["Telefon",n.jsx("input",{required:!0,name:"phone",placeholder:"nap. +420 777 888 999",className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-base font-normal text-slate-900 shadow-sm transition focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-200",value:i.phone,onChange:_})]}),n.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:["slo osvden",n.jsx("input",{required:!0,name:"certificate_number",placeholder:"nap. 1234/23/R-EZ-E2A",className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-base font-normal text-slate-900 shadow-sm transition focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-200",value:i.certificate_number,onChange:_})]}),n.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:["slo oprvnn",n.jsx("input",{name:"authorization_number",placeholder:"pokud mte, uvete ho",className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-base font-normal text-slate-900 shadow-sm transition focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-200",value:i.authorization_number||"",onChange:_})]}),n.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:["Adresa",n.jsx("input",{name:"address",placeholder:"Sdlo nebo provozovna",className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-base font-normal text-slate-900 shadow-sm transition focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-200",value:i.address||"",onChange:_})]}),n.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:["IO",n.jsx("input",{name:"ico",placeholder:"nap. 12345678",className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-base font-normal text-slate-900 shadow-sm transition focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-200",value:i.ico||"",onChange:_})]}),n.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:["DI",n.jsx("input",{name:"dic",placeholder:"nap. CZ12345678",className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-base font-normal text-slate-900 shadow-sm transition focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-200",value:i.dic||"",onChange:_})]}),n.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:["Heslo",n.jsx("input",{required:!0,type:"password",name:"password",placeholder:"minimln 8 znak",className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-base font-normal text-slate-900 shadow-sm transition focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-200",value:i.password,onChange:_})]}),b&&n.jsx("p",{className:"text-sm text-amber-600",children:"Heslo mus mt alespo 8 znak."}),n.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:["Potvrzen hesla",n.jsx("input",{required:!0,type:"password",placeholder:"Zopakujte heslo",className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-base font-normal text-slate-900 shadow-sm transition focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-200",value:l,onChange:$=>c($.target.value)})]}),w&&n.jsx("p",{className:"text-sm text-red-600",children:"Hesla se neshoduj."}),d&&n.jsx("p",{className:"text-center text-sm text-red-600",children:d}),p&&n.jsx("p",{className:"text-center text-sm text-emerald-600",children:p}),n.jsx("button",{type:"submit",className:"inline-flex w-full items-center justify-center rounded-xl bg-sky-600 px-4 py-3 text-base font-semibold text-white shadow-lg shadow-sky-600/20 transition hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-sky-300 disabled:cursor-not-allowed disabled:bg-slate-300 disabled:text-slate-600",disabled:v||E||b||w,children:v?n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(df,{className:"h-5 w-5 animate-spin"}),"Ovuji TIR"]}):"Ovit v TIR"})]}),n.jsxs("p",{className:"mt-6 text-center text-sm text-slate-600",children:["U mte et?"," ",n.jsx(Kl,{to:"/login",className:"font-medium text-sky-600 hover:text-sky-700",children:"Pihlsit se"})]})]})}),n.jsxs("aside",{className:"order-1 h-full rounded-3xl bg-gradient-to-br from-sky-600 via-blue-600 to-indigo-600 p-8 text-white shadow-xl ring-1 ring-blue-500/40 lg:order-2 lg:p-10",children:[n.jsx("h2",{className:"text-2xl font-semibold",children:"Pro Revizor?"}),n.jsx("p",{className:"mt-3 text-sm text-white/80",children:"Webov aplikace navren pro revizn techniky. Udrujte revizn zprvy pehledn a v souladu s poadavky ad."}),n.jsxs("ul",{className:"mt-8 space-y-5 text-sm",children:[n.jsxs("li",{className:"flex gap-3",children:[n.jsx("span",{className:"mt-1 rounded-full bg-white/10 p-2 text-white",children:n.jsx(Sa,{className:"h-5 w-5"})}),n.jsx("span",{children:"Okamit oven v databzi TIR a pedvyplnn daje technika."})]}),n.jsxs("li",{className:"flex gap-3",children:[n.jsx("span",{className:"mt-1 rounded-full bg-white/10 p-2 text-white",children:n.jsx(Sa,{className:"h-5 w-5"})}),n.jsx("span",{children:"Pehled projekt, katalog zvad a generovn dokument jednm klikem."})]}),n.jsxs("li",{className:"flex gap-3",children:[n.jsx("span",{className:"mt-1 rounded-full bg-white/10 p-2 text-white",children:n.jsx(Sa,{className:"h-5 w-5"})}),n.jsx("span",{children:"Podpora tmu Revizor je pipravena vm pomoci na adrese support@revizor.cz."})]})]}),n.jsxs("div",{className:"mt-10 rounded-2xl bg-white/10 p-5 text-sm text-white/90",children:[n.jsx("p",{className:"font-medium uppercase tracking-wide text-white/80",children:"Tip"}),n.jsx("p",{className:"mt-2",children:"Oven TIR probh online a me chvli trvat. Nebojte se pokat  ukazatel natn vs udr v obraze."})]})]})]})]}),N&&n.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-slate-900/60 px-4 backdrop-blur-sm",onClick:M,children:n.jsxs("div",{className:"w-full max-w-lg rounded-2xl bg-white p-6 shadow-2xl sm:p-8",onClick:$=>$.stopPropagation(),children:[N==="verified"&&j?.status==="verified"&&n.jsxs("div",{className:"space-y-6 text-center",children:[n.jsx(Sa,{className:"mx-auto h-14 w-14 text-emerald-500"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:"Oveno v TIR"}),n.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Na zadan slo osvden byl v databzi TIR nalezen zznam technika."})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 text-left text-sm",children:[n.jsx("span",{className:"text-slate-500",children:"Jmno"}),n.jsx("span",{className:"font-medium text-slate-900",children:j.matched?.full_name||"-"}),n.jsx("span",{className:"text-slate-500",children:"slo osvden"}),n.jsx("span",{className:"font-medium text-slate-900",children:j.matched?.certificate_number||i.certificate_number})]}),n.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:justify-end",children:[n.jsx("button",{className:"btn btn-outline w-full rounded-xl normal-case sm:w-auto",onClick:M,disabled:E,children:"Zavt"}),n.jsx("button",{className:"btn btn-primary w-full rounded-xl normal-case sm:w-auto",onClick:B,disabled:E,children:E?n.jsxs("span",{className:"flex items-center justify-center gap-2",children:[n.jsx(df,{className:"h-5 w-5 animate-spin"}),"Registruji"]}):"Pokraovat v registraci"})]})]}),N==="not-found"&&n.jsxs("div",{className:"space-y-6 text-center",children:[n.jsx(Xk,{className:"mx-auto h-14 w-14 text-red-500"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:"Technik nebyl nalezen"}),n.jsx("p",{className:"mt-2 text-sm text-slate-700",children:"Technik se zadanm slem osvden nebyl v databzi TIR nalezen. Zkontrolujte prosm sprvnost daj a zkuste to znovu."})]}),n.jsx("button",{className:"btn btn-outline w-full rounded-xl normal-case",onClick:M,children:"Rozumm"})]}),N==="success"&&n.jsxs("div",{className:"space-y-6 text-center",children:[n.jsx(Sa,{className:"mx-auto h-14 w-14 text-emerald-500"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:"Registrace dokonena"}),n.jsx("p",{className:"mt-2 text-sm text-slate-700",children:"spn zaregistrovno. Zkuste se pihlsit."})]}),n.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:justify-center",children:[n.jsx("button",{className:"btn btn-outline w-full rounded-xl normal-case sm:w-auto",onClick:M,children:"Zstat zde"}),n.jsx("button",{className:"btn btn-accent w-full rounded-xl normal-case sm:w-auto",onClick:()=>r("/login"),children:n.jsxs("span",{className:"flex items-center justify-center gap-2",children:[n.jsx(r_,{className:"h-5 w-5"}),"Pihlsit se"]})})]})]})]})})]})},cn=V.createContext({});function f_(r){if(r==null)return{};if(typeof r=="object")return r;if(typeof r=="string")try{const e=JSON.parse(r);if(typeof e=="object"&&e)return e;if(typeof e=="string")try{return JSON.parse(e)}catch{return{}}}catch{return{}}return{}}function ig(r){const e=Array.isArray(r?.measuringInstruments)?r.measuringInstruments:Array.isArray(r?.merici_pristroje)?r.merici_pristroje:[];return{evidencni:r.evidencni??"",objekt:r.objekt??"",adresa:r.adresa??"",objednatel:r.objednatel??"",typRevize:r.typRevize??"",sit:r.sit??"",voltage:r.voltage??"",date_start:r.date_start??"",date_end:r.date_end??"",date_created:r.date_created??"",documentation:r.documentation??"",environment:r.environment??"",extraNotes:r.extraNotes??"",measuringInstruments:Array.isArray(e)?e:[],montFirma:r.montFirma??"",montFirmaAuthorization:r.montFirmaAuthorization??"",technicianSubjectType:r.technicianSubjectType??"",technicianCompanyId:r.technicianCompanyId??null,technicianCompanyName:r.technicianCompanyName??"",technicianCompanyIco:r.technicianCompanyIco??"",technicianCompanyDic:r.technicianCompanyDic??"",technicianCompanyAddress:r.technicianCompanyAddress??"",technicianName:r.technicianName??"",technicianCertificateNumber:r.technicianCertificateNumber??"",technicianAuthorizationNumber:r.technicianAuthorizationNumber??"",protection_basic:Array.isArray(r.protection_basic)?r.protection_basic:[],protection_fault:Array.isArray(r.protection_fault)?r.protection_fault:[],protection_additional:Array.isArray(r.protection_additional)?r.protection_additional:[],norms:Array.isArray(r.norms)?r.norms:[],customNorm1:r.customNorm1??"",customNorm2:r.customNorm2??"",customNorm3:r.customNorm3??"",boards:Array.isArray(r.boards)?r.boards:[],rooms:Array.isArray(r.rooms)?r.rooms:[],instruments:Array.isArray(r.instruments)?r.instruments:void 0,defects:Array.isArray(r.defects)?r.defects:[],performedTasks:Array.isArray(r.performedTasks)?r.performedTasks:[],inspectionTemplate:r.inspectionTemplate??"",inspectionDescription:r.inspectionDescription??"",tests:r.tests??{},conclusion:{text:r.conclusion?.text??"",safety:r.conclusion?.safety??"",validUntil:r.conclusion?.validUntil??""},lps:r?.lps??{}}}function zf({revId:r,children:e}){const[i,a]=V.useState(ig({}));V.useEffect(()=>{const d=new AbortController;return(async()=>{try{const p=(await Ke.get(`/revisions/${r}`,{signal:d.signal})).data,y=f_(p?.data_json);a(v=>{const k=ig({...v,...y});return{...k,evidencni:p?.number??k.evidencni}})}catch(u){u?.name!=="CanceledError"&&console.warn("Nelze nast revizi:",u?.response?.data||u)}})(),()=>d.abort()},[r]);const l=V.useCallback(()=>{Ke.patch(`/revisions/${r}`,{data_json:i}).catch(d=>console.warn("Uloen revize selhalo:",d?.response?.data||d))},[i,r]);V.useEffect(()=>{const d=setTimeout(l,800);return()=>clearTimeout(d)},[i,l]);const c=V.useCallback(async()=>{try{await Ke.patch(`/revisions/${r}`,{data_json:i,status:"Dokonen"}),console.log("Revize oznaena jako 'Dokonen'")}catch(d){console.warn("PATCH combined selhal, zkoum sekvenn:",d?.response?.data||d);try{await Ke.patch(`/revisions/${r}`,{data_json:i}),await Ke.patch(`/revisions/${r}`,{status:"Dokonen"}),console.log("Revize oznaena jako 'Dokonen' (sekvenn).")}catch(u){console.warn("Dokonen revize selhalo:",u?.response?.data||u)}}},[i,r]);return n.jsx(cn.Provider,{value:{form:i,setForm:a,saveNow:l,finish:c},children:e})}function Mi(){return nt.useContext(cn)}function Tr({mode:r,active:e,onSelect:i,onNewProject:a}){const l=qs(),c=on(),{logout:d}=Dr(),[u,p]=V.useState(!1),[y,v]=V.useState(!1),[k,E]=V.useState(!1),{profile:C,company:N,loading:g}=ps(),{finish:j}=(()=>{try{return Mi()}catch{return{finish:()=>Promise.resolve()}}})(),f=[{key:"identifikace",label:"Identifikace"},{key:"prohlidka",label:"Prohldka"},{key:"zkousky",label:"Zkouky"},{key:"mereni",label:"Men"},{key:"zavady",label:"Zvady a doporuen"},{key:"zaver",label:"Zvr"}],b=$=>{p(!1),l($)},w=r==="catalog"||c.pathname.startsWith("/katalog"),_=r==="summary",A=c.pathname.startsWith("/instruments")||c.pathname.startsWith("/merici-pristroje"),B=(C?.fullName?.[0]||"T").toUpperCase(),M=async()=>{E(!0);try{await j()}catch($){console.warn("Dokonen selhalo, pesmrovvm i tak.",$)}finally{E(!1),v(!1),l("/")}};return n.jsxs(n.Fragment,{children:[n.jsx("aside",{className:"w-64 bg-white shadow-lg p-4 flex flex-col justify-between sticky top-0 h-screen overflow-y-auto",children:n.jsxs("div",{children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"w-20 h-20 rounded-full bg-blue-500/20 text-blue-900 mx-auto mb-2 shadow-inner flex items-center justify-center text-2xl font-semibold",children:B}),n.jsx("div",{className:"font-bold text-blue-900",children:C?.fullName??(g?"Natm":"")}),n.jsxs("div",{className:"text-sm text-gray-600",children:["Osvden:"," ",n.jsx("span",{className:"font-medium",children:C?.certificateNumber||(g?"":"")})]}),n.jsxs("div",{className:"text-sm text-gray-600",children:["Aktivn subjekt:"," ",n.jsx("span",{className:"font-medium",title:N?.name,children:N?.name||(g?"":"")})]})]}),r==="edit"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"mb-4 bg-gray-200 hover:bg-gray-300 text-left px-4 py-2 rounded transition",onClick:()=>l("/"),children:" Zpt na projekty"}),n.jsx("nav",{className:"flex flex-col gap-2 mb-4",children:f.map($=>n.jsx("button",{onClick:()=>i?.($.key),className:`px-4 py-2 rounded text-left transition ${e===$.key?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200"}`,children:$.label},$.key))}),n.jsx("button",{className:"w-full bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded transition",onClick:()=>v(!0),title:"Oznait revizi jako dokonenou",children:" Dokonit"})]}),r==="dashboard"&&!A&&n.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded mb-2 hover:bg-blue-700 transition",onClick:()=>a?.(),children:"+ Nov projekt"}),(w||_||A)&&n.jsx("button",{className:"mb-4 bg-gray-200 hover:bg-gray-300 text-left px-4 py-2 rounded transition",onClick:()=>l("/"),children:" Zpt na projekty"}),_&&n.jsxs("div",{className:"mb-4 space-y-2",children:[n.jsx("button",{className:`w-full px-4 py-2 rounded text-left transition ${e==="lps_info"?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200"}`,onClick:()=>i?.("lps_info"),children:"Identifikace objektu a prohldka"}),n.jsx("button",{className:`w-full px-4 py-2 rounded text-left transition ${e==="lps_measure"?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200"}`,onClick:()=>i?.("lps_measure"),children:"Men a zvr"}),n.jsx("button",{className:"w-full bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded transition",onClick:()=>v(!0),title:"Oznait revizi jako dokonenou",children:" Dokonit"})]}),n.jsx("hr",{className:"my-4 border-gray-300"}),C?.isAdmin&&n.jsxs("div",{className:"mt-4",children:[n.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Admin"}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("button",{className:"bg-amber-100 hover:bg-amber-200 text-left px-4 py-2 rounded transition",onClick:()=>l("/admin"),children:"Pehled administrtora"}),n.jsx("button",{className:"bg-amber-100 hover:bg-amber-200 text-left px-4 py-2 rounded transition",onClick:()=>l("/admin/users"),children:"Technici"}),n.jsx("button",{className:"bg-amber-100 hover:bg-amber-200 text-left px-4 py-2 rounded transition",onClick:()=>l("/admin/defects"),children:"Nvrhy zvad"}),n.jsx("button",{className:"bg-amber-100 hover:bg-amber-200 text-left px-4 py-2 rounded transition",onClick:()=>l("/admin/defects-editor"),children:"Editor zvad"}),n.jsx("button",{className:"bg-amber-100 hover:bg-amber-200 text-left px-4 py-2 rounded transition",onClick:()=>l("/admin/revisions"),children:"Revize vech uivatel"})]})]}),n.jsxs("div",{className:"relative mt-4",children:[n.jsx("button",{className:"bg-gray-200 px-4 py-2 rounded w-full text-left hover:bg-gray-300 transition",onClick:()=>p(!u),children:" Nastaven"}),u&&n.jsxs("ul",{className:"absolute left-0 mt-2 bg-white border rounded shadow w-full z-10 overflow-hidden",children:[n.jsx("li",{className:`p-2 hover:bg-gray-100 cursor-pointer ${w?"bg-blue-50 font-medium":""}`,onClick:()=>b("/katalog"),children:"Katalog"}),n.jsx("li",{className:"p-2 hover:bg-gray-100 cursor-pointer",onClick:()=>b("/instruments"),children:"Mic pstroje"}),n.jsx("li",{className:"p-2 hover:bg-gray-100 cursor-pointer",onClick:()=>b("/profil"),children:"Profil"}),n.jsx("li",{className:"p-2 hover:bg-gray-100 cursor-pointer",children:"Tisk"}),n.jsx("li",{className:"p-2 hover:bg-gray-100 cursor-pointer",onClick:()=>{d(),b("/login")},children:"Odhlsit se"})]})]})]})}),y&&n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 grid place-items-center",onClick:()=>!k&&v(!1),children:n.jsxs("div",{className:"bg-white p-6 rounded shadow w-full max-w-md",onClick:$=>$.stopPropagation(),children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Oznait revizi jako dokonenou?"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Po potvrzen bude revize uzamena k pravm. Nsledn t pesmruji na pehled projekt."}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{className:"px-4 py-2 bg-gray-200 rounded",onClick:()=>v(!1),disabled:k,children:"Zruit"}),n.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded disabled:opacity-60",onClick:M,disabled:k,title:"Dokonit revizi",children:k?"Dokonuji":"Dokonit"})]})]})})]})}function id(r){const e=(r||"").trim();if(!e)return"";const i=e.toLowerCase(),a=["dokoneno","dokonen","dokonen","dokoncen"],l=["rozpracovan","rozpracovana","rozpracovan","rozpracovane"];return a.includes(i)?"Dokoneno":l.includes(i)?"Rozpracovan":e}function p_(){const[r,e]=V.useState([]),{token:i}=Dr(),{profile:a,company:l}=ps(),[c,d]=V.useState(null),[u,p]=V.useState(!1),[y,v]=V.useState(null),[k,E]=V.useState(!1),[C,N]=V.useState({address:"",client:""}),[g,j]=V.useState(""),f=qs(),[b,w]=V.useState(!1),[_,A]=V.useState(null),[B,M]=V.useState({projectId:null,revId:null}),[$,D]=V.useState(""),[le,pe]=V.useState(!1),[H,q]=V.useState(null),T=a?.id??a?.userId??a?.user_id??void 0,{add:Z}=Dk(),[Q,Y]=V.useState({}),[ne,J]=V.useState({}),[ue,W]=V.useState({open:!1,kind:"project",id:null,projectId:null,password:"",busy:!1,err:null}),U=async()=>{if(!(!i||!ue.id)){W(L=>({...L,busy:!0,err:null}));try{let L="";ue.kind==="project"?L=yt(`/projects/${ue.id}`):ue.kind==="revision"?L=yt(`/revisions/${ue.id}`):L=yt(`/vv/${ue.id}`);const ie=await fetch(L,{method:"DELETE",headers:{"Content-Type":"application/json",...Dt(i)},body:JSON.stringify({password:ue.password})});if(!ie.ok)throw new Error(`${ie.status}`);ue.kind==="vv"&&ue.projectId?await ce(ue.projectId):await re(),W({open:!1,kind:"project",id:null,projectId:null,password:"",busy:!1,err:null})}catch{W(ie=>({...ie,err:"Mazn selhalo",busy:!1}))}}},re=async L=>{if(i)try{const ie=await fetch(yt("/projects"),{headers:{...Dt(i)},signal:L});if(!ie.ok){A(`${ie.status} ${ie.statusText}`),e([]);return}const z=await ie.json();e(Array.isArray(z)?z:[]),A(null)}catch(ie){ie?.name!=="AbortError"&&(A("Network error"),e([]))}};V.useEffect(()=>{if(!i)return;const L=new AbortController;return w(!0),re(L.signal).finally(()=>w(!1)),()=>L.abort()},[i]);const ae=L=>new Date(L)<new Date,ye=L=>{v(L),p(!0)},ce=async L=>{if(i){J(ie=>({...ie,[L]:!0}));try{const ie=await fetch(yt(`/vv/project/${L}`),{headers:{...Dt(i)}});if(!ie.ok)throw new Error(`${ie.status}`);const z=await ie.json();Y(fe=>({...fe,[L]:z}))}catch{Y(ie=>({...ie,[L]:[]}))}finally{J(ie=>({...ie,[L]:!1}))}}},P=async()=>{const L=C.address.trim(),ie=C.client.trim();if(!L||!ie){alert("Vypl adresu i objednatele.");return}const fe={name:`${L}  ${ie}`,address:L,client:ie,shared_with_user_ids:[]};T!=null&&(fe.owner_id=T);try{const F=await fetch(yt("/projects"),{method:"POST",headers:{"Content-Type":"application/json",...Dt(i)},body:JSON.stringify(fe)});if(!F.ok){let x="";try{const m=await F.json();x=m?.detail?Array.isArray(m.detail)?JSON.stringify(m.detail):String(m.detail):""}catch{}throw new Error(`Chyba pi ukldn projektu${x?`: ${x}`:""}`)}E(!1),N({address:"",client:""}),await re()}catch(F){console.error("Chyba pi uloen projektu:",F),alert(String(F))}},O=(r||[]).filter(L=>{const ie=L.address?.toLowerCase()||"",z=L.client?.toLowerCase()||"",fe=g.toLowerCase();return ie.includes(fe)||z.includes(fe)}),te=["Elektroinstalace","FVE","LPS"],ee=(L,ie)=>{id(ie.status)==="Dokonen"?(M({projectId:L,revId:ie.id}),D(""),q(null)):(ie?.type||"").toUpperCase()==="LPS"?f(`/revize-lps/${ie.id}`):f(`/revize/${ie.id}`)},G=async()=>{if(!(!B.revId||!i)){pe(!0),q(null);try{const L=await fetch(yt(`/revisions/${B.revId}/unlock`),{method:"POST",headers:{"Content-Type":"application/json",...Dt(i)},body:JSON.stringify({password:$})});if(!L.ok)throw new Error("Unlock failed");const ie=await L.json();e(fe=>fe.map(F=>F.id!==B.projectId?F:{...F,revisions:(F.revisions||[]).map(x=>x.id===B.revId?{...x,status:ie.status}:x)}));const z=B.revId;M({projectId:null,revId:null}),D("");{const F=(r.flatMap(x=>x.revisions||[]).find(x=>x.id===z)?.type||"").toUpperCase()==="LPS";f(F?`/revize-lps/${z}`:`/revize/${z}`)}}catch{q("Neplatn heslo.")}finally{pe(!1)}}};return n.jsxs("div",{className:"flex min-h-screen bg-gradient-to-br from-gray-100 to-blue-50",children:[n.jsx(Tr,{mode:"dashboard",onNewProject:()=>E(!0)}),n.jsxs("main",{className:"flex-1 p-6",children:[n.jsx("h1",{className:"text-3xl font-bold text-blue-800 mb-4",children:" Projekty"}),n.jsx("input",{type:"text",className:"p-2 border rounded w-full mb-4",placeholder:"Hledat adresu nebo objednatele...",value:g,onChange:L=>j(L.target.value)}),n.jsxs("table",{className:"w-full bg-white border rounded shadow text-sm",children:[n.jsx("thead",{className:"bg-blue-100 text-blue-900",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 text-left",children:"#"}),n.jsx("th",{className:"p-2 text-left",children:" Adresa"}),n.jsx("th",{className:"p-2 text-left",children:" Objednatel"}),n.jsx("th",{className:"p-2 text-left",children:" Platnost"}),n.jsx("th",{className:"p-2 text-left",children:" Revize"})]})}),n.jsx("tbody",{children:O.map(L=>{const ie=L.revisions?.some(F=>ae(F.valid_until)),z=c===L.id,fe=Array.isArray(L.revisions)?[...L.revisions].sort((F,x)=>new Date(x.date_done).getTime()-new Date(F.date_done).getTime()):[];return n.jsxs(nt.Fragment,{children:[n.jsxs("tr",{className:`cursor-pointer border-t hover:bg-blue-50 ${z?"bg-blue-100":""}`,onClick:async()=>{const F=z?null:L.id;d(F),!z&&!Q[L.id]&&await ce(L.id)},children:[n.jsx("td",{className:"p-2 font-mono",children:L.id}),n.jsx("td",{className:"p-2",children:L.address}),n.jsx("td",{className:"p-2",children:L.client}),n.jsx("td",{className:`p-2 ${ie?"text-red-600 font-semibold":"text-green-700"}`,children:ie?"Revize po platnosti":"OK"}),n.jsx("td",{className:"p-2",children:L.revisions?.length??0})]}),z&&n.jsx("tr",{children:n.jsxs("td",{colSpan:5,className:"bg-blue-50 p-2",children:[n.jsxs("div",{className:"text-right mb-2 flex justify-between",children:[n.jsx("button",{className:"bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700",onClick:()=>ye(L.id),children:" Pidat"}),n.jsx("button",{className:"bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700",onClick:()=>W({open:!0,kind:"project",id:L.id,projectId:null,password:"",busy:!1,err:null}),children:" Smazat projekt"})]}),"                        ",n.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-2",children:"Revizn zprvy"}),n.jsxs("table",{className:"w-full text-sm bg-white border rounded",children:[n.jsx("thead",{className:"bg-gray-100",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 text-left",children:"#"}),n.jsx("th",{className:"p-2 text-left",children:"Typ"}),n.jsx("th",{className:"p-2 text-left",children:"Datum"}),n.jsx("th",{className:"p-2 text-left",children:"Platnost"}),n.jsx("th",{className:"p-2 text-left",children:"Stav"}),n.jsx("th",{className:"p-2 text-left",children:"Akce"})]})}),n.jsx("tbody",{children:fe.map(F=>{const x=id(F.status)==="Dokonen";return n.jsxs("tr",{className:`border-t ${x?"bg-green-50":""}`,children:[n.jsx("td",{className:"p-2",children:F.number}),n.jsx("td",{className:"p-2",children:F.type}),n.jsx("td",{className:"p-2",children:F.date_done}),n.jsx("td",{className:`p-2 ${ae(F.valid_until)?"text-red-600 font-semibold":""}`,children:F.valid_until}),n.jsx("td",{className:`p-2 ${x?"text-green-700":"text-blue-600"}`,children:id(F.status)}),n.jsxs("td",{className:"p-2 space-x-2",children:[n.jsx("button",{className:"text-blue-600 hover:underline",onClick:()=>ee(L.id,F),title:x?"Dokoneno  otevt po zadn hesla":"Otevt",children:"Otevt"}),n.jsx("button",{className:"text-red-600 hover:underline",onClick:()=>W({open:!0,kind:"revision",id:F.id,projectId:L.id,password:"",busy:!1,err:null}),children:"Smazat"}),n.jsx("button",{onClick:()=>f(`/summary/${F.id}`),className:"text-green-600 hover:underline",children:"Souhrn"})]})]},F.id)})})]}),n.jsx("div",{className:"h-4"}),"                        ",n.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-2 mt-6",children:"Protokoly o VV"}),"                        ",n.jsx("div",{className:"bg-white border rounded",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 text-left",children:"#"}),n.jsx("th",{className:"p-2 text-left",children:"Nzev / Prostor"}),n.jsx("th",{className:"p-2 text-left",children:"Datum"}),n.jsx("th",{className:"p-2 text-left",children:"Akce"})]})}),n.jsxs("tbody",{children:[ne[L.id]&&n.jsx("tr",{children:n.jsx("td",{className:"p-2",colSpan:4,children:"Natm VV"})}),!ne[L.id]&&(Q[L.id]?.length??0)===0&&n.jsx("tr",{children:n.jsx("td",{className:"p-2",colSpan:4,children:"dn protokoly."})}),(Q[L.id]||[]).map(F=>{const x=F.data_json?.spaces?.[0]?.name??"",m=F.data_json?.date??"";return n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"p-2 font-mono",children:F.number??F.id}),n.jsxs("td",{className:"p-2",children:[F.data_json?.objectName||"bez nzvu","  "," ",n.jsx("span",{className:"text-slate-500",children:x})]}),n.jsx("td",{className:"p-2",children:m}),n.jsxs("td",{className:"p-2 space-x-3",children:[n.jsx("button",{className:"text-blue-600 hover:underline",onClick:()=>f(`/vv/${F.id}`),children:"Otevt"}),n.jsx("button",{className:"text-red-600 hover:underline",onClick:()=>W({open:!0,kind:"vv",id:F.id,projectId:L.id,password:"",busy:!1,err:null}),children:"Smazat"})]})]},F.id)})]})]})}),u&&y===L.id&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white p-6 rounded shadow w-80",children:[n.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Vyber, co chce pidat"}),n.jsx("div",{className:"p-2 mb-2 hover:bg-gray-100 cursor-pointer border rounded",onClick:async()=>{p(!1);try{const F=await Z(L.id,{objectName:L.address?`${L.address}`:"Objekt",address:L.address||""});f(`/vv/${F.id}`),ce(L.id)}catch(F){console.error(" VV create failed:",F?.response?.data||F),alert("Nepodailo se zaloit VV protokol.")}},children:"Posouzen vnjch vliv (VV)"}),n.jsx("ul",{className:"border rounded",children:te.map((F,x)=>n.jsx("li",{className:`p-2 hover:bg-gray-100 cursor-pointer ${x<te.length-1?"border-b":""}`,onClick:async()=>{p(!1);const m={project_id:L.id,type:F,date_done:new Date().toISOString().split("T")[0],valid_until:new Date(new Date().setFullYear(new Date().getFullYear()+4)).toISOString().split("T")[0],status:"Rozpracovan",data_json:{poznmka:"zatm przdn"}};if(F==="LPS"){const R=a||{},X=l||{};m.data_json={...m.data_json||{},technicianName:R.fullName||R.name||"",technicianCertificateNumber:R.certificateNumber||"",technicianAuthorizationNumber:R.authorizationNumber||"",technicianCompanyName:X.name||"",technicianCompanyIco:X.ico||"",technicianCompanyDic:X.dic||"",technicianCompanyAddress:X.address||""}}if(T!=null&&(m.owner_id=T),F==="LPS"){const X=((Array.isArray(L.revisions)?L.revisions.filter(oe=>(oe?.type||"").toUpperCase()==="LPS"):[])?.length||0)+1;m.number=`LPS-${L.id}-${String(X).padStart(3,"0")}`}try{const R=await fetch(yt("/revisions"),{method:"POST",headers:{"Content-Type":"application/json",...Dt(i)},body:JSON.stringify(m)});if(!R.ok){let X="";try{const oe=await R.json();X=oe?.detail?Array.isArray(oe.detail)?JSON.stringify(oe.detail):String(oe.detail):""}catch{}throw new Error(`Server error${X?`: ${X}`:""}`)}re()}catch(R){console.error(" Chyba pi ukldn revize:",R),alert(String(R))}},children:F},F))}),n.jsx("button",{className:"mt-4 px-4 py-2 bg-gray-300 rounded w-full",onClick:()=>p(!1),children:"Zruit"})]})})]})})]},L.id)})})]})]}),k&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white p-6 rounded shadow w-96",children:[n.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Nov projekt"}),n.jsx("input",{type:"text",className:"w-full p-2 mb-2 border rounded",placeholder:"Adresa",value:C.address,onChange:L=>N({...C,address:L.target.value})}),n.jsx("input",{type:"text",className:"w-full p-2 mb-4 border rounded",placeholder:"Objednatel",value:C.client,onChange:L=>N({...C,client:L.target.value})}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{className:"px-4 py-2 bg-gray-300 rounded",onClick:()=>E(!1),children:"Zruit"}),n.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:P,title:"Uloit nov projekt",children:"Uloit"})]})]})}),B.revId!==null&&n.jsx("div",{className:"fixed inset-0 bg-black/40 grid place-items-center z-50",onClick:()=>M({projectId:null,revId:null}),children:n.jsxs("div",{className:"bg-white p-5 rounded shadow w-full max-w-sm",onClick:L=>L.stopPropagation(),children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Revize je dokonen"}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Pro oteven zadej sv heslo."}),n.jsx("input",{type:"password",className:"w-full p-2 border rounded mb-2",placeholder:"Heslo",value:$,onChange:L=>D(L.target.value),onKeyDown:L=>L.key==="Enter"?G():null,autoFocus:!0}),H&&n.jsx("div",{className:"text-red-600 text-sm mb-2",children:H}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{className:"px-3 py-2 bg-gray-200 rounded",onClick:()=>M({projectId:null,revId:null}),disabled:le,children:"Zruit"}),n.jsx("button",{className:"px-3 py-2 bg-blue-600 text-white rounded",onClick:G,disabled:le||!$,children:"Odemknout"})]})]})}),ue.open&&n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 grid place-items-center",onClick:()=>!ue.busy&&W({...ue,open:!1}),children:n.jsxs("div",{className:"bg-white p-5 rounded shadow w-full max-w-sm",onClick:L=>L.stopPropagation(),children:[n.jsxs("h3",{className:"font-semibold mb-2",children:["Smazat ",ue.kind==="project"?"projekt":ue.kind==="revision"?"revizi":"VV protokol"]}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Pro potvrzen zadej sv heslo."}),n.jsx("input",{type:"password",className:"w-full p-2 border rounded mb-2",placeholder:"Heslo",value:ue.password,onChange:L=>W({...ue,password:L.target.value}),onKeyDown:L=>L.key==="Enter"?U():null,autoFocus:!0}),ue.err&&n.jsx("div",{className:"text-red-600 text-sm mb-2",children:ue.err}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{className:"px-3 py-2 bg-gray-200 rounded",onClick:()=>W({...ue,open:!1}),disabled:ue.busy,children:"Zruit"}),n.jsx("button",{className:"px-3 py-2 bg-red-600 text-white rounded",onClick:U,disabled:ue.busy||!ue.password,children:"Smazat"})]})]})})]})}function h0(){const{form:r,setForm:e}=V.useContext(cn),{token:i}=Dr(),[a,l]=V.useState([]),[c,d]=V.useState(!1),[u,p]=V.useState(null),y=r.measuringInstruments||[],v=V.useMemo(()=>new Set(y.map(E=>E.id)),[y]);V.useEffect(()=>{let E=!0;return(async()=>{if(i){d(!0),p(null);try{const C=await fetch(yt("/users/instruments"),{headers:{...Dt(i)}});if(!C.ok)throw new Error(await C.text());const N=await C.json();if(!E)return;l(Array.isArray(N)?N:[]),e(g=>{const f=(g.measuringInstruments||[]).map(b=>N.find(w=>w.id===b.id)||b);return{...g,measuringInstruments:f}})}catch(C){if(!E)return;p(C?.message||"Nepodailo se nast mic pstroje.")}finally{E&&d(!1)}}})(),()=>{E=!1}},[i,e]);const k=(E,C)=>{e(N=>{const g=N.measuringInstruments||[],j=g.some(b=>b.id===E.id);let f=g;return C&&!j&&(f=[...g,E]),!C&&j&&(f=g.filter(b=>b.id!==E.id)),{...N,measuringInstruments:f}})};return n.jsx("div",{className:"space-y-5 text-sm text-gray-800",children:n.jsxs("section",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Mic pstroje"}),n.jsx("div",{className:"bg-white rounded-xl shadow overflow-hidden border border-gray-100",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 w-10 text-center"}),n.jsx("th",{className:"p-2 text-left",children:"Nzev"}),n.jsx("th",{className:"p-2 text-left",children:"Co m"}),n.jsx("th",{className:"p-2 text-left",children:"Kal. list"}),n.jsx("th",{className:"p-2 text-left",children:"S/N"}),n.jsx("th",{className:"p-2 text-left",children:"Platnost do"}),n.jsx("th",{className:"p-2 text-left",children:"Pozn."})]})}),n.jsxs("tbody",{children:[c&&n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"p-3 text-center text-gray-500",children:"Natm"})}),!c&&u&&n.jsx("tr",{children:n.jsxs("td",{colSpan:7,className:"p-3 text-center text-red-600",children:["Chyba: ",String(u)]})}),!c&&!u&&a.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"p-3 text-center text-gray-500",children:"V katalogu zatm nejsou dn pstroje."})}),!c&&!u&&a.map(E=>{const C=v.has(E.id);return n.jsxs("tr",{className:"border-t hover:bg-gray-50/60",children:[n.jsx("td",{className:"p-2 text-center align-middle",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4",checked:C,onChange:N=>k(E,N.target.checked)})}),n.jsx("td",{className:"p-2",children:E.name}),n.jsx("td",{className:"p-2",children:E.measurement_text}),n.jsx("td",{className:"p-2",children:E.calibration_code}),n.jsx("td",{className:"p-2",children:E.serial||""}),n.jsx("td",{className:"p-2",children:E.calibration_valid_until||""}),n.jsx("td",{className:"p-2",children:E.note||""})]},E.id)})]})]})})]})})}function f0(){const{form:r,setForm:e}=V.useContext(cn),i=r?.lps?.visualChecks||[],a=u=>e(p=>({...p,lps:{...p.lps,visualChecks:u}})),l=()=>a([...i,{text:"",ok:!1}]),c=u=>a(i.filter((p,y)=>y!==u)),d=(u,p,y)=>{const v=i.map((k,E)=>E===u?{...k,[p]:y}:k);a(v)};return n.jsxs("div",{className:"space-y-4 text-sm text-gray-800",children:[n.jsx("h2",{className:"text-xl font-semibold text-blue-800",children:"LPS  Vizuln kontrola"}),n.jsx("div",{className:"bg-white rounded shadow border",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 text-left",children:"Poloka"}),n.jsx("th",{className:"p-2 text-left",children:"OK"}),n.jsx("th",{className:"p-2 text-left",children:"Poznmka"}),n.jsx("th",{className:"p-2 text-left",children:"Akce"})]})}),n.jsxs("tbody",{children:[i.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"dn poloky"})}),i.map((u,p)=>n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"p-2",children:n.jsx("input",{className:"w-full p-2 border rounded",value:u.text,onChange:y=>d(p,"text",y.target.value),placeholder:"Nap. svorky dotaeny, znaen svod"})}),n.jsx("td",{className:"p-2",children:n.jsx("input",{type:"checkbox",checked:!!u.ok,onChange:y=>d(p,"ok",y.target.checked)})}),n.jsx("td",{className:"p-2",children:n.jsx("input",{className:"w-full p-2 border rounded",value:u.note||"",onChange:y=>d(p,"note",y.target.value),placeholder:"voliteln"})}),n.jsx("td",{className:"p-2",children:n.jsx("button",{className:"px-2 py-1 bg-red-600 text-white rounded",onClick:()=>c(p),children:"Smazat"})})]},p))]})]})}),n.jsx("button",{className:"px-3 py-2 bg-blue-600 text-white rounded",onClick:l,children:"+ Pidat poloku"})]})}function p0(){const{form:r,setForm:e}=V.useContext(cn),i=r?.lps?.earthResistance||[],a=r?.lps?.spdTests||[],l=r.measuringInstruments||[],c=Array.isArray(r?.lps?.scopeChecks)&&r.lps.scopeChecks.includes("spd"),d=(r?.lps?.spdProtectionUsed||"")!=="no",u=c&&d;V.useMemo(()=>l.map(N=>({value:N.id,label:`${N.name} (${N.calibration_code})`})),[l]);const p=N=>e(g=>({...g,lps:{...g.lps,earthResistance:N}})),y=N=>e(g=>({...g,lps:{...g.lps,spdTests:N}})),v=(N,g,j)=>p(i.map((f,b)=>b===N?{...f,[g]:j}:f)),k=(N,g,j)=>y(a.map((f,b)=>b===N?{...f,[g]:j}:f)),E=r?.lps?.downConductorsCountOther||r?.lps?.downConductorsCount,C=(()=>{const N=parseInt(String(E||"").trim(),10);return Number.isFinite(N)&&N>0?N:0})();return V.useEffect(()=>{C&&e(N=>{const g=Array.isArray(N?.lps?.earthResistance)?N.lps.earthResistance:[];let j=g.slice(0,C);for(;j.length<C;)j.push({label:`Zemni . ${j.length+1}`,valueOhm:""});return j.length===g.length&&j.every((b,w)=>g[w]===b)?N:{...N,lps:{...N?.lps||{},earthResistance:j}}})},[C]),V.useEffect(()=>{!d&&a.length>0&&y([])},[d]),n.jsxs("div",{className:"space-y-6 text-sm text-gray-800",children:[n.jsx("h2",{className:"text-xl font-semibold text-blue-800",children:"LPS  Men"}),n.jsxs("section",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Zemn odpor (jednotliv zemnie)"}),n.jsx("div",{className:"bg-white rounded shadow border",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 text-left",children:"Zemni"}),n.jsx("th",{className:"p-2 text-left",children:"Rz ()"}),n.jsx("th",{className:"p-2 text-left",children:"Pozn."})]})}),n.jsxs("tbody",{children:[i.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500",children:"dn zznamy"})}),i.map((N,g)=>n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"p-2",children:n.jsx("input",{className:"w-full p-2 border rounded",value:N.label,onChange:j=>v(g,"label",j.target.value)})}),n.jsx("td",{className:"p-2",children:n.jsx("input",{className:"w-32 p-2 border rounded",value:N.valueOhm,onChange:j=>v(g,"valueOhm",j.target.value),placeholder:"nap. 10"})}),n.jsx("td",{className:"p-2",children:n.jsx("input",{className:"w-full p-2 border rounded",value:N.note||"",onChange:j=>v(g,"note",j.target.value)})})]},g))]})]})})]}),u?n.jsxs("section",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"SPD / pepov ochrana  men"}),n.jsx("div",{className:"bg-white rounded shadow border",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 text-left",children:"Msto"}),n.jsx("th",{className:"p-2 text-left",children:"Typ (T1/T2/T3)"}),n.jsx("th",{className:"p-2 text-left",children:"Vsledek"}),n.jsx("th",{className:"p-2 text-left",children:"Pozn."})]})}),n.jsxs("tbody",{children:[a.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"dn zznamy"})}),a.map((N,g)=>n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"p-2",children:n.jsx("input",{className:"w-full p-2 border rounded",value:N.location,onChange:j=>k(g,"location",j.target.value),placeholder:"rozvad, pvod apod."})}),n.jsx("td",{className:"p-2",children:n.jsxs("select",{className:"p-2 border rounded",value:N.type,onChange:j=>k(g,"type",j.target.value),children:[n.jsx("option",{value:"",children:"- vyberte -"}),n.jsx("option",{value:"T1",children:"T1"}),n.jsx("option",{value:"T2",children:"T2"}),n.jsx("option",{value:"T3",children:"T3"}),n.jsx("option",{value:"T1+T2",children:"T1+T2"})]})}),n.jsx("td",{className:"p-2",children:n.jsxs("select",{className:"p-2 border rounded",value:N.result,onChange:j=>k(g,"result",j.target.value),children:[n.jsx("option",{value:"",children:"- vyberte -"}),n.jsx("option",{value:"OK",children:"OK"}),n.jsx("option",{value:"NOK",children:"NOK"})]})}),n.jsx("td",{className:"p-2",children:n.jsx("input",{className:"w-full p-2 border rounded",value:N.note||"",onChange:j=>k(g,"note",j.target.value)})})]},g))]})]})})]}):c&&n.jsxs("section",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"SPD / pepov ochrana  men"}),n.jsx("div",{className:"p-3 bg-white rounded border text-sm text-gray-600",children:"SPD nen pouita."})]})]})}function m_({text:r,children:e}){return n.jsxs("span",{className:"group relative inline-block",children:[e,n.jsx("span",{className:"absolute z-10 hidden group-hover:block bg-gray-700 text-white text-xs rounded py-1 px-2 bottom-full left-1/2 -translate-x-1/2 mb-2 w-64 text-center",children:r})]})}const y_=["SN 33 1500 Revize","SN 33 2130 ed.4 Vnitn rozvody","SN 33 2000-6 ed.2 Revize","SN 33 2000-4-41 ed.3 Ochrana","SN 33 2000-5-54 ed.3 Uzemnn","SN 33 2000-5-52 ed.2 Vodie","SN 33 2000-7-701 ed.2 Koupelny","SN EN IEC 61439-1 ed.3 Rozvde","Nazen vldy 190/2022 Sb.","SN 34 1500 Revize (1978)","SN 34 1010 Ochrana (1966)"],ol=r=>r.replace(/[\s\.]/g,"").toLowerCase();function g_(){const{form:r,setForm:e}=V.useContext(cn),i=c=>{const d=ol(c);return r.norms.some(u=>{const p=ol(u);return p===d||d.startsWith(p)||p.startsWith(d)})},a=c=>{e(d=>{const u=d.norms.findIndex(y=>{const v=ol(y),k=ol(c);return v===k||k.startsWith(v)||v.startsWith(k)});let p;return u>=0?p=d.norms.filter((y,v)=>v!==u):p=[...d.norms,c],{...d,norms:p}})},l=c=>d=>{const u=d.target.value;e(p=>({...p,[c]:u}))};return n.jsxs("section",{className:"bg-white p-4 rounded shadow mb-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-blue-800 mb-3",children:"Pouit normy a zkony"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mb-4",children:y_.map(c=>n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",className:"accent-blue-600",checked:i(c),onChange:()=>a(c)}),n.jsx("span",{children:c})]},c))}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h3",{className:"font-medium",children:"Vlastn normy"}),n.jsx("input",{type:"text",placeholder:"Vlastn norma 1",className:"w-full p-2 border rounded text-sm",value:r.customNorm1,onChange:l("customNorm1")}),n.jsx("input",{type:"text",placeholder:"Vlastn norma 2",className:"w-full p-2 border rounded text-sm",value:r.customNorm2,onChange:l("customNorm2")}),n.jsx("input",{type:"text",placeholder:"Vlastn norma 3",className:"w-full p-2 border rounded text-sm",value:r.customNorm3,onChange:l("customNorm3")})]})]})}const v_=["230V","400V","230V/400V","12V","24V"],x_=["Vchoz","Pravideln","Mimodn"],w_=["TN-C","TN-S","TN-C-S","TT","IT"],b_={basic:[{label:"Zkladn izolace",tooltip:"Izolace ivch st, kter brn pmmu dotyku."},{label:"Pepky a kryty",tooltip:"Fyzick bariry k ivm stem."},{label:"Zbrany",tooltip:"Zabrauje nemyslnmu dotyku."},{label:"Ochrana polohou",tooltip:"iv sti nejsou bn pstupn."},{label:"Omezen napt (ELV)",tooltip:"Napt sneno na bezpenou rove."},{label:"Omezen proudu",tooltip:"Omezen proudu a nboje pi dotyku."},{label:"Srovnn potencil",tooltip:"Vyrovnn potencil mezi stmi."}],fault:[{label:"Automatick odpojen od zdroje",tooltip:"Odpojen pi porue, aby se zabrnilo dotykovmu napt."},{label:"Ochrann pospojovn",tooltip:"Spojen vech neivch st a uzemnn."},{label:"Elektrick oddlen",tooltip:"Izolace obvodu od zem a jinch obvod."},{label:"Pdavn izolace",tooltip:"Dal vrstva izolace."},{label:"Ochrann stnn",tooltip:"Kovov kryt nebo s proti ruen."},{label:"Nevodiv okol",tooltip:"Pouit materil s nzkou vodivost."}],additional:[{label:"Proudov chrnie (RCD)",tooltip:"Vypnaj obvod pi rozdlu proudu."},{label:"Doplkov pospojovn",tooltip:"Spojuje vodiv sti v mstnosti kvli bezpenosti."}]};function j_(){const{form:r,setForm:e}=V.useContext(cn),{profile:i,company:a,refreshCompanies:l,loadingCompanies:c}=ps(),{token:d}=Dr(),[u,p]=V.useState([]),[y,v]=V.useState(!1),[k,E]=V.useState(null),C=w=>_=>e({...r,[w]:_.target.value}),N=r.measuringInstruments||[],g=V.useMemo(()=>new Set(N.map(w=>w.id)),[N]),j=(w,_)=>{e(A=>{const B=A.measuringInstruments||[],M=B.some(D=>D.id===w.id);let $=B;return _&&!M&&($=[...B,w]),!_&&M&&($=B.filter(D=>D.id!==w.id)),{...A,measuringInstruments:$}})},f=(w,_)=>{e(A=>{const B=`protection_${w}`,M=A[B]||[],D=M.includes(_)?M.filter(le=>le!==_):[...M,_];return{...A,[B]:D}})};V.useEffect(()=>{let w=!0;async function _(){if(d){v(!0),E(null);try{const A=await fetch(yt("/users/instruments"),{headers:{...Dt(d)}});if(!A.ok)throw new Error(await A.text());const B=await A.json();if(!w)return;p(Array.isArray(B)?B:[]),e(M=>{const D=(M.measuringInstruments||[]).map(le=>B.find(pe=>pe.id===le.id)||le);return{...M,measuringInstruments:D}})}catch(A){if(!w)return;E(A?.message||"Nepodailo se nast mic pstroje.")}finally{w&&v(!1)}}}return _(),()=>{w=!1}},[d,e]);const b=V.useCallback(async()=>{if(await l?.(),!a){e(w=>({...w,technicianCompanyName:"",technicianCompanyIco:"",technicianCompanyDic:"",technicianCompanyAddress:""}));return}e(w=>({...w,technicianCompanyName:a.name||"",technicianCompanyIco:a.ico||"",technicianCompanyDic:a.dic||"",technicianCompanyAddress:a.address||""}))},[a,l,e]);return n.jsxs("div",{className:"space-y-5 text-sm text-gray-800",children:[n.jsx("h2",{className:"text-xl font-semibold text-blue-800",children:"Identifikace"}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"font-semibold",children:"Evidenn slo"}),n.jsx("input",{type:"text",value:r.evidencni||"",readOnly:!0,className:"p-2 border rounded w-full bg-gray-100"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"font-semibold",children:"Revidovan objekt"}),n.jsx("input",{type:"text",className:"p-2 border rounded w-full",value:r.objekt||"",onChange:C("objekt")})]}),n.jsxs("div",{children:[n.jsx("label",{className:"font-semibold",children:"Adresa"}),n.jsx("input",{type:"text",className:"p-2 border rounded w-full",value:r.adresa||"",onChange:C("adresa")})]}),n.jsxs("div",{children:[n.jsx("label",{className:"font-semibold",children:"Objednatel"}),n.jsx("input",{type:"text",className:"p-2 border rounded w-full",value:r.objednatel||"",onChange:C("objednatel")})]}),n.jsxs("div",{children:[n.jsx("label",{className:"font-semibold",children:"Typ revize"}),n.jsxs("select",{className:"p-2 border rounded w-full",value:r.typRevize||"",onChange:C("typRevize"),children:[n.jsx("option",{value:"",disabled:!0,children:"- vyberte -"}),x_.map(w=>n.jsx("option",{value:w,children:w},w))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"font-semibold",children:"Druh st"}),n.jsxs("select",{className:"p-2 border rounded w-full",value:r.sit||"",onChange:C("sit"),children:[n.jsx("option",{value:"",disabled:!0,children:"- vyberte -"}),w_.map(w=>n.jsx("option",{value:w,children:w},w))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"font-semibold",children:"Jmenovit napt"}),n.jsx("input",{list:"voltages",className:"p-2 border rounded w-full",value:r.voltage||"",onChange:C("voltage")}),n.jsx("datalist",{id:"voltages",children:v_.map(w=>n.jsx("option",{value:w},w))})]})]}),n.jsxs("section",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Mic pstroje"}),n.jsx("div",{className:"bg-white rounded-xl shadow overflow-hidden border border-gray-100",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 w-10 text-center"}),n.jsx("th",{className:"p-2 text-left",children:"Nzev"}),n.jsx("th",{className:"p-2 text-left",children:"Co m"}),n.jsx("th",{className:"p-2 text-left",children:"Kal. list"}),n.jsx("th",{className:"p-2 text-left",children:"S/N"}),n.jsx("th",{className:"p-2 text-left",children:"Platnost do"}),n.jsx("th",{className:"p-2 text-left",children:"Pozn."})]})}),n.jsxs("tbody",{children:[y&&n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"p-3 text-center text-gray-500",children:"Natm pstroje"})}),!y&&k&&n.jsx("tr",{children:n.jsxs("td",{colSpan:7,className:"p-3 text-center text-red-600",children:["Chyba: ",String(k)]})}),!y&&!k&&u.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"p-3 text-center text-gray-500",children:"V katalogu zatm nejsou dn pstroje."})}),!y&&!k&&u.map(w=>{const _=g.has(w.id);return n.jsxs("tr",{className:"border-t hover:bg-gray-50/60",children:[n.jsx("td",{className:"p-2 text-center align-middle",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4",checked:_,onChange:A=>j(w,A.target.checked)})}),n.jsx("td",{className:"p-2",children:w.name}),n.jsx("td",{className:"p-2",children:w.measurement_text}),n.jsx("td",{className:"p-2",children:w.calibration_code}),n.jsx("td",{className:"p-2",children:w.serial||""}),n.jsx("td",{className:"p-2",children:w.calibration_valid_until||""}),n.jsx("td",{className:"p-2",children:w.note||""})]},w.id)})]})]})})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"font-semibold",children:"Montn firma"}),n.jsx("input",{type:"text",className:"p-2 border rounded w-full",value:r.montFirma||"",onChange:C("montFirma")})]}),n.jsxs("div",{children:[n.jsx("label",{className:"font-semibold",children:"Oprvnn montn firmy"}),n.jsx("input",{type:"text",className:"p-2 border rounded w-full",value:r.montFirmaAuthorization||"",onChange:C("montFirmaAuthorization"),placeholder:"nap. 12345/XX/EZ"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"font-semibold",children:"Zahjen revize"}),n.jsx("input",{type:"date",className:"p-2 border rounded w-full",value:r.date_start||"",onChange:C("date_start")})]}),n.jsxs("div",{children:[n.jsx("label",{className:"font-semibold",children:"Ukonen revize"}),n.jsx("input",{type:"date",className:"p-2 border rounded w-full",value:r.date_end||"",onChange:C("date_end")})]}),n.jsxs("div",{children:[n.jsx("label",{className:"font-semibold",children:"Vypracovan revize"}),n.jsx("input",{type:"date",className:"p-2 border rounded w-full",value:r.date_created||"",onChange:C("date_created")})]})]}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-4 items-end",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"font-semibold",children:"Firma"}),n.jsx("input",{type:"text",className:"p-2 border rounded w-full bg-gray-100 cursor-not-allowed",value:r.technicianCompanyName||"",readOnly:!0,"aria-readonly":!0,tabIndex:-1,placeholder:"(nenastaveno  klikni na Nast aktivn subjekt)"})]}),n.jsx("div",{className:"flex md:justify-end",children:n.jsx("button",{onClick:b,className:"h-[42px] px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded w-full md:w-auto",title:"Prope IO/DI/Adresu aktivnho subjektu do tto revize",children:c?"Natm":"Nast aktivn subjekt"})})]}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"font-semibold",children:"IO (revize)"}),n.jsx("input",{type:"text",className:"p-2 border rounded w-full bg-gray-100 cursor-not-allowed",value:r.technicianCompanyIco||"",readOnly:!0,"aria-readonly":!0,tabIndex:-1})]}),n.jsxs("div",{children:[n.jsx("label",{className:"font-semibold",children:"DI (revize)"}),n.jsx("input",{type:"text",className:"p-2 border rounded w-full bg-gray-100 cursor-not-allowed",value:r.technicianCompanyDic||"",readOnly:!0,"aria-readonly":!0,tabIndex:-1})]}),n.jsxs("div",{children:[n.jsx("label",{className:"font-semibold",children:"Adresa (revize)"}),n.jsx("input",{type:"text",className:"p-2 border rounded w-full bg-gray-100 cursor-not-allowed",value:r.technicianCompanyAddress||"",readOnly:!0,"aria-readonly":!0,tabIndex:-1})]})]}),n.jsx(g_,{}),["basic","fault","additional"].map(w=>n.jsxs("div",{children:[n.jsx("label",{className:"font-semibold block mb-2 capitalize",children:{basic:"Zkladn ochrana",fault:"Ochrana pi porue",additional:"Doplkov ochrana"}[w]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:b_[w].map(_=>n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:r[`protection_${w}`]?.includes(_.label)||!1,onChange:()=>f(w,_.label)}),n.jsx(m_,{text:_.tooltip,children:n.jsx("span",{className:"underline cursor-help",children:_.label})})]},_.label))})]},w)),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"font-semibold",children:"Projektov dokumentace"}),n.jsx("input",{type:"text",className:"p-2 border rounded w-full",value:r.documentation||"",onChange:C("documentation")})]}),n.jsxs("div",{children:[n.jsx("label",{className:"font-semibold",children:"Posouzen vnjch vliv"}),n.jsx("input",{type:"text",className:"p-2 border rounded w-full",value:r.environment||"",onChange:C("environment")})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"font-semibold",children:"Dal psemn podklady"}),n.jsx("textarea",{rows:4,className:"p-2 border rounded w-full",value:r.extraNotes||"",onChange:C("extraNotes")})]})]})}const N_=["Zpsob ochrany ped razem elektrickm proudem (IEC 60364-4-41)","Protiporn pepky a ochrana ped enm ohn (IEC 60364-4-42, 5-52:2009)","Volba vodi dle zatitelnosti a bytku napt (IEC 60364-4-43, 5-52:2009)","Sezen a koordinace ochrannch pstroj (IEC 60364-5-53:2001)","Pepov ochrany SPD (IEC 60364-5-53:2001, AMD2:2015)","Odpojovac a spnac pstroje (IEC 60364-5-53:2001)","Vnj vlivy a mechanick namhn (IEC 60364-4-42:2010, 5-51:2005, 5-52:2009)","Oznaen vodi, vstran npisy a schmata (IEC 60364-5-51:2005)","Oznaen obvod, svorek atd. (IEC 60364-5-51:2005)","Zakonovn kabel a vodi (IEC 60364-5-52:2009)"],ag={Byt:"Byt o velikosti 3+1 se nachz v prvnm pate bytovho domu. Elektroinstalace je napjena z elektromrovho rozvade umstnho v technick mstnosti v pzem. Pipojen je realizovno kabelem CYKY 5x6 mm. V byt je instalovna bytov rozvodnice, ze kter jsou napjeny zsuvkov i svteln okruhy. Koupelna je vybavena doplkovm pospojovnm, osvtlen je eeno LED svtidly. Veker obvody jsou jitny proudovmi chrnii s vybavovacm proudem 30 mA.","Rodinn dm":"Rodinn dm m dv nadzemn podla a je napjen z hlavnho domovnho rozvade, kter je umstn na fasd objektu. Vnitn elektroinstalace je vedena kabely CYKY v PVC chrnikch. V kadm podla je podrun rozvodnice. Jitn obvod zajiuj jistie a proudov chrnie. Hromosvod je instalovn dle SN EN 62305.",FVE:"Fotovoltaick elektrrna je instalovna na stee objektu a pipojena k distribun sti pomoc stdae. DC strana je vedena kabely s dvojitou izolac, pepov ochrany jsou instalovny na DC i AC stran. Stda je uzemnn, vkon systmu je 5 kWp. Elektrick schmata a dokumentace byly dodny.",Wallbox:"Nabjec stanice pro elektromobil je instalovna na vnj zdi gare a pipojena k hlavnmu rozvadi samostatnm kabelem CYKY 5x10 mm. Jitn je provedeno proudovm chrniem typu B. Stanice je osazena pepovou ochranou a byla provedena zkouka funkce a komunikace s vozidlem.","Spolen prostory":"Spolen prostory v bytovm dom zahrnuj chodby, sklepy a technick mstnosti. Osvtlen je eeno pomoc LED svtidel s asovm spnaem. Rozvodnice jsou oznaeny, kryty svorek jsou zajitny. Vechna kovov zazen jsou pipojena na pospojovn. Revize se tkala funknosti, oznaen a mechanickho stavu instalace.","Odbrn msto":"Odbrn msto se nachz na veejn pstupnm mst a je osazeno elektromrovm rozvadem v plastovm proveden s tdou kryt IP44. Vnitn propoje byly zkontrolovny, hromadn dlkov ovldn je funkn. Hlavn jisti odpovd velikosti rezervovanho pkonu.","Nebytov prostory":"Nebytov prostory jsou ureny ke komernmu vyuit a elektroinstalace odpovd provoznm nrokm. V mstnostech jsou zsuvkov a svteln obvody, pipojen klimatizace a elektrospotebi. Provedeno kontroln men izolanho odporu, propojen pospojovn a zajitn oznaen rozvad."};function k_(){const{form:r,setForm:e}=V.useContext(cn),i=c=>{e(d=>{const u=d.performedTasks,p=u.includes(c)?u.filter(y=>y!==c):[...u,c];return{...d,performedTasks:p}})},a=c=>{const d=ag[c]||"";e(u=>({...u,inspectionTemplate:c,inspectionDescription:d}))},l=c=>{const d=c.target.value;e(u=>({...u,inspectionDescription:d}))};return n.jsxs("div",{className:"space-y-4 text-sm text-gray-800",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-blue-800 mb-2",children:" Proveden kony"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:N_.map(c=>n.jsxs("label",{className:"flex gap-2 items-start",children:[n.jsx("input",{type:"checkbox",checked:r.performedTasks.includes(c),onChange:()=>i(c),className:"accent-blue-600"}),n.jsx("span",{children:c})]},c))})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-blue-800 mb-2",children:" Popis revidovanho objektu"}),n.jsxs("div",{className:"mb-2",children:[n.jsx("label",{className:"font-medium block mb-1",children:"Vyber vzorov text:"}),n.jsxs("select",{value:r.inspectionTemplate,onChange:c=>a(c.target.value),className:"border p-2 rounded w-full text-sm",children:[n.jsx("option",{value:"",children:"-- Vyberte monost --"}),Object.keys(ag).map(c=>n.jsx("option",{value:c,children:c},c))]})]}),n.jsx("textarea",{rows:6,className:"w-full border rounded p-2 text-sm",value:r.inspectionDescription,onChange:l,placeholder:"Popis revidovanho objektu..."})]})]})}const __=["Spojitost ochrannch vodi","Izolan odpor","Proudov chrni  vybavovac proud","Proudov chrni  as vypnut","Impedance smyky","bytek napt","Oven sledovn fz","Funknost pepov ochrany","Proudov zatitelnost vodi","Zkouka funknosti jitn"];function S_(){const{form:r,setForm:e}=V.useContext(cn),i=l=>{e(c=>{const d=c.tests[l]??{checked:!1,note:""},u={...c.tests,[l]:{...d,checked:!d.checked}};return{...c,tests:u}})},a=(l,c)=>{e(d=>{const u=d.tests[l]??{checked:!1,note:""},p={...d.tests,[l]:{...u,note:c}};return{...d,tests:p}})};return n.jsxs("div",{className:"space-y-4 text-sm text-gray-800",children:[n.jsx("h2",{className:"text-xl font-semibold text-blue-800 mb-3",children:" Proveden zkouky"}),n.jsx("div",{className:"space-y-3",children:__.map(l=>{const c=r.tests[l]??{checked:!1,note:""};return n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2",children:[n.jsxs("label",{className:"flex items-center gap-2 w-full md:w-1/2 text-sm",children:[n.jsx("input",{type:"checkbox",checked:c.checked,onChange:()=>i(l),className:"accent-blue-600"}),l]}),n.jsx("input",{type:"text",className:"flex-1 rounded border px-3 py-1.5",placeholder:"Poznmka nap. Bez zvad",value:c.note,onChange:d=>a(l,d.target.value)})]},l)})})]})}function E_({newComp:r,setNewComp:e,defaultComp:i,isCustom:a,setIsCustom:l,types:c,manufacturers:d,models:u,polesOptions:p,dimenzeOptions:y,parentCandidates:v,onParentChange:k,onCancel:E,onAdd:C}){const N=V.useMemo(()=>{const g=`${r.nazev||""} ${r.typ||""}`.toLowerCase();return/chrni|jistiochrni|rcd|rcbo/.test(g)},[r.nazev,r.typ]);return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white p-6 rounded shadow w-full max-w-3xl",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:r.id?"Upravit komponentu":"Nov komponenta"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-xs font-medium mb-1",children:"Nadazen prvek"}),n.jsx("select",{className:"w-full p-1.5 border rounded text-sm",value:r.parentId??0,onChange:g=>{const j=Number(g.target.value);k(j||null)},children:v.map(g=>n.jsx("option",{value:g.id,children:g.label},g.id))})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-xs font-medium mb-1",children:"Pstroj"}),n.jsxs("select",{className:"w-full p-1.5 border rounded text-sm",value:a?"vlastni":r.nazevId,onChange:g=>{const j=g.target.value;if(j==="vlastni")l(!0),e({...i,parentId:r.parentId??null});else{l(!1);const f=g.target.selectedOptions[0]?.text||"";e(b=>({...b,nazevId:j,nazev:f,popisId:"",popis:"",typId:"",typ:""}))}},children:[n.jsx("option",{value:"",children:"-- vyber --"}),c.map(g=>n.jsx("option",{value:String(g.id),children:g.name},g.id)),n.jsx("option",{value:"vlastni",children:"Vlastn"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[a?n.jsx(n.Fragment,{children:[["nazev","Nzev"],["popis","Vrobce / Popis"],["typ","Model / Typ"],["poles","Poet pl"],["dimenze","Dimenze"],["riso","Riso [M]"],["ochrana","Ochrana []"],["poznamka","Poznmka"]].map(([g,j])=>n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium",children:j}),n.jsx("input",{type:"text",className:"w-full p-1.5 border rounded text-sm",value:r[g]||"",onChange:f=>e(b=>({...b,[g]:f.target.value}))})]},g))}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium",children:"Vrobce"}),n.jsxs("select",{className:"w-full p-1.5 border rounded text-sm",value:r.popisId,onChange:g=>{const j=g.target.value,f=g.target.selectedOptions[0]?.text||"";e(b=>({...b,popisId:j,popis:f,typId:"",typ:""}))},children:[n.jsx("option",{value:"",children:"-- vyber --"}),d.map(g=>n.jsx("option",{value:String(g.id),children:g.name},g.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium",children:"Typ / Model"}),n.jsxs("select",{className:"w-full p-1.5 border rounded text-sm",value:r.typId,onChange:g=>{const j=g.target.value,f=g.target.selectedOptions[0]?.text||"";e(b=>({...b,typId:j,typ:f}))},children:[n.jsx("option",{value:"",children:"-- vyber --"}),u.map(g=>n.jsx("option",{value:String(g.id),children:g.name},g.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium",children:"Poet pl"}),n.jsxs("select",{className:"w-full p-1.5 border rounded text-sm",value:r.poles,onChange:g=>e(j=>({...j,poles:g.target.value})),children:[n.jsx("option",{value:"",children:"-- vyber --"}),p.map(g=>n.jsx("option",{value:g,children:g},g))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium",children:"Dimenze"}),n.jsxs("select",{className:"w-full p-1.5 border rounded text-sm",value:r.dimenze,onChange:g=>e(j=>({...j,dimenze:g.target.value})),children:[n.jsx("option",{value:"",children:"-- vyber --"}),y.map(g=>n.jsx("option",{value:g,children:g},g))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium",children:"Riso [M]"}),n.jsx("input",{type:"text",className:"w-full p-1.5 border rounded text-sm",value:r.riso||"",onChange:g=>e(j=>({...j,riso:g.target.value}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium",children:"Ochrana []"}),n.jsx("input",{type:"text",className:"w-full p-1.5 border rounded text-sm",value:r.ochrana||"",onChange:g=>e(j=>({...j,ochrana:g.target.value}))})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-xs font-medium",children:"Poznmka"}),n.jsx("input",{type:"text",className:"w-full p-1.5 border rounded text-sm",value:r.poznamka||"",onChange:g=>e(j=>({...j,poznamka:g.target.value}))})]})]}),N&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium",children:"Vybavovac as [ms]"}),n.jsx("input",{type:"number",className:"w-full p-1.5 border rounded text-sm",value:r.vybavovaciCasMs||"",onChange:g=>e(j=>({...j,vybavovaciCasMs:g.target.value}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium",children:"Vybavovac proud [mA]"}),n.jsx("input",{type:"number",className:"w-full p-1.5 border rounded text-sm",value:r.vybavovaciProudmA||"",onChange:g=>e(j=>({...j,vybavovaciProudmA:g.target.value}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium",children:"Dotykov napt [V]"}),n.jsx("input",{type:"number",className:"w-full p-1.5 border rounded text-sm",value:r.dotykoveNapetiV||"",onChange:g=>e(j=>({...j,dotykoveNapetiV:g.target.value}))})]})]})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{className:"bg-gray-300 px-4 py-2 rounded",onClick:E,children:"Zruit"}),n.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded",onClick:C,children:r.id?"Uloit zmny":"Pidat komponentu"})]})]})})}const C_=24,T_=40,A_=["1","1+N","3","3+N"],R_=[...["CYKY","AYKY"].flatMap(r=>["21,5","31,5","51,5","22,5","32,5","52,5","34","36","310","316","325","335"].map(e=>`${r} ${e}`)),...["1,5","2,5","4","6","10","16","25","35"].map(r=>`CYA ${r}`)],P_={display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"};function z_(){const{form:r,setForm:e}=Mi(),i=r.boards,[a,l]=V.useState(i[0]?.id??null),c=i.find(L=>L.id===a)||null,[d,u]=V.useState(!1),[p,y]=V.useState(null),[v,k]=V.useState(null),[E,C]=V.useState(""),N={id:0,nazevId:"",nazev:"",popisId:"",popis:"",typId:"",typ:"",poles:"",dimenze:"",riso:"",ochrana:"",poznamka:"",parentId:null,order:0},[g,j]=V.useState({...N}),[f,b]=V.useState(!1),[w,_]=V.useState([]),[A,B]=V.useState([]),[M,$]=V.useState([]),[D,le]=V.useState(!1),[pe,H]=V.useState(!1),[q,T]=V.useState({name:"",vyrobce:"",typ:"",vyrobniCislo:"",napeti:"",proud:"",ip:"",odpor:"",umisteni:""});V.useEffect(()=>{let L=!1;return Ke.get("/catalog/types").then(ie=>!L&&_(ie.data)).catch(()=>{}),()=>{L=!0}},[]),V.useEffect(()=>{let L=!1;return g.nazevId?Ke.get("/catalog/manufacturers",{params:{type_id:g.nazevId}}).then(ie=>!L&&B(ie.data)).catch(()=>{}):B([]),$([]),()=>{L=!0}},[g.nazevId]),V.useEffect(()=>{let L=!1;return g.popisId?Ke.get("/catalog/models",{params:{manufacturer_id:g.popisId}}).then(ie=>!L&&$(ie.data)).catch(()=>{}):$([]),()=>{L=!0}},[g.popisId]);const Z=L=>[L.nazev,L.popis,L.typ].filter(ie=>(ie??"").toString().trim()).join(" "),Q=V.useMemo(()=>{if(!c)return[];const L=c.komponenty.map(F=>({...F,parentId:F.parentId??null,order:F.order??0})),ie=new Map;L.forEach(F=>ie.set(F.id,{...F,children:[]}));const z=[];ie.forEach(F=>{if(F.parentId==null)z.push(F);else{const x=ie.get(F.parentId);x?x.children.push(F):z.push(F)}});const fe=F=>{F.sort((x,m)=>(x.order??0)-(m.order??0)),F.forEach(x=>fe(x.children))};return fe(z),z},[c]),Y=V.useMemo(()=>{if(!c)return[];const L=c.komponenty;return[{id:0,label:"(dn  1. rove)"},...L.map((ie,z)=>({id:ie.id,label:`${z+1}. ${Z(ie)||""}`}))]},[c]);function ne(){if(!q.name.trim())return alert("Nzev povinn");const L=Date.now();e(ie=>({...ie,boards:[...ie.boards,{id:L,komponenty:[],...q}]})),le(!1),T({name:"",vyrobce:"",typ:"",vyrobniCislo:"",napeti:"",proud:"",ip:"",odpor:"",umisteni:""}),l(L)}function J(){if(!c)return;const L=Date.now(),ie={...c,id:L,komponenty:c.komponenty.map((z,fe)=>({...z,id:L+fe+1}))};e(z=>({...z,boards:[...z.boards,ie]})),l(ie.id)}function ue(){if(!a||!window.confirm("Opravdu chcete smazat tento rozvad?"))return;const L=r.boards.filter(ie=>ie.id!==a);e(ie=>({...ie,boards:L})),l(L[0]?.id??null)}function W(){c&&(T({name:c.name||"",vyrobce:c.vyrobce||"",typ:c.typ||"",vyrobniCislo:c.vyrobniCislo||"",napeti:c.napeti||"",proud:c.proud||"",ip:c.ip||"",odpor:c.odpor||"",umisteni:c.umisteni||""}),H(!0))}function U(){c&&(e(L=>({...L,boards:L.boards.map(ie=>ie.id===c.id?{...ie,...q}:ie)})),H(!1))}function re(L){y(null),j({...N,parentId:L}),b(!1),u(!0)}function ae(L){if(!c)return;const z=c.komponenty.find(fe=>fe.id===L);z&&(y(L),j({...N,...z}),b(!z.nazevId),u(!0))}function ye(){if(!c)return;const L=c.komponenty;if(p!=null){const x=L.find(X=>X.id===p);if(!x)return;const m={...x,...g,id:x.id,order:x.order??0},R=L.map(X=>X.id===p?m:X);e(X=>({...X,boards:X.boards.map(oe=>oe.id===c.id?{...oe,komponenty:R}:oe)})),u(!1),y(null);return}const ie=Date.now(),z=L.filter(x=>(x.parentId??null)===(g.parentId??null)),fe=z.length?Math.max(...z.map(x=>x.order??0))+1:0,F={...g,id:ie,order:fe};e(x=>({...x,boards:x.boards.map(m=>m.id===c.id?{...m,komponenty:[...m.komponenty,F]}:m)})),u(!1)}function ce(L){if(!c)return;const ie=c.komponenty,z=ie.find(R=>R.id===L);if(!z)return;const fe=Date.now(),F=ie.filter(R=>(R.parentId??null)===(z.parentId??null)),x=F.length?Math.max(...F.map(R=>R.order??0))+1:0,m={...z,id:fe,order:x};e(R=>({...R,boards:R.boards.map(X=>X.id===c.id?{...X,komponenty:[...X.komponenty,m]}:X)}))}function P(L){if(!c||!window.confirm("Smazat prvek vetn cel jeho vtve?"))return;const ie=c.komponenty,z=new Set,fe=new Map;ie.forEach(m=>{const R=m.parentId??null;fe.set(R,[...fe.get(R)||[],m.id])});const F=m=>{z.add(m),(fe.get(m)||[]).forEach(F)};F(L);const x=ie.filter(m=>!z.has(m.id));e(m=>({...m,boards:m.boards.map(R=>R.id===c.id?{...R,komponenty:x}:R)}))}function O(L,ie){if(!c)return;const z=[...c.komponenty],fe=z.find(ge=>ge.id===L);if(!fe)return;const F=fe.parentId??null,x=z.filter(ge=>(ge.parentId??null)===F).sort((ge,ke)=>(ge.order??0)-(ke.order??0)),m=x.findIndex(ge=>ge.id===L),R=m+ie;if(R<0||R>=x.length)return;const X=x[m],oe=x[R],se=z.map(ge=>ge.id===X.id?{...ge,order:oe.order??0}:ge.id===oe.id?{...ge,order:X.order??0}:ge);e(ge=>({...ge,boards:ge.boards.map(ke=>ke.id===c.id?{...ke,komponenty:se}:ke)}))}function te(L,ie){k(L),C(ie||"")}function ee(){k(null),C("")}function G(L){if(!c)return;const z=c.komponenty.map(fe=>fe.id===L?{...fe,poznamka:E}:fe);e(fe=>({...fe,boards:fe.boards.map(F=>F.id===c.id?{...F,komponenty:z}:F)})),k(null)}return n.jsxs("section",{className:"bg-white p-4 rounded shadow mb-8",children:[n.jsxs("div",{className:"flex gap-6 mb-4",children:[n.jsxs("aside",{className:"w-1/4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Rozvade:"}),n.jsx("div",{className:"border rounded p-2 mb-3",children:n.jsx("ul",{className:"space-y-1",children:i.map(L=>n.jsx("li",{onClick:()=>l(L.id),className:`p-2 rounded cursor-pointer hover:bg-blue-50 ${L.id===a?"bg-blue-100 font-semibold":""}`,children:L.name||"(bez nzvu)"},L.id))})}),n.jsxs("div",{className:"flex gap-2 justify-center mb-3",children:[n.jsx("button",{className:"bg-green-600 text-white px-3 py-1 rounded text-sm",onClick:()=>le(!0),title:"Pidat rozvad",children:" Pidat"}),c&&n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"bg-yellow-500 text-white px-3 py-1 rounded text-sm",onClick:J,title:"Koprovat vybran",children:" Koprovat"}),n.jsx("button",{className:"bg-red-600 text-white px-3 py-1 rounded text-sm",onClick:ue,title:"Smazat vybran",children:" Smazat"})]})]})]}),n.jsx("div",{className:"flex-1 overflow-auto p-4",children:c?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"text-lg font-semibold",children:c.name||"(bez nzvu)"}),n.jsx("button",{className:"text-xs border px-2 py-1 rounded",title:"Upravit vlastnosti rozvade",onClick:W,children:" Upravit rozvad"})]}),n.jsx("div",{className:"grid md:grid-cols-3 gap-4 mb-3",children:[["vyrobce","Vrobce"],["typ","Typ"],["vyrobniCislo","Vrobn slo"],["napeti","Napt"],["proud","Proud"],["ip","IP kryt"],["odpor","Pechodov odpor"],["umisteni","Umstn"]].map(([L,ie])=>n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-500",children:ie}),n.jsx("div",{className:"p-2",children:c[L]})]},L))}),n.jsx(O_,{roots:Q,fullName:Z,onAddChild:L=>re(L),onEdit:L=>ae(L),onMoveUp:L=>O(L,-1),onMoveDown:L=>O(L,1),onCopy:ce,onDelete:P,onStartEditNote:te,editingNoteId:v,noteDraft:E,setNoteDraft:C,onSaveNote:G,onCancelNote:ee}),n.jsx("div",{className:"mt-4 flex justify-end",children:n.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded text-sm",onClick:()=>re(null),children:" Pidat komponentu 1. rovn"})})]}):n.jsx("div",{className:"text-gray-500",children:"Vyberte rozvad"})})]}),D&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white p-6 rounded shadow w-full max-w-md",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Nov rozvad"}),n.jsx("div",{className:"grid grid-cols-1 gap-3",children:[["name","Nzev"],["vyrobce","Vrobce"],["typ","Typ"],["vyrobniCislo","Vrobn slo"],["napeti","Napt"],["proud","Proud"],["ip","IP kryt"],["odpor","Pechodov odpor"],["umisteni","Umstn"]].map(([L,ie])=>n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:ie}),n.jsx("input",{type:"text",className:"w-full p-2 border rounded",value:q[L],onChange:z=>T(fe=>({...fe,[L]:z.target.value}))})]},L))}),n.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[n.jsx("button",{className:"px-4 py-2 bg-gray-300 rounded",onClick:()=>le(!1),children:"Zruit"}),n.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",onClick:ne,children:"Pidat"})]})]})}),pe&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white p-6 rounded shadow w-full max-w-md",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Upravit rozvad"}),n.jsx("div",{className:"grid grid-cols-1 gap-3",children:[["name","Nzev"],["vyrobce","Vrobce"],["typ","Typ"],["vyrobniCislo","Vrobn slo"],["napeti","Napt"],["proud","Proud"],["ip","IP kryt"],["odpor","Pechodov odpor"],["umisteni","Umstn"]].map(([L,ie])=>n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:ie}),n.jsx("input",{type:"text",className:"w-full p-2 border rounded",value:q[L]||"",onChange:z=>T(fe=>({...fe,[L]:z.target.value}))})]},L))}),n.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[n.jsx("button",{className:"px-4 py-2 bg-gray-300 rounded",onClick:()=>H(!1),children:"Zruit"}),n.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",onClick:U,children:"Uloit"})]})]})}),d&&n.jsx(E_,{newComp:g,setNewComp:j,defaultComp:N,isCustom:f,setIsCustom:b,types:w,manufacturers:A,models:M,polesOptions:A_,dimenzeOptions:R_,parentCandidates:Y,onParentChange:L=>j(ie=>({...ie,parentId:L??null})),onCancel:()=>{u(!1),b(!1),y(null)},onAdd:ye})]})}function O_({roots:r,fullName:e,onAddChild:i,onEdit:a,onMoveUp:l,onMoveDown:c,onCopy:d,onDelete:u,onStartEditNote:p,editingNoteId:y,noteDraft:v,setNoteDraft:k,onSaveNote:E,onCancelNote:C}){const N=(g,j)=>{const f=(g.children?.length??0)>0;return n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 px-2 py-1.5 border-b hover:bg-blue-50/40",style:{paddingLeft:C_+j*T_},children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"truncate font-medium",children:[g.cislo?`${g.cislo}  `:"",e(g)]}),n.jsxs("div",{className:"text-[14px] text-gray-600 line-clamp-2",style:P_,children:[g.poles&&n.jsxs("span",{className:"mr-3",children:["ply: ",g.poles]}),g.dimenze&&n.jsxs("span",{className:"mr-3",children:["dim.: ",g.dimenze]}),g.riso&&n.jsxs("span",{className:"mr-3",children:["Riso: ",g.riso," "]}),g.ochrana&&n.jsxs("span",{className:"mr-3",children:["Zs: ",g.ochrana," "]}),g.vybavovaciCasMs&&n.jsxs("span",{className:"mr-3",children:["t: ",g.vybavovaciCasMs," ms"]}),g.vybavovaciProudmA&&n.jsxs("span",{className:"mr-3",children:["I: ",g.vybavovaciProudmA," mA"]}),g.dotykoveNapetiV&&n.jsxs("span",{className:"mr-3",children:["U: ",g.dotykoveNapetiV," V"]}),y===g.id?n.jsxs("span",{className:"inline-flex items-center gap-1",children:[n.jsx("input",{className:"border px-1 py-0.5 text-[12px] rounded",autoFocus:!0,value:v,onChange:b=>k(b.target.value),onBlur:()=>E(g.id),onKeyDown:b=>{b.key==="Enter"&&E(g.id),b.key==="Escape"&&C()},style:{minWidth:160}}),n.jsx("button",{className:"text-[12px] px-1 py-0.5 border rounded",onMouseDown:b=>b.preventDefault(),onClick:()=>E(g.id),title:"Uloit",children:"Uloit"}),n.jsx("button",{className:"text-[12px] px-1 py-0.5 border rounded",onMouseDown:b=>b.preventDefault(),onClick:C,title:"Zruit",children:"Zruit"})]}):n.jsxs("span",{className:"italic",onDoubleClick:()=>p(g.id,g.poznamka||""),title:"Dvojklikem upravit poznmku",style:{cursor:"text"},children:["Pozn.: ",g.poznamka||""]})]})]}),n.jsxs("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[n.jsx("button",{className:"text-xs border px-2 py-0.5 rounded",title:"Upravit",onClick:()=>a(g.id),children:""}),n.jsx("button",{className:"text-xs border px-2 py-0.5 rounded",title:"Nahoru",onClick:()=>l(g.id),children:""}),n.jsx("button",{className:"text-xs border px-2 py-0.5 rounded",title:"Dol",onClick:()=>c(g.id),children:""}),n.jsx("button",{className:"text-xs border px-2 py-0.5 rounded",title:"Koprovat",onClick:()=>d(g.id),children:""}),n.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-0.5 rounded",title:"Smazat",onClick:()=>u(g.id),children:""}),n.jsx("button",{className:"text-xs bg-indigo-600 text-white px-2 py-0.5 rounded",title:"Pidat potomka",onClick:()=>i(g.id),children:"+"})]})]}),f&&g.children.map(b=>N(b,j+1))]},g.id)};return n.jsx("div",{className:"w-full border rounded",children:r.length?r.map(g=>N(g,0)):n.jsx("div",{className:"p-3 text-gray-500",children:"dn prvky."})})}const I_=[{label:"Zsuvka 230V"},{label:"Zsuvka 400V"},{label:"Svtlo"},{label:"Svtlo LED"},{label:"Svtlo nstnn  venkovn"},{label:"Vypna"},{label:"Ventiltor"},{label:"Termostat"},{label:"Detektor koue"},{label:"Pepov ochrana"},{label:"Nouzov svtidlo"}];function F_(r){const e=[r.manufacturer,r.model].filter(Boolean).join(" ");return[r.name,e].filter(Boolean).join("  ")}const ll={pocet:1,dimenze:"",ochrana:"",riso:"",podrobnosti:""};function D_(){const{form:r,setForm:e}=Mi(),i=r.rooms||[],[a,l]=V.useState(i[0]?.id??null),[c,d]=V.useState(null),[u,p]=V.useState(null),[y,v]=V.useState(!1),[k,E]=V.useState([]),[C,N]=V.useState(!1),[g,j]=V.useState(""),[f,b]=V.useState(""),[w,_]=V.useState(""),[A,B]=V.useState(""),[M,$]=V.useState(""),[D,le]=V.useState(""),[pe,H]=V.useState("name"),[q,T]=V.useState("asc"),[Z,Q]=V.useState([]),[Y,ne]=V.useState(!1),[J,ue]=V.useState(null),[W,U]=V.useState({...ll}),re=i.find(m=>m.id===a)||null;V.useEffect(()=>{let m=!0;return(async()=>{N(!0);try{const R=await Ke.get("/devices",{params:{offset:0,limit:5e3}});m&&E(Array.isArray(R.data)?R.data:[])}catch{m&&E([])}finally{m&&N(!1)}})(),()=>{m=!1}},[]),V.useEffect(()=>{let m=!0;return(async()=>{ne(!0);try{const R=await Ke.get("/cables",{params:{offset:0,limit:5e3}}),oe=(Array.isArray(R.data)?R.data:[]).map(ge=>ge.label&&ge.label.trim()?ge.label.trim():[ge.family,ge.spec].filter(Boolean).join(" ")).filter(ge=>ge&&ge.length>0),se=Array.from(new Set(oe)).sort((ge,ke)=>ge.localeCompare(ke,"cs"));m&&Q(se)}catch{m&&Q([])}finally{m&&ne(!1)}})(),()=>{m=!1}},[]);const ae=V.useMemo(()=>{const m=g.trim().toLowerCase();let R=k.filter(X=>{const oe=!m||(X.name??"").toLowerCase().includes(m)||(X.manufacturer??"").toLowerCase().includes(m)||(X.model??"").toLowerCase().includes(m)||(X.trida??"").toLowerCase().includes(m)||(X.ip??"").toLowerCase().includes(m),se=!f||(X.name??"").toLowerCase().includes(f.toLowerCase()),ge=!w||(X.manufacturer??"").toLowerCase().includes(w.toLowerCase()),ke=!A||(X.model??"").toLowerCase().includes(A.toLowerCase()),Ce=!M||(X.trida??"").toLowerCase().includes(M.toLowerCase()),Fe=!D||(X.ip??"").toLowerCase().includes(D.toLowerCase());return oe&&se&&ge&&ke&&Ce&&Fe});return R.sort((X,oe)=>{const se=String(X?.[pe]??"").toLowerCase(),ge=String(oe?.[pe]??"").toLowerCase();return se<ge?q==="asc"?-1:1:se>ge?q==="asc"?1:-1:0}),R},[k,g,f,w,A,M,D,pe,q]);function ye(m){pe===m?T(R=>R==="asc"?"desc":"asc"):(H(m),T("asc"))}function ce(m,R){if(!re)return;const X={id:Date.now(),pocet:R?.pocet??1,typ:m,dimenze:R?.dimenze??"",ochrana:R?.ochrana??"",riso:R?.riso??"",podrobnosti:R?.podrobnosti??""};e(oe=>({...oe,rooms:oe.rooms.map(se=>se.id===re.id?{...se,devices:[...se.devices||[],X]}:se)}))}function P(){j(""),b(""),_(""),B(""),$(""),le("")}function O(m){ue(m),U({...ll})}function te(m){ue(F_(m)),U({...ll})}function ee(){J&&(ce(J,{pocet:W.pocet,dimenze:W.dimenze,ochrana:W.ochrana,riso:W.riso,podrobnosti:W.podrobnosti}),ue(null),U({...ll}),v(!1),P())}function G(){const m=Date.now(),R={id:m,name:"Nov mstnost",details:"",devices:[]};e(X=>({...X,rooms:[...X.rooms,R]})),l(m),d(m)}function L(){const m=i.find(oe=>oe.id===a);if(!m)return;const R=Date.now(),X={id:R,name:`${m.name}  kopie`,details:m.details,devices:(m.devices||[]).map(oe=>({...oe,id:Date.now()+Math.random()}))};e(oe=>({...oe,rooms:[...oe.rooms,X]})),l(R),d(null)}function ie(m){if(confirm("Opravdu smazat mstnost vetn zazen?")&&(e(R=>({...R,rooms:R.rooms.filter(X=>X.id!==m)})),a===m)){const R=i.filter(X=>X.id!==m);l(R[0]?.id??null)}}function z(m,R,X){e(oe=>({...oe,rooms:oe.rooms.map(se=>se.id===m?{...se,[R]:X}:se)}))}function fe(m,R,X,oe){e(se=>({...se,rooms:se.rooms.map(ge=>ge.id===m?{...ge,devices:(ge.devices||[]).map(ke=>ke.id===R?{...ke,[X]:oe}:ke)}:ge)}))}function F(m,R){confirm("Opravdu smazat tento pstroj?")&&(e(X=>({...X,rooms:X.rooms.map(oe=>oe.id===m?{...oe,devices:(oe.devices||[]).filter(se=>se.id!==R)}:oe)})),u===R&&p(null))}function x(m,R){const X={...R,id:Date.now()+Math.random()};e(oe=>({...oe,rooms:oe.rooms.map(se=>se.id===m?{...se,devices:[...se.devices||[],X]}:se)}))}return n.jsxs("section",{className:"bg-white p-4 rounded shadow mb-8",children:[n.jsxs("div",{className:"flex gap-6",children:[n.jsxs("aside",{className:"w-80",children:[n.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Mstnosti"}),n.jsx("div",{className:"border rounded overflow-hidden",children:n.jsx("div",{className:"max-h-[60vh] overflow-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 sticky top-0",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 text-left",children:"Nzev"}),n.jsx("th",{className:"p-2 text-right w-24",children:"Zazen"})]})}),n.jsxs("tbody",{children:[i.map(m=>n.jsxs("tr",{className:`border-t cursor-pointer hover:bg-blue-50 ${m.id===a?"bg-blue-100":""}`,onClick:()=>l(m.id),children:[n.jsx("td",{className:"p-2",children:m.name||"(bez nzvu)"}),n.jsx("td",{className:"p-2 text-right",children:(m.devices||[]).length})]},m.id)),i.length===0&&n.jsx("tr",{children:n.jsx("td",{className:"p-3 text-center text-gray-500",colSpan:2,children:"dn mstnosti."})})]})]})})}),n.jsxs("div",{className:"flex gap-2 mt-3",children:[n.jsx("button",{className:"flex-1 bg-blue-600 text-white py-1 rounded text-sm",onClick:G,children:" Pidat"}),re&&n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"flex-1 bg-yellow-500 text-white py-1 rounded text-sm",onClick:L,children:" Koprovat"}),n.jsx("button",{className:"flex-1 bg-red-600 text-white py-1 rounded text-sm",onClick:()=>ie(re.id),children:" Smazat"})]})]})]}),n.jsx("div",{className:"flex-1",children:re?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Detail mstnosti"}),n.jsxs("button",{className:"px-3 py-2 border rounded",title:c===re.id?"Ukonit editaci":"Upravit nzev a poznmky",onClick:()=>d(m=>m===re.id?null:re.id),children:[" ",c===re.id?"Uloit":"Upravit"]})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",onBlur:m=>{const R=m.relatedTarget;m.currentTarget.contains(R)||d(null)},children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nzev mstnosti"}),c===re.id?n.jsx("input",{className:"w-full p-2 border rounded",value:re.name,onChange:m=>z(re.id,"name",m.target.value),autoFocus:!0}):n.jsx("div",{className:"whitespace-pre-wrap",children:re.name||n.jsx("span",{className:"text-gray-400",children:"(nenastaveno)"})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Poznmky"}),c===re.id?n.jsx("textarea",{rows:2,className:"w-full p-2 border rounded",value:re.details,onChange:m=>z(re.id,"details",m.target.value)}):n.jsx("div",{className:"whitespace-pre-wrap",children:re.details||n.jsx("span",{className:"text-gray-400",children:"(dn)"})})]})]})]}):n.jsx("div",{className:"text-gray-500",children:"Vyber mstnost vlevo."})})]}),re&&n.jsxs("div",{className:"mt-6",children:[n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("table",{className:"w-full text-sm border",children:[n.jsx("thead",{className:"bg-gray-100",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 text-center w-20",children:"Poet"}),n.jsx("th",{className:"p-2 text-left",children:"Typ"}),n.jsx("th",{className:"p-2 text-left",children:"Dimenze"}),n.jsx("th",{className:"p-2 text-left",children:"Ochrana"}),n.jsx("th",{className:"p-2 text-left",children:"Riso"}),n.jsx("th",{className:"p-2 text-left",children:"Podrobnosti"}),n.jsx("th",{className:"p-2 text-center w-28",children:"Akce"})]})}),n.jsxs("tbody",{children:[(re.devices||[]).map(m=>{const R=u===m.id;return n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"p-2 text-center",children:R?n.jsx("input",{type:"number",min:1,className:"w-20 p-1 border rounded text-center",value:m.pocet,onChange:X=>fe(re.id,m.id,"pocet",Number(X.target.value||1))}):m.pocet}),n.jsx("td",{className:"p-2",children:R?n.jsx("input",{className:"w-full p-1 border rounded",value:m.typ,onChange:X=>fe(re.id,m.id,"typ",X.target.value)}):m.typ}),n.jsx("td",{className:"p-2",children:R?n.jsx("input",{list:"dimOptions",className:"w-full p-1 border rounded",value:m.dimenze,onChange:X=>fe(re.id,m.id,"dimenze",X.target.value),placeholder:Y?"Natm":"Vyber nebo napi"}):m.dimenze}),n.jsx("td",{className:"p-2",children:R?n.jsx("input",{className:"w-full p-1 border rounded",value:m.ochrana,onChange:X=>fe(re.id,m.id,"ochrana",X.target.value)}):m.ochrana}),n.jsx("td",{className:"p-2",children:R?n.jsx("input",{className:"w-full p-1 border rounded",value:m.riso,onChange:X=>fe(re.id,m.id,"riso",X.target.value)}):m.riso}),n.jsx("td",{className:"p-2",children:R?n.jsx("input",{className:"w-full p-1 border rounded",value:m.podrobnosti,onChange:X=>fe(re.id,m.id,"podrobnosti",X.target.value)}):m.podrobnosti}),n.jsx("td",{className:"p-2 text-center",children:n.jsxs("div",{className:"inline-flex items-center gap-1",children:[n.jsx("button",{className:"p-1 rounded hover:bg-blue-50",title:R?"Ukonit pravu":"Upravit",onClick:()=>p(X=>X===m.id?null:m.id),children:""}),n.jsx("button",{className:"p-1 rounded hover:bg-yellow-50",title:"Koprovat",onClick:()=>x(re.id,m),children:""}),n.jsx("button",{className:"p-1 rounded hover:bg-red-50",title:"Smazat",onClick:()=>F(re.id,m.id),children:""})]})})]},m.id)}),(!re.devices||re.devices.length===0)&&n.jsx("tr",{children:n.jsx("td",{className:"p-4 text-center text-gray-500",colSpan:7,children:"dn pstroje. Pidej ne vpravo."})})]})]}),n.jsx("datalist",{id:"dimOptions",children:Z.map(m=>n.jsx("option",{value:m},m))})]}),n.jsx("div",{className:"flex justify-end mt-2",children:n.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded text-sm",onClick:()=>v(!0),children:" Pidat pstroj"})})]}),y&&re&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white p-6 rounded shadow w-full max-w-5xl relative",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Pidat pstroj do mstnosti"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"md:col-span-1",children:[n.jsx("div",{className:"text-sm font-medium mb-2",children:"Obecn poloky"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:I_.map(m=>n.jsx("button",{className:"px-3 py-1 border rounded hover:bg-gray-100",onClick:()=>O(m.label),title:`Pidat ${m.label}`,children:m.label},m.label))}),n.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Vlo se jako text (bez vrobce/typu). Ped vloenm nastav parametry."})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("input",{placeholder:"Hledat v katalogu (nzev, vrobce, typ, IP, tda)",className:"w-full p-2 border rounded",value:g,onChange:m=>j(m.target.value)}),g&&n.jsx("button",{className:"px-3 py-2 bg-gray-200 rounded",onClick:()=>j(""),children:""})]}),n.jsx("div",{className:"border rounded max-h-80 overflow-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsxs("thead",{className:"bg-gray-50 sticky top-0",children:[n.jsxs("tr",{children:[n.jsx(Ea,{label:"Pstroj",onClick:()=>ye("name"),active:pe==="name",dir:q}),n.jsx(Ea,{label:"Vrobce",onClick:()=>ye("manufacturer"),active:pe==="manufacturer",dir:q}),n.jsx(Ea,{label:"Typ",onClick:()=>ye("model"),active:pe==="model",dir:q}),n.jsx(Ea,{label:"Tda",onClick:()=>ye("trida"),active:pe==="trida",dir:q}),n.jsx(Ea,{label:"IP",onClick:()=>ye("ip"),active:pe==="ip",dir:q}),n.jsx("th",{className:"p-2 text-center w-24",children:"Akce"})]}),n.jsxs("tr",{className:"bg-white",children:[n.jsx("th",{className:"p-1",children:n.jsx("input",{className:"w-full p-1 border rounded",placeholder:"filtr",value:f,onChange:m=>b(m.target.value)})}),n.jsx("th",{className:"p-1",children:n.jsx("input",{className:"w-full p-1 border rounded",placeholder:"filtr",value:w,onChange:m=>_(m.target.value)})}),n.jsx("th",{className:"p-1",children:n.jsx("input",{className:"w-full p-1 border rounded",placeholder:"filtr",value:A,onChange:m=>B(m.target.value)})}),n.jsx("th",{className:"p-1",children:n.jsx("input",{className:"w-full p-1 border rounded",placeholder:"filtr",value:M,onChange:m=>$(m.target.value)})}),n.jsx("th",{className:"p-1",children:n.jsx("input",{className:"w-full p-1 border rounded",placeholder:"filtr",value:D,onChange:m=>le(m.target.value)})}),n.jsx("th",{})]})]}),n.jsxs("tbody",{children:[C&&n.jsx("tr",{children:n.jsx("td",{className:"p-3 text-center text-gray-500",colSpan:6,children:"Natm"})}),!C&&ae.length===0&&n.jsx("tr",{children:n.jsx("td",{className:"p-3 text-center text-gray-500",colSpan:6,children:"Nic nenalezeno."})}),ae.map(m=>n.jsxs("tr",{className:"border-t hover:bg-blue-50",children:[n.jsx("td",{className:"p-2",children:m.name}),n.jsx("td",{className:"p-2",children:m.manufacturer||""}),n.jsx("td",{className:"p-2",children:m.model||""}),n.jsx("td",{className:"p-2",children:m.trida||""}),n.jsx("td",{className:"p-2",children:m.ip||""}),n.jsx("td",{className:"p-2 text-center",children:n.jsx("button",{className:"text-blue-600 hover:underline",onClick:()=>te(m),children:"Pidat"})})]},m.id))]})]})})]})]}),n.jsx("div",{className:"flex justify-end gap-2 mt-4",children:n.jsx("button",{className:"px-4 py-2 bg-gray-300 rounded",onClick:()=>v(!1),children:"Zavt"})}),J&&n.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center z-10",children:n.jsxs("div",{className:"bg-white rounded shadow p-5 w-full max-w-xl",children:[n.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Parametry pstroje"}),n.jsx("p",{className:"text-sm text-gray-700 mb-4",children:J}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-gray-600",children:"Poet"}),n.jsx("input",{type:"number",min:1,className:"w-full p-2 border rounded",value:W.pocet,onChange:m=>U(R=>({...R,pocet:Math.max(1,Number(m.target.value||1))}))})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"text-xs text-gray-600",children:["Dimenze ",Y&&n.jsx("span",{className:"text-[10px] text-gray-500",children:"(natm)"})]}),n.jsx("input",{list:"dimOptionsAddDialog",className:"w-full p-2 border rounded",placeholder:Y?"Natm":"Vyber nebo napi",value:W.dimenze,onChange:m=>U(R=>({...R,dimenze:m.target.value}))}),n.jsx("datalist",{id:"dimOptionsAddDialog",children:Z.map(m=>n.jsx("option",{value:m},m))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-gray-600",children:"Ochrana"}),n.jsx("input",{className:"w-full p-2 border rounded",value:W.ochrana,onChange:m=>U(R=>({...R,ochrana:m.target.value}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-gray-600",children:"Riso"}),n.jsx("input",{className:"w-full p-2 border rounded",value:W.riso,onChange:m=>U(R=>({...R,riso:m.target.value}))})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"text-xs text-gray-600",children:"Poznmka"}),n.jsx("textarea",{rows:2,className:"w-full p-2 border rounded",value:W.podrobnosti,onChange:m=>U(R=>({...R,podrobnosti:m.target.value}))})]})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[n.jsx("button",{className:"px-4 py-2 bg-gray-200 rounded",onClick:()=>ue(null),children:"Zpt"}),n.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",onClick:ee,children:"Pidat do mstnosti"})]})]})})]})})]})}function Ea({label:r,active:e,dir:i,onClick:a}){return n.jsx("th",{className:"p-2 text-left select-none",children:n.jsxs("button",{type:"button",onClick:a,className:`inline-flex items-center gap-1 ${e?"text-blue-700":"text-gray-800"}`,title:"Seadit",children:[n.jsx("span",{children:r}),e&&n.jsx("span",{children:i==="asc"?"":""})]})})}function L_(){return n.jsxs("div",{className:"space-y-5 text-sm text-gray-800",children:[n.jsx("h2",{className:"text-xl font-semibold text-blue-800",children:" Men  Elektroinstalace"}),n.jsx(z_,{}),n.jsx(D_,{})]})}function og(r){const e=(r||"").trim();if(!e)return{standard:"",article:""};const i=e.match(/^(.*?)(?:\s*(?:l\.?|cl\.?)\s*([0-9A-Za-z.\-\/]+))$/i);return i?{standard:(i[1]||"").trim(),article:(i[2]||"").trim()}:{standard:e,article:""}}function B_(r){const e=r?.id??r?.defect_id??r?.pk??void 0,i=r?.description??r?.text??r?.name??"";let a=r?.standard??r?.norm??r?.norma??r?.standard_code??r?.standard_name??"",l=r?.article??r?.clause??r?.clanek??r?.article_ref??"";const c=r?.reference??r?.standard_article??r?.norm_ref??"";if(!a&&!l&&c){const y=og(c);a=y.standard,l=y.article}if(a&&!l){const y=og(a);a=y.standard,l=y.article}const d=r?.visibility==="global"?"global":r?.visibility==="user"?"user":void 0,u=r?.moderation_status==="pending"?"pending":r?.moderation_status==="rejected"?"rejected":"none",p=typeof r?.usage_count=="number"?r.usage_count:typeof r?.uses=="number"?r.uses:0;return{id:e,description:String(i||""),standard:String(a||""),article:String(l||""),visibility:d,moderation_status:u,reject_reason:r?.reject_reason??null,usage_count:p}}function hf(){const{form:r,setForm:e}=V.useContext(cn),[i,a]=V.useState([]),[l,c]=V.useState(!1),[d,u]=V.useState(!1),[p,y]=V.useState(!1),[v,k]=V.useState({description:"",standard:"",article:""}),[E,C]=V.useState(!1),N=(v.description||"").trim().length>=3,[g,j]=V.useState(null),[f,b]=V.useState(""),[w,_]=V.useState(""),[A,B]=V.useState("usage"),[M,$]=V.useState("desc"),[D,le]=V.useState("id"),[pe,H]=V.useState("asc");V.useEffect(()=>{const P=(r.defects||[]).map((O,te)=>`${te+1}) ${O.description} - ${O.standard} - ${O.article}`);b(P.join(`
`))},[]);const q=V.useCallback(async()=>{try{const O=((await Ke.get("/defects")).data||[]).map(B_);a(O)}catch{alert("Chyba pi natn katalogu zvad")}},[]);V.useEffect(()=>{l&&q()},[l,q]),V.useEffect(()=>{d&&q()},[d,q]);async function T(P){const O={description:P.description||"",standard:P.standard||"",article:P.article||""};if(e(te=>({...te,defects:[...te.defects||[],O]})),P.id){a(te=>te.map(ee=>ee.id===P.id?{...ee,usage_count:(ee.usage_count||0)+1}:ee));try{await Ke.post(`/defects/${P.id}/use`)}catch{}}b(te=>{const L=`${(te?te.split(`
`):[]).filter(ie=>ie.trim().length>0).length+1}) ${O.description} - ${O.standard} - ${O.article}`;return te&&te.trim().length?te+`
`+L:L}),c(!1)}function Z(P){const O=P.target.value;b(O);const te=O.split(`
`).map(ee=>ee.trim()).filter(ee=>ee.length>0).map(ee=>{const L=ee.replace(/^\s*\d+\)\s*/,"").split(/\s-\s/);return{description:L[0]||"",standard:L[1]||"",article:L[2]||""}});e(ee=>({...ee,defects:te}))}function Q(P,O,te){a(ee=>ee.map((G,L)=>L===P?{...G,[O]:te}:G))}async function Y(P){const O=i[P];if(O?.id)try{await Ke.put(`/defects/${O.id}`,{description:O.description,standard:O.standard,article:O.article}),await q()}catch{alert("Chyba pi ukldn zmn")}}function ne(P){j(P)}async function J(){if(g?.id)try{await Ke.delete(`/defects/${g.id}`),j(null),await q()}catch{j(null),alert("Chyba pi mazn poloky")}}const ue=V.useMemo(()=>[v.description?.trim(),v.standard?.trim(),v.article?.trim()].filter(Boolean).join(" - "),[v]),W=["SN 33 2000-1 ed.2:2009","SN 33 2000-5-51 ed.3:2022","SN 33 2000-5-54 ed.3:2012","SN 33 2000-6 ed.2:2017","SN EN 61439-1","SN 33 2000-7-701"],U=V.useMemo(()=>{const P=new Map;for(const ee of i){const G=(ee.standard||"").trim();G&&P.set(G,(P.get(G)||0)+(ee.usage_count||0))}const te=[...P.entries()].sort((ee,G)=>G[1]-ee[1]).map(([ee])=>ee).slice(0,6);return te.length>0?te:W},[i]);function re(P){(P.ctrlKey||P.metaKey)&&P.key.toLowerCase()==="enter"&&N&&ae()}async function ae(){try{const O=(await Ke.post("/defects",{description:(v.description||"").trim(),standard:(v.standard||"").trim(),article:(v.article||"").trim()}))?.data;if(O?.id&&E)try{await Ke.post(`/defects/${O.id}/submit`,{note:""})}catch{console.warn("Submit k posouzen selhal.")}k({description:"",standard:"",article:""}),C(!1),y(!1),await q()}catch{alert("Chyba pi vytven poloky")}}const ye=V.useMemo(()=>{const P=w.trim().toLowerCase();let O=P?i.filter(ee=>`${ee.description} ${ee.standard} ${ee.article}`.toLowerCase().includes(P)):[...i];const te=M==="asc"?1:-1;return O.sort((ee,G)=>{if(A==="usage"){const L=ee.usage_count??0,ie=G.usage_count??0;return(L-ie)*te}if(A==="id"){const L=ee.id??0,ie=G.id??0;return(L-ie)*te}return ee.description.localeCompare(G.description)*te}),O},[i,w,A,M]),ce=V.useMemo(()=>{const P=pe==="asc"?1:-1,O=[...i];return O.sort((te,ee)=>{if(D==="usage"){const G=te.usage_count??0,L=ee.usage_count??0;return(G-L)*P}if(D==="id"){const G=te.id??0,L=ee.id??0;return(G-L)*P}return te.description.localeCompare(ee.description)*P}),O},[i,D,pe]);return n.jsxs("section",{className:"space-y-4 text-sm text-gray-800",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Zvady a doporuen"}),n.jsx("textarea",{className:"w-full rounded border px-3 py-1.5 text-sm whitespace-pre-wrap",rows:6,placeholder:"Kad zvada na samostatnm dku",value:f,onChange:Z}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{className:"rounded bg-blue-600 px-3 py-1.5 text-sm font-medium text-white shadow-sm transition hover:bg-blue-700",onClick:()=>c(!0),children:" Pidat zvadu"}),n.jsx("button",{className:"rounded bg-gray-600 px-3 py-1.5 text-sm font-medium text-white shadow-sm transition hover:bg-gray-700",onClick:()=>u(!0),children:" Editor katalogu"})]}),l&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"compact-card w-full max-w-5xl space-y-4",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx("h3",{className:"text-base font-semibold",children:"Vyberte zvadu"}),n.jsx("button",{className:"text-sm text-gray-600 transition hover:text-gray-900",onClick:()=>c(!1),children:" Zavt"})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("input",{className:"flex-1 min-w-[240px] rounded border px-3 py-1.5 text-sm",placeholder:"Hledat v popisu / norm / lnku",value:w,onChange:P=>_(P.target.value)}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-gray-700",children:"adit podle"}),n.jsxs("select",{className:"rounded border px-3 py-1.5 text-sm",value:A,onChange:P=>B(P.target.value),children:[n.jsx("option",{value:"usage",children:"Pouit"}),n.jsx("option",{value:"id",children:"ID"}),n.jsx("option",{value:"description",children:"Nzev"})]}),n.jsx("button",{className:"rounded border px-2 py-1 text-sm",title:M==="asc"?"adit sestupn":"adit vzestupn",onClick:()=>$(P=>P==="asc"?"desc":"asc"),children:M==="asc"?"":""})]}),n.jsx("button",{className:"ml-auto rounded bg-blue-600 px-3 py-1.5 text-sm font-medium text-white shadow-sm transition hover:bg-blue-700",onClick:()=>y(!0),children:" Nov poloka"})]}),n.jsx("div",{className:"max-h-[60vh] overflow-auto rounded border",children:n.jsxs("table",{className:"compact-table w-full",children:[n.jsx("thead",{className:"bg-gray-100 sticky top-0",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-2 py-1 text-left",children:"Zvada"}),n.jsx("th",{className:"px-2 py-1 text-left",children:"Norma"}),n.jsx("th",{className:"px-2 py-1 text-left",children:"lnek"}),n.jsx("th",{className:"px-2 py-1 text-right",children:"Pouit"}),n.jsx("th",{className:"px-2 py-1 text-center",children:"Akce"})]})}),n.jsxs("tbody",{children:[ye.map(P=>n.jsxs("tr",{className:"border-t",children:[n.jsxs("td",{className:"px-2 py-1",children:[P.description," ",P.visibility==="global"?n.jsx("span",{className:"ml-1 text-[10px] bg-blue-100 text-blue-800 px-1 rounded align-middle",children:""}):null,P.moderation_status==="pending"?n.jsx("span",{className:"ml-1 text-[10px] bg-yellow-100 text-yellow-800 px-1 rounded align-middle",children:""}):null]}),n.jsx("td",{className:"px-2 py-1",children:P.standard||""}),n.jsx("td",{className:"px-2 py-1",children:P.article||""}),n.jsx("td",{className:"px-2 py-1 text-right font-mono tabular-nums",children:P.usage_count??0}),n.jsx("td",{className:"px-2 py-1 text-center",children:n.jsx("button",{className:"px-2 text-green-600",onClick:()=>T(P),children:""})})]},P.id??`${P.description}-${P.standard}-${P.article}`)),ye.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"px-3 py-2 text-gray-600",children:"Nic nenalezeno. Pidej novou poloku "})})]})]})}),n.jsx("div",{className:"flex justify-end gap-2 text-sm",children:n.jsx("button",{className:"rounded bg-gray-200 px-3 py-1.5",onClick:()=>c(!1),children:"Zavt"})})]})}),d&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"compact-card w-full max-w-6xl max-h-[85vh] overflow-auto space-y-4",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx("h3",{className:"text-base font-semibold",children:"Editor katalogu zvad"}),n.jsx("button",{className:"text-sm text-gray-600 transition hover:text-gray-900",onClick:()=>u(!1),children:" Zavt"})]}),n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[n.jsxs("p",{className:"text-sm text-gray-600",children:["pravy provdj pmo v tabulce. Pidvn je pes ",n.jsx("b",{children:"Nov poloka"}),"."]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-gray-700",children:"adit podle"}),n.jsxs("select",{className:"rounded border px-3 py-1.5 text-sm",value:D,onChange:P=>le(P.target.value),children:[n.jsx("option",{value:"id",children:"ID"}),n.jsx("option",{value:"usage",children:"Pouit"}),n.jsx("option",{value:"description",children:"Nzev"})]}),n.jsx("button",{className:"rounded border px-2 py-1 text-sm",title:pe==="asc"?"adit sestupn":"adit vzestupn",onClick:()=>H(P=>P==="asc"?"desc":"asc"),children:pe==="asc"?"":""}),n.jsx("button",{className:"ml-2 rounded bg-blue-600 px-3 py-1.5 text-sm font-medium text-white shadow-sm transition hover:bg-blue-700",onClick:()=>y(!0),children:" Nov poloka"})]})]}),n.jsx("div",{className:"max-h-[60vh] overflow-auto rounded border",children:n.jsxs("table",{className:"compact-table w-full",children:[n.jsx("thead",{className:"bg-gray-100 sticky top-0",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-2 py-1 text-left",children:"Zvada"}),n.jsx("th",{className:"px-2 py-1 text-left",children:"Norma"}),n.jsx("th",{className:"px-2 py-1 text-left",children:"lnek"}),n.jsx("th",{className:"px-2 py-1 text-right",children:"Pouit"}),n.jsx("th",{className:"px-2 py-1 text-center whitespace-nowrap",children:"Akce"})]})}),n.jsxs("tbody",{children:[ce.map((P,O)=>n.jsxs("tr",{className:"border-t",children:[n.jsxs("td",{className:"px-2 py-1",children:[n.jsx("input",{className:"w-full rounded border px-3 py-1 text-sm",value:P.description,onChange:te=>Q(O,"description",te.target.value)}),n.jsxs("div",{className:"mt-1 text-[10px] text-gray-500",children:[P.visibility==="global"?" spolen":" uivatelsk"," ",P.moderation_status==="pending"?" ek na schvlen":"",P.moderation_status==="rejected"?` zamtnuto (${P.reject_reason||"bez dvodu"})`:""]})]}),n.jsx("td",{className:"px-2 py-1",children:n.jsx("input",{className:"w-full rounded border px-3 py-1 text-sm",value:P.standard,onChange:te=>Q(O,"standard",te.target.value)})}),n.jsx("td",{className:"px-2 py-1",children:n.jsx("input",{className:"w-full rounded border px-3 py-1 text-sm",value:P.article,onChange:te=>Q(O,"article",te.target.value)})}),n.jsx("td",{className:"px-2 py-1 text-right font-mono tabular-nums",children:P.usage_count??0}),n.jsxs("td",{className:"px-2 py-1 text-center whitespace-nowrap",children:[n.jsx("button",{className:"px-2 text-green-600",onClick:()=>Y(O),title:"Uloit pravy",children:""}),P.visibility==="user"&&P.moderation_status!=="pending"&&P.id&&n.jsx("button",{className:"px-2 text-blue-600",title:"Navrhnout do spolenho zvadovnku",onClick:async()=>{try{await Ke.post(`/defects/${P.id}/submit`,{note:""}),await q()}catch{alert("Odesln ke schvlen selhalo")}},children:""}),n.jsx("button",{className:"px-2 text-red-600",onClick:()=>ne(P),title:"Smazat",children:""})]})]},P.id??`edit-${O}`)),ce.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"px-3 py-2 text-center text-gray-600",children:"Katalog je przdn."})})]})]})}),n.jsx("div",{className:"flex justify-end text-sm",children:n.jsx("button",{className:"rounded bg-gray-200 px-3 py-1.5",onClick:()=>u(!1),children:"Zavt"})})]})}),p&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 grid place-items-center",onKeyDown:re,children:n.jsxs("div",{className:"compact-card w-full max-w-4xl space-y-4",onClick:P=>P.stopPropagation(),children:[n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Nov zvada"}),n.jsxs("div",{className:"text-sm text-gray-500",children:["Vypl popis, ppadn normu a lnek. Uloit: ",n.jsx("kbd",{children:"Ctrl"}),"/",n.jsx("kbd",{children:""})," + ",n.jsx("kbd",{children:"Enter"})]})]}),n.jsx("button",{className:"text-gray-600 transition hover:text-gray-900",onClick:()=>y(!1),children:""})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"font-semibold text-sm",children:"Popis zvady"}),n.jsx("textarea",{rows:6,className:"w-full rounded border px-3 py-1.5",placeholder:"Nap. Ochrann pospojovn - HOP",value:v.description,onChange:P=>k(O=>({...O,description:P.target.value}))}),n.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"Pi celou vtu  bude se propisovat do protokolu i do textovho pole ve."})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"font-semibold text-sm",children:"Norma"}),n.jsx("input",{className:"w-full rounded border px-3 py-1.5",placeholder:"SN ",value:v.standard,onChange:P=>k(O=>({...O,standard:P.target.value}))}),n.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:U.map(P=>n.jsx("button",{type:"button",className:"text-xs bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded",onClick:()=>k(O=>({...O,standard:P})),children:P},P))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"font-semibold text-sm",children:"lnek"}),n.jsx("input",{className:"w-full rounded border px-3 py-1.5",placeholder:"nap. 542.4",value:v.article,onChange:P=>k(O=>({...O,article:P.target.value}))})]}),n.jsx("div",{className:"pt-2",children:n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"checkbox",checked:E,onChange:P=>C(P.target.checked)}),"Navrhnout ke schvlen do spolenho zvadovnku"]})})]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"mb-1 text-sm font-semibold",children:"Nhled zpisu"}),n.jsx("div",{className:"rounded border bg-gray-50 px-3 py-2 text-sm",children:ue||n.jsx("span",{className:"text-gray-400",children:" nic k zobrazen "})})]}),n.jsxs("div",{className:"flex justify-end gap-2 text-sm",children:[n.jsx("button",{className:"rounded bg-gray-200 px-3 py-1.5",onClick:()=>y(!1),children:"Zruit"}),n.jsx("button",{className:`rounded px-3 py-1.5 font-medium text-white transition ${N?"bg-blue-600 hover:bg-blue-700":"bg-blue-300 cursor-not-allowed"}`,onClick:ae,disabled:!N,title:N?"Uloit (Ctrl/ + Enter)":"Vypl alespo popis",children:"Uloit"})]})]})}),g&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"compact-card w-full max-w-lg space-y-3",children:[n.jsx("h3",{className:"text-base font-semibold",children:"Opravdu smazat poloku?"}),n.jsxs("p",{children:[g.description," (",g.standard||"",", l. ",g.article||"",")"]}),n.jsxs("div",{className:"flex justify-end gap-2 text-sm",children:[n.jsx("button",{className:"rounded bg-gray-200 px-3 py-1.5",onClick:()=>j(null),children:"Zruit"}),n.jsx("button",{className:"rounded bg-red-600 px-3 py-1.5 text-white",onClick:J,children:"Smazat"})]})]})})]})}const M_=["norms","insulation","continuity","loop","noDefects","training","legal","fire","bathrooms","responsibility"];function ff(){const{form:r,setForm:e}=V.useContext(cn),i=r.conclusion||{},a=(r?.type||r?.revType||r?.typRevize||"").toString(),l=!!r?.lps,c=a.toUpperCase()==="LPS"&&l,d=c&&r?.lps?.standard||"",u=(()=>{switch(d){case"CSN_EN_62305":return"SN EN 62305";case"CSN_34_1390":return"SN 34 1390";default:return"zvolen norm"}})(),p=d==="CSN_EN_62305"?10:15,y=i.vars||{},v=V.useMemo(()=>{const B=Array.isArray(r?.norms)?r.norms:[],M=[r?.customNorm1,r?.customNorm2,r?.customNorm3].filter($=>$&&String($).trim().length>0);return[...B,...M].filter(Boolean).join(", ")},[r?.norms,r?.customNorm1,r?.customNorm2,r?.customNorm3]),k=V.useCallback(B=>{switch(B){case"norms":return`Revize byla provedena dle platnch SN${v?` (s ohledem na normy platn v dob vstavby; pouit normy: ${v}).`:"."}`;case"insulation":{const M=(y.insulationMinMOhm||"").trim();return`Namen hodnoty izolanch odpor jsou ve vech ppadech vy ne 1 M, take vyhovuj SN 33 2000-6 ed.2:2017, l. 6.4.3.3.${M?` (nejni namen hodnota: ${M} M)`:""}`}case"continuity":return"Namen hodnota pechodovho odporu pospojovacho/ochrannho vodie nepeshla 0,1  a svm prezem spluje poadavky SN 33 2000-5-54 ed. 3:2012, l. 544.2.";case"loop":return"Namen hodnoty impedance smyek uveden v revizn zprv jsou v souladu s dimenzemi pedazench jistcch pstroj a zajiuj tak poadavky ochrany automatickm odpojenm od zdroje v pedepsan dob podle normy SN 33 2000-4-41 ed. 3:2018, l. 411.4.4, a to i pi uvaovn bezpenostnho souinitele (2/3) dle SN 33 2000-6 ed. 2:2017, l. D.6.4.3.7.3.";case"noDefects":return"Na zazen nebyly v dob revize zjitny zvady, kter by ohroovaly bezpenost a zdrav osob.";case"training":return"Bylo provedeno pouen a doporuena pravideln kontrola bezpenostnch prvk.";case"legal":return"Ve smyslu vyhlky . 48/82 (BOZP) mus bt obsluha elektrotechnickch zazen seznmena s bezpenm ovldnm a vypnnm tchto zazen. Elektrick zazen mus splovat vechny poadovan funkce a mus bt udrovna ve stavu odpovdajcm platnm pedpism.";case"fire":{const M=(y.fireProtectionText||"").trim();return M?`Protiporn ochrana: ${M}`:"Protiporn ochrana: "}case"bathrooms":return"Vzhledem k tomu, e se v objektu vyskytuj prostory s vanou a sprchou (SN 33 2000-7-701 ed. 2).";case"responsibility":return"Za provozuschopnost a bezpenost zazen odpovd provozovatel."}},[v,y.insulationMinMOhm,y.fireProtectionText]),E=B=>B.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),C=B=>B.replace(/\s+$/g,"").replace(/\r\n/g,`
`),N=(B,M)=>C(B).includes(k(M)),g=(B,M)=>{const $=k(M),D=C(B);return D?D.includes($)?D:D+`

`+$:$},j=(B,M)=>{const $=k(M),D=C(B),le=[new RegExp(`(^|

)${E($)}(

|$)`),new RegExp(E($))];let pe=D;for(const H of le)pe=pe.replace(H,(q,T,Z)=>T&&Z?`

`:"");return pe.replace(/^\n+|\n+$/g,"")},f=B=>{e(M=>{const $=String(M?.conclusion?.text||""),D=N($,B)?j($,B):g($,B);return{...M,conclusion:{...M.conclusion||{},text:D,vars:{...M.conclusion?.vars||{},...y}}}})},b=(B,M)=>{e($=>{const D=String($?.conclusion?.text||"");let le=D;if(M&&N(D,M)){const pe=k(M),H={...$.conclusion?.vars||{},...y,...B},q=(()=>{switch(M){case"insulation":{const T=(H.insulationMinMOhm||"").trim();return`Namen hodnoty izolanch odpor jsou ve vech ppadech vy ne 1 M, take vyhovuj SN 33 2000-6 ed.2:2017, l. 6.4.3.3.${T?` (nejni namen hodnota: ${T} M)`:""}`}case"fire":{const T=(H.fireProtectionText||"").trim();return T?`Protiporn ochrana: ${T}`:"Protiporn ochrana: "}default:return pe}})();le=C(le).replace(new RegExp(E(pe),"g"),q)}return{...$,conclusion:{...$.conclusion||{},text:le,vars:{...$.conclusion?.vars||{},...y,...B}}}})},w=B=>N(String(i.text||""),B),_={norms:"Revize dle SN",insulation:"Izolan odpory",continuity:"Pechodov odpor (PE/pospoj.)",loop:"Impedance smyek (AOZ)",noDefects:"Bez zvad (bezpenost)",training:"Pouen obsluhy",legal:"BOZP  vyhl. 48/82",fire:"Protiporn ochrana",bathrooms:"Prostory s vanou/sprchou",responsibility:"Odpovdnost provozovatele"},A=B=>{e(M=>{const $=String(M?.conclusion?.text||""),D=`Odpor zemni je v toleranci stanoven normou ( ${p} ).`,le=`Odpor zemni nen v toleranci stanoven normou (> ${p} ).`,pe="Hromosvodn zazen je v dobrm stavu a odpovd platnm normm.",H="Hromosvodn zazen nen v dobrm stavu a odpovd platnm normm.",q="Byly instalovny ochrany SPD, kter jsou funkn.",T="Byly instalovny ochrany SPD, kter nejsou funkn.",Z="Nebyly instalovny ochrany SPD.",Q={earth:[D,le],condition:[pe,H],spd:[q,T,Z]},ne={earth_yes:{group:"earth",text:D},earth_no:{group:"earth",text:le},cond_yes:{group:"condition",text:pe},cond_no:{group:"condition",text:H},spd_yes_ok:{group:"spd",text:q},spd_yes_nok:{group:"spd",text:T},spd_no:{group:"spd",text:Z}}[B];if(!ne)return M;const J=Q[ne.group]||[];let W=((U,re)=>{let ae=U;for(const ye of re){const ce=new RegExp(ye.replace(/[.*+?^${}()|[\\]\\]/g,"\\\\$&"),"g");ae=ae.replace(ce,"")}return ae.replace(/\\n\\n+/g,"\\n\\n").trim()})($,J);return W=W?W+"\\n\\n"+ne.text:ne.text,{...M,conclusion:{...M.conclusion||{},text:W}}})};return n.jsxs("section",{className:"space-y-6 text-sm text-gray-800",children:[n.jsx("h2",{className:"text-lg font-semibold text-blue-800",children:"Zvr"}),n.jsxs("div",{className:"rounded-md border bg-white p-3",children:[n.jsx("div",{className:"flex flex-wrap gap-2",children:M_.map(B=>n.jsx("button",{type:"button",className:(w(B)?"bg-indigo-600 text-white border-indigo-600":"bg-white text-slate-700 border-slate-300 hover:bg-slate-50")+" border rounded-full px-3 py-1 text-xs font-medium",onClick:()=>f(B),title:k(B),children:_[B]},B))}),c&&n.jsxs("div",{className:"mt-3 border-t pt-3",children:[n.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"LPS  rychl vty"}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsxs("button",{type:"button",className:"border rounded-full px-3 py-1 text-xs",onClick:()=>A("earth_yes"),children:["Odpor zemni v toleranci ( ",p," )"]}),n.jsx("button",{type:"button",className:"border rounded-full px-3 py-1 text-xs",onClick:()=>A("earth_no"),children:"Odpor zemni mimo toleranci"}),n.jsx("button",{type:"button",className:"border rounded-full px-3 py-1 text-xs",onClick:()=>A("cond_yes"),children:"Zazen v dobrm stavu"}),n.jsx("button",{type:"button",className:"border rounded-full px-3 py-1 text-xs",onClick:()=>A("cond_no"),children:"Zazen nen v dobrm stavu"}),n.jsx("button",{type:"button",className:"border rounded-full px-3 py-1 text-xs",onClick:()=>A("spd_yes_ok"),children:"SPD instalovny  funkn"}),n.jsx("button",{type:"button",className:"border rounded-full px-3 py-1 text-xs",onClick:()=>A("spd_yes_nok"),children:"SPD instalovny  nefunkn"}),n.jsx("button",{type:"button",className:"border rounded-full px-3 py-1 text-xs",onClick:()=>A("spd_no"),children:"SPD neinstalovny"})]})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-3 mt-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600",children:"Nejni Riso (M, voliteln)"}),n.jsx("input",{type:"text",className:"w-full rounded border px-3 py-1.5 text-sm",placeholder:"nap. 2.5",value:y.insulationMinMOhm||"",onChange:B=>b({insulationMinMOhm:B.target.value},"insulation")})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600",children:"Protiporn ochrana (voln text)"}),n.jsx("input",{type:"text",className:"w-full rounded border px-3 py-1.5 text-sm",placeholder:"nap. zkontrolovna, bez zvad / dle dokumentace",value:y.fireProtectionText||"",onChange:B=>b({fireProtectionText:B.target.value},"fire")})]})]})]}),n.jsxs("div",{className:"rounded-md border bg-white p-4 space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Text zvru (pln upraviteln)"}),n.jsx("textarea",{className:"w-full rounded border px-3 py-2 text-sm",rows:18,value:i.text||"",onChange:B=>e(M=>({...M,conclusion:{...M.conclusion||{},text:B.target.value}}))}),n.jsx("p",{className:"text-[11px] text-gray-500",children:"Tip: ipy ve vlo/odeberou pipraven odstavce. Mete libovoln pst a mazat."})]}),n.jsxs("fieldset",{className:"space-y-2",children:[n.jsx("legend",{className:"text-sm font-medium",children:"Posouzen bezpenosti"}),n.jsxs("label",{className:"inline-flex items-center mr-4",children:[n.jsx("input",{type:"radio",name:"safety",className:"mr-2",checked:i.safety==="able",onChange:()=>e(B=>({...B,conclusion:{...B.conclusion||{},safety:"able"}}))}),c?n.jsxs(n.Fragment,{children:["Instalovan hromosvodn zazen vyhovuje poadavkm normy ",u," a jeho sousti jsou ve funknm stavu."]}):n.jsx(n.Fragment,{children:"Elektrick instalace vyhovuje poadavkm pslunch norem a je schopna bezpenho provozu."})]}),n.jsxs("label",{className:"inline-flex items-center",children:[n.jsx("input",{type:"radio",name:"safety",className:"mr-2",checked:i.safety==="not_able",onChange:()=>e(B=>({...B,conclusion:{...B.conclusion||{},safety:"not_able"}}))}),n.jsx("span",{className:"text-red-600",children:c?n.jsxs(n.Fragment,{children:["Instalovan hromosvodn zazen nevyhovuje poadavkm normy ",u," a jeho sousti nejsou ve funknm stavu."]}):n.jsx(n.Fragment,{children:"Elektrick instalace nevyhovuje poadavkm pslunch norem a nen schopna bezpenho provozu."})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"block text-sm font-medium",children:"Platnost revize (doporuen termn dal revize)"}),n.jsx("input",{type:"date",className:"w-full rounded border px-3 py-1.5 text-sm",value:i.validUntil||"",onChange:B=>e(M=>({...M,conclusion:{...M.conclusion||{},validUntil:B.target.value}}))})]})]})}function U_(){const{revId:r}=Ba(),{token:e}=Dr(),[i,a]=V.useState(""),[l,c]=V.useState("identifikace"),[d,u]=V.useState(!0),[p,y]=V.useState(null),[v,k]=V.useState(0),C=(i||"").toUpperCase()==="LPS"?{identifikace:n.jsx(h0,{}),prohlidka:n.jsx(f0,{}),zkousky:n.jsx("div",{className:"p-2 text-sm text-gray-600",children:"Zkouky nejsou pro LPS pouity."}),mereni:n.jsx(p0,{}),zavady:n.jsx(hf,{}),zaver:n.jsx(ff,{})}:{identifikace:n.jsx(j_,{}),prohlidka:n.jsx(k_,{}),zkousky:n.jsx(S_,{}),mereni:n.jsx(L_,{}),zavady:n.jsx(hf,{}),zaver:n.jsx(ff,{})};return r?(V.useEffect(()=>{const N=new AbortController;return(async()=>{if(e){u(!0),y(null);try{const g=await fetch(yt(`/revisions/${r}`),{method:"GET",headers:{...Dt(e)},signal:N.signal});if(!g.ok){y(`${g.status} ${g.statusText}`);return}const j=await g.json();a(String(j?.type||""))}catch(g){g?.name!=="AbortError"&&y("Network error")}finally{u(!1)}}})(),()=>N.abort()},[r,e,v]),d?n.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-gray-100 to-blue-50",children:n.jsx("div",{className:"loading loading-spinner loading-lg text-blue-700"})}):p?n.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-gray-100 to-blue-50",children:n.jsxs("div",{className:"bg-white p-6 rounded shadow text-center",children:[n.jsx("p",{className:"text-red-600 font-semibold mb-2",children:"Nepodailo se nast revizi"}),n.jsx("p",{className:"text-sm opacity-80 mb-4",children:p}),n.jsx("button",{className:"btn btn-primary",onClick:()=>k(N=>N+1),children:"Zkusit znovu"})]})}):n.jsx(zf,{revId:parseInt(r,10),children:n.jsxs("div",{className:"flex min-h-screen bg-gradient-to-br from-gray-100 to-blue-50",children:[n.jsx(Tr,{mode:"edit",active:l,onSelect:N=>c(N)}),n.jsx("main",{className:"compact-main flex-1 overflow-auto p-4 md:p-6",children:n.jsx("div",{className:"compact-card space-y-4",children:C[l]})})]})})):n.jsx("div",{className:"p-6",children:" Chyb ID revize v URL."})}var Rl={exports:{}},$_=Rl.exports,lg;function H_(){return lg||(lg=1,(function(r,e){(function(i,a){a()})($_,function(){function i(y,v){return typeof v>"u"?v={autoBom:!1}:typeof v!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),v={autoBom:!v}),v.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(y.type)?new Blob(["\uFEFF",y],{type:y.type}):y}function a(y,v,k){var E=new XMLHttpRequest;E.open("GET",y),E.responseType="blob",E.onload=function(){p(E.response,v,k)},E.onerror=function(){console.error("could not download file")},E.send()}function l(y){var v=new XMLHttpRequest;v.open("HEAD",y,!1);try{v.send()}catch{}return 200<=v.status&&299>=v.status}function c(y){try{y.dispatchEvent(new MouseEvent("click"))}catch{var v=document.createEvent("MouseEvents");v.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),y.dispatchEvent(v)}}var d=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof sl=="object"&&sl.global===sl?sl:void 0,u=d.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),p=d.saveAs||(typeof window!="object"||window!==d?function(){}:"download"in HTMLAnchorElement.prototype&&!u?function(y,v,k){var E=d.URL||d.webkitURL,C=document.createElement("a");v=v||y.name||"download",C.download=v,C.rel="noopener",typeof y=="string"?(C.href=y,C.origin===location.origin?c(C):l(C.href)?a(y,v,k):c(C,C.target="_blank")):(C.href=E.createObjectURL(y),setTimeout(function(){E.revokeObjectURL(C.href)},4e4),setTimeout(function(){c(C)},0))}:"msSaveOrOpenBlob"in navigator?function(y,v,k){if(v=v||y.name||"download",typeof y!="string")navigator.msSaveOrOpenBlob(i(y,k),v);else if(l(y))a(y,v,k);else{var E=document.createElement("a");E.href=y,E.target="_blank",setTimeout(function(){c(E)})}}:function(y,v,k,E){if(E=E||open("","_blank"),E&&(E.document.title=E.document.body.innerText="downloading..."),typeof y=="string")return a(y,v,k);var C=y.type==="application/octet-stream",N=/constructor/i.test(d.HTMLElement)||d.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||C&&N||u)&&typeof FileReader<"u"){var j=new FileReader;j.onloadend=function(){var w=j.result;w=g?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),E?E.location.href=w:location=w,E=null},j.readAsDataURL(y)}else{var f=d.URL||d.webkitURL,b=f.createObjectURL(y);E?E.location=b:location.href=b,E=null,setTimeout(function(){f.revokeObjectURL(b)},4e4)}});d.saveAs=p.saveAs=p,r.exports=p})})(Rl)),Rl.exports}var m0=H_(),W_=Object.defineProperty,V_=Object.defineProperties,q_=Object.getOwnPropertyDescriptors,cg=Object.getOwnPropertySymbols,K_=Object.prototype.hasOwnProperty,G_=Object.prototype.propertyIsEnumerable,pf=(r,e,i)=>e in r?W_(r,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[e]=i,ut=(r,e)=>{for(var i in e||(e={}))K_.call(e,i)&&pf(r,i,e[i]);if(cg)for(var i of cg(e))G_.call(e,i)&&pf(r,i,e[i]);return r},Hn=(r,e)=>V_(r,q_(e)),je=(r,e,i)=>pf(r,typeof e!="symbol"?e+"":e,i),Z_=(r,e,i)=>new Promise((a,l)=>{var c=p=>{try{u(i.next(p))}catch(y){l(y)}},d=p=>{try{u(i.throw(p))}catch(y){l(y)}},u=p=>p.done?a(p.value):Promise.resolve(p.value).then(c,d);u((i=i.apply(r,e)).next())});class Ml{constructor(e){je(this,"rootKey"),this.rootKey=e}}const X_=Object.seal({});class Ne extends Ml{constructor(e){super(e),je(this,"root"),this.root=new Array}prepForXml(e){var i;e.stack.push(this);const a=this.root.map(l=>l instanceof Ml?l.prepForXml(e):l).filter(l=>l!==void 0);return e.stack.pop(),{[this.rootKey]:a.length?a.length===1&&((i=a[0])!=null&&i._attr)?a[0]:a:X_}}addChildElement(e){return this.root.push(e),this}}class Wn extends Ne{prepForXml(e){const i=super.prepForXml(e);if(i&&(typeof i[this.rootKey]!="object"||Object.keys(i[this.rootKey]).length))return i}}class Ue extends Ml{constructor(e){super("_attr"),je(this,"xmlKeys"),this.root=e}prepForXml(e){const i={};return Object.entries(this.root).forEach(([a,l])=>{if(l!==void 0){const c=this.xmlKeys&&this.xmlKeys[a]||a;i[c]=l}}),{_attr:i}}}class Vn extends Ml{constructor(e){super("_attr"),this.root=e}prepForXml(e){return{_attr:Object.values(this.root).filter(({value:a})=>a!==void 0).reduce((a,{key:l,value:c})=>Hn(ut({},a),{[l]:c}),{})}}}class Lt extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{val:"w:val",color:"w:color",fill:"w:fill",space:"w:space",sz:"w:sz",type:"w:type",rsidR:"w:rsidR",rsidRPr:"w:rsidRPr",rsidSect:"w:rsidSect",w:"w:w",h:"w:h",top:"w:top",right:"w:right",bottom:"w:bottom",left:"w:left",header:"w:header",footer:"w:footer",gutter:"w:gutter",linePitch:"w:linePitch",pos:"w:pos"})}}var wn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Of(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ad={},cl={exports:{}},ug;function If(){if(ug)return cl.exports;ug=1;var r=typeof Reflect=="object"?Reflect:null,e=r&&typeof r.apply=="function"?r.apply:function(A,B,M){return Function.prototype.apply.call(A,B,M)},i;r&&typeof r.ownKeys=="function"?i=r.ownKeys:Object.getOwnPropertySymbols?i=function(A){return Object.getOwnPropertyNames(A).concat(Object.getOwnPropertySymbols(A))}:i=function(A){return Object.getOwnPropertyNames(A)};function a(_){console&&console.warn&&console.warn(_)}var l=Number.isNaN||function(A){return A!==A};function c(){c.init.call(this)}cl.exports=c,cl.exports.once=f,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var d=10;function u(_){if(typeof _!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _)}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return d},set:function(_){if(typeof _!="number"||_<0||l(_))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_+".");d=_}}),c.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(A){if(typeof A!="number"||A<0||l(A))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+A+".");return this._maxListeners=A,this};function p(_){return _._maxListeners===void 0?c.defaultMaxListeners:_._maxListeners}c.prototype.getMaxListeners=function(){return p(this)},c.prototype.emit=function(A){for(var B=[],M=1;M<arguments.length;M++)B.push(arguments[M]);var $=A==="error",D=this._events;if(D!==void 0)$=$&&D.error===void 0;else if(!$)return!1;if($){var le;if(B.length>0&&(le=B[0]),le instanceof Error)throw le;var pe=new Error("Unhandled error."+(le?" ("+le.message+")":""));throw pe.context=le,pe}var H=D[A];if(H===void 0)return!1;if(typeof H=="function")e(H,this,B);else for(var q=H.length,T=N(H,q),M=0;M<q;++M)e(T[M],this,B);return!0};function y(_,A,B,M){var $,D,le;if(u(B),D=_._events,D===void 0?(D=_._events=Object.create(null),_._eventsCount=0):(D.newListener!==void 0&&(_.emit("newListener",A,B.listener?B.listener:B),D=_._events),le=D[A]),le===void 0)le=D[A]=B,++_._eventsCount;else if(typeof le=="function"?le=D[A]=M?[B,le]:[le,B]:M?le.unshift(B):le.push(B),$=p(_),$>0&&le.length>$&&!le.warned){le.warned=!0;var pe=new Error("Possible EventEmitter memory leak detected. "+le.length+" "+String(A)+" listeners added. Use emitter.setMaxListeners() to increase limit");pe.name="MaxListenersExceededWarning",pe.emitter=_,pe.type=A,pe.count=le.length,a(pe)}return _}c.prototype.addListener=function(A,B){return y(this,A,B,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(A,B){return y(this,A,B,!0)};function v(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function k(_,A,B){var M={fired:!1,wrapFn:void 0,target:_,type:A,listener:B},$=v.bind(M);return $.listener=B,M.wrapFn=$,$}c.prototype.once=function(A,B){return u(B),this.on(A,k(this,A,B)),this},c.prototype.prependOnceListener=function(A,B){return u(B),this.prependListener(A,k(this,A,B)),this},c.prototype.removeListener=function(A,B){var M,$,D,le,pe;if(u(B),$=this._events,$===void 0)return this;if(M=$[A],M===void 0)return this;if(M===B||M.listener===B)--this._eventsCount===0?this._events=Object.create(null):(delete $[A],$.removeListener&&this.emit("removeListener",A,M.listener||B));else if(typeof M!="function"){for(D=-1,le=M.length-1;le>=0;le--)if(M[le]===B||M[le].listener===B){pe=M[le].listener,D=le;break}if(D<0)return this;D===0?M.shift():g(M,D),M.length===1&&($[A]=M[0]),$.removeListener!==void 0&&this.emit("removeListener",A,pe||B)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(A){var B,M,$;if(M=this._events,M===void 0)return this;if(M.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):M[A]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete M[A]),this;if(arguments.length===0){var D=Object.keys(M),le;for($=0;$<D.length;++$)le=D[$],le!=="removeListener"&&this.removeAllListeners(le);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(B=M[A],typeof B=="function")this.removeListener(A,B);else if(B!==void 0)for($=B.length-1;$>=0;$--)this.removeListener(A,B[$]);return this};function E(_,A,B){var M=_._events;if(M===void 0)return[];var $=M[A];return $===void 0?[]:typeof $=="function"?B?[$.listener||$]:[$]:B?j($):N($,$.length)}c.prototype.listeners=function(A){return E(this,A,!0)},c.prototype.rawListeners=function(A){return E(this,A,!1)},c.listenerCount=function(_,A){return typeof _.listenerCount=="function"?_.listenerCount(A):C.call(_,A)},c.prototype.listenerCount=C;function C(_){var A=this._events;if(A!==void 0){var B=A[_];if(typeof B=="function")return 1;if(B!==void 0)return B.length}return 0}c.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function N(_,A){for(var B=new Array(A),M=0;M<A;++M)B[M]=_[M];return B}function g(_,A){for(;A+1<_.length;A++)_[A]=_[A+1];_.pop()}function j(_){for(var A=new Array(_.length),B=0;B<A.length;++B)A[B]=_[B].listener||_[B];return A}function f(_,A){return new Promise(function(B,M){function $(le){_.removeListener(A,D),M(le)}function D(){typeof _.removeListener=="function"&&_.removeListener("error",$),B([].slice.call(arguments))}w(_,A,D,{once:!0}),A!=="error"&&b(_,$,{once:!0})})}function b(_,A,B){typeof _.on=="function"&&w(_,"error",A,B)}function w(_,A,B,M){if(typeof _.on=="function")M.once?_.once(A,B):_.on(A,B);else if(typeof _.addEventListener=="function")_.addEventListener(A,function $(D){M.once&&_.removeEventListener(A,$),B(D)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof _)}return cl.exports}var ul={exports:{}},dg;function ms(){return dg||(dg=1,typeof Object.create=="function"?ul.exports=function(e,i){i&&(e.super_=i,e.prototype=Object.create(i.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:ul.exports=function(e,i){if(i){e.super_=i;var a=function(){};a.prototype=i.prototype,e.prototype=new a,e.prototype.constructor=e}}),ul.exports}function J_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var y0={exports:{}},Ht=y0.exports={},vn,xn;function mf(){throw new Error("setTimeout has not been defined")}function yf(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?vn=setTimeout:vn=mf}catch{vn=mf}try{typeof clearTimeout=="function"?xn=clearTimeout:xn=yf}catch{xn=yf}})();function g0(r){if(vn===setTimeout)return setTimeout(r,0);if((vn===mf||!vn)&&setTimeout)return vn=setTimeout,setTimeout(r,0);try{return vn(r,0)}catch{try{return vn.call(null,r,0)}catch{return vn.call(this,r,0)}}}function Y_(r){if(xn===clearTimeout)return clearTimeout(r);if((xn===yf||!xn)&&clearTimeout)return xn=clearTimeout,clearTimeout(r);try{return xn(r)}catch{try{return xn.call(null,r)}catch{return xn.call(this,r)}}}var Dn=[],_i=!1,Bs,Pl=-1;function Q_(){!_i||!Bs||(_i=!1,Bs.length?Dn=Bs.concat(Dn):Pl=-1,Dn.length&&v0())}function v0(){if(!_i){var r=g0(Q_);_i=!0;for(var e=Dn.length;e;){for(Bs=Dn,Dn=[];++Pl<e;)Bs&&Bs[Pl].run();Pl=-1,e=Dn.length}Bs=null,_i=!1,Y_(r)}}Ht.nextTick=function(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];Dn.push(new x0(r,e)),Dn.length===1&&!_i&&g0(v0)};function x0(r,e){this.fun=r,this.array=e}x0.prototype.run=function(){this.fun.apply(null,this.array)};Ht.title="browser";Ht.browser=!0;Ht.env={};Ht.argv=[];Ht.version="";Ht.versions={};function qn(){}Ht.on=qn;Ht.addListener=qn;Ht.once=qn;Ht.off=qn;Ht.removeListener=qn;Ht.removeAllListeners=qn;Ht.emit=qn;Ht.prependListener=qn;Ht.prependOnceListener=qn;Ht.listeners=function(r){return[]};Ht.binding=function(r){throw new Error("process.binding is not supported")};Ht.cwd=function(){return"/"};Ht.chdir=function(r){throw new Error("process.chdir is not supported")};Ht.umask=function(){return 0};var eS=y0.exports;const dt=J_(eS);var od,hg;function w0(){return hg||(hg=1,od=If().EventEmitter),od}var ld={},Ca={},fg;function tS(){if(fg)return Ca;fg=1,Ca.byteLength=u,Ca.toByteArray=y,Ca.fromByteArray=E;for(var r=[],e=[],i=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,c=a.length;l<c;++l)r[l]=a[l],e[a.charCodeAt(l)]=l;e[45]=62,e[95]=63;function d(C){var N=C.length;if(N%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=C.indexOf("=");g===-1&&(g=N);var j=g===N?0:4-g%4;return[g,j]}function u(C){var N=d(C),g=N[0],j=N[1];return(g+j)*3/4-j}function p(C,N,g){return(N+g)*3/4-g}function y(C){var N,g=d(C),j=g[0],f=g[1],b=new i(p(C,j,f)),w=0,_=f>0?j-4:j,A;for(A=0;A<_;A+=4)N=e[C.charCodeAt(A)]<<18|e[C.charCodeAt(A+1)]<<12|e[C.charCodeAt(A+2)]<<6|e[C.charCodeAt(A+3)],b[w++]=N>>16&255,b[w++]=N>>8&255,b[w++]=N&255;return f===2&&(N=e[C.charCodeAt(A)]<<2|e[C.charCodeAt(A+1)]>>4,b[w++]=N&255),f===1&&(N=e[C.charCodeAt(A)]<<10|e[C.charCodeAt(A+1)]<<4|e[C.charCodeAt(A+2)]>>2,b[w++]=N>>8&255,b[w++]=N&255),b}function v(C){return r[C>>18&63]+r[C>>12&63]+r[C>>6&63]+r[C&63]}function k(C,N,g){for(var j,f=[],b=N;b<g;b+=3)j=(C[b]<<16&16711680)+(C[b+1]<<8&65280)+(C[b+2]&255),f.push(v(j));return f.join("")}function E(C){for(var N,g=C.length,j=g%3,f=[],b=16383,w=0,_=g-j;w<_;w+=b)f.push(k(C,w,w+b>_?_:w+b));return j===1?(N=C[g-1],f.push(r[N>>2]+r[N<<4&63]+"==")):j===2&&(N=(C[g-2]<<8)+C[g-1],f.push(r[N>>10]+r[N>>4&63]+r[N<<2&63]+"=")),f.join("")}return Ca}var dl={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var pg;function rS(){return pg||(pg=1,dl.read=function(r,e,i,a,l){var c,d,u=l*8-a-1,p=(1<<u)-1,y=p>>1,v=-7,k=i?l-1:0,E=i?-1:1,C=r[e+k];for(k+=E,c=C&(1<<-v)-1,C>>=-v,v+=u;v>0;c=c*256+r[e+k],k+=E,v-=8);for(d=c&(1<<-v)-1,c>>=-v,v+=a;v>0;d=d*256+r[e+k],k+=E,v-=8);if(c===0)c=1-y;else{if(c===p)return d?NaN:(C?-1:1)*(1/0);d=d+Math.pow(2,a),c=c-y}return(C?-1:1)*d*Math.pow(2,c-a)},dl.write=function(r,e,i,a,l,c){var d,u,p,y=c*8-l-1,v=(1<<y)-1,k=v>>1,E=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,C=a?0:c-1,N=a?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,d=v):(d=Math.floor(Math.log(e)/Math.LN2),e*(p=Math.pow(2,-d))<1&&(d--,p*=2),d+k>=1?e+=E/p:e+=E*Math.pow(2,1-k),e*p>=2&&(d++,p/=2),d+k>=v?(u=0,d=v):d+k>=1?(u=(e*p-1)*Math.pow(2,l),d=d+k):(u=e*Math.pow(2,k-1)*Math.pow(2,l),d=0));l>=8;r[i+C]=u&255,C+=N,u/=256,l-=8);for(d=d<<l|u,y+=l;y>0;r[i+C]=d&255,C+=N,d/=256,y-=8);r[i+C-N]|=g*128}),dl}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var mg;function ec(){return mg||(mg=1,(function(r){var e=tS(),i=rS(),a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=u,r.SlowBuffer=b,r.INSPECT_MAX_BYTES=50;var l=2147483647;r.kMaxLength=l,u.TYPED_ARRAY_SUPPORT=c(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{var F=new Uint8Array(1),x={foo:function(){return 42}};return Object.setPrototypeOf(x,Uint8Array.prototype),Object.setPrototypeOf(F,x),F.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function d(F){if(F>l)throw new RangeError('The value "'+F+'" is invalid for option "size"');var x=new Uint8Array(F);return Object.setPrototypeOf(x,u.prototype),x}function u(F,x,m){if(typeof F=="number"){if(typeof x=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return k(F)}return p(F,x,m)}u.poolSize=8192;function p(F,x,m){if(typeof F=="string")return E(F,x);if(ArrayBuffer.isView(F))return N(F);if(F==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof F);if(ie(F,ArrayBuffer)||F&&ie(F.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ie(F,SharedArrayBuffer)||F&&ie(F.buffer,SharedArrayBuffer)))return g(F,x,m);if(typeof F=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var R=F.valueOf&&F.valueOf();if(R!=null&&R!==F)return u.from(R,x,m);var X=j(F);if(X)return X;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof F[Symbol.toPrimitive]=="function")return u.from(F[Symbol.toPrimitive]("string"),x,m);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof F)}u.from=function(F,x,m){return p(F,x,m)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function y(F){if(typeof F!="number")throw new TypeError('"size" argument must be of type number');if(F<0)throw new RangeError('The value "'+F+'" is invalid for option "size"')}function v(F,x,m){return y(F),F<=0?d(F):x!==void 0?typeof m=="string"?d(F).fill(x,m):d(F).fill(x):d(F)}u.alloc=function(F,x,m){return v(F,x,m)};function k(F){return y(F),d(F<0?0:f(F)|0)}u.allocUnsafe=function(F){return k(F)},u.allocUnsafeSlow=function(F){return k(F)};function E(F,x){if((typeof x!="string"||x==="")&&(x="utf8"),!u.isEncoding(x))throw new TypeError("Unknown encoding: "+x);var m=w(F,x)|0,R=d(m),X=R.write(F,x);return X!==m&&(R=R.slice(0,X)),R}function C(F){for(var x=F.length<0?0:f(F.length)|0,m=d(x),R=0;R<x;R+=1)m[R]=F[R]&255;return m}function N(F){if(ie(F,Uint8Array)){var x=new Uint8Array(F);return g(x.buffer,x.byteOffset,x.byteLength)}return C(F)}function g(F,x,m){if(x<0||F.byteLength<x)throw new RangeError('"offset" is outside of buffer bounds');if(F.byteLength<x+(m||0))throw new RangeError('"length" is outside of buffer bounds');var R;return x===void 0&&m===void 0?R=new Uint8Array(F):m===void 0?R=new Uint8Array(F,x):R=new Uint8Array(F,x,m),Object.setPrototypeOf(R,u.prototype),R}function j(F){if(u.isBuffer(F)){var x=f(F.length)|0,m=d(x);return m.length===0||F.copy(m,0,0,x),m}if(F.length!==void 0)return typeof F.length!="number"||z(F.length)?d(0):C(F);if(F.type==="Buffer"&&Array.isArray(F.data))return C(F.data)}function f(F){if(F>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return F|0}function b(F){return+F!=F&&(F=0),u.alloc(+F)}u.isBuffer=function(x){return x!=null&&x._isBuffer===!0&&x!==u.prototype},u.compare=function(x,m){if(ie(x,Uint8Array)&&(x=u.from(x,x.offset,x.byteLength)),ie(m,Uint8Array)&&(m=u.from(m,m.offset,m.byteLength)),!u.isBuffer(x)||!u.isBuffer(m))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(x===m)return 0;for(var R=x.length,X=m.length,oe=0,se=Math.min(R,X);oe<se;++oe)if(x[oe]!==m[oe]){R=x[oe],X=m[oe];break}return R<X?-1:X<R?1:0},u.isEncoding=function(x){switch(String(x).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(x,m){if(!Array.isArray(x))throw new TypeError('"list" argument must be an Array of Buffers');if(x.length===0)return u.alloc(0);var R;if(m===void 0)for(m=0,R=0;R<x.length;++R)m+=x[R].length;var X=u.allocUnsafe(m),oe=0;for(R=0;R<x.length;++R){var se=x[R];if(ie(se,Uint8Array))oe+se.length>X.length?u.from(se).copy(X,oe):Uint8Array.prototype.set.call(X,se,oe);else if(u.isBuffer(se))se.copy(X,oe);else throw new TypeError('"list" argument must be an Array of Buffers');oe+=se.length}return X};function w(F,x){if(u.isBuffer(F))return F.length;if(ArrayBuffer.isView(F)||ie(F,ArrayBuffer))return F.byteLength;if(typeof F!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof F);var m=F.length,R=arguments.length>2&&arguments[2]===!0;if(!R&&m===0)return 0;for(var X=!1;;)switch(x){case"ascii":case"latin1":case"binary":return m;case"utf8":case"utf-8":return O(F).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m*2;case"hex":return m>>>1;case"base64":return G(F).length;default:if(X)return R?-1:O(F).length;x=(""+x).toLowerCase(),X=!0}}u.byteLength=w;function _(F,x,m){var R=!1;if((x===void 0||x<0)&&(x=0),x>this.length||((m===void 0||m>this.length)&&(m=this.length),m<=0)||(m>>>=0,x>>>=0,m<=x))return"";for(F||(F="utf8");;)switch(F){case"hex":return J(this,x,m);case"utf8":case"utf-8":return T(this,x,m);case"ascii":return Y(this,x,m);case"latin1":case"binary":return ne(this,x,m);case"base64":return q(this,x,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ue(this,x,m);default:if(R)throw new TypeError("Unknown encoding: "+F);F=(F+"").toLowerCase(),R=!0}}u.prototype._isBuffer=!0;function A(F,x,m){var R=F[x];F[x]=F[m],F[m]=R}u.prototype.swap16=function(){var x=this.length;if(x%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var m=0;m<x;m+=2)A(this,m,m+1);return this},u.prototype.swap32=function(){var x=this.length;if(x%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var m=0;m<x;m+=4)A(this,m,m+3),A(this,m+1,m+2);return this},u.prototype.swap64=function(){var x=this.length;if(x%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var m=0;m<x;m+=8)A(this,m,m+7),A(this,m+1,m+6),A(this,m+2,m+5),A(this,m+3,m+4);return this},u.prototype.toString=function(){var x=this.length;return x===0?"":arguments.length===0?T(this,0,x):_.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(x){if(!u.isBuffer(x))throw new TypeError("Argument must be a Buffer");return this===x?!0:u.compare(this,x)===0},u.prototype.inspect=function(){var x="",m=r.INSPECT_MAX_BYTES;return x=this.toString("hex",0,m).replace(/(.{2})/g,"$1 ").trim(),this.length>m&&(x+=" ... "),"<Buffer "+x+">"},a&&(u.prototype[a]=u.prototype.inspect),u.prototype.compare=function(x,m,R,X,oe){if(ie(x,Uint8Array)&&(x=u.from(x,x.offset,x.byteLength)),!u.isBuffer(x))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof x);if(m===void 0&&(m=0),R===void 0&&(R=x?x.length:0),X===void 0&&(X=0),oe===void 0&&(oe=this.length),m<0||R>x.length||X<0||oe>this.length)throw new RangeError("out of range index");if(X>=oe&&m>=R)return 0;if(X>=oe)return-1;if(m>=R)return 1;if(m>>>=0,R>>>=0,X>>>=0,oe>>>=0,this===x)return 0;for(var se=oe-X,ge=R-m,ke=Math.min(se,ge),Ce=this.slice(X,oe),Fe=x.slice(m,R),He=0;He<ke;++He)if(Ce[He]!==Fe[He]){se=Ce[He],ge=Fe[He];break}return se<ge?-1:ge<se?1:0};function B(F,x,m,R,X){if(F.length===0)return-1;if(typeof m=="string"?(R=m,m=0):m>2147483647?m=2147483647:m<-2147483648&&(m=-2147483648),m=+m,z(m)&&(m=X?0:F.length-1),m<0&&(m=F.length+m),m>=F.length){if(X)return-1;m=F.length-1}else if(m<0)if(X)m=0;else return-1;if(typeof x=="string"&&(x=u.from(x,R)),u.isBuffer(x))return x.length===0?-1:M(F,x,m,R,X);if(typeof x=="number")return x=x&255,typeof Uint8Array.prototype.indexOf=="function"?X?Uint8Array.prototype.indexOf.call(F,x,m):Uint8Array.prototype.lastIndexOf.call(F,x,m):M(F,[x],m,R,X);throw new TypeError("val must be string, number or Buffer")}function M(F,x,m,R,X){var oe=1,se=F.length,ge=x.length;if(R!==void 0&&(R=String(R).toLowerCase(),R==="ucs2"||R==="ucs-2"||R==="utf16le"||R==="utf-16le")){if(F.length<2||x.length<2)return-1;oe=2,se/=2,ge/=2,m/=2}function ke(Wt,ir){return oe===1?Wt[ir]:Wt.readUInt16BE(ir*oe)}var Ce;if(X){var Fe=-1;for(Ce=m;Ce<se;Ce++)if(ke(F,Ce)===ke(x,Fe===-1?0:Ce-Fe)){if(Fe===-1&&(Fe=Ce),Ce-Fe+1===ge)return Fe*oe}else Fe!==-1&&(Ce-=Ce-Fe),Fe=-1}else for(m+ge>se&&(m=se-ge),Ce=m;Ce>=0;Ce--){for(var He=!0,Ye=0;Ye<ge;Ye++)if(ke(F,Ce+Ye)!==ke(x,Ye)){He=!1;break}if(He)return Ce}return-1}u.prototype.includes=function(x,m,R){return this.indexOf(x,m,R)!==-1},u.prototype.indexOf=function(x,m,R){return B(this,x,m,R,!0)},u.prototype.lastIndexOf=function(x,m,R){return B(this,x,m,R,!1)};function $(F,x,m,R){m=Number(m)||0;var X=F.length-m;R?(R=Number(R),R>X&&(R=X)):R=X;var oe=x.length;R>oe/2&&(R=oe/2);for(var se=0;se<R;++se){var ge=parseInt(x.substr(se*2,2),16);if(z(ge))return se;F[m+se]=ge}return se}function D(F,x,m,R){return L(O(x,F.length-m),F,m,R)}function le(F,x,m,R){return L(te(x),F,m,R)}function pe(F,x,m,R){return L(G(x),F,m,R)}function H(F,x,m,R){return L(ee(x,F.length-m),F,m,R)}u.prototype.write=function(x,m,R,X){if(m===void 0)X="utf8",R=this.length,m=0;else if(R===void 0&&typeof m=="string")X=m,R=this.length,m=0;else if(isFinite(m))m=m>>>0,isFinite(R)?(R=R>>>0,X===void 0&&(X="utf8")):(X=R,R=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var oe=this.length-m;if((R===void 0||R>oe)&&(R=oe),x.length>0&&(R<0||m<0)||m>this.length)throw new RangeError("Attempt to write outside buffer bounds");X||(X="utf8");for(var se=!1;;)switch(X){case"hex":return $(this,x,m,R);case"utf8":case"utf-8":return D(this,x,m,R);case"ascii":case"latin1":case"binary":return le(this,x,m,R);case"base64":return pe(this,x,m,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,x,m,R);default:if(se)throw new TypeError("Unknown encoding: "+X);X=(""+X).toLowerCase(),se=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function q(F,x,m){return x===0&&m===F.length?e.fromByteArray(F):e.fromByteArray(F.slice(x,m))}function T(F,x,m){m=Math.min(F.length,m);for(var R=[],X=x;X<m;){var oe=F[X],se=null,ge=oe>239?4:oe>223?3:oe>191?2:1;if(X+ge<=m){var ke,Ce,Fe,He;switch(ge){case 1:oe<128&&(se=oe);break;case 2:ke=F[X+1],(ke&192)===128&&(He=(oe&31)<<6|ke&63,He>127&&(se=He));break;case 3:ke=F[X+1],Ce=F[X+2],(ke&192)===128&&(Ce&192)===128&&(He=(oe&15)<<12|(ke&63)<<6|Ce&63,He>2047&&(He<55296||He>57343)&&(se=He));break;case 4:ke=F[X+1],Ce=F[X+2],Fe=F[X+3],(ke&192)===128&&(Ce&192)===128&&(Fe&192)===128&&(He=(oe&15)<<18|(ke&63)<<12|(Ce&63)<<6|Fe&63,He>65535&&He<1114112&&(se=He))}}se===null?(se=65533,ge=1):se>65535&&(se-=65536,R.push(se>>>10&1023|55296),se=56320|se&1023),R.push(se),X+=ge}return Q(R)}var Z=4096;function Q(F){var x=F.length;if(x<=Z)return String.fromCharCode.apply(String,F);for(var m="",R=0;R<x;)m+=String.fromCharCode.apply(String,F.slice(R,R+=Z));return m}function Y(F,x,m){var R="";m=Math.min(F.length,m);for(var X=x;X<m;++X)R+=String.fromCharCode(F[X]&127);return R}function ne(F,x,m){var R="";m=Math.min(F.length,m);for(var X=x;X<m;++X)R+=String.fromCharCode(F[X]);return R}function J(F,x,m){var R=F.length;(!x||x<0)&&(x=0),(!m||m<0||m>R)&&(m=R);for(var X="",oe=x;oe<m;++oe)X+=fe[F[oe]];return X}function ue(F,x,m){for(var R=F.slice(x,m),X="",oe=0;oe<R.length-1;oe+=2)X+=String.fromCharCode(R[oe]+R[oe+1]*256);return X}u.prototype.slice=function(x,m){var R=this.length;x=~~x,m=m===void 0?R:~~m,x<0?(x+=R,x<0&&(x=0)):x>R&&(x=R),m<0?(m+=R,m<0&&(m=0)):m>R&&(m=R),m<x&&(m=x);var X=this.subarray(x,m);return Object.setPrototypeOf(X,u.prototype),X};function W(F,x,m){if(F%1!==0||F<0)throw new RangeError("offset is not uint");if(F+x>m)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(x,m,R){x=x>>>0,m=m>>>0,R||W(x,m,this.length);for(var X=this[x],oe=1,se=0;++se<m&&(oe*=256);)X+=this[x+se]*oe;return X},u.prototype.readUintBE=u.prototype.readUIntBE=function(x,m,R){x=x>>>0,m=m>>>0,R||W(x,m,this.length);for(var X=this[x+--m],oe=1;m>0&&(oe*=256);)X+=this[x+--m]*oe;return X},u.prototype.readUint8=u.prototype.readUInt8=function(x,m){return x=x>>>0,m||W(x,1,this.length),this[x]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(x,m){return x=x>>>0,m||W(x,2,this.length),this[x]|this[x+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(x,m){return x=x>>>0,m||W(x,2,this.length),this[x]<<8|this[x+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(x,m){return x=x>>>0,m||W(x,4,this.length),(this[x]|this[x+1]<<8|this[x+2]<<16)+this[x+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(x,m){return x=x>>>0,m||W(x,4,this.length),this[x]*16777216+(this[x+1]<<16|this[x+2]<<8|this[x+3])},u.prototype.readIntLE=function(x,m,R){x=x>>>0,m=m>>>0,R||W(x,m,this.length);for(var X=this[x],oe=1,se=0;++se<m&&(oe*=256);)X+=this[x+se]*oe;return oe*=128,X>=oe&&(X-=Math.pow(2,8*m)),X},u.prototype.readIntBE=function(x,m,R){x=x>>>0,m=m>>>0,R||W(x,m,this.length);for(var X=m,oe=1,se=this[x+--X];X>0&&(oe*=256);)se+=this[x+--X]*oe;return oe*=128,se>=oe&&(se-=Math.pow(2,8*m)),se},u.prototype.readInt8=function(x,m){return x=x>>>0,m||W(x,1,this.length),this[x]&128?(255-this[x]+1)*-1:this[x]},u.prototype.readInt16LE=function(x,m){x=x>>>0,m||W(x,2,this.length);var R=this[x]|this[x+1]<<8;return R&32768?R|4294901760:R},u.prototype.readInt16BE=function(x,m){x=x>>>0,m||W(x,2,this.length);var R=this[x+1]|this[x]<<8;return R&32768?R|4294901760:R},u.prototype.readInt32LE=function(x,m){return x=x>>>0,m||W(x,4,this.length),this[x]|this[x+1]<<8|this[x+2]<<16|this[x+3]<<24},u.prototype.readInt32BE=function(x,m){return x=x>>>0,m||W(x,4,this.length),this[x]<<24|this[x+1]<<16|this[x+2]<<8|this[x+3]},u.prototype.readFloatLE=function(x,m){return x=x>>>0,m||W(x,4,this.length),i.read(this,x,!0,23,4)},u.prototype.readFloatBE=function(x,m){return x=x>>>0,m||W(x,4,this.length),i.read(this,x,!1,23,4)},u.prototype.readDoubleLE=function(x,m){return x=x>>>0,m||W(x,8,this.length),i.read(this,x,!0,52,8)},u.prototype.readDoubleBE=function(x,m){return x=x>>>0,m||W(x,8,this.length),i.read(this,x,!1,52,8)};function U(F,x,m,R,X,oe){if(!u.isBuffer(F))throw new TypeError('"buffer" argument must be a Buffer instance');if(x>X||x<oe)throw new RangeError('"value" argument is out of bounds');if(m+R>F.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(x,m,R,X){if(x=+x,m=m>>>0,R=R>>>0,!X){var oe=Math.pow(2,8*R)-1;U(this,x,m,R,oe,0)}var se=1,ge=0;for(this[m]=x&255;++ge<R&&(se*=256);)this[m+ge]=x/se&255;return m+R},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(x,m,R,X){if(x=+x,m=m>>>0,R=R>>>0,!X){var oe=Math.pow(2,8*R)-1;U(this,x,m,R,oe,0)}var se=R-1,ge=1;for(this[m+se]=x&255;--se>=0&&(ge*=256);)this[m+se]=x/ge&255;return m+R},u.prototype.writeUint8=u.prototype.writeUInt8=function(x,m,R){return x=+x,m=m>>>0,R||U(this,x,m,1,255,0),this[m]=x&255,m+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(x,m,R){return x=+x,m=m>>>0,R||U(this,x,m,2,65535,0),this[m]=x&255,this[m+1]=x>>>8,m+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(x,m,R){return x=+x,m=m>>>0,R||U(this,x,m,2,65535,0),this[m]=x>>>8,this[m+1]=x&255,m+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(x,m,R){return x=+x,m=m>>>0,R||U(this,x,m,4,4294967295,0),this[m+3]=x>>>24,this[m+2]=x>>>16,this[m+1]=x>>>8,this[m]=x&255,m+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(x,m,R){return x=+x,m=m>>>0,R||U(this,x,m,4,4294967295,0),this[m]=x>>>24,this[m+1]=x>>>16,this[m+2]=x>>>8,this[m+3]=x&255,m+4},u.prototype.writeIntLE=function(x,m,R,X){if(x=+x,m=m>>>0,!X){var oe=Math.pow(2,8*R-1);U(this,x,m,R,oe-1,-oe)}var se=0,ge=1,ke=0;for(this[m]=x&255;++se<R&&(ge*=256);)x<0&&ke===0&&this[m+se-1]!==0&&(ke=1),this[m+se]=(x/ge>>0)-ke&255;return m+R},u.prototype.writeIntBE=function(x,m,R,X){if(x=+x,m=m>>>0,!X){var oe=Math.pow(2,8*R-1);U(this,x,m,R,oe-1,-oe)}var se=R-1,ge=1,ke=0;for(this[m+se]=x&255;--se>=0&&(ge*=256);)x<0&&ke===0&&this[m+se+1]!==0&&(ke=1),this[m+se]=(x/ge>>0)-ke&255;return m+R},u.prototype.writeInt8=function(x,m,R){return x=+x,m=m>>>0,R||U(this,x,m,1,127,-128),x<0&&(x=255+x+1),this[m]=x&255,m+1},u.prototype.writeInt16LE=function(x,m,R){return x=+x,m=m>>>0,R||U(this,x,m,2,32767,-32768),this[m]=x&255,this[m+1]=x>>>8,m+2},u.prototype.writeInt16BE=function(x,m,R){return x=+x,m=m>>>0,R||U(this,x,m,2,32767,-32768),this[m]=x>>>8,this[m+1]=x&255,m+2},u.prototype.writeInt32LE=function(x,m,R){return x=+x,m=m>>>0,R||U(this,x,m,4,2147483647,-2147483648),this[m]=x&255,this[m+1]=x>>>8,this[m+2]=x>>>16,this[m+3]=x>>>24,m+4},u.prototype.writeInt32BE=function(x,m,R){return x=+x,m=m>>>0,R||U(this,x,m,4,2147483647,-2147483648),x<0&&(x=4294967295+x+1),this[m]=x>>>24,this[m+1]=x>>>16,this[m+2]=x>>>8,this[m+3]=x&255,m+4};function re(F,x,m,R,X,oe){if(m+R>F.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("Index out of range")}function ae(F,x,m,R,X){return x=+x,m=m>>>0,X||re(F,x,m,4),i.write(F,x,m,R,23,4),m+4}u.prototype.writeFloatLE=function(x,m,R){return ae(this,x,m,!0,R)},u.prototype.writeFloatBE=function(x,m,R){return ae(this,x,m,!1,R)};function ye(F,x,m,R,X){return x=+x,m=m>>>0,X||re(F,x,m,8),i.write(F,x,m,R,52,8),m+8}u.prototype.writeDoubleLE=function(x,m,R){return ye(this,x,m,!0,R)},u.prototype.writeDoubleBE=function(x,m,R){return ye(this,x,m,!1,R)},u.prototype.copy=function(x,m,R,X){if(!u.isBuffer(x))throw new TypeError("argument should be a Buffer");if(R||(R=0),!X&&X!==0&&(X=this.length),m>=x.length&&(m=x.length),m||(m=0),X>0&&X<R&&(X=R),X===R||x.length===0||this.length===0)return 0;if(m<0)throw new RangeError("targetStart out of bounds");if(R<0||R>=this.length)throw new RangeError("Index out of range");if(X<0)throw new RangeError("sourceEnd out of bounds");X>this.length&&(X=this.length),x.length-m<X-R&&(X=x.length-m+R);var oe=X-R;return this===x&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(m,R,X):Uint8Array.prototype.set.call(x,this.subarray(R,X),m),oe},u.prototype.fill=function(x,m,R,X){if(typeof x=="string"){if(typeof m=="string"?(X=m,m=0,R=this.length):typeof R=="string"&&(X=R,R=this.length),X!==void 0&&typeof X!="string")throw new TypeError("encoding must be a string");if(typeof X=="string"&&!u.isEncoding(X))throw new TypeError("Unknown encoding: "+X);if(x.length===1){var oe=x.charCodeAt(0);(X==="utf8"&&oe<128||X==="latin1")&&(x=oe)}}else typeof x=="number"?x=x&255:typeof x=="boolean"&&(x=Number(x));if(m<0||this.length<m||this.length<R)throw new RangeError("Out of range index");if(R<=m)return this;m=m>>>0,R=R===void 0?this.length:R>>>0,x||(x=0);var se;if(typeof x=="number")for(se=m;se<R;++se)this[se]=x;else{var ge=u.isBuffer(x)?x:u.from(x,X),ke=ge.length;if(ke===0)throw new TypeError('The value "'+x+'" is invalid for argument "value"');for(se=0;se<R-m;++se)this[se+m]=ge[se%ke]}return this};var ce=/[^+/0-9A-Za-z-_]/g;function P(F){if(F=F.split("=")[0],F=F.trim().replace(ce,""),F.length<2)return"";for(;F.length%4!==0;)F=F+"=";return F}function O(F,x){x=x||1/0;for(var m,R=F.length,X=null,oe=[],se=0;se<R;++se){if(m=F.charCodeAt(se),m>55295&&m<57344){if(!X){if(m>56319){(x-=3)>-1&&oe.push(239,191,189);continue}else if(se+1===R){(x-=3)>-1&&oe.push(239,191,189);continue}X=m;continue}if(m<56320){(x-=3)>-1&&oe.push(239,191,189),X=m;continue}m=(X-55296<<10|m-56320)+65536}else X&&(x-=3)>-1&&oe.push(239,191,189);if(X=null,m<128){if((x-=1)<0)break;oe.push(m)}else if(m<2048){if((x-=2)<0)break;oe.push(m>>6|192,m&63|128)}else if(m<65536){if((x-=3)<0)break;oe.push(m>>12|224,m>>6&63|128,m&63|128)}else if(m<1114112){if((x-=4)<0)break;oe.push(m>>18|240,m>>12&63|128,m>>6&63|128,m&63|128)}else throw new Error("Invalid code point")}return oe}function te(F){for(var x=[],m=0;m<F.length;++m)x.push(F.charCodeAt(m)&255);return x}function ee(F,x){for(var m,R,X,oe=[],se=0;se<F.length&&!((x-=2)<0);++se)m=F.charCodeAt(se),R=m>>8,X=m%256,oe.push(X),oe.push(R);return oe}function G(F){return e.toByteArray(P(F))}function L(F,x,m,R){for(var X=0;X<R&&!(X+m>=x.length||X>=F.length);++X)x[X+m]=F[X];return X}function ie(F,x){return F instanceof x||F!=null&&F.constructor!=null&&F.constructor.name!=null&&F.constructor.name===x.name}function z(F){return F!==F}var fe=(function(){for(var F="0123456789abcdef",x=new Array(256),m=0;m<16;++m)for(var R=m*16,X=0;X<16;++X)x[R+X]=F[m]+F[X];return x})()})(ld)),ld}var cd={},ud={},dd,yg;function b0(){return yg||(yg=1,dd=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},i=Symbol("test"),a=Object(i);if(typeof i=="string"||Object.prototype.toString.call(i)!=="[object Symbol]"||Object.prototype.toString.call(a)!=="[object Symbol]")return!1;var l=42;e[i]=l;for(var c in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var d=Object.getOwnPropertySymbols(e);if(d.length!==1||d[0]!==i||!Object.prototype.propertyIsEnumerable.call(e,i))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var u=Object.getOwnPropertyDescriptor(e,i);if(u.value!==l||u.enumerable!==!0)return!1}return!0}),dd}var hd,gg;function Ff(){if(gg)return hd;gg=1;var r=b0();return hd=function(){return r()&&!!Symbol.toStringTag},hd}var fd,vg;function j0(){return vg||(vg=1,fd=Object),fd}var pd,xg;function nS(){return xg||(xg=1,pd=Error),pd}var md,wg;function sS(){return wg||(wg=1,md=EvalError),md}var yd,bg;function iS(){return bg||(bg=1,yd=RangeError),yd}var gd,jg;function aS(){return jg||(jg=1,gd=ReferenceError),gd}var vd,Ng;function N0(){return Ng||(Ng=1,vd=SyntaxError),vd}var xd,kg;function Va(){return kg||(kg=1,xd=TypeError),xd}var wd,_g;function oS(){return _g||(_g=1,wd=URIError),wd}var bd,Sg;function lS(){return Sg||(Sg=1,bd=Math.abs),bd}var jd,Eg;function cS(){return Eg||(Eg=1,jd=Math.floor),jd}var Nd,Cg;function uS(){return Cg||(Cg=1,Nd=Math.max),Nd}var kd,Tg;function dS(){return Tg||(Tg=1,kd=Math.min),kd}var _d,Ag;function hS(){return Ag||(Ag=1,_d=Math.pow),_d}var Sd,Rg;function fS(){return Rg||(Rg=1,Sd=Math.round),Sd}var Ed,Pg;function pS(){return Pg||(Pg=1,Ed=Number.isNaN||function(e){return e!==e}),Ed}var Cd,zg;function mS(){if(zg)return Cd;zg=1;var r=pS();return Cd=function(i){return r(i)||i===0?i:i<0?-1:1},Cd}var Td,Og;function yS(){return Og||(Og=1,Td=Object.getOwnPropertyDescriptor),Td}var Ad,Ig;function qa(){if(Ig)return Ad;Ig=1;var r=yS();if(r)try{r([],"length")}catch{r=null}return Ad=r,Ad}var Rd,Fg;function tc(){if(Fg)return Rd;Fg=1;var r=Object.defineProperty||!1;if(r)try{r({},"a",{value:1})}catch{r=!1}return Rd=r,Rd}var Pd,Dg;function gS(){if(Dg)return Pd;Dg=1;var r=typeof Symbol<"u"&&Symbol,e=b0();return Pd=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},Pd}var zd,Lg;function k0(){return Lg||(Lg=1,zd=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),zd}var Od,Bg;function _0(){if(Bg)return Od;Bg=1;var r=j0();return Od=r.getPrototypeOf||null,Od}var Id,Mg;function vS(){if(Mg)return Id;Mg=1;var r="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,i=Math.max,a="[object Function]",l=function(p,y){for(var v=[],k=0;k<p.length;k+=1)v[k]=p[k];for(var E=0;E<y.length;E+=1)v[E+p.length]=y[E];return v},c=function(p,y){for(var v=[],k=y,E=0;k<p.length;k+=1,E+=1)v[E]=p[k];return v},d=function(u,p){for(var y="",v=0;v<u.length;v+=1)y+=u[v],v+1<u.length&&(y+=p);return y};return Id=function(p){var y=this;if(typeof y!="function"||e.apply(y)!==a)throw new TypeError(r+y);for(var v=c(arguments,1),k,E=function(){if(this instanceof k){var f=y.apply(this,l(v,arguments));return Object(f)===f?f:this}return y.apply(p,l(v,arguments))},C=i(0,y.length-v.length),N=[],g=0;g<C;g++)N[g]="$"+g;if(k=Function("binder","return function ("+d(N,",")+"){ return binder.apply(this,arguments); }")(E),y.prototype){var j=function(){};j.prototype=y.prototype,k.prototype=new j,j.prototype=null}return k},Id}var Fd,Ug;function Ka(){if(Ug)return Fd;Ug=1;var r=vS();return Fd=Function.prototype.bind||r,Fd}var Dd,$g;function Df(){return $g||($g=1,Dd=Function.prototype.call),Dd}var Ld,Hg;function S0(){return Hg||(Hg=1,Ld=Function.prototype.apply),Ld}var Bd,Wg;function xS(){return Wg||(Wg=1,Bd=typeof Reflect<"u"&&Reflect&&Reflect.apply),Bd}var Md,Vg;function wS(){if(Vg)return Md;Vg=1;var r=Ka(),e=S0(),i=Df(),a=xS();return Md=a||r.call(i,e),Md}var Ud,qg;function bS(){if(qg)return Ud;qg=1;var r=Ka(),e=Va(),i=Df(),a=wS();return Ud=function(c){if(c.length<1||typeof c[0]!="function")throw new e("a function is required");return a(r,i,c)},Ud}var $d,Kg;function jS(){if(Kg)return $d;Kg=1;var r=bS(),e=qa(),i;try{i=[].__proto__===Array.prototype}catch(d){if(!d||typeof d!="object"||!("code"in d)||d.code!=="ERR_PROTO_ACCESS")throw d}var a=!!i&&e&&e(Object.prototype,"__proto__"),l=Object,c=l.getPrototypeOf;return $d=a&&typeof a.get=="function"?r([a.get]):typeof c=="function"?(function(u){return c(u==null?u:l(u))}):!1,$d}var Hd,Gg;function NS(){if(Gg)return Hd;Gg=1;var r=k0(),e=_0(),i=jS();return Hd=r?function(l){return r(l)}:e?function(l){if(!l||typeof l!="object"&&typeof l!="function")throw new TypeError("getProto: not an object");return e(l)}:i?function(l){return i(l)}:null,Hd}var Wd,Zg;function kS(){if(Zg)return Wd;Zg=1;var r=Function.prototype.call,e=Object.prototype.hasOwnProperty,i=Ka();return Wd=i.call(r,e),Wd}var Vd,Xg;function Lf(){if(Xg)return Vd;Xg=1;var r,e=j0(),i=nS(),a=sS(),l=iS(),c=aS(),d=N0(),u=Va(),p=oS(),y=lS(),v=cS(),k=uS(),E=dS(),C=hS(),N=fS(),g=mS(),j=Function,f=function(te){try{return j('"use strict"; return ('+te+").constructor;")()}catch{}},b=qa(),w=tc(),_=function(){throw new u},A=b?(function(){try{return arguments.callee,_}catch{try{return b(arguments,"callee").get}catch{return _}}})():_,B=gS()(),M=NS(),$=_0(),D=k0(),le=S0(),pe=Df(),H={},q=typeof Uint8Array>"u"||!M?r:M(Uint8Array),T={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":B&&M?M([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":H,"%AsyncGenerator%":H,"%AsyncGeneratorFunction%":H,"%AsyncIteratorPrototype%":H,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?r:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":i,"%eval%":eval,"%EvalError%":a,"%Float16Array%":typeof Float16Array>"u"?r:Float16Array,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":j,"%GeneratorFunction%":H,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":B&&M?M(M([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!B||!M?r:M(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":b,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":l,"%ReferenceError%":c,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!B||!M?r:M(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":B&&M?M(""[Symbol.iterator]()):r,"%Symbol%":B?Symbol:r,"%SyntaxError%":d,"%ThrowTypeError%":A,"%TypedArray%":q,"%TypeError%":u,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":p,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet,"%Function.prototype.call%":pe,"%Function.prototype.apply%":le,"%Object.defineProperty%":w,"%Object.getPrototypeOf%":$,"%Math.abs%":y,"%Math.floor%":v,"%Math.max%":k,"%Math.min%":E,"%Math.pow%":C,"%Math.round%":N,"%Math.sign%":g,"%Reflect.getPrototypeOf%":D};if(M)try{null.error}catch(te){var Z=M(M(te));T["%Error.prototype%"]=Z}var Q=function te(ee){var G;if(ee==="%AsyncFunction%")G=f("async function () {}");else if(ee==="%GeneratorFunction%")G=f("function* () {}");else if(ee==="%AsyncGeneratorFunction%")G=f("async function* () {}");else if(ee==="%AsyncGenerator%"){var L=te("%AsyncGeneratorFunction%");L&&(G=L.prototype)}else if(ee==="%AsyncIteratorPrototype%"){var ie=te("%AsyncGenerator%");ie&&M&&(G=M(ie.prototype))}return T[ee]=G,G},Y={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ne=Ka(),J=kS(),ue=ne.call(pe,Array.prototype.concat),W=ne.call(le,Array.prototype.splice),U=ne.call(pe,String.prototype.replace),re=ne.call(pe,String.prototype.slice),ae=ne.call(pe,RegExp.prototype.exec),ye=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ce=/\\(\\)?/g,P=function(ee){var G=re(ee,0,1),L=re(ee,-1);if(G==="%"&&L!=="%")throw new d("invalid intrinsic syntax, expected closing `%`");if(L==="%"&&G!=="%")throw new d("invalid intrinsic syntax, expected opening `%`");var ie=[];return U(ee,ye,function(z,fe,F,x){ie[ie.length]=F?U(x,ce,"$1"):fe||z}),ie},O=function(ee,G){var L=ee,ie;if(J(Y,L)&&(ie=Y[L],L="%"+ie[0]+"%"),J(T,L)){var z=T[L];if(z===H&&(z=Q(L)),typeof z>"u"&&!G)throw new u("intrinsic "+ee+" exists, but is not available. Please file an issue!");return{alias:ie,name:L,value:z}}throw new d("intrinsic "+ee+" does not exist!")};return Vd=function(ee,G){if(typeof ee!="string"||ee.length===0)throw new u("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof G!="boolean")throw new u('"allowMissing" argument must be a boolean');if(ae(/^%?[^%]*%?$/,ee)===null)throw new d("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var L=P(ee),ie=L.length>0?L[0]:"",z=O("%"+ie+"%",G),fe=z.name,F=z.value,x=!1,m=z.alias;m&&(ie=m[0],W(L,ue([0,1],m)));for(var R=1,X=!0;R<L.length;R+=1){var oe=L[R],se=re(oe,0,1),ge=re(oe,-1);if((se==='"'||se==="'"||se==="`"||ge==='"'||ge==="'"||ge==="`")&&se!==ge)throw new d("property names with quotes must have matching quotes");if((oe==="constructor"||!X)&&(x=!0),ie+="."+oe,fe="%"+ie+"%",J(T,fe))F=T[fe];else if(F!=null){if(!(oe in F)){if(!G)throw new u("base intrinsic for "+ee+" exists, but the property is not available.");return}if(b&&R+1>=L.length){var ke=b(F,oe);X=!!ke,X&&"get"in ke&&!("originalValue"in ke.get)?F=ke.get:F=F[oe]}else X=J(F,oe),F=F[oe];X&&!x&&(T[fe]=F)}}return F},Vd}var qd={exports:{}},Kd,Jg;function _S(){if(Jg)return Kd;Jg=1;var r=tc(),e=N0(),i=Va(),a=qa();return Kd=function(c,d,u){if(!c||typeof c!="object"&&typeof c!="function")throw new i("`obj` must be an object or a function`");if(typeof d!="string"&&typeof d!="symbol")throw new i("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new i("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new i("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new i("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new i("`loose`, if provided, must be a boolean");var p=arguments.length>3?arguments[3]:null,y=arguments.length>4?arguments[4]:null,v=arguments.length>5?arguments[5]:null,k=arguments.length>6?arguments[6]:!1,E=!!a&&a(c,d);if(r)r(c,d,{configurable:v===null&&E?E.configurable:!v,enumerable:p===null&&E?E.enumerable:!p,value:u,writable:y===null&&E?E.writable:!y});else if(k||!p&&!y&&!v)c[d]=u;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Kd}var Gd,Yg;function SS(){if(Yg)return Gd;Yg=1;var r=tc(),e=function(){return!!r};return e.hasArrayLengthDefineBug=function(){if(!r)return null;try{return r([],"length",{value:1}).length!==1}catch{return!0}},Gd=e,Gd}var Zd,Qg;function ES(){if(Qg)return Zd;Qg=1;var r=Lf(),e=_S(),i=SS()(),a=qa(),l=Va(),c=r("%Math.floor%");return Zd=function(u,p){if(typeof u!="function")throw new l("`fn` is not a function");if(typeof p!="number"||p<0||p>4294967295||c(p)!==p)throw new l("`length` must be a positive 32-bit integer");var y=arguments.length>2&&!!arguments[2],v=!0,k=!0;if("length"in u&&a){var E=a(u,"length");E&&!E.configurable&&(v=!1),E&&!E.writable&&(k=!1)}return(v||k||!y)&&(i?e(u,"length",p,!0,!0):e(u,"length",p)),u},Zd}var ev;function E0(){return ev||(ev=1,(function(r){var e=Ka(),i=Lf(),a=ES(),l=Va(),c=i("%Function.prototype.apply%"),d=i("%Function.prototype.call%"),u=i("%Reflect.apply%",!0)||e.call(d,c),p=tc(),y=i("%Math.max%");r.exports=function(E){if(typeof E!="function")throw new l("a function is required");var C=u(e,d,arguments);return a(C,1+y(0,E.length-(arguments.length-1)),!0)};var v=function(){return u(e,c,arguments)};p?p(r.exports,"apply",{value:v}):r.exports.apply=v})(qd)),qd.exports}var Xd,tv;function C0(){if(tv)return Xd;tv=1;var r=Lf(),e=E0(),i=e(r("String.prototype.indexOf"));return Xd=function(l,c){var d=r(l,!!c);return typeof d=="function"&&i(l,".prototype.")>-1?e(d):d},Xd}var Jd,rv;function CS(){if(rv)return Jd;rv=1;var r=Ff()(),e=C0(),i=e("Object.prototype.toString"),a=function(u){return r&&u&&typeof u=="object"&&Symbol.toStringTag in u?!1:i(u)==="[object Arguments]"},l=function(u){return a(u)?!0:u!==null&&typeof u=="object"&&typeof u.length=="number"&&u.length>=0&&i(u)!=="[object Array]"&&i(u.callee)==="[object Function]"},c=(function(){return a(arguments)})();return a.isLegacyArguments=l,Jd=c?a:l,Jd}var Yd,nv;function TS(){if(nv)return Yd;nv=1;var r=Object.prototype.toString,e=Function.prototype.toString,i=/^\s*(?:function)?\*/,a=Ff()(),l=Object.getPrototypeOf,c=function(){if(!a)return!1;try{return Function("return function*() {}")()}catch{}},d;return Yd=function(p){if(typeof p!="function")return!1;if(i.test(e.call(p)))return!0;if(!a){var y=r.call(p);return y==="[object GeneratorFunction]"}if(!l)return!1;if(typeof d>"u"){var v=c();d=v?l(v):!1}return l(p)===d},Yd}var Qd,sv;function AS(){if(sv)return Qd;sv=1;var r=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,i,a;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{i=Object.defineProperty({},"length",{get:function(){throw a}}),a={},e(function(){throw 42},null,i)}catch(b){b!==a&&(e=null)}else e=null;var l=/^\s*class\b/,c=function(w){try{var _=r.call(w);return l.test(_)}catch{return!1}},d=function(w){try{return c(w)?!1:(r.call(w),!0)}catch{return!1}},u=Object.prototype.toString,p="[object Object]",y="[object Function]",v="[object GeneratorFunction]",k="[object HTMLAllCollection]",E="[object HTML document.all class]",C="[object HTMLCollection]",N=typeof Symbol=="function"&&!!Symbol.toStringTag,g=!(0 in[,]),j=function(){return!1};if(typeof document=="object"){var f=document.all;u.call(f)===u.call(document.all)&&(j=function(w){if((g||!w)&&(typeof w>"u"||typeof w=="object"))try{var _=u.call(w);return(_===k||_===E||_===C||_===p)&&w("")==null}catch{}return!1})}return Qd=e?function(w){if(j(w))return!0;if(!w||typeof w!="function"&&typeof w!="object")return!1;try{e(w,null,i)}catch(_){if(_!==a)return!1}return!c(w)&&d(w)}:function(w){if(j(w))return!0;if(!w||typeof w!="function"&&typeof w!="object")return!1;if(N)return d(w);if(c(w))return!1;var _=u.call(w);return _!==y&&_!==v&&!/^\[object HTML/.test(_)?!1:d(w)},Qd}var eh,iv;function RS(){if(iv)return eh;iv=1;var r=AS(),e=Object.prototype.toString,i=Object.prototype.hasOwnProperty,a=function(p,y,v){for(var k=0,E=p.length;k<E;k++)i.call(p,k)&&(v==null?y(p[k],k,p):y.call(v,p[k],k,p))},l=function(p,y,v){for(var k=0,E=p.length;k<E;k++)v==null?y(p.charAt(k),k,p):y.call(v,p.charAt(k),k,p)},c=function(p,y,v){for(var k in p)i.call(p,k)&&(v==null?y(p[k],k,p):y.call(v,p[k],k,p))},d=function(p,y,v){if(!r(y))throw new TypeError("iterator must be a function");var k;arguments.length>=3&&(k=v),e.call(p)==="[object Array]"?a(p,y,k):typeof p=="string"?l(p,y,k):c(p,y,k)};return eh=d,eh}var th,av;function PS(){return av||(av=1,th=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),th}var rh,ov;function zS(){if(ov)return rh;ov=1;var r=PS(),e=typeof globalThis>"u"?wn:globalThis;return rh=function(){for(var a=[],l=0;l<r.length;l++)typeof e[r[l]]=="function"&&(a[a.length]=r[l]);return a},rh}var nh,lv;function T0(){if(lv)return nh;lv=1;var r=RS(),e=zS(),i=E0(),a=C0(),l=qa(),c=a("Object.prototype.toString"),d=Ff()(),u=typeof globalThis>"u"?wn:globalThis,p=e(),y=a("String.prototype.slice"),v=Object.getPrototypeOf,k=a("Array.prototype.indexOf",!0)||function(j,f){for(var b=0;b<j.length;b+=1)if(j[b]===f)return b;return-1},E={__proto__:null};d&&l&&v?r(p,function(g){var j=new u[g];if(Symbol.toStringTag in j){var f=v(j),b=l(f,Symbol.toStringTag);if(!b){var w=v(f);b=l(w,Symbol.toStringTag)}E["$"+g]=i(b.get)}}):r(p,function(g){var j=new u[g],f=j.slice||j.set;f&&(E["$"+g]=i(f))});var C=function(j){var f=!1;return r(E,function(b,w){if(!f)try{"$"+b(j)===w&&(f=y(w,1))}catch{}}),f},N=function(j){var f=!1;return r(E,function(b,w){if(!f)try{b(j),f=y(w,1)}catch{}}),f};return nh=function(j){if(!j||typeof j!="object")return!1;if(!d){var f=y(c(j),8,-1);return k(p,f)>-1?f:f!=="Object"?!1:N(j)}return l?C(j):null},nh}var sh,cv;function OS(){if(cv)return sh;cv=1;var r=T0();return sh=function(i){return!!r(i)},sh}var uv;function IS(){return uv||(uv=1,(function(r){var e=CS(),i=TS(),a=T0(),l=OS();function c(R){return R.call.bind(R)}var d=typeof BigInt<"u",u=typeof Symbol<"u",p=c(Object.prototype.toString),y=c(Number.prototype.valueOf),v=c(String.prototype.valueOf),k=c(Boolean.prototype.valueOf);if(d)var E=c(BigInt.prototype.valueOf);if(u)var C=c(Symbol.prototype.valueOf);function N(R,X){if(typeof R!="object")return!1;try{return X(R),!0}catch{return!1}}r.isArgumentsObject=e,r.isGeneratorFunction=i,r.isTypedArray=l;function g(R){return typeof Promise<"u"&&R instanceof Promise||R!==null&&typeof R=="object"&&typeof R.then=="function"&&typeof R.catch=="function"}r.isPromise=g;function j(R){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(R):l(R)||re(R)}r.isArrayBufferView=j;function f(R){return a(R)==="Uint8Array"}r.isUint8Array=f;function b(R){return a(R)==="Uint8ClampedArray"}r.isUint8ClampedArray=b;function w(R){return a(R)==="Uint16Array"}r.isUint16Array=w;function _(R){return a(R)==="Uint32Array"}r.isUint32Array=_;function A(R){return a(R)==="Int8Array"}r.isInt8Array=A;function B(R){return a(R)==="Int16Array"}r.isInt16Array=B;function M(R){return a(R)==="Int32Array"}r.isInt32Array=M;function $(R){return a(R)==="Float32Array"}r.isFloat32Array=$;function D(R){return a(R)==="Float64Array"}r.isFloat64Array=D;function le(R){return a(R)==="BigInt64Array"}r.isBigInt64Array=le;function pe(R){return a(R)==="BigUint64Array"}r.isBigUint64Array=pe;function H(R){return p(R)==="[object Map]"}H.working=typeof Map<"u"&&H(new Map);function q(R){return typeof Map>"u"?!1:H.working?H(R):R instanceof Map}r.isMap=q;function T(R){return p(R)==="[object Set]"}T.working=typeof Set<"u"&&T(new Set);function Z(R){return typeof Set>"u"?!1:T.working?T(R):R instanceof Set}r.isSet=Z;function Q(R){return p(R)==="[object WeakMap]"}Q.working=typeof WeakMap<"u"&&Q(new WeakMap);function Y(R){return typeof WeakMap>"u"?!1:Q.working?Q(R):R instanceof WeakMap}r.isWeakMap=Y;function ne(R){return p(R)==="[object WeakSet]"}ne.working=typeof WeakSet<"u"&&ne(new WeakSet);function J(R){return ne(R)}r.isWeakSet=J;function ue(R){return p(R)==="[object ArrayBuffer]"}ue.working=typeof ArrayBuffer<"u"&&ue(new ArrayBuffer);function W(R){return typeof ArrayBuffer>"u"?!1:ue.working?ue(R):R instanceof ArrayBuffer}r.isArrayBuffer=W;function U(R){return p(R)==="[object DataView]"}U.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&U(new DataView(new ArrayBuffer(1),0,1));function re(R){return typeof DataView>"u"?!1:U.working?U(R):R instanceof DataView}r.isDataView=re;var ae=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function ye(R){return p(R)==="[object SharedArrayBuffer]"}function ce(R){return typeof ae>"u"?!1:(typeof ye.working>"u"&&(ye.working=ye(new ae)),ye.working?ye(R):R instanceof ae)}r.isSharedArrayBuffer=ce;function P(R){return p(R)==="[object AsyncFunction]"}r.isAsyncFunction=P;function O(R){return p(R)==="[object Map Iterator]"}r.isMapIterator=O;function te(R){return p(R)==="[object Set Iterator]"}r.isSetIterator=te;function ee(R){return p(R)==="[object Generator]"}r.isGeneratorObject=ee;function G(R){return p(R)==="[object WebAssembly.Module]"}r.isWebAssemblyCompiledModule=G;function L(R){return N(R,y)}r.isNumberObject=L;function ie(R){return N(R,v)}r.isStringObject=ie;function z(R){return N(R,k)}r.isBooleanObject=z;function fe(R){return d&&N(R,E)}r.isBigIntObject=fe;function F(R){return u&&N(R,C)}r.isSymbolObject=F;function x(R){return L(R)||ie(R)||z(R)||fe(R)||F(R)}r.isBoxedPrimitive=x;function m(R){return typeof Uint8Array<"u"&&(W(R)||ce(R))}r.isAnyArrayBuffer=m,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(R){Object.defineProperty(r,R,{enumerable:!1,value:function(){throw new Error(R+" is not supported in userland")}})})})(ud)),ud}var ih,dv;function FS(){return dv||(dv=1,ih=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),ih}var hv;function A0(){return hv||(hv=1,(function(r){var e=Object.getOwnPropertyDescriptors||function(re){for(var ae=Object.keys(re),ye={},ce=0;ce<ae.length;ce++)ye[ae[ce]]=Object.getOwnPropertyDescriptor(re,ae[ce]);return ye},i=/%[sdj%]/g;r.format=function(U){if(!A(U)){for(var re=[],ae=0;ae<arguments.length;ae++)re.push(d(arguments[ae]));return re.join(" ")}for(var ae=1,ye=arguments,ce=ye.length,P=String(U).replace(i,function(te){if(te==="%%")return"%";if(ae>=ce)return te;switch(te){case"%s":return String(ye[ae++]);case"%d":return Number(ye[ae++]);case"%j":try{return JSON.stringify(ye[ae++])}catch{return"[Circular]"}default:return te}}),O=ye[ae];ae<ce;O=ye[++ae])b(O)||!D(O)?P+=" "+O:P+=" "+d(O);return P},r.deprecate=function(U,re){if(typeof dt<"u"&&dt.noDeprecation===!0)return U;if(typeof dt>"u")return function(){return r.deprecate(U,re).apply(this,arguments)};var ae=!1;function ye(){if(!ae){if(dt.throwDeprecation)throw new Error(re);dt.traceDeprecation?console.trace(re):console.error(re),ae=!0}return U.apply(this,arguments)}return ye};var a={},l=/^$/;if(dt.env.NODE_DEBUG){var c=dt.env.NODE_DEBUG;c=c.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),l=new RegExp("^"+c+"$","i")}r.debuglog=function(U){if(U=U.toUpperCase(),!a[U])if(l.test(U)){var re=dt.pid;a[U]=function(){var ae=r.format.apply(r,arguments);console.error("%s %d: %s",U,re,ae)}}else a[U]=function(){};return a[U]};function d(U,re){var ae={seen:[],stylize:p};return arguments.length>=3&&(ae.depth=arguments[2]),arguments.length>=4&&(ae.colors=arguments[3]),f(re)?ae.showHidden=re:re&&r._extend(ae,re),M(ae.showHidden)&&(ae.showHidden=!1),M(ae.depth)&&(ae.depth=2),M(ae.colors)&&(ae.colors=!1),M(ae.customInspect)&&(ae.customInspect=!0),ae.colors&&(ae.stylize=u),v(ae,U,ae.depth)}r.inspect=d,d.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},d.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function u(U,re){var ae=d.styles[re];return ae?"\x1B["+d.colors[ae][0]+"m"+U+"\x1B["+d.colors[ae][1]+"m":U}function p(U,re){return U}function y(U){var re={};return U.forEach(function(ae,ye){re[ae]=!0}),re}function v(U,re,ae){if(U.customInspect&&re&&H(re.inspect)&&re.inspect!==r.inspect&&!(re.constructor&&re.constructor.prototype===re)){var ye=re.inspect(ae,U);return A(ye)||(ye=v(U,ye,ae)),ye}var ce=k(U,re);if(ce)return ce;var P=Object.keys(re),O=y(P);if(U.showHidden&&(P=Object.getOwnPropertyNames(re)),pe(re)&&(P.indexOf("message")>=0||P.indexOf("description")>=0))return E(re);if(P.length===0){if(H(re)){var te=re.name?": "+re.name:"";return U.stylize("[Function"+te+"]","special")}if($(re))return U.stylize(RegExp.prototype.toString.call(re),"regexp");if(le(re))return U.stylize(Date.prototype.toString.call(re),"date");if(pe(re))return E(re)}var ee="",G=!1,L=["{","}"];if(j(re)&&(G=!0,L=["[","]"]),H(re)){var ie=re.name?": "+re.name:"";ee=" [Function"+ie+"]"}if($(re)&&(ee=" "+RegExp.prototype.toString.call(re)),le(re)&&(ee=" "+Date.prototype.toUTCString.call(re)),pe(re)&&(ee=" "+E(re)),P.length===0&&(!G||re.length==0))return L[0]+ee+L[1];if(ae<0)return $(re)?U.stylize(RegExp.prototype.toString.call(re),"regexp"):U.stylize("[Object]","special");U.seen.push(re);var z;return G?z=C(U,re,ae,O,P):z=P.map(function(fe){return N(U,re,ae,O,fe,G)}),U.seen.pop(),g(z,ee,L)}function k(U,re){if(M(re))return U.stylize("undefined","undefined");if(A(re)){var ae="'"+JSON.stringify(re).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return U.stylize(ae,"string")}if(_(re))return U.stylize(""+re,"number");if(f(re))return U.stylize(""+re,"boolean");if(b(re))return U.stylize("null","null")}function E(U){return"["+Error.prototype.toString.call(U)+"]"}function C(U,re,ae,ye,ce){for(var P=[],O=0,te=re.length;O<te;++O)ne(re,String(O))?P.push(N(U,re,ae,ye,String(O),!0)):P.push("");return ce.forEach(function(ee){ee.match(/^\d+$/)||P.push(N(U,re,ae,ye,ee,!0))}),P}function N(U,re,ae,ye,ce,P){var O,te,ee;if(ee=Object.getOwnPropertyDescriptor(re,ce)||{value:re[ce]},ee.get?ee.set?te=U.stylize("[Getter/Setter]","special"):te=U.stylize("[Getter]","special"):ee.set&&(te=U.stylize("[Setter]","special")),ne(ye,ce)||(O="["+ce+"]"),te||(U.seen.indexOf(ee.value)<0?(b(ae)?te=v(U,ee.value,null):te=v(U,ee.value,ae-1),te.indexOf(`
`)>-1&&(P?te=te.split(`
`).map(function(G){return"  "+G}).join(`
`).slice(2):te=`
`+te.split(`
`).map(function(G){return"   "+G}).join(`
`))):te=U.stylize("[Circular]","special")),M(O)){if(P&&ce.match(/^\d+$/))return te;O=JSON.stringify(""+ce),O.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(O=O.slice(1,-1),O=U.stylize(O,"name")):(O=O.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),O=U.stylize(O,"string"))}return O+": "+te}function g(U,re,ae){var ye=U.reduce(function(ce,P){return P.indexOf(`
`)>=0,ce+P.replace(/\u001b\[\d\d?m/g,"").length+1},0);return ye>60?ae[0]+(re===""?"":re+`
 `)+" "+U.join(`,
  `)+" "+ae[1]:ae[0]+re+" "+U.join(", ")+" "+ae[1]}r.types=IS();function j(U){return Array.isArray(U)}r.isArray=j;function f(U){return typeof U=="boolean"}r.isBoolean=f;function b(U){return U===null}r.isNull=b;function w(U){return U==null}r.isNullOrUndefined=w;function _(U){return typeof U=="number"}r.isNumber=_;function A(U){return typeof U=="string"}r.isString=A;function B(U){return typeof U=="symbol"}r.isSymbol=B;function M(U){return U===void 0}r.isUndefined=M;function $(U){return D(U)&&T(U)==="[object RegExp]"}r.isRegExp=$,r.types.isRegExp=$;function D(U){return typeof U=="object"&&U!==null}r.isObject=D;function le(U){return D(U)&&T(U)==="[object Date]"}r.isDate=le,r.types.isDate=le;function pe(U){return D(U)&&(T(U)==="[object Error]"||U instanceof Error)}r.isError=pe,r.types.isNativeError=pe;function H(U){return typeof U=="function"}r.isFunction=H;function q(U){return U===null||typeof U=="boolean"||typeof U=="number"||typeof U=="string"||typeof U=="symbol"||typeof U>"u"}r.isPrimitive=q,r.isBuffer=FS();function T(U){return Object.prototype.toString.call(U)}function Z(U){return U<10?"0"+U.toString(10):U.toString(10)}var Q=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Y(){var U=new Date,re=[Z(U.getHours()),Z(U.getMinutes()),Z(U.getSeconds())].join(":");return[U.getDate(),Q[U.getMonth()],re].join(" ")}r.log=function(){console.log("%s - %s",Y(),r.format.apply(r,arguments))},r.inherits=ms(),r._extend=function(U,re){if(!re||!D(re))return U;for(var ae=Object.keys(re),ye=ae.length;ye--;)U[ae[ye]]=re[ae[ye]];return U};function ne(U,re){return Object.prototype.hasOwnProperty.call(U,re)}var J=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;r.promisify=function(re){if(typeof re!="function")throw new TypeError('The "original" argument must be of type Function');if(J&&re[J]){var ae=re[J];if(typeof ae!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(ae,J,{value:ae,enumerable:!1,writable:!1,configurable:!0}),ae}function ae(){for(var ye,ce,P=new Promise(function(ee,G){ye=ee,ce=G}),O=[],te=0;te<arguments.length;te++)O.push(arguments[te]);O.push(function(ee,G){ee?ce(ee):ye(G)});try{re.apply(this,O)}catch(ee){ce(ee)}return P}return Object.setPrototypeOf(ae,Object.getPrototypeOf(re)),J&&Object.defineProperty(ae,J,{value:ae,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(ae,e(re))},r.promisify.custom=J;function ue(U,re){if(!U){var ae=new Error("Promise was rejected with a falsy value");ae.reason=U,U=ae}return re(U)}function W(U){if(typeof U!="function")throw new TypeError('The "original" argument must be of type Function');function re(){for(var ae=[],ye=0;ye<arguments.length;ye++)ae.push(arguments[ye]);var ce=ae.pop();if(typeof ce!="function")throw new TypeError("The last argument must be of type Function");var P=this,O=function(){return ce.apply(P,arguments)};U.apply(this,ae).then(function(te){dt.nextTick(O.bind(null,null,te))},function(te){dt.nextTick(ue.bind(null,te,O))})}return Object.setPrototypeOf(re,Object.getPrototypeOf(U)),Object.defineProperties(re,e(U)),re}r.callbackify=W})(cd)),cd}var ah,fv;function DS(){if(fv)return ah;fv=1;function r(E,C){var N=Object.keys(E);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(E);C&&(g=g.filter(function(j){return Object.getOwnPropertyDescriptor(E,j).enumerable})),N.push.apply(N,g)}return N}function e(E){for(var C=1;C<arguments.length;C++){var N=arguments[C]!=null?arguments[C]:{};C%2?r(Object(N),!0).forEach(function(g){i(E,g,N[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(N)):r(Object(N)).forEach(function(g){Object.defineProperty(E,g,Object.getOwnPropertyDescriptor(N,g))})}return E}function i(E,C,N){return C in E?Object.defineProperty(E,C,{value:N,enumerable:!0,configurable:!0,writable:!0}):E[C]=N,E}function a(E,C){if(!(E instanceof C))throw new TypeError("Cannot call a class as a function")}function l(E,C){for(var N=0;N<C.length;N++){var g=C[N];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(E,g.key,g)}}function c(E,C,N){return C&&l(E.prototype,C),E}var d=ec(),u=d.Buffer,p=A0(),y=p.inspect,v=y&&y.custom||"inspect";function k(E,C,N){u.prototype.copy.call(E,C,N)}return ah=(function(){function E(){a(this,E),this.head=null,this.tail=null,this.length=0}return c(E,[{key:"push",value:function(N){var g={data:N,next:null};this.length>0?this.tail.next=g:this.head=g,this.tail=g,++this.length}},{key:"unshift",value:function(N){var g={data:N,next:this.head};this.length===0&&(this.tail=g),this.head=g,++this.length}},{key:"shift",value:function(){if(this.length!==0){var N=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,N}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(N){if(this.length===0)return"";for(var g=this.head,j=""+g.data;g=g.next;)j+=N+g.data;return j}},{key:"concat",value:function(N){if(this.length===0)return u.alloc(0);for(var g=u.allocUnsafe(N>>>0),j=this.head,f=0;j;)k(j.data,g,f),f+=j.data.length,j=j.next;return g}},{key:"consume",value:function(N,g){var j;return N<this.head.data.length?(j=this.head.data.slice(0,N),this.head.data=this.head.data.slice(N)):N===this.head.data.length?j=this.shift():j=g?this._getString(N):this._getBuffer(N),j}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(N){var g=this.head,j=1,f=g.data;for(N-=f.length;g=g.next;){var b=g.data,w=N>b.length?b.length:N;if(w===b.length?f+=b:f+=b.slice(0,N),N-=w,N===0){w===b.length?(++j,g.next?this.head=g.next:this.head=this.tail=null):(this.head=g,g.data=b.slice(w));break}++j}return this.length-=j,f}},{key:"_getBuffer",value:function(N){var g=u.allocUnsafe(N),j=this.head,f=1;for(j.data.copy(g),N-=j.data.length;j=j.next;){var b=j.data,w=N>b.length?b.length:N;if(b.copy(g,g.length-N,0,w),N-=w,N===0){w===b.length?(++f,j.next?this.head=j.next:this.head=this.tail=null):(this.head=j,j.data=b.slice(w));break}++f}return this.length-=f,g}},{key:v,value:function(N,g){return y(this,e({},g,{depth:0,customInspect:!1}))}}]),E})(),ah}var oh,pv;function R0(){if(pv)return oh;pv=1;function r(d,u){var p=this,y=this._readableState&&this._readableState.destroyed,v=this._writableState&&this._writableState.destroyed;return y||v?(u?u(d):d&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,dt.nextTick(l,this,d)):dt.nextTick(l,this,d)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(d||null,function(k){!u&&k?p._writableState?p._writableState.errorEmitted?dt.nextTick(i,p):(p._writableState.errorEmitted=!0,dt.nextTick(e,p,k)):dt.nextTick(e,p,k):u?(dt.nextTick(i,p),u(k)):dt.nextTick(i,p)}),this)}function e(d,u){l(d,u),i(d)}function i(d){d._writableState&&!d._writableState.emitClose||d._readableState&&!d._readableState.emitClose||d.emit("close")}function a(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function l(d,u){d.emit("error",u)}function c(d,u){var p=d._readableState,y=d._writableState;p&&p.autoDestroy||y&&y.autoDestroy?d.destroy(u):d.emit("error",u)}return oh={destroy:r,undestroy:a,errorOrDestroy:c},oh}var lh={},mv;function Ui(){if(mv)return lh;mv=1;function r(u,p){u.prototype=Object.create(p.prototype),u.prototype.constructor=u,u.__proto__=p}var e={};function i(u,p,y){y||(y=Error);function v(E,C,N){return typeof p=="string"?p:p(E,C,N)}var k=(function(E){r(C,E);function C(N,g,j){return E.call(this,v(N,g,j))||this}return C})(y);k.prototype.name=y.name,k.prototype.code=u,e[u]=k}function a(u,p){if(Array.isArray(u)){var y=u.length;return u=u.map(function(v){return String(v)}),y>2?"one of ".concat(p," ").concat(u.slice(0,y-1).join(", "),", or ")+u[y-1]:y===2?"one of ".concat(p," ").concat(u[0]," or ").concat(u[1]):"of ".concat(p," ").concat(u[0])}else return"of ".concat(p," ").concat(String(u))}function l(u,p,y){return u.substr(0,p.length)===p}function c(u,p,y){return(y===void 0||y>u.length)&&(y=u.length),u.substring(y-p.length,y)===p}function d(u,p,y){return typeof y!="number"&&(y=0),y+p.length>u.length?!1:u.indexOf(p,y)!==-1}return i("ERR_INVALID_OPT_VALUE",function(u,p){return'The value "'+p+'" is invalid for option "'+u+'"'},TypeError),i("ERR_INVALID_ARG_TYPE",function(u,p,y){var v;typeof p=="string"&&l(p,"not ")?(v="must not be",p=p.replace(/^not /,"")):v="must be";var k;if(c(u," argument"))k="The ".concat(u," ").concat(v," ").concat(a(p,"type"));else{var E=d(u,".")?"property":"argument";k='The "'.concat(u,'" ').concat(E," ").concat(v," ").concat(a(p,"type"))}return k+=". Received type ".concat(typeof y),k},TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",function(u){return"The "+u+" method is not implemented"}),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",function(u){return"Cannot call "+u+" after a stream was destroyed"}),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",function(u){return"Unknown encoding: "+u},TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),lh.codes=e,lh}var ch,yv;function P0(){if(yv)return ch;yv=1;var r=Ui().codes.ERR_INVALID_OPT_VALUE;function e(a,l,c){return a.highWaterMark!=null?a.highWaterMark:l?a[c]:null}function i(a,l,c,d){var u=e(l,d,c);if(u!=null){if(!(isFinite(u)&&Math.floor(u)===u)||u<0){var p=d?c:"highWaterMark";throw new r(p,u)}return Math.floor(u)}return a.objectMode?16:16*1024}return ch={getHighWaterMark:i},ch}var uh,gv;function LS(){if(gv)return uh;gv=1,uh=r;function r(i,a){if(e("noDeprecation"))return i;var l=!1;function c(){if(!l){if(e("throwDeprecation"))throw new Error(a);e("traceDeprecation")?console.trace(a):console.warn(a),l=!0}return i.apply(this,arguments)}return c}function e(i){try{if(!wn.localStorage)return!1}catch{return!1}var a=wn.localStorage[i];return a==null?!1:String(a).toLowerCase()==="true"}return uh}var dh,vv;function z0(){if(vv)return dh;vv=1,dh=$;function r(ce){var P=this;this.next=null,this.entry=null,this.finish=function(){ye(P,ce)}}var e;$.WritableState=B;var i={deprecate:LS()},a=w0(),l=ec().Buffer,c=wn.Uint8Array||function(){};function d(ce){return l.from(ce)}function u(ce){return l.isBuffer(ce)||ce instanceof c}var p=R0(),y=P0(),v=y.getHighWaterMark,k=Ui().codes,E=k.ERR_INVALID_ARG_TYPE,C=k.ERR_METHOD_NOT_IMPLEMENTED,N=k.ERR_MULTIPLE_CALLBACK,g=k.ERR_STREAM_CANNOT_PIPE,j=k.ERR_STREAM_DESTROYED,f=k.ERR_STREAM_NULL_VALUES,b=k.ERR_STREAM_WRITE_AFTER_END,w=k.ERR_UNKNOWN_ENCODING,_=p.errorOrDestroy;ms()($,a);function A(){}function B(ce,P,O){e=e||Ai(),ce=ce||{},typeof O!="boolean"&&(O=P instanceof e),this.objectMode=!!ce.objectMode,O&&(this.objectMode=this.objectMode||!!ce.writableObjectMode),this.highWaterMark=v(this,ce,"writableHighWaterMark",O),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var te=ce.decodeStrings===!1;this.decodeStrings=!te,this.defaultEncoding=ce.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ee){Q(P,ee)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=ce.emitClose!==!1,this.autoDestroy=!!ce.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}B.prototype.getBuffer=function(){for(var P=this.bufferedRequest,O=[];P;)O.push(P),P=P.next;return O},(function(){try{Object.defineProperty(B.prototype,"buffer",{get:i.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var M;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(M=Function.prototype[Symbol.hasInstance],Object.defineProperty($,Symbol.hasInstance,{value:function(P){return M.call(this,P)?!0:this!==$?!1:P&&P._writableState instanceof B}})):M=function(P){return P instanceof this};function $(ce){e=e||Ai();var P=this instanceof e;if(!P&&!M.call($,this))return new $(ce);this._writableState=new B(ce,this,P),this.writable=!0,ce&&(typeof ce.write=="function"&&(this._write=ce.write),typeof ce.writev=="function"&&(this._writev=ce.writev),typeof ce.destroy=="function"&&(this._destroy=ce.destroy),typeof ce.final=="function"&&(this._final=ce.final)),a.call(this)}$.prototype.pipe=function(){_(this,new g)};function D(ce,P){var O=new b;_(ce,O),dt.nextTick(P,O)}function le(ce,P,O,te){var ee;return O===null?ee=new f:typeof O!="string"&&!P.objectMode&&(ee=new E("chunk",["string","Buffer"],O)),ee?(_(ce,ee),dt.nextTick(te,ee),!1):!0}$.prototype.write=function(ce,P,O){var te=this._writableState,ee=!1,G=!te.objectMode&&u(ce);return G&&!l.isBuffer(ce)&&(ce=d(ce)),typeof P=="function"&&(O=P,P=null),G?P="buffer":P||(P=te.defaultEncoding),typeof O!="function"&&(O=A),te.ending?D(this,O):(G||le(this,te,ce,O))&&(te.pendingcb++,ee=H(this,te,G,ce,P,O)),ee},$.prototype.cork=function(){this._writableState.corked++},$.prototype.uncork=function(){var ce=this._writableState;ce.corked&&(ce.corked--,!ce.writing&&!ce.corked&&!ce.bufferProcessing&&ce.bufferedRequest&&J(this,ce))},$.prototype.setDefaultEncoding=function(P){if(typeof P=="string"&&(P=P.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((P+"").toLowerCase())>-1))throw new w(P);return this._writableState.defaultEncoding=P,this},Object.defineProperty($.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function pe(ce,P,O){return!ce.objectMode&&ce.decodeStrings!==!1&&typeof P=="string"&&(P=l.from(P,O)),P}Object.defineProperty($.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function H(ce,P,O,te,ee,G){if(!O){var L=pe(P,te,ee);te!==L&&(O=!0,ee="buffer",te=L)}var ie=P.objectMode?1:te.length;P.length+=ie;var z=P.length<P.highWaterMark;if(z||(P.needDrain=!0),P.writing||P.corked){var fe=P.lastBufferedRequest;P.lastBufferedRequest={chunk:te,encoding:ee,isBuf:O,callback:G,next:null},fe?fe.next=P.lastBufferedRequest:P.bufferedRequest=P.lastBufferedRequest,P.bufferedRequestCount+=1}else q(ce,P,!1,ie,te,ee,G);return z}function q(ce,P,O,te,ee,G,L){P.writelen=te,P.writecb=L,P.writing=!0,P.sync=!0,P.destroyed?P.onwrite(new j("write")):O?ce._writev(ee,P.onwrite):ce._write(ee,G,P.onwrite),P.sync=!1}function T(ce,P,O,te,ee){--P.pendingcb,O?(dt.nextTick(ee,te),dt.nextTick(re,ce,P),ce._writableState.errorEmitted=!0,_(ce,te)):(ee(te),ce._writableState.errorEmitted=!0,_(ce,te),re(ce,P))}function Z(ce){ce.writing=!1,ce.writecb=null,ce.length-=ce.writelen,ce.writelen=0}function Q(ce,P){var O=ce._writableState,te=O.sync,ee=O.writecb;if(typeof ee!="function")throw new N;if(Z(O),P)T(ce,O,te,P,ee);else{var G=ue(O)||ce.destroyed;!G&&!O.corked&&!O.bufferProcessing&&O.bufferedRequest&&J(ce,O),te?dt.nextTick(Y,ce,O,G,ee):Y(ce,O,G,ee)}}function Y(ce,P,O,te){O||ne(ce,P),P.pendingcb--,te(),re(ce,P)}function ne(ce,P){P.length===0&&P.needDrain&&(P.needDrain=!1,ce.emit("drain"))}function J(ce,P){P.bufferProcessing=!0;var O=P.bufferedRequest;if(ce._writev&&O&&O.next){var te=P.bufferedRequestCount,ee=new Array(te),G=P.corkedRequestsFree;G.entry=O;for(var L=0,ie=!0;O;)ee[L]=O,O.isBuf||(ie=!1),O=O.next,L+=1;ee.allBuffers=ie,q(ce,P,!0,P.length,ee,"",G.finish),P.pendingcb++,P.lastBufferedRequest=null,G.next?(P.corkedRequestsFree=G.next,G.next=null):P.corkedRequestsFree=new r(P),P.bufferedRequestCount=0}else{for(;O;){var z=O.chunk,fe=O.encoding,F=O.callback,x=P.objectMode?1:z.length;if(q(ce,P,!1,x,z,fe,F),O=O.next,P.bufferedRequestCount--,P.writing)break}O===null&&(P.lastBufferedRequest=null)}P.bufferedRequest=O,P.bufferProcessing=!1}$.prototype._write=function(ce,P,O){O(new C("_write()"))},$.prototype._writev=null,$.prototype.end=function(ce,P,O){var te=this._writableState;return typeof ce=="function"?(O=ce,ce=null,P=null):typeof P=="function"&&(O=P,P=null),ce!=null&&this.write(ce,P),te.corked&&(te.corked=1,this.uncork()),te.ending||ae(this,te,O),this},Object.defineProperty($.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ue(ce){return ce.ending&&ce.length===0&&ce.bufferedRequest===null&&!ce.finished&&!ce.writing}function W(ce,P){ce._final(function(O){P.pendingcb--,O&&_(ce,O),P.prefinished=!0,ce.emit("prefinish"),re(ce,P)})}function U(ce,P){!P.prefinished&&!P.finalCalled&&(typeof ce._final=="function"&&!P.destroyed?(P.pendingcb++,P.finalCalled=!0,dt.nextTick(W,ce,P)):(P.prefinished=!0,ce.emit("prefinish")))}function re(ce,P){var O=ue(P);if(O&&(U(ce,P),P.pendingcb===0&&(P.finished=!0,ce.emit("finish"),P.autoDestroy))){var te=ce._readableState;(!te||te.autoDestroy&&te.endEmitted)&&ce.destroy()}return O}function ae(ce,P,O){P.ending=!0,re(ce,P),O&&(P.finished?dt.nextTick(O):ce.once("finish",O)),P.ended=!0,ce.writable=!1}function ye(ce,P,O){var te=ce.entry;for(ce.entry=null;te;){var ee=te.callback;P.pendingcb--,ee(O),te=te.next}P.corkedRequestsFree.next=ce}return Object.defineProperty($.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(P){this._writableState&&(this._writableState.destroyed=P)}}),$.prototype.destroy=p.destroy,$.prototype._undestroy=p.undestroy,$.prototype._destroy=function(ce,P){P(ce)},dh}var hh,xv;function Ai(){if(xv)return hh;xv=1;var r=Object.keys||function(y){var v=[];for(var k in y)v.push(k);return v};hh=d;var e=O0(),i=z0();ms()(d,e);for(var a=r(i.prototype),l=0;l<a.length;l++){var c=a[l];d.prototype[c]||(d.prototype[c]=i.prototype[c])}function d(y){if(!(this instanceof d))return new d(y);e.call(this,y),i.call(this,y),this.allowHalfOpen=!0,y&&(y.readable===!1&&(this.readable=!1),y.writable===!1&&(this.writable=!1),y.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",u)))}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(d.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function u(){this._writableState.ended||dt.nextTick(p,this)}function p(y){y.end()}return Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(v){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=v,this._writableState.destroyed=v)}}),hh}var fh={},hl={exports:{}},wv;function BS(){return wv||(wv=1,(function(r,e){var i=ec(),a=i.Buffer;function l(d,u){for(var p in d)u[p]=d[p]}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?r.exports=i:(l(i,e),e.Buffer=c);function c(d,u,p){return a(d,u,p)}l(a,c),c.from=function(d,u,p){if(typeof d=="number")throw new TypeError("Argument must not be a number");return a(d,u,p)},c.alloc=function(d,u,p){if(typeof d!="number")throw new TypeError("Argument must be a number");var y=a(d);return u!==void 0?typeof p=="string"?y.fill(u,p):y.fill(u):y.fill(0),y},c.allocUnsafe=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return a(d)},c.allocUnsafeSlow=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(d)}})(hl,hl.exports)),hl.exports}var bv;function gf(){if(bv)return fh;bv=1;var r=BS().Buffer,e=r.isEncoding||function(f){switch(f=""+f,f&&f.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(f){if(!f)return"utf8";for(var b;;)switch(f){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return f;default:if(b)return;f=(""+f).toLowerCase(),b=!0}}function a(f){var b=i(f);if(typeof b!="string"&&(r.isEncoding===e||!e(f)))throw new Error("Unknown encoding: "+f);return b||f}fh.StringDecoder=l;function l(f){this.encoding=a(f);var b;switch(this.encoding){case"utf16le":this.text=k,this.end=E,b=4;break;case"utf8":this.fillLast=p,b=4;break;case"base64":this.text=C,this.end=N,b=3;break;default:this.write=g,this.end=j;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(b)}l.prototype.write=function(f){if(f.length===0)return"";var b,w;if(this.lastNeed){if(b=this.fillLast(f),b===void 0)return"";w=this.lastNeed,this.lastNeed=0}else w=0;return w<f.length?b?b+this.text(f,w):this.text(f,w):b||""},l.prototype.end=v,l.prototype.text=y,l.prototype.fillLast=function(f){if(this.lastNeed<=f.length)return f.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);f.copy(this.lastChar,this.lastTotal-this.lastNeed,0,f.length),this.lastNeed-=f.length};function c(f){return f<=127?0:f>>5===6?2:f>>4===14?3:f>>3===30?4:f>>6===2?-1:-2}function d(f,b,w){var _=b.length-1;if(_<w)return 0;var A=c(b[_]);return A>=0?(A>0&&(f.lastNeed=A-1),A):--_<w||A===-2?0:(A=c(b[_]),A>=0?(A>0&&(f.lastNeed=A-2),A):--_<w||A===-2?0:(A=c(b[_]),A>=0?(A>0&&(A===2?A=0:f.lastNeed=A-3),A):0))}function u(f,b,w){if((b[0]&192)!==128)return f.lastNeed=0,"";if(f.lastNeed>1&&b.length>1){if((b[1]&192)!==128)return f.lastNeed=1,"";if(f.lastNeed>2&&b.length>2&&(b[2]&192)!==128)return f.lastNeed=2,""}}function p(f){var b=this.lastTotal-this.lastNeed,w=u(this,f);if(w!==void 0)return w;if(this.lastNeed<=f.length)return f.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);f.copy(this.lastChar,b,0,f.length),this.lastNeed-=f.length}function y(f,b){var w=d(this,f,b);if(!this.lastNeed)return f.toString("utf8",b);this.lastTotal=w;var _=f.length-(w-this.lastNeed);return f.copy(this.lastChar,0,_),f.toString("utf8",b,_)}function v(f){var b=f&&f.length?this.write(f):"";return this.lastNeed?b+"":b}function k(f,b){if((f.length-b)%2===0){var w=f.toString("utf16le",b);if(w){var _=w.charCodeAt(w.length-1);if(_>=55296&&_<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=f[f.length-2],this.lastChar[1]=f[f.length-1],w.slice(0,-1)}return w}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=f[f.length-1],f.toString("utf16le",b,f.length-1)}function E(f){var b=f&&f.length?this.write(f):"";if(this.lastNeed){var w=this.lastTotal-this.lastNeed;return b+this.lastChar.toString("utf16le",0,w)}return b}function C(f,b){var w=(f.length-b)%3;return w===0?f.toString("base64",b):(this.lastNeed=3-w,this.lastTotal=3,w===1?this.lastChar[0]=f[f.length-1]:(this.lastChar[0]=f[f.length-2],this.lastChar[1]=f[f.length-1]),f.toString("base64",b,f.length-w))}function N(f){var b=f&&f.length?this.write(f):"";return this.lastNeed?b+this.lastChar.toString("base64",0,3-this.lastNeed):b}function g(f){return f.toString(this.encoding)}function j(f){return f&&f.length?this.write(f):""}return fh}var ph,jv;function Bf(){if(jv)return ph;jv=1;var r=Ui().codes.ERR_STREAM_PREMATURE_CLOSE;function e(c){var d=!1;return function(){if(!d){d=!0;for(var u=arguments.length,p=new Array(u),y=0;y<u;y++)p[y]=arguments[y];c.apply(this,p)}}}function i(){}function a(c){return c.setHeader&&typeof c.abort=="function"}function l(c,d,u){if(typeof d=="function")return l(c,null,d);d||(d={}),u=e(u||i);var p=d.readable||d.readable!==!1&&c.readable,y=d.writable||d.writable!==!1&&c.writable,v=function(){c.writable||E()},k=c._writableState&&c._writableState.finished,E=function(){y=!1,k=!0,p||u.call(c)},C=c._readableState&&c._readableState.endEmitted,N=function(){p=!1,C=!0,y||u.call(c)},g=function(w){u.call(c,w)},j=function(){var w;if(p&&!C)return(!c._readableState||!c._readableState.ended)&&(w=new r),u.call(c,w);if(y&&!k)return(!c._writableState||!c._writableState.ended)&&(w=new r),u.call(c,w)},f=function(){c.req.on("finish",E)};return a(c)?(c.on("complete",E),c.on("abort",j),c.req?f():c.on("request",f)):y&&!c._writableState&&(c.on("end",v),c.on("close",v)),c.on("end",N),c.on("finish",E),d.error!==!1&&c.on("error",g),c.on("close",j),function(){c.removeListener("complete",E),c.removeListener("abort",j),c.removeListener("request",f),c.req&&c.req.removeListener("finish",E),c.removeListener("end",v),c.removeListener("close",v),c.removeListener("finish",E),c.removeListener("end",N),c.removeListener("error",g),c.removeListener("close",j)}}return ph=l,ph}var mh,Nv;function MS(){if(Nv)return mh;Nv=1;var r;function e(f,b,w){return b in f?Object.defineProperty(f,b,{value:w,enumerable:!0,configurable:!0,writable:!0}):f[b]=w,f}var i=Bf(),a=Symbol("lastResolve"),l=Symbol("lastReject"),c=Symbol("error"),d=Symbol("ended"),u=Symbol("lastPromise"),p=Symbol("handlePromise"),y=Symbol("stream");function v(f,b){return{value:f,done:b}}function k(f){var b=f[a];if(b!==null){var w=f[y].read();w!==null&&(f[u]=null,f[a]=null,f[l]=null,b(v(w,!1)))}}function E(f){dt.nextTick(k,f)}function C(f,b){return function(w,_){f.then(function(){if(b[d]){w(v(void 0,!0));return}b[p](w,_)},_)}}var N=Object.getPrototypeOf(function(){}),g=Object.setPrototypeOf((r={get stream(){return this[y]},next:function(){var b=this,w=this[c];if(w!==null)return Promise.reject(w);if(this[d])return Promise.resolve(v(void 0,!0));if(this[y].destroyed)return new Promise(function(M,$){dt.nextTick(function(){b[c]?$(b[c]):M(v(void 0,!0))})});var _=this[u],A;if(_)A=new Promise(C(_,this));else{var B=this[y].read();if(B!==null)return Promise.resolve(v(B,!1));A=new Promise(this[p])}return this[u]=A,A}},e(r,Symbol.asyncIterator,function(){return this}),e(r,"return",function(){var b=this;return new Promise(function(w,_){b[y].destroy(null,function(A){if(A){_(A);return}w(v(void 0,!0))})})}),r),N),j=function(b){var w,_=Object.create(g,(w={},e(w,y,{value:b,writable:!0}),e(w,a,{value:null,writable:!0}),e(w,l,{value:null,writable:!0}),e(w,c,{value:null,writable:!0}),e(w,d,{value:b._readableState.endEmitted,writable:!0}),e(w,p,{value:function(B,M){var $=_[y].read();$?(_[u]=null,_[a]=null,_[l]=null,B(v($,!1))):(_[a]=B,_[l]=M)},writable:!0}),w));return _[u]=null,i(b,function(A){if(A&&A.code!=="ERR_STREAM_PREMATURE_CLOSE"){var B=_[l];B!==null&&(_[u]=null,_[a]=null,_[l]=null,B(A)),_[c]=A;return}var M=_[a];M!==null&&(_[u]=null,_[a]=null,_[l]=null,M(v(void 0,!0))),_[d]=!0}),b.on("readable",E.bind(null,_)),_};return mh=j,mh}var yh,kv;function US(){return kv||(kv=1,yh=function(){throw new Error("Readable.from is not available in the browser")}),yh}var gh,_v;function O0(){if(_v)return gh;_v=1,gh=D;var r;D.ReadableState=$,If().EventEmitter;var e=function(L,ie){return L.listeners(ie).length},i=w0(),a=ec().Buffer,l=wn.Uint8Array||function(){};function c(G){return a.from(G)}function d(G){return a.isBuffer(G)||G instanceof l}var u=A0(),p;u&&u.debuglog?p=u.debuglog("stream"):p=function(){};var y=DS(),v=R0(),k=P0(),E=k.getHighWaterMark,C=Ui().codes,N=C.ERR_INVALID_ARG_TYPE,g=C.ERR_STREAM_PUSH_AFTER_EOF,j=C.ERR_METHOD_NOT_IMPLEMENTED,f=C.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,b,w,_;ms()(D,i);var A=v.errorOrDestroy,B=["error","close","destroy","pause","resume"];function M(G,L,ie){if(typeof G.prependListener=="function")return G.prependListener(L,ie);!G._events||!G._events[L]?G.on(L,ie):Array.isArray(G._events[L])?G._events[L].unshift(ie):G._events[L]=[ie,G._events[L]]}function $(G,L,ie){r=r||Ai(),G=G||{},typeof ie!="boolean"&&(ie=L instanceof r),this.objectMode=!!G.objectMode,ie&&(this.objectMode=this.objectMode||!!G.readableObjectMode),this.highWaterMark=E(this,G,"readableHighWaterMark",ie),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=G.emitClose!==!1,this.autoDestroy=!!G.autoDestroy,this.destroyed=!1,this.defaultEncoding=G.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,G.encoding&&(b||(b=gf().StringDecoder),this.decoder=new b(G.encoding),this.encoding=G.encoding)}function D(G){if(r=r||Ai(),!(this instanceof D))return new D(G);var L=this instanceof r;this._readableState=new $(G,this,L),this.readable=!0,G&&(typeof G.read=="function"&&(this._read=G.read),typeof G.destroy=="function"&&(this._destroy=G.destroy)),i.call(this)}Object.defineProperty(D.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(L){this._readableState&&(this._readableState.destroyed=L)}}),D.prototype.destroy=v.destroy,D.prototype._undestroy=v.undestroy,D.prototype._destroy=function(G,L){L(G)},D.prototype.push=function(G,L){var ie=this._readableState,z;return ie.objectMode?z=!0:typeof G=="string"&&(L=L||ie.defaultEncoding,L!==ie.encoding&&(G=a.from(G,L),L=""),z=!0),le(this,G,L,!1,z)},D.prototype.unshift=function(G){return le(this,G,null,!0,!1)};function le(G,L,ie,z,fe){p("readableAddChunk",L);var F=G._readableState;if(L===null)F.reading=!1,Q(G,F);else{var x;if(fe||(x=H(F,L)),x)A(G,x);else if(F.objectMode||L&&L.length>0)if(typeof L!="string"&&!F.objectMode&&Object.getPrototypeOf(L)!==a.prototype&&(L=c(L)),z)F.endEmitted?A(G,new f):pe(G,F,L,!0);else if(F.ended)A(G,new g);else{if(F.destroyed)return!1;F.reading=!1,F.decoder&&!ie?(L=F.decoder.write(L),F.objectMode||L.length!==0?pe(G,F,L,!1):J(G,F)):pe(G,F,L,!1)}else z||(F.reading=!1,J(G,F))}return!F.ended&&(F.length<F.highWaterMark||F.length===0)}function pe(G,L,ie,z){L.flowing&&L.length===0&&!L.sync?(L.awaitDrain=0,G.emit("data",ie)):(L.length+=L.objectMode?1:ie.length,z?L.buffer.unshift(ie):L.buffer.push(ie),L.needReadable&&Y(G)),J(G,L)}function H(G,L){var ie;return!d(L)&&typeof L!="string"&&L!==void 0&&!G.objectMode&&(ie=new N("chunk",["string","Buffer","Uint8Array"],L)),ie}D.prototype.isPaused=function(){return this._readableState.flowing===!1},D.prototype.setEncoding=function(G){b||(b=gf().StringDecoder);var L=new b(G);this._readableState.decoder=L,this._readableState.encoding=this._readableState.decoder.encoding;for(var ie=this._readableState.buffer.head,z="";ie!==null;)z+=L.write(ie.data),ie=ie.next;return this._readableState.buffer.clear(),z!==""&&this._readableState.buffer.push(z),this._readableState.length=z.length,this};var q=1073741824;function T(G){return G>=q?G=q:(G--,G|=G>>>1,G|=G>>>2,G|=G>>>4,G|=G>>>8,G|=G>>>16,G++),G}function Z(G,L){return G<=0||L.length===0&&L.ended?0:L.objectMode?1:G!==G?L.flowing&&L.length?L.buffer.head.data.length:L.length:(G>L.highWaterMark&&(L.highWaterMark=T(G)),G<=L.length?G:L.ended?L.length:(L.needReadable=!0,0))}D.prototype.read=function(G){p("read",G),G=parseInt(G,10);var L=this._readableState,ie=G;if(G!==0&&(L.emittedReadable=!1),G===0&&L.needReadable&&((L.highWaterMark!==0?L.length>=L.highWaterMark:L.length>0)||L.ended))return p("read: emitReadable",L.length,L.ended),L.length===0&&L.ended?O(this):Y(this),null;if(G=Z(G,L),G===0&&L.ended)return L.length===0&&O(this),null;var z=L.needReadable;p("need readable",z),(L.length===0||L.length-G<L.highWaterMark)&&(z=!0,p("length less than watermark",z)),L.ended||L.reading?(z=!1,p("reading or ended",z)):z&&(p("do read"),L.reading=!0,L.sync=!0,L.length===0&&(L.needReadable=!0),this._read(L.highWaterMark),L.sync=!1,L.reading||(G=Z(ie,L)));var fe;return G>0?fe=P(G,L):fe=null,fe===null?(L.needReadable=L.length<=L.highWaterMark,G=0):(L.length-=G,L.awaitDrain=0),L.length===0&&(L.ended||(L.needReadable=!0),ie!==G&&L.ended&&O(this)),fe!==null&&this.emit("data",fe),fe};function Q(G,L){if(p("onEofChunk"),!L.ended){if(L.decoder){var ie=L.decoder.end();ie&&ie.length&&(L.buffer.push(ie),L.length+=L.objectMode?1:ie.length)}L.ended=!0,L.sync?Y(G):(L.needReadable=!1,L.emittedReadable||(L.emittedReadable=!0,ne(G)))}}function Y(G){var L=G._readableState;p("emitReadable",L.needReadable,L.emittedReadable),L.needReadable=!1,L.emittedReadable||(p("emitReadable",L.flowing),L.emittedReadable=!0,dt.nextTick(ne,G))}function ne(G){var L=G._readableState;p("emitReadable_",L.destroyed,L.length,L.ended),!L.destroyed&&(L.length||L.ended)&&(G.emit("readable"),L.emittedReadable=!1),L.needReadable=!L.flowing&&!L.ended&&L.length<=L.highWaterMark,ce(G)}function J(G,L){L.readingMore||(L.readingMore=!0,dt.nextTick(ue,G,L))}function ue(G,L){for(;!L.reading&&!L.ended&&(L.length<L.highWaterMark||L.flowing&&L.length===0);){var ie=L.length;if(p("maybeReadMore read 0"),G.read(0),ie===L.length)break}L.readingMore=!1}D.prototype._read=function(G){A(this,new j("_read()"))},D.prototype.pipe=function(G,L){var ie=this,z=this._readableState;switch(z.pipesCount){case 0:z.pipes=G;break;case 1:z.pipes=[z.pipes,G];break;default:z.pipes.push(G);break}z.pipesCount+=1,p("pipe count=%d opts=%j",z.pipesCount,L);var fe=(!L||L.end!==!1)&&G!==dt.stdout&&G!==dt.stderr,F=fe?m:Fe;z.endEmitted?dt.nextTick(F):ie.once("end",F),G.on("unpipe",x);function x(He,Ye){p("onunpipe"),He===ie&&Ye&&Ye.hasUnpiped===!1&&(Ye.hasUnpiped=!0,oe())}function m(){p("onend"),G.end()}var R=W(ie);G.on("drain",R);var X=!1;function oe(){p("cleanup"),G.removeListener("close",ke),G.removeListener("finish",Ce),G.removeListener("drain",R),G.removeListener("error",ge),G.removeListener("unpipe",x),ie.removeListener("end",m),ie.removeListener("end",Fe),ie.removeListener("data",se),X=!0,z.awaitDrain&&(!G._writableState||G._writableState.needDrain)&&R()}ie.on("data",se);function se(He){p("ondata");var Ye=G.write(He);p("dest.write",Ye),Ye===!1&&((z.pipesCount===1&&z.pipes===G||z.pipesCount>1&&ee(z.pipes,G)!==-1)&&!X&&(p("false write response, pause",z.awaitDrain),z.awaitDrain++),ie.pause())}function ge(He){p("onerror",He),Fe(),G.removeListener("error",ge),e(G,"error")===0&&A(G,He)}M(G,"error",ge);function ke(){G.removeListener("finish",Ce),Fe()}G.once("close",ke);function Ce(){p("onfinish"),G.removeListener("close",ke),Fe()}G.once("finish",Ce);function Fe(){p("unpipe"),ie.unpipe(G)}return G.emit("pipe",ie),z.flowing||(p("pipe resume"),ie.resume()),G};function W(G){return function(){var ie=G._readableState;p("pipeOnDrain",ie.awaitDrain),ie.awaitDrain&&ie.awaitDrain--,ie.awaitDrain===0&&e(G,"data")&&(ie.flowing=!0,ce(G))}}D.prototype.unpipe=function(G){var L=this._readableState,ie={hasUnpiped:!1};if(L.pipesCount===0)return this;if(L.pipesCount===1)return G&&G!==L.pipes?this:(G||(G=L.pipes),L.pipes=null,L.pipesCount=0,L.flowing=!1,G&&G.emit("unpipe",this,ie),this);if(!G){var z=L.pipes,fe=L.pipesCount;L.pipes=null,L.pipesCount=0,L.flowing=!1;for(var F=0;F<fe;F++)z[F].emit("unpipe",this,{hasUnpiped:!1});return this}var x=ee(L.pipes,G);return x===-1?this:(L.pipes.splice(x,1),L.pipesCount-=1,L.pipesCount===1&&(L.pipes=L.pipes[0]),G.emit("unpipe",this,ie),this)},D.prototype.on=function(G,L){var ie=i.prototype.on.call(this,G,L),z=this._readableState;return G==="data"?(z.readableListening=this.listenerCount("readable")>0,z.flowing!==!1&&this.resume()):G==="readable"&&!z.endEmitted&&!z.readableListening&&(z.readableListening=z.needReadable=!0,z.flowing=!1,z.emittedReadable=!1,p("on readable",z.length,z.reading),z.length?Y(this):z.reading||dt.nextTick(re,this)),ie},D.prototype.addListener=D.prototype.on,D.prototype.removeListener=function(G,L){var ie=i.prototype.removeListener.call(this,G,L);return G==="readable"&&dt.nextTick(U,this),ie},D.prototype.removeAllListeners=function(G){var L=i.prototype.removeAllListeners.apply(this,arguments);return(G==="readable"||G===void 0)&&dt.nextTick(U,this),L};function U(G){var L=G._readableState;L.readableListening=G.listenerCount("readable")>0,L.resumeScheduled&&!L.paused?L.flowing=!0:G.listenerCount("data")>0&&G.resume()}function re(G){p("readable nexttick read 0"),G.read(0)}D.prototype.resume=function(){var G=this._readableState;return G.flowing||(p("resume"),G.flowing=!G.readableListening,ae(this,G)),G.paused=!1,this};function ae(G,L){L.resumeScheduled||(L.resumeScheduled=!0,dt.nextTick(ye,G,L))}function ye(G,L){p("resume",L.reading),L.reading||G.read(0),L.resumeScheduled=!1,G.emit("resume"),ce(G),L.flowing&&!L.reading&&G.read(0)}D.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function ce(G){var L=G._readableState;for(p("flow",L.flowing);L.flowing&&G.read()!==null;);}D.prototype.wrap=function(G){var L=this,ie=this._readableState,z=!1;G.on("end",function(){if(p("wrapped end"),ie.decoder&&!ie.ended){var x=ie.decoder.end();x&&x.length&&L.push(x)}L.push(null)}),G.on("data",function(x){if(p("wrapped data"),ie.decoder&&(x=ie.decoder.write(x)),!(ie.objectMode&&x==null)&&!(!ie.objectMode&&(!x||!x.length))){var m=L.push(x);m||(z=!0,G.pause())}});for(var fe in G)this[fe]===void 0&&typeof G[fe]=="function"&&(this[fe]=(function(m){return function(){return G[m].apply(G,arguments)}})(fe));for(var F=0;F<B.length;F++)G.on(B[F],this.emit.bind(this,B[F]));return this._read=function(x){p("wrapped _read",x),z&&(z=!1,G.resume())},this},typeof Symbol=="function"&&(D.prototype[Symbol.asyncIterator]=function(){return w===void 0&&(w=MS()),w(this)}),Object.defineProperty(D.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(D.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(D.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(L){this._readableState&&(this._readableState.flowing=L)}}),D._fromList=P,Object.defineProperty(D.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function P(G,L){if(L.length===0)return null;var ie;return L.objectMode?ie=L.buffer.shift():!G||G>=L.length?(L.decoder?ie=L.buffer.join(""):L.buffer.length===1?ie=L.buffer.first():ie=L.buffer.concat(L.length),L.buffer.clear()):ie=L.buffer.consume(G,L.decoder),ie}function O(G){var L=G._readableState;p("endReadable",L.endEmitted),L.endEmitted||(L.ended=!0,dt.nextTick(te,L,G))}function te(G,L){if(p("endReadableNT",G.endEmitted,G.length),!G.endEmitted&&G.length===0&&(G.endEmitted=!0,L.readable=!1,L.emit("end"),G.autoDestroy)){var ie=L._writableState;(!ie||ie.autoDestroy&&ie.finished)&&L.destroy()}}typeof Symbol=="function"&&(D.from=function(G,L){return _===void 0&&(_=US()),_(D,G,L)});function ee(G,L){for(var ie=0,z=G.length;ie<z;ie++)if(G[ie]===L)return ie;return-1}return gh}var vh,Sv;function I0(){if(Sv)return vh;Sv=1,vh=u;var r=Ui().codes,e=r.ERR_METHOD_NOT_IMPLEMENTED,i=r.ERR_MULTIPLE_CALLBACK,a=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,l=r.ERR_TRANSFORM_WITH_LENGTH_0,c=Ai();ms()(u,c);function d(v,k){var E=this._transformState;E.transforming=!1;var C=E.writecb;if(C===null)return this.emit("error",new i);E.writechunk=null,E.writecb=null,k!=null&&this.push(k),C(v);var N=this._readableState;N.reading=!1,(N.needReadable||N.length<N.highWaterMark)&&this._read(N.highWaterMark)}function u(v){if(!(this instanceof u))return new u(v);c.call(this,v),this._transformState={afterTransform:d.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,v&&(typeof v.transform=="function"&&(this._transform=v.transform),typeof v.flush=="function"&&(this._flush=v.flush)),this.on("prefinish",p)}function p(){var v=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(k,E){y(v,k,E)}):y(this,null,null)}u.prototype.push=function(v,k){return this._transformState.needTransform=!1,c.prototype.push.call(this,v,k)},u.prototype._transform=function(v,k,E){E(new e("_transform()"))},u.prototype._write=function(v,k,E){var C=this._transformState;if(C.writecb=E,C.writechunk=v,C.writeencoding=k,!C.transforming){var N=this._readableState;(C.needTransform||N.needReadable||N.length<N.highWaterMark)&&this._read(N.highWaterMark)}},u.prototype._read=function(v){var k=this._transformState;k.writechunk!==null&&!k.transforming?(k.transforming=!0,this._transform(k.writechunk,k.writeencoding,k.afterTransform)):k.needTransform=!0},u.prototype._destroy=function(v,k){c.prototype._destroy.call(this,v,function(E){k(E)})};function y(v,k,E){if(k)return v.emit("error",k);if(E!=null&&v.push(E),v._writableState.length)throw new l;if(v._transformState.transforming)throw new a;return v.push(null)}return vh}var xh,Ev;function $S(){if(Ev)return xh;Ev=1,xh=e;var r=I0();ms()(e,r);function e(i){if(!(this instanceof e))return new e(i);r.call(this,i)}return e.prototype._transform=function(i,a,l){l(null,i)},xh}var wh,Cv;function HS(){if(Cv)return wh;Cv=1;var r;function e(E){var C=!1;return function(){C||(C=!0,E.apply(void 0,arguments))}}var i=Ui().codes,a=i.ERR_MISSING_ARGS,l=i.ERR_STREAM_DESTROYED;function c(E){if(E)throw E}function d(E){return E.setHeader&&typeof E.abort=="function"}function u(E,C,N,g){g=e(g);var j=!1;E.on("close",function(){j=!0}),r===void 0&&(r=Bf()),r(E,{readable:C,writable:N},function(b){if(b)return g(b);j=!0,g()});var f=!1;return function(b){if(!j&&!f){if(f=!0,d(E))return E.abort();if(typeof E.destroy=="function")return E.destroy();g(b||new l("pipe"))}}}function p(E){E()}function y(E,C){return E.pipe(C)}function v(E){return!E.length||typeof E[E.length-1]!="function"?c:E.pop()}function k(){for(var E=arguments.length,C=new Array(E),N=0;N<E;N++)C[N]=arguments[N];var g=v(C);if(Array.isArray(C[0])&&(C=C[0]),C.length<2)throw new a("streams");var j,f=C.map(function(b,w){var _=w<C.length-1,A=w>0;return u(b,_,A,function(B){j||(j=B),B&&f.forEach(p),!_&&(f.forEach(p),g(j))})});return C.reduce(y)}return wh=k,wh}var bh,Tv;function Mf(){if(Tv)return bh;Tv=1,bh=i;var r=If().EventEmitter,e=ms();e(i,r),i.Readable=O0(),i.Writable=z0(),i.Duplex=Ai(),i.Transform=I0(),i.PassThrough=$S(),i.finished=Bf(),i.pipeline=HS(),i.Stream=i;function i(){r.call(this)}return i.prototype.pipe=function(a,l){var c=this;function d(C){a.writable&&a.write(C)===!1&&c.pause&&c.pause()}c.on("data",d);function u(){c.readable&&c.resume&&c.resume()}a.on("drain",u),!a._isStdio&&(!l||l.end!==!1)&&(c.on("end",y),c.on("close",v));var p=!1;function y(){p||(p=!0,a.end())}function v(){p||(p=!0,typeof a.destroy=="function"&&a.destroy())}function k(C){if(E(),r.listenerCount(this,"error")===0)throw C}c.on("error",k),a.on("error",k);function E(){c.removeListener("data",d),a.removeListener("drain",u),c.removeListener("end",y),c.removeListener("close",v),c.removeListener("error",k),a.removeListener("error",k),c.removeListener("end",E),c.removeListener("close",E),a.removeListener("close",E)}return c.on("end",E),c.on("close",E),a.on("close",E),a.emit("pipe",c),a},bh}var Av;function WS(){return Av||(Av=1,(function(r){(function(e){e.parser=function(P,O){return new a(P,O)},e.SAXParser=a,e.SAXStream=v,e.createStream=y,e.MAX_BUFFER_LENGTH=64*1024;var i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function a(P,O){if(!(this instanceof a))return new a(P,O);var te=this;c(te),te.q=te.c="",te.bufferCheckPosition=e.MAX_BUFFER_LENGTH,te.opt=O||{},te.opt.lowercase=te.opt.lowercase||te.opt.lowercasetags,te.looseCase=te.opt.lowercase?"toLowerCase":"toUpperCase",te.tags=[],te.closed=te.closedRoot=te.sawRoot=!1,te.tag=te.error=null,te.strict=!!P,te.noscript=!!(P||te.opt.noscript),te.state=D.BEGIN,te.strictEntities=te.opt.strictEntities,te.ENTITIES=te.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),te.attribList=[],te.opt.xmlns&&(te.ns=Object.create(g)),te.trackPosition=te.opt.position!==!1,te.trackPosition&&(te.position=te.line=te.column=0),pe(te,"onready")}Object.create||(Object.create=function(P){function O(){}O.prototype=P;var te=new O;return te}),Object.keys||(Object.keys=function(P){var O=[];for(var te in P)P.hasOwnProperty(te)&&O.push(te);return O});function l(P){for(var O=Math.max(e.MAX_BUFFER_LENGTH,10),te=0,ee=0,G=i.length;ee<G;ee++){var L=P[i[ee]].length;if(L>O)switch(i[ee]){case"textNode":q(P);break;case"cdata":H(P,"oncdata",P.cdata),P.cdata="";break;case"script":H(P,"onscript",P.script),P.script="";break;default:Z(P,"Max buffer length exceeded: "+i[ee])}te=Math.max(te,L)}var ie=e.MAX_BUFFER_LENGTH-te;P.bufferCheckPosition=ie+P.position}function c(P){for(var O=0,te=i.length;O<te;O++)P[i[O]]=""}function d(P){q(P),P.cdata!==""&&(H(P,"oncdata",P.cdata),P.cdata=""),P.script!==""&&(H(P,"onscript",P.script),P.script="")}a.prototype={end:function(){Q(this)},write:ce,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){d(this)}};var u;try{u=Mf().Stream}catch{u=function(){}}var p=e.EVENTS.filter(function(P){return P!=="error"&&P!=="end"});function y(P,O){return new v(P,O)}function v(P,O){if(!(this instanceof v))return new v(P,O);u.apply(this),this._parser=new a(P,O),this.writable=!0,this.readable=!0;var te=this;this._parser.onend=function(){te.emit("end")},this._parser.onerror=function(ee){te.emit("error",ee),te._parser.error=null},this._decoder=null,p.forEach(function(ee){Object.defineProperty(te,"on"+ee,{get:function(){return te._parser["on"+ee]},set:function(G){if(!G)return te.removeAllListeners(ee),te._parser["on"+ee]=G,G;te.on(ee,G)},enumerable:!0,configurable:!1})})}v.prototype=Object.create(u.prototype,{constructor:{value:v}}),v.prototype.write=function(P){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(P)){if(!this._decoder){var O=gf().StringDecoder;this._decoder=new O("utf8")}P=this._decoder.write(P)}return this._parser.write(P.toString()),this.emit("data",P),!0},v.prototype.end=function(P){return P&&P.length&&this.write(P),this._parser.end(),!0},v.prototype.on=function(P,O){var te=this;return!te._parser["on"+P]&&p.indexOf(P)!==-1&&(te._parser["on"+P]=function(){var ee=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);ee.splice(0,0,P),te.emit.apply(te,ee)}),u.prototype.on.call(te,P,O)};var k="[CDATA[",E="DOCTYPE",C="http://www.w3.org/XML/1998/namespace",N="http://www.w3.org/2000/xmlns/",g={xml:C,xmlns:N},j=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,f=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,b=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,w=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function _(P){return P===" "||P===`
`||P==="\r"||P==="	"}function A(P){return P==='"'||P==="'"}function B(P){return P===">"||_(P)}function M(P,O){return P.test(O)}function $(P,O){return!M(P,O)}var D=0;e.STATE={BEGIN:D++,BEGIN_WHITESPACE:D++,TEXT:D++,TEXT_ENTITY:D++,OPEN_WAKA:D++,SGML_DECL:D++,SGML_DECL_QUOTED:D++,DOCTYPE:D++,DOCTYPE_QUOTED:D++,DOCTYPE_DTD:D++,DOCTYPE_DTD_QUOTED:D++,COMMENT_STARTING:D++,COMMENT:D++,COMMENT_ENDING:D++,COMMENT_ENDED:D++,CDATA:D++,CDATA_ENDING:D++,CDATA_ENDING_2:D++,PROC_INST:D++,PROC_INST_BODY:D++,PROC_INST_ENDING:D++,OPEN_TAG:D++,OPEN_TAG_SLASH:D++,ATTRIB:D++,ATTRIB_NAME:D++,ATTRIB_NAME_SAW_WHITE:D++,ATTRIB_VALUE:D++,ATTRIB_VALUE_QUOTED:D++,ATTRIB_VALUE_CLOSED:D++,ATTRIB_VALUE_UNQUOTED:D++,ATTRIB_VALUE_ENTITY_Q:D++,ATTRIB_VALUE_ENTITY_U:D++,CLOSE_TAG:D++,CLOSE_TAG_SAW_WHITE:D++,SCRIPT:D++,SCRIPT_ENDING:D++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(P){var O=e.ENTITIES[P],te=typeof O=="number"?String.fromCharCode(O):O;e.ENTITIES[P]=te});for(var le in e.STATE)e.STATE[e.STATE[le]]=le;D=e.STATE;function pe(P,O,te){P[O]&&P[O](te)}function H(P,O,te){P.textNode&&q(P),pe(P,O,te)}function q(P){P.textNode=T(P.opt,P.textNode),P.textNode&&pe(P,"ontext",P.textNode),P.textNode=""}function T(P,O){return P.trim&&(O=O.trim()),P.normalize&&(O=O.replace(/\s+/g," ")),O}function Z(P,O){return q(P),P.trackPosition&&(O+=`
Line: `+P.line+`
Column: `+P.column+`
Char: `+P.c),O=new Error(O),P.error=O,pe(P,"onerror",O),P}function Q(P){return P.sawRoot&&!P.closedRoot&&Y(P,"Unclosed root tag"),P.state!==D.BEGIN&&P.state!==D.BEGIN_WHITESPACE&&P.state!==D.TEXT&&Z(P,"Unexpected end"),q(P),P.c="",P.closed=!0,pe(P,"onend"),a.call(P,P.strict,P.opt),P}function Y(P,O){if(typeof P!="object"||!(P instanceof a))throw new Error("bad call to strictFail");P.strict&&Z(P,O)}function ne(P){P.strict||(P.tagName=P.tagName[P.looseCase]());var O=P.tags[P.tags.length-1]||P,te=P.tag={name:P.tagName,attributes:{}};P.opt.xmlns&&(te.ns=O.ns),P.attribList.length=0,H(P,"onopentagstart",te)}function J(P,O){var te=P.indexOf(":"),ee=te<0?["",P]:P.split(":"),G=ee[0],L=ee[1];return O&&P==="xmlns"&&(G="xmlns",L=""),{prefix:G,local:L}}function ue(P){if(P.strict||(P.attribName=P.attribName[P.looseCase]()),P.attribList.indexOf(P.attribName)!==-1||P.tag.attributes.hasOwnProperty(P.attribName)){P.attribName=P.attribValue="";return}if(P.opt.xmlns){var O=J(P.attribName,!0),te=O.prefix,ee=O.local;if(te==="xmlns")if(ee==="xml"&&P.attribValue!==C)Y(P,"xml: prefix must be bound to "+C+`
Actual: `+P.attribValue);else if(ee==="xmlns"&&P.attribValue!==N)Y(P,"xmlns: prefix must be bound to "+N+`
Actual: `+P.attribValue);else{var G=P.tag,L=P.tags[P.tags.length-1]||P;G.ns===L.ns&&(G.ns=Object.create(L.ns)),G.ns[ee]=P.attribValue}P.attribList.push([P.attribName,P.attribValue])}else P.tag.attributes[P.attribName]=P.attribValue,H(P,"onattribute",{name:P.attribName,value:P.attribValue});P.attribName=P.attribValue=""}function W(P,O){if(P.opt.xmlns){var te=P.tag,ee=J(P.tagName);te.prefix=ee.prefix,te.local=ee.local,te.uri=te.ns[ee.prefix]||"",te.prefix&&!te.uri&&(Y(P,"Unbound namespace prefix: "+JSON.stringify(P.tagName)),te.uri=ee.prefix);var G=P.tags[P.tags.length-1]||P;te.ns&&G.ns!==te.ns&&Object.keys(te.ns).forEach(function(se){H(P,"onopennamespace",{prefix:se,uri:te.ns[se]})});for(var L=0,ie=P.attribList.length;L<ie;L++){var z=P.attribList[L],fe=z[0],F=z[1],x=J(fe,!0),m=x.prefix,R=x.local,X=m===""?"":te.ns[m]||"",oe={name:fe,value:F,prefix:m,local:R,uri:X};m&&m!=="xmlns"&&!X&&(Y(P,"Unbound namespace prefix: "+JSON.stringify(m)),oe.uri=m),P.tag.attributes[fe]=oe,H(P,"onattribute",oe)}P.attribList.length=0}P.tag.isSelfClosing=!!O,P.sawRoot=!0,P.tags.push(P.tag),H(P,"onopentag",P.tag),O||(!P.noscript&&P.tagName.toLowerCase()==="script"?P.state=D.SCRIPT:P.state=D.TEXT,P.tag=null,P.tagName=""),P.attribName=P.attribValue="",P.attribList.length=0}function U(P){if(!P.tagName){Y(P,"Weird empty close tag."),P.textNode+="</>",P.state=D.TEXT;return}if(P.script){if(P.tagName!=="script"){P.script+="</"+P.tagName+">",P.tagName="",P.state=D.SCRIPT;return}H(P,"onscript",P.script),P.script=""}var O=P.tags.length,te=P.tagName;P.strict||(te=te[P.looseCase]());for(var ee=te;O--;){var G=P.tags[O];if(G.name!==ee)Y(P,"Unexpected close tag");else break}if(O<0){Y(P,"Unmatched closing tag: "+P.tagName),P.textNode+="</"+P.tagName+">",P.state=D.TEXT;return}P.tagName=te;for(var L=P.tags.length;L-- >O;){var ie=P.tag=P.tags.pop();P.tagName=P.tag.name,H(P,"onclosetag",P.tagName);var z={};for(var fe in ie.ns)z[fe]=ie.ns[fe];var F=P.tags[P.tags.length-1]||P;P.opt.xmlns&&ie.ns!==F.ns&&Object.keys(ie.ns).forEach(function(x){var m=ie.ns[x];H(P,"onclosenamespace",{prefix:x,uri:m})})}O===0&&(P.closedRoot=!0),P.tagName=P.attribValue=P.attribName="",P.attribList.length=0,P.state=D.TEXT}function re(P){var O=P.entity,te=O.toLowerCase(),ee,G="";return P.ENTITIES[O]?P.ENTITIES[O]:P.ENTITIES[te]?P.ENTITIES[te]:(O=te,O.charAt(0)==="#"&&(O.charAt(1)==="x"?(O=O.slice(2),ee=parseInt(O,16),G=ee.toString(16)):(O=O.slice(1),ee=parseInt(O,10),G=ee.toString(10))),O=O.replace(/^0+/,""),isNaN(ee)||G.toLowerCase()!==O?(Y(P,"Invalid character entity"),"&"+P.entity+";"):String.fromCodePoint(ee))}function ae(P,O){O==="<"?(P.state=D.OPEN_WAKA,P.startTagPosition=P.position):_(O)||(Y(P,"Non-whitespace before first tag."),P.textNode=O,P.state=D.TEXT)}function ye(P,O){var te="";return O<P.length&&(te=P.charAt(O)),te}function ce(P){var O=this;if(this.error)throw this.error;if(O.closed)return Z(O,"Cannot write after close. Assign an onready handler.");if(P===null)return Q(O);typeof P=="object"&&(P=P.toString());for(var te=0,ee="";ee=ye(P,te++),O.c=ee,!!ee;)switch(O.trackPosition&&(O.position++,ee===`
`?(O.line++,O.column=0):O.column++),O.state){case D.BEGIN:if(O.state=D.BEGIN_WHITESPACE,ee==="\uFEFF")continue;ae(O,ee);continue;case D.BEGIN_WHITESPACE:ae(O,ee);continue;case D.TEXT:if(O.sawRoot&&!O.closedRoot){for(var G=te-1;ee&&ee!=="<"&&ee!=="&";)ee=ye(P,te++),ee&&O.trackPosition&&(O.position++,ee===`
`?(O.line++,O.column=0):O.column++);O.textNode+=P.substring(G,te-1)}ee==="<"&&!(O.sawRoot&&O.closedRoot&&!O.strict)?(O.state=D.OPEN_WAKA,O.startTagPosition=O.position):(!_(ee)&&(!O.sawRoot||O.closedRoot)&&Y(O,"Text data outside of root node."),ee==="&"?O.state=D.TEXT_ENTITY:O.textNode+=ee);continue;case D.SCRIPT:ee==="<"?O.state=D.SCRIPT_ENDING:O.script+=ee;continue;case D.SCRIPT_ENDING:ee==="/"?O.state=D.CLOSE_TAG:(O.script+="<"+ee,O.state=D.SCRIPT);continue;case D.OPEN_WAKA:if(ee==="!")O.state=D.SGML_DECL,O.sgmlDecl="";else if(!_(ee))if(M(j,ee))O.state=D.OPEN_TAG,O.tagName=ee;else if(ee==="/")O.state=D.CLOSE_TAG,O.tagName="";else if(ee==="?")O.state=D.PROC_INST,O.procInstName=O.procInstBody="";else{if(Y(O,"Unencoded <"),O.startTagPosition+1<O.position){var L=O.position-O.startTagPosition;ee=new Array(L).join(" ")+ee}O.textNode+="<"+ee,O.state=D.TEXT}continue;case D.SGML_DECL:(O.sgmlDecl+ee).toUpperCase()===k?(H(O,"onopencdata"),O.state=D.CDATA,O.sgmlDecl="",O.cdata=""):O.sgmlDecl+ee==="--"?(O.state=D.COMMENT,O.comment="",O.sgmlDecl=""):(O.sgmlDecl+ee).toUpperCase()===E?(O.state=D.DOCTYPE,(O.doctype||O.sawRoot)&&Y(O,"Inappropriately located doctype declaration"),O.doctype="",O.sgmlDecl=""):ee===">"?(H(O,"onsgmldeclaration",O.sgmlDecl),O.sgmlDecl="",O.state=D.TEXT):(A(ee)&&(O.state=D.SGML_DECL_QUOTED),O.sgmlDecl+=ee);continue;case D.SGML_DECL_QUOTED:ee===O.q&&(O.state=D.SGML_DECL,O.q=""),O.sgmlDecl+=ee;continue;case D.DOCTYPE:ee===">"?(O.state=D.TEXT,H(O,"ondoctype",O.doctype),O.doctype=!0):(O.doctype+=ee,ee==="["?O.state=D.DOCTYPE_DTD:A(ee)&&(O.state=D.DOCTYPE_QUOTED,O.q=ee));continue;case D.DOCTYPE_QUOTED:O.doctype+=ee,ee===O.q&&(O.q="",O.state=D.DOCTYPE);continue;case D.DOCTYPE_DTD:O.doctype+=ee,ee==="]"?O.state=D.DOCTYPE:A(ee)&&(O.state=D.DOCTYPE_DTD_QUOTED,O.q=ee);continue;case D.DOCTYPE_DTD_QUOTED:O.doctype+=ee,ee===O.q&&(O.state=D.DOCTYPE_DTD,O.q="");continue;case D.COMMENT:ee==="-"?O.state=D.COMMENT_ENDING:O.comment+=ee;continue;case D.COMMENT_ENDING:ee==="-"?(O.state=D.COMMENT_ENDED,O.comment=T(O.opt,O.comment),O.comment&&H(O,"oncomment",O.comment),O.comment=""):(O.comment+="-"+ee,O.state=D.COMMENT);continue;case D.COMMENT_ENDED:ee!==">"?(Y(O,"Malformed comment"),O.comment+="--"+ee,O.state=D.COMMENT):O.state=D.TEXT;continue;case D.CDATA:ee==="]"?O.state=D.CDATA_ENDING:O.cdata+=ee;continue;case D.CDATA_ENDING:ee==="]"?O.state=D.CDATA_ENDING_2:(O.cdata+="]"+ee,O.state=D.CDATA);continue;case D.CDATA_ENDING_2:ee===">"?(O.cdata&&H(O,"oncdata",O.cdata),H(O,"onclosecdata"),O.cdata="",O.state=D.TEXT):ee==="]"?O.cdata+="]":(O.cdata+="]]"+ee,O.state=D.CDATA);continue;case D.PROC_INST:ee==="?"?O.state=D.PROC_INST_ENDING:_(ee)?O.state=D.PROC_INST_BODY:O.procInstName+=ee;continue;case D.PROC_INST_BODY:if(!O.procInstBody&&_(ee))continue;ee==="?"?O.state=D.PROC_INST_ENDING:O.procInstBody+=ee;continue;case D.PROC_INST_ENDING:ee===">"?(H(O,"onprocessinginstruction",{name:O.procInstName,body:O.procInstBody}),O.procInstName=O.procInstBody="",O.state=D.TEXT):(O.procInstBody+="?"+ee,O.state=D.PROC_INST_BODY);continue;case D.OPEN_TAG:M(f,ee)?O.tagName+=ee:(ne(O),ee===">"?W(O):ee==="/"?O.state=D.OPEN_TAG_SLASH:(_(ee)||Y(O,"Invalid character in tag name"),O.state=D.ATTRIB));continue;case D.OPEN_TAG_SLASH:ee===">"?(W(O,!0),U(O)):(Y(O,"Forward-slash in opening tag not followed by >"),O.state=D.ATTRIB);continue;case D.ATTRIB:if(_(ee))continue;ee===">"?W(O):ee==="/"?O.state=D.OPEN_TAG_SLASH:M(j,ee)?(O.attribName=ee,O.attribValue="",O.state=D.ATTRIB_NAME):Y(O,"Invalid attribute name");continue;case D.ATTRIB_NAME:ee==="="?O.state=D.ATTRIB_VALUE:ee===">"?(Y(O,"Attribute without value"),O.attribValue=O.attribName,ue(O),W(O)):_(ee)?O.state=D.ATTRIB_NAME_SAW_WHITE:M(f,ee)?O.attribName+=ee:Y(O,"Invalid attribute name");continue;case D.ATTRIB_NAME_SAW_WHITE:if(ee==="=")O.state=D.ATTRIB_VALUE;else{if(_(ee))continue;Y(O,"Attribute without value"),O.tag.attributes[O.attribName]="",O.attribValue="",H(O,"onattribute",{name:O.attribName,value:""}),O.attribName="",ee===">"?W(O):M(j,ee)?(O.attribName=ee,O.state=D.ATTRIB_NAME):(Y(O,"Invalid attribute name"),O.state=D.ATTRIB)}continue;case D.ATTRIB_VALUE:if(_(ee))continue;A(ee)?(O.q=ee,O.state=D.ATTRIB_VALUE_QUOTED):(Y(O,"Unquoted attribute value"),O.state=D.ATTRIB_VALUE_UNQUOTED,O.attribValue=ee);continue;case D.ATTRIB_VALUE_QUOTED:if(ee!==O.q){ee==="&"?O.state=D.ATTRIB_VALUE_ENTITY_Q:O.attribValue+=ee;continue}ue(O),O.q="",O.state=D.ATTRIB_VALUE_CLOSED;continue;case D.ATTRIB_VALUE_CLOSED:_(ee)?O.state=D.ATTRIB:ee===">"?W(O):ee==="/"?O.state=D.OPEN_TAG_SLASH:M(j,ee)?(Y(O,"No whitespace between attributes"),O.attribName=ee,O.attribValue="",O.state=D.ATTRIB_NAME):Y(O,"Invalid attribute name");continue;case D.ATTRIB_VALUE_UNQUOTED:if(!B(ee)){ee==="&"?O.state=D.ATTRIB_VALUE_ENTITY_U:O.attribValue+=ee;continue}ue(O),ee===">"?W(O):O.state=D.ATTRIB;continue;case D.CLOSE_TAG:if(O.tagName)ee===">"?U(O):M(f,ee)?O.tagName+=ee:O.script?(O.script+="</"+O.tagName,O.tagName="",O.state=D.SCRIPT):(_(ee)||Y(O,"Invalid tagname in closing tag"),O.state=D.CLOSE_TAG_SAW_WHITE);else{if(_(ee))continue;$(j,ee)?O.script?(O.script+="</"+ee,O.state=D.SCRIPT):Y(O,"Invalid tagname in closing tag."):O.tagName=ee}continue;case D.CLOSE_TAG_SAW_WHITE:if(_(ee))continue;ee===">"?U(O):Y(O,"Invalid characters in closing tag");continue;case D.TEXT_ENTITY:case D.ATTRIB_VALUE_ENTITY_Q:case D.ATTRIB_VALUE_ENTITY_U:var ie,z;switch(O.state){case D.TEXT_ENTITY:ie=D.TEXT,z="textNode";break;case D.ATTRIB_VALUE_ENTITY_Q:ie=D.ATTRIB_VALUE_QUOTED,z="attribValue";break;case D.ATTRIB_VALUE_ENTITY_U:ie=D.ATTRIB_VALUE_UNQUOTED,z="attribValue";break}ee===";"?(O[z]+=re(O),O.entity="",O.state=ie):M(O.entity.length?w:b,ee)?O.entity+=ee:(Y(O,"Invalid character in entity name"),O[z]+="&"+O.entity+ee,O.entity="",O.state=ie);continue;default:throw new Error(O,"Unknown state: "+O.state)}return O.position>=O.bufferCheckPosition&&l(O),O}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||(function(){var P=String.fromCharCode,O=Math.floor,te=function(){var ee=16384,G=[],L,ie,z=-1,fe=arguments.length;if(!fe)return"";for(var F="";++z<fe;){var x=Number(arguments[z]);if(!isFinite(x)||x<0||x>1114111||O(x)!==x)throw RangeError("Invalid code point: "+x);x<=65535?G.push(x):(x-=65536,L=(x>>10)+55296,ie=x%1024+56320,G.push(L,ie)),(z+1===fe||G.length>ee)&&(F+=P.apply(null,G),G.length=0)}return F};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:te,configurable:!0,writable:!0}):String.fromCodePoint=te})()})(r)})(ad)),ad}var jh,Rv;function Uf(){return Rv||(Rv=1,jh={isArray:function(r){return Array.isArray?Array.isArray(r):Object.prototype.toString.call(r)==="[object Array]"}}),jh}var Nh,Pv;function $f(){if(Pv)return Nh;Pv=1;var r=Uf().isArray;return Nh={copyOptions:function(e){var i,a={};for(i in e)e.hasOwnProperty(i)&&(a[i]=e[i]);return a},ensureFlagExists:function(e,i){(!(e in i)||typeof i[e]!="boolean")&&(i[e]=!1)},ensureSpacesExists:function(e){(!("spaces"in e)||typeof e.spaces!="number"&&typeof e.spaces!="string")&&(e.spaces=0)},ensureAlwaysArrayExists:function(e){(!("alwaysArray"in e)||typeof e.alwaysArray!="boolean"&&!r(e.alwaysArray))&&(e.alwaysArray=!1)},ensureKeyExists:function(e,i){(!(e+"Key"in i)||typeof i[e+"Key"]!="string")&&(i[e+"Key"]=i.compact?"_"+e:e)},checkFnExists:function(e,i){return e+"Fn"in i}},Nh}var kh,zv;function F0(){if(zv)return kh;zv=1;var r=WS(),e=$f(),i=Uf().isArray,a,l;function c(f){return a=e.copyOptions(f),e.ensureFlagExists("ignoreDeclaration",a),e.ensureFlagExists("ignoreInstruction",a),e.ensureFlagExists("ignoreAttributes",a),e.ensureFlagExists("ignoreText",a),e.ensureFlagExists("ignoreComment",a),e.ensureFlagExists("ignoreCdata",a),e.ensureFlagExists("ignoreDoctype",a),e.ensureFlagExists("compact",a),e.ensureFlagExists("alwaysChildren",a),e.ensureFlagExists("addParent",a),e.ensureFlagExists("trim",a),e.ensureFlagExists("nativeType",a),e.ensureFlagExists("nativeTypeAttributes",a),e.ensureFlagExists("sanitize",a),e.ensureFlagExists("instructionHasAttributes",a),e.ensureFlagExists("captureSpacesBetweenElements",a),e.ensureAlwaysArrayExists(a),e.ensureKeyExists("declaration",a),e.ensureKeyExists("instruction",a),e.ensureKeyExists("attributes",a),e.ensureKeyExists("text",a),e.ensureKeyExists("comment",a),e.ensureKeyExists("cdata",a),e.ensureKeyExists("doctype",a),e.ensureKeyExists("type",a),e.ensureKeyExists("name",a),e.ensureKeyExists("elements",a),e.ensureKeyExists("parent",a),e.checkFnExists("doctype",a),e.checkFnExists("instruction",a),e.checkFnExists("cdata",a),e.checkFnExists("comment",a),e.checkFnExists("text",a),e.checkFnExists("instructionName",a),e.checkFnExists("elementName",a),e.checkFnExists("attributeName",a),e.checkFnExists("attributeValue",a),e.checkFnExists("attributes",a),a}function d(f){var b=Number(f);if(!isNaN(b))return b;var w=f.toLowerCase();return w==="true"?!0:w==="false"?!1:f}function u(f,b){var w;if(a.compact){if(!l[a[f+"Key"]]&&(i(a.alwaysArray)?a.alwaysArray.indexOf(a[f+"Key"])!==-1:a.alwaysArray)&&(l[a[f+"Key"]]=[]),l[a[f+"Key"]]&&!i(l[a[f+"Key"]])&&(l[a[f+"Key"]]=[l[a[f+"Key"]]]),f+"Fn"in a&&typeof b=="string"&&(b=a[f+"Fn"](b,l)),f==="instruction"&&("instructionFn"in a||"instructionNameFn"in a)){for(w in b)if(b.hasOwnProperty(w))if("instructionFn"in a)b[w]=a.instructionFn(b[w],w,l);else{var _=b[w];delete b[w],b[a.instructionNameFn(w,_,l)]=_}}i(l[a[f+"Key"]])?l[a[f+"Key"]].push(b):l[a[f+"Key"]]=b}else{l[a.elementsKey]||(l[a.elementsKey]=[]);var A={};if(A[a.typeKey]=f,f==="instruction"){for(w in b)if(b.hasOwnProperty(w))break;A[a.nameKey]="instructionNameFn"in a?a.instructionNameFn(w,b,l):w,a.instructionHasAttributes?(A[a.attributesKey]=b[w][a.attributesKey],"instructionFn"in a&&(A[a.attributesKey]=a.instructionFn(A[a.attributesKey],w,l))):("instructionFn"in a&&(b[w]=a.instructionFn(b[w],w,l)),A[a.instructionKey]=b[w])}else f+"Fn"in a&&(b=a[f+"Fn"](b,l)),A[a[f+"Key"]]=b;a.addParent&&(A[a.parentKey]=l),l[a.elementsKey].push(A)}}function p(f){if("attributesFn"in a&&f&&(f=a.attributesFn(f,l)),(a.trim||"attributeValueFn"in a||"attributeNameFn"in a||a.nativeTypeAttributes)&&f){var b;for(b in f)if(f.hasOwnProperty(b)&&(a.trim&&(f[b]=f[b].trim()),a.nativeTypeAttributes&&(f[b]=d(f[b])),"attributeValueFn"in a&&(f[b]=a.attributeValueFn(f[b],b,l)),"attributeNameFn"in a)){var w=f[b];delete f[b],f[a.attributeNameFn(b,f[b],l)]=w}}return f}function y(f){var b={};if(f.body&&(f.name.toLowerCase()==="xml"||a.instructionHasAttributes)){for(var w=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g,_;(_=w.exec(f.body))!==null;)b[_[1]]=_[2]||_[3]||_[4];b=p(b)}if(f.name.toLowerCase()==="xml"){if(a.ignoreDeclaration)return;l[a.declarationKey]={},Object.keys(b).length&&(l[a.declarationKey][a.attributesKey]=b),a.addParent&&(l[a.declarationKey][a.parentKey]=l)}else{if(a.ignoreInstruction)return;a.trim&&(f.body=f.body.trim());var A={};a.instructionHasAttributes&&Object.keys(b).length?(A[f.name]={},A[f.name][a.attributesKey]=b):A[f.name]=f.body,u("instruction",A)}}function v(f,b){var w;if(typeof f=="object"&&(b=f.attributes,f=f.name),b=p(b),"elementNameFn"in a&&(f=a.elementNameFn(f,l)),a.compact){if(w={},!a.ignoreAttributes&&b&&Object.keys(b).length){w[a.attributesKey]={};var _;for(_ in b)b.hasOwnProperty(_)&&(w[a.attributesKey][_]=b[_])}!(f in l)&&(i(a.alwaysArray)?a.alwaysArray.indexOf(f)!==-1:a.alwaysArray)&&(l[f]=[]),l[f]&&!i(l[f])&&(l[f]=[l[f]]),i(l[f])?l[f].push(w):l[f]=w}else l[a.elementsKey]||(l[a.elementsKey]=[]),w={},w[a.typeKey]="element",w[a.nameKey]=f,!a.ignoreAttributes&&b&&Object.keys(b).length&&(w[a.attributesKey]=b),a.alwaysChildren&&(w[a.elementsKey]=[]),l[a.elementsKey].push(w);w[a.parentKey]=l,l=w}function k(f){a.ignoreText||!f.trim()&&!a.captureSpacesBetweenElements||(a.trim&&(f=f.trim()),a.nativeType&&(f=d(f)),a.sanitize&&(f=f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),u("text",f))}function E(f){a.ignoreComment||(a.trim&&(f=f.trim()),u("comment",f))}function C(f){var b=l[a.parentKey];a.addParent||delete l[a.parentKey],l=b}function N(f){a.ignoreCdata||(a.trim&&(f=f.trim()),u("cdata",f))}function g(f){a.ignoreDoctype||(f=f.replace(/^ /,""),a.trim&&(f=f.trim()),u("doctype",f))}function j(f){f.note=f}return kh=function(f,b){var w=r.parser(!0,{}),_={};if(l=_,a=c(b),w.opt={strictEntities:!0},w.onopentag=v,w.ontext=k,w.oncomment=E,w.onclosetag=C,w.onerror=j,w.oncdata=N,w.ondoctype=g,w.onprocessinginstruction=y,w.write(f).close(),_[a.elementsKey]){var A=_[a.elementsKey];delete _[a.elementsKey],_[a.elementsKey]=A,delete _.text}return _},kh}var _h,Ov;function VS(){if(Ov)return _h;Ov=1;var r=$f(),e=F0();function i(a){var l=r.copyOptions(a);return r.ensureSpacesExists(l),l}return _h=function(a,l){var c,d,u,p;return c=i(l),d=e(a,c),p="compact"in c&&c.compact?"_parent":"parent","addParent"in c&&c.addParent?u=JSON.stringify(d,function(y,v){return y===p?"_":v},c.spaces):u=JSON.stringify(d,null,c.spaces),u.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},_h}var Sh,Iv;function D0(){if(Iv)return Sh;Iv=1;var r=$f(),e=Uf().isArray,i,a;function l(w){var _=r.copyOptions(w);return r.ensureFlagExists("ignoreDeclaration",_),r.ensureFlagExists("ignoreInstruction",_),r.ensureFlagExists("ignoreAttributes",_),r.ensureFlagExists("ignoreText",_),r.ensureFlagExists("ignoreComment",_),r.ensureFlagExists("ignoreCdata",_),r.ensureFlagExists("ignoreDoctype",_),r.ensureFlagExists("compact",_),r.ensureFlagExists("indentText",_),r.ensureFlagExists("indentCdata",_),r.ensureFlagExists("indentAttributes",_),r.ensureFlagExists("indentInstruction",_),r.ensureFlagExists("fullTagEmptyElement",_),r.ensureFlagExists("noQuotesForNativeAttributes",_),r.ensureSpacesExists(_),typeof _.spaces=="number"&&(_.spaces=Array(_.spaces+1).join(" ")),r.ensureKeyExists("declaration",_),r.ensureKeyExists("instruction",_),r.ensureKeyExists("attributes",_),r.ensureKeyExists("text",_),r.ensureKeyExists("comment",_),r.ensureKeyExists("cdata",_),r.ensureKeyExists("doctype",_),r.ensureKeyExists("type",_),r.ensureKeyExists("name",_),r.ensureKeyExists("elements",_),r.checkFnExists("doctype",_),r.checkFnExists("instruction",_),r.checkFnExists("cdata",_),r.checkFnExists("comment",_),r.checkFnExists("text",_),r.checkFnExists("instructionName",_),r.checkFnExists("elementName",_),r.checkFnExists("attributeName",_),r.checkFnExists("attributeValue",_),r.checkFnExists("attributes",_),r.checkFnExists("fullTagEmptyElement",_),_}function c(w,_,A){return(!A&&w.spaces?`
`:"")+Array(_+1).join(w.spaces)}function d(w,_,A){if(_.ignoreAttributes)return"";"attributesFn"in _&&(w=_.attributesFn(w,a,i));var B,M,$,D,le=[];for(B in w)w.hasOwnProperty(B)&&w[B]!==null&&w[B]!==void 0&&(D=_.noQuotesForNativeAttributes&&typeof w[B]!="string"?"":'"',M=""+w[B],M=M.replace(/"/g,"&quot;"),$="attributeNameFn"in _?_.attributeNameFn(B,M,a,i):B,le.push(_.spaces&&_.indentAttributes?c(_,A+1,!1):" "),le.push($+"="+D+("attributeValueFn"in _?_.attributeValueFn(M,B,a,i):M)+D));return w&&Object.keys(w).length&&_.spaces&&_.indentAttributes&&le.push(c(_,A,!1)),le.join("")}function u(w,_,A){return i=w,a="xml",_.ignoreDeclaration?"":"<?xml"+d(w[_.attributesKey],_,A)+"?>"}function p(w,_,A){if(_.ignoreInstruction)return"";var B;for(B in w)if(w.hasOwnProperty(B))break;var M="instructionNameFn"in _?_.instructionNameFn(B,w[B],a,i):B;if(typeof w[B]=="object")return i=w,a=M,"<?"+M+d(w[B][_.attributesKey],_,A)+"?>";var $=w[B]?w[B]:"";return"instructionFn"in _&&($=_.instructionFn($,B,a,i)),"<?"+M+($?" "+$:"")+"?>"}function y(w,_){return _.ignoreComment?"":"<!--"+("commentFn"in _?_.commentFn(w,a,i):w)+"-->"}function v(w,_){return _.ignoreCdata?"":"<![CDATA["+("cdataFn"in _?_.cdataFn(w,a,i):w.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function k(w,_){return _.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in _?_.doctypeFn(w,a,i):w)+">"}function E(w,_){return _.ignoreText?"":(w=""+w,w=w.replace(/&amp;/g,"&"),w=w.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in _?_.textFn(w,a,i):w)}function C(w,_){var A;if(w.elements&&w.elements.length)for(A=0;A<w.elements.length;++A)switch(w.elements[A][_.typeKey]){case"text":if(_.indentText)return!0;break;case"cdata":if(_.indentCdata)return!0;break;case"instruction":if(_.indentInstruction)return!0;break;case"doctype":case"comment":case"element":return!0;default:return!0}return!1}function N(w,_,A){i=w,a=w.name;var B=[],M="elementNameFn"in _?_.elementNameFn(w.name,w):w.name;B.push("<"+M),w[_.attributesKey]&&B.push(d(w[_.attributesKey],_,A));var $=w[_.elementsKey]&&w[_.elementsKey].length||w[_.attributesKey]&&w[_.attributesKey]["xml:space"]==="preserve";return $||("fullTagEmptyElementFn"in _?$=_.fullTagEmptyElementFn(w.name,w):$=_.fullTagEmptyElement),$?(B.push(">"),w[_.elementsKey]&&w[_.elementsKey].length&&(B.push(g(w[_.elementsKey],_,A+1)),i=w,a=w.name),B.push(_.spaces&&C(w,_)?`
`+Array(A+1).join(_.spaces):""),B.push("</"+M+">")):B.push("/>"),B.join("")}function g(w,_,A,B){return w.reduce(function(M,$){var D=c(_,A,B&&!M);switch($.type){case"element":return M+D+N($,_,A);case"comment":return M+D+y($[_.commentKey],_);case"doctype":return M+D+k($[_.doctypeKey],_);case"cdata":return M+(_.indentCdata?D:"")+v($[_.cdataKey],_);case"text":return M+(_.indentText?D:"")+E($[_.textKey],_);case"instruction":var le={};return le[$[_.nameKey]]=$[_.attributesKey]?$:$[_.instructionKey],M+(_.indentInstruction?D:"")+p(le,_,A)}},"")}function j(w,_,A){var B;for(B in w)if(w.hasOwnProperty(B))switch(B){case _.parentKey:case _.attributesKey:break;case _.textKey:if(_.indentText||A)return!0;break;case _.cdataKey:if(_.indentCdata||A)return!0;break;case _.instructionKey:if(_.indentInstruction||A)return!0;break;case _.doctypeKey:case _.commentKey:return!0;default:return!0}return!1}function f(w,_,A,B,M){i=w,a=_;var $="elementNameFn"in A?A.elementNameFn(_,w):_;if(typeof w>"u"||w===null||w==="")return"fullTagEmptyElementFn"in A&&A.fullTagEmptyElementFn(_,w)||A.fullTagEmptyElement?"<"+$+"></"+$+">":"<"+$+"/>";var D=[];if(_){if(D.push("<"+$),typeof w!="object")return D.push(">"+E(w,A)+"</"+$+">"),D.join("");w[A.attributesKey]&&D.push(d(w[A.attributesKey],A,B));var le=j(w,A,!0)||w[A.attributesKey]&&w[A.attributesKey]["xml:space"]==="preserve";if(le||("fullTagEmptyElementFn"in A?le=A.fullTagEmptyElementFn(_,w):le=A.fullTagEmptyElement),le)D.push(">");else return D.push("/>"),D.join("")}return D.push(b(w,A,B+1,!1)),i=w,a=_,_&&D.push((M?c(A,B,!1):"")+"</"+$+">"),D.join("")}function b(w,_,A,B){var M,$,D,le=[];for($ in w)if(w.hasOwnProperty($))for(D=e(w[$])?w[$]:[w[$]],M=0;M<D.length;++M){switch($){case _.declarationKey:le.push(u(D[M],_,A));break;case _.instructionKey:le.push((_.indentInstruction?c(_,A,B):"")+p(D[M],_,A));break;case _.attributesKey:case _.parentKey:break;case _.textKey:le.push((_.indentText?c(_,A,B):"")+E(D[M],_));break;case _.cdataKey:le.push((_.indentCdata?c(_,A,B):"")+v(D[M],_));break;case _.doctypeKey:le.push(c(_,A,B)+k(D[M],_));break;case _.commentKey:le.push(c(_,A,B)+y(D[M],_));break;default:le.push(c(_,A,B)+f(D[M],$,_,A,j(D[M],_)))}B=B&&!le.length}return le.join("")}return Sh=function(w,_){_=l(_);var A=[];return i=w,a="_root_",_.compact?A.push(b(w,_,0,!0)):(w[_.declarationKey]&&A.push(u(w[_.declarationKey],_,0)),w[_.elementsKey]&&w[_.elementsKey].length&&A.push(g(w[_.elementsKey],_,0,!A.length))),A.join("")},Sh}var Eh,Fv;function qS(){if(Fv)return Eh;Fv=1;var r=D0();return Eh=function(e,i){e instanceof Buffer&&(e=e.toString());var a=null;if(typeof e=="string")try{a=JSON.parse(e)}catch{throw new Error("The JSON structure is invalid")}else a=e;return r(a,i)},Eh}var Ch,Dv;function KS(){if(Dv)return Ch;Dv=1;var r=F0(),e=VS(),i=D0(),a=qS();return Ch={xml2js:r,xml2json:e,js2xml:i,json2xml:a},Ch}var L0=KS();const Hf=r=>{switch(r.type){case void 0:case"element":const e=new ZS(r.name,r.attributes),i=r.elements||[];for(const a of i){const l=Hf(a);l!==void 0&&e.push(l)}return e;case"text":return r.text;default:return}};class GS extends Ue{}class ZS extends Ne{static fromXmlString(e){const i=L0.xml2js(e,{compact:!1});return Hf(i)}constructor(e,i){super(e),i&&this.root.push(new GS(i))}push(e){this.root.push(e)}}class XS extends Ne{constructor(e){super(""),this._attr=e}prepForXml(e){return{_attr:this._attr}}}class B0 extends Ne{constructor(e,i){super(e),i&&(this.root=i.root)}}const pr=r=>{if(isNaN(r))throw new Error(`Invalid value '${r}' specified. Must be an integer.`);return Math.floor(r)},rc=r=>{const e=pr(r);if(e<0)throw new Error(`Invalid value '${r}' specified. Must be a positive integer.`);return e},M0=(r,e)=>{const i=e*2;if(r.length!==i||isNaN(+`0x${r}`))throw new Error(`Invalid hex value '${r}'. Expected ${i} digit hex value`);return r},Lv=r=>M0(r,1),Wf=r=>{const e=r.slice(-2),i=r.substring(0,r.length-2);return`${Number(i)}${e}`},U0=r=>{const e=Wf(r);if(parseFloat(e)<0)throw new Error(`Invalid value '${e}' specified. Expected a positive number.`);return e},Ri=r=>{if(r==="auto")return r;const e=r.charAt(0)==="#"?r.substring(1):r;return M0(e,3)},Ln=r=>typeof r=="string"?Wf(r):pr(r),JS=r=>typeof r=="string"?U0(r):rc(r),sr=r=>typeof r=="string"?U0(r):rc(r),YS=r=>{const e=r.substring(0,r.length-1);return`${Number(e)}%`},$0=r=>typeof r=="number"?pr(r):r.slice(-1)==="%"?YS(r):Wf(r),QS=rc,e2=rc,t2=r=>r.toISOString();class Ae extends Ne{constructor(e,i=!0){super(e),i!==!0&&this.root.push(new Lt({val:i}))}}class Th extends Ne{constructor(e,i){super(e),this.root.push(new Lt({val:JS(i)}))}}class $s extends Ne{constructor(e,i){super(e),this.root.push(new Lt({val:i}))}}const Ta=(r,e)=>new vt({name:r,attributes:{value:{key:"w:val",value:e}}});class Fa extends Ne{constructor(e,i){super(e),this.root.push(new Lt({val:i}))}}class r2 extends Ne{constructor(e,i){super(e),this.root.push(new Lt({val:i}))}}class Ps extends Ne{constructor(e,i){super(e),this.root.push(i)}}class vt extends Ne{constructor({name:e,attributes:i,children:a}){super(e),i&&this.root.push(new Vn(i)),a&&this.root.push(...a)}}const Ft={START:"start",CENTER:"center",LEFT:"left",RIGHT:"right"};class n2 extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{val:"w:val"})}}class H0 extends Ne{constructor(e){super("w:jc"),this.root.push(new n2({val:e}))}}class bt extends Ne{constructor(e,{color:i,size:a,space:l,style:c}){super(e),this.root.push(new s2({style:c,color:i===void 0?void 0:Ri(i),size:a===void 0?void 0:QS(a),space:l===void 0?void 0:e2(l)}))}}class s2 extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{style:"w:val",color:"w:color",size:"w:sz",space:"w:space"})}}const We={SINGLE:"single",NONE:"none"};class i2 extends Wn{constructor(e){super("w:pBdr"),e.top&&this.root.push(new bt("w:top",e.top)),e.bottom&&this.root.push(new bt("w:bottom",e.bottom)),e.left&&this.root.push(new bt("w:left",e.left)),e.right&&this.root.push(new bt("w:right",e.right))}}class a2 extends Ne{constructor(){super("w:pBdr");const e=new bt("w:bottom",{color:"auto",space:1,style:We.SINGLE,size:6});this.root.push(e)}}class o2 extends Ne{constructor({start:e,end:i,left:a,right:l,hanging:c,firstLine:d}){super("w:ind"),this.root.push(new Vn({start:{key:"w:start",value:e===void 0?void 0:Ln(e)},end:{key:"w:end",value:i===void 0?void 0:Ln(i)},left:{key:"w:left",value:a===void 0?void 0:Ln(a)},right:{key:"w:right",value:l===void 0?void 0:Ln(l)},hanging:{key:"w:hanging",value:c===void 0?void 0:sr(c)},firstLine:{key:"w:firstLine",value:d===void 0?void 0:sr(d)}}))}}let l2=class extends Ne{constructor(){super("w:br")}};const Vf={BEGIN:"begin",END:"end",SEPARATE:"separate"};class qf extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{type:"w:fldCharType",dirty:"w:dirty"})}}class fl extends Ne{constructor(e){super("w:fldChar"),this.root.push(new qf({type:Vf.BEGIN,dirty:e}))}}class pl extends Ne{constructor(e){super("w:fldChar"),this.root.push(new qf({type:Vf.SEPARATE,dirty:e}))}}class ml extends Ne{constructor(e){super("w:fldChar"),this.root.push(new qf({type:Vf.END,dirty:e}))}}const Pi={DEFAULT:"default",PRESERVE:"preserve"};class zi extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{space:"xml:space"})}}class c2 extends Ne{constructor(){super("w:instrText"),this.root.push(new zi({space:Pi.PRESERVE})),this.root.push("PAGE")}}class u2 extends Ne{constructor(){super("w:instrText"),this.root.push(new zi({space:Pi.PRESERVE})),this.root.push("NUMPAGES")}}class d2 extends Ne{constructor(){super("w:instrText"),this.root.push(new zi({space:Pi.PRESERVE})),this.root.push("SECTIONPAGES")}}class h2 extends Ne{constructor(){super("w:instrText"),this.root.push(new zi({space:Pi.PRESERVE})),this.root.push("SECTION")}}class f2 extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{fill:"w:fill",color:"w:color",type:"w:val"})}}class nc extends Ne{constructor({fill:e,color:i,type:a}){super("w:shd"),this.root.push(new f2({fill:e===void 0?void 0:Ri(e),color:i===void 0?void 0:Ri(i),type:a}))}}class p2 extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{id:"w:id",author:"w:author",date:"w:date"})}}const m2={DOT:"dot"};class y2 extends Ne{constructor(e){super("w:em"),this.root.push(new Lt({val:e}))}}class g2 extends y2{constructor(e=m2.DOT){super(e)}}class v2 extends Ne{constructor(e){super("w:spacing"),this.root.push(new Lt({val:Ln(e)}))}}class x2 extends Ne{constructor(e){super("w:color"),this.root.push(new Lt({val:Ri(e)}))}}class w2 extends Ne{constructor(e){super("w:highlight"),this.root.push(new Lt({val:e}))}}class b2 extends Ne{constructor(e){super("w:highlightCs"),this.root.push(new Lt({val:e}))}}const j2=r=>new vt({name:"w:lang",attributes:{value:{key:"w:val",value:r.value},eastAsia:{key:"w:eastAsia",value:r.eastAsia},bidirectional:{key:"w:bidi",value:r.bidirectional}}});class Bv extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{ascii:"w:ascii",cs:"w:cs",eastAsia:"w:eastAsia",hAnsi:"w:hAnsi",hint:"w:hint"})}}class Ah extends Ne{constructor(e,i){if(super("w:rFonts"),typeof e=="string"){const a=e;this.root.push(new Bv({ascii:a,cs:a,eastAsia:a,hAnsi:a,hint:i}))}else{const a=e;this.root.push(new Bv(a))}}}let W0=class extends Ne{constructor(e){super("w:vertAlign"),this.root.push(new Lt({val:e}))}};class N2 extends W0{constructor(){super("superscript")}}class k2 extends W0{constructor(){super("subscript")}}const V0={SINGLE:"single"};class _2 extends Ne{constructor(e=V0.SINGLE,i){super("w:u"),this.root.push(new Lt({val:e,color:i===void 0?void 0:Ri(i)}))}}class Ks extends Wn{constructor(e){var i,a;if(super("w:rPr"),!e)return;e.style&&this.push(new $s("w:rStyle",e.style)),e.font&&(typeof e.font=="string"?this.push(new Ah(e.font)):"name"in e.font?this.push(new Ah(e.font.name,e.font.hint)):this.push(new Ah(e.font))),e.bold!==void 0&&this.push(new Ae("w:b",e.bold)),(e.boldComplexScript===void 0&&e.bold!==void 0||e.boldComplexScript)&&this.push(new Ae("w:bCs",(i=e.boldComplexScript)!=null?i:e.bold)),e.italics!==void 0&&this.push(new Ae("w:i",e.italics)),(e.italicsComplexScript===void 0&&e.italics!==void 0||e.italicsComplexScript)&&this.push(new Ae("w:iCs",(a=e.italicsComplexScript)!=null?a:e.italics)),e.smallCaps!==void 0?this.push(new Ae("w:smallCaps",e.smallCaps)):e.allCaps!==void 0&&this.push(new Ae("w:caps",e.allCaps)),e.strike!==void 0&&this.push(new Ae("w:strike",e.strike)),e.doubleStrike!==void 0&&this.push(new Ae("w:dstrike",e.doubleStrike)),e.emboss!==void 0&&this.push(new Ae("w:emboss",e.emboss)),e.imprint!==void 0&&this.push(new Ae("w:imprint",e.imprint)),e.noProof!==void 0&&this.push(new Ae("w:noProof",e.noProof)),e.snapToGrid!==void 0&&this.push(new Ae("w:snapToGrid",e.snapToGrid)),e.vanish&&this.push(new Ae("w:vanish",e.vanish)),e.color&&this.push(new x2(e.color)),e.characterSpacing&&this.push(new v2(e.characterSpacing)),e.scale!==void 0&&this.push(new Fa("w:w",e.scale)),e.kern&&this.push(new Th("w:kern",e.kern)),e.position&&this.push(new $s("w:position",e.position)),e.size!==void 0&&this.push(new Th("w:sz",e.size));const l=e.sizeComplexScript===void 0||e.sizeComplexScript===!0?e.size:e.sizeComplexScript;l&&this.push(new Th("w:szCs",l)),e.highlight&&this.push(new w2(e.highlight));const c=e.highlightComplexScript===void 0||e.highlightComplexScript===!0?e.highlight:e.highlightComplexScript;c&&this.push(new b2(c)),e.underline&&this.push(new _2(e.underline.type,e.underline.color)),e.effect&&this.push(new $s("w:effect",e.effect)),e.border&&this.push(new bt("w:bdr",e.border)),e.shading&&this.push(new nc(e.shading)),e.subScript&&this.push(new k2),e.superScript&&this.push(new N2),e.rightToLeft!==void 0&&this.push(new Ae("w:rtl",e.rightToLeft)),e.emphasisMark&&this.push(new g2(e.emphasisMark.type)),e.language&&this.push(j2(e.language)),e.specVanish&&this.push(new Ae("w:specVanish",e.vanish)),e.math&&this.push(new Ae("w:oMath",e.math)),e.revision&&this.push(new S2(e.revision))}push(e){this.root.push(e)}}class S2 extends Ne{constructor(e){super("w:rPrChange"),this.root.push(new p2({id:e.id,author:e.author,date:e.date})),this.addChildElement(new Ks(e))}}class Mv extends Ne{constructor(e){var i;super("w:t"),typeof e=="string"?(this.root.push(new zi({space:Pi.PRESERVE})),this.root.push(e)):(this.root.push(new zi({space:(i=e.space)!=null?i:Pi.DEFAULT})),this.root.push(e.text))}}const Bn={CURRENT:"CURRENT",TOTAL_PAGES:"TOTAL_PAGES",TOTAL_PAGES_IN_SECTION:"TOTAL_PAGES_IN_SECTION",CURRENT_SECTION:"SECTION"};class Ga extends Ne{constructor(e){if(super("w:r"),je(this,"properties"),this.properties=new Ks(e),this.root.push(this.properties),e.break)for(let i=0;i<e.break;i++)this.root.push(new l2);if(e.children)for(const i of e.children){if(typeof i=="string"){switch(i){case Bn.CURRENT:this.root.push(new fl),this.root.push(new c2),this.root.push(new pl),this.root.push(new ml);break;case Bn.TOTAL_PAGES:this.root.push(new fl),this.root.push(new u2),this.root.push(new pl),this.root.push(new ml);break;case Bn.TOTAL_PAGES_IN_SECTION:this.root.push(new fl),this.root.push(new d2),this.root.push(new pl),this.root.push(new ml);break;case Bn.CURRENT_SECTION:this.root.push(new fl),this.root.push(new h2),this.root.push(new pl),this.root.push(new ml);break;default:this.root.push(new Mv(i));break}continue}this.root.push(i)}else e.text!==void 0&&this.root.push(new Mv(e.text))}}class jt extends Ga{constructor(e){super(typeof e=="string"?{text:e}:e)}}var Rh={},wt={},Ph,Uv;function Za(){if(Uv)return Ph;Uv=1,Ph=r;function r(e,i){if(!e)throw new Error(i||"Assertion failed")}return r.equal=function(i,a,l){if(i!=a)throw new Error(l||"Assertion failed: "+i+" != "+a)},Ph}var $v;function bn(){if($v)return wt;$v=1;var r=Za(),e=ms();wt.inherits=e;function i(H,q){return(H.charCodeAt(q)&64512)!==55296||q<0||q+1>=H.length?!1:(H.charCodeAt(q+1)&64512)===56320}function a(H,q){if(Array.isArray(H))return H.slice();if(!H)return[];var T=[];if(typeof H=="string")if(q){if(q==="hex")for(H=H.replace(/[^a-z0-9]+/ig,""),H.length%2!==0&&(H="0"+H),Q=0;Q<H.length;Q+=2)T.push(parseInt(H[Q]+H[Q+1],16))}else for(var Z=0,Q=0;Q<H.length;Q++){var Y=H.charCodeAt(Q);Y<128?T[Z++]=Y:Y<2048?(T[Z++]=Y>>6|192,T[Z++]=Y&63|128):i(H,Q)?(Y=65536+((Y&1023)<<10)+(H.charCodeAt(++Q)&1023),T[Z++]=Y>>18|240,T[Z++]=Y>>12&63|128,T[Z++]=Y>>6&63|128,T[Z++]=Y&63|128):(T[Z++]=Y>>12|224,T[Z++]=Y>>6&63|128,T[Z++]=Y&63|128)}else for(Q=0;Q<H.length;Q++)T[Q]=H[Q]|0;return T}wt.toArray=a;function l(H){for(var q="",T=0;T<H.length;T++)q+=u(H[T].toString(16));return q}wt.toHex=l;function c(H){var q=H>>>24|H>>>8&65280|H<<8&16711680|(H&255)<<24;return q>>>0}wt.htonl=c;function d(H,q){for(var T="",Z=0;Z<H.length;Z++){var Q=H[Z];q==="little"&&(Q=c(Q)),T+=p(Q.toString(16))}return T}wt.toHex32=d;function u(H){return H.length===1?"0"+H:H}wt.zero2=u;function p(H){return H.length===7?"0"+H:H.length===6?"00"+H:H.length===5?"000"+H:H.length===4?"0000"+H:H.length===3?"00000"+H:H.length===2?"000000"+H:H.length===1?"0000000"+H:H}wt.zero8=p;function y(H,q,T,Z){var Q=T-q;r(Q%4===0);for(var Y=new Array(Q/4),ne=0,J=q;ne<Y.length;ne++,J+=4){var ue;Z==="big"?ue=H[J]<<24|H[J+1]<<16|H[J+2]<<8|H[J+3]:ue=H[J+3]<<24|H[J+2]<<16|H[J+1]<<8|H[J],Y[ne]=ue>>>0}return Y}wt.join32=y;function v(H,q){for(var T=new Array(H.length*4),Z=0,Q=0;Z<H.length;Z++,Q+=4){var Y=H[Z];q==="big"?(T[Q]=Y>>>24,T[Q+1]=Y>>>16&255,T[Q+2]=Y>>>8&255,T[Q+3]=Y&255):(T[Q+3]=Y>>>24,T[Q+2]=Y>>>16&255,T[Q+1]=Y>>>8&255,T[Q]=Y&255)}return T}wt.split32=v;function k(H,q){return H>>>q|H<<32-q}wt.rotr32=k;function E(H,q){return H<<q|H>>>32-q}wt.rotl32=E;function C(H,q){return H+q>>>0}wt.sum32=C;function N(H,q,T){return H+q+T>>>0}wt.sum32_3=N;function g(H,q,T,Z){return H+q+T+Z>>>0}wt.sum32_4=g;function j(H,q,T,Z,Q){return H+q+T+Z+Q>>>0}wt.sum32_5=j;function f(H,q,T,Z){var Q=H[q],Y=H[q+1],ne=Z+Y>>>0,J=(ne<Z?1:0)+T+Q;H[q]=J>>>0,H[q+1]=ne}wt.sum64=f;function b(H,q,T,Z){var Q=q+Z>>>0,Y=(Q<q?1:0)+H+T;return Y>>>0}wt.sum64_hi=b;function w(H,q,T,Z){var Q=q+Z;return Q>>>0}wt.sum64_lo=w;function _(H,q,T,Z,Q,Y,ne,J){var ue=0,W=q;W=W+Z>>>0,ue+=W<q?1:0,W=W+Y>>>0,ue+=W<Y?1:0,W=W+J>>>0,ue+=W<J?1:0;var U=H+T+Q+ne+ue;return U>>>0}wt.sum64_4_hi=_;function A(H,q,T,Z,Q,Y,ne,J){var ue=q+Z+Y+J;return ue>>>0}wt.sum64_4_lo=A;function B(H,q,T,Z,Q,Y,ne,J,ue,W){var U=0,re=q;re=re+Z>>>0,U+=re<q?1:0,re=re+Y>>>0,U+=re<Y?1:0,re=re+J>>>0,U+=re<J?1:0,re=re+W>>>0,U+=re<W?1:0;var ae=H+T+Q+ne+ue+U;return ae>>>0}wt.sum64_5_hi=B;function M(H,q,T,Z,Q,Y,ne,J,ue,W){var U=q+Z+Y+J+W;return U>>>0}wt.sum64_5_lo=M;function $(H,q,T){var Z=q<<32-T|H>>>T;return Z>>>0}wt.rotr64_hi=$;function D(H,q,T){var Z=H<<32-T|q>>>T;return Z>>>0}wt.rotr64_lo=D;function le(H,q,T){return H>>>T}wt.shr64_hi=le;function pe(H,q,T){var Z=H<<32-T|q>>>T;return Z>>>0}return wt.shr64_lo=pe,wt}var zh={},Hv;function Xa(){if(Hv)return zh;Hv=1;var r=bn(),e=Za();function i(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return zh.BlockHash=i,i.prototype.update=function(l,c){if(l=r.toArray(l,c),this.pending?this.pending=this.pending.concat(l):this.pending=l,this.pendingTotal+=l.length,this.pending.length>=this._delta8){l=this.pending;var d=l.length%this._delta8;this.pending=l.slice(l.length-d,l.length),this.pending.length===0&&(this.pending=null),l=r.join32(l,0,l.length-d,this.endian);for(var u=0;u<l.length;u+=this._delta32)this._update(l,u,u+this._delta32)}return this},i.prototype.digest=function(l){return this.update(this._pad()),e(this.pending===null),this._digest(l)},i.prototype._pad=function(){var l=this.pendingTotal,c=this._delta8,d=c-(l+this.padLength)%c,u=new Array(d+this.padLength);u[0]=128;for(var p=1;p<d;p++)u[p]=0;if(l<<=3,this.endian==="big"){for(var y=8;y<this.padLength;y++)u[p++]=0;u[p++]=0,u[p++]=0,u[p++]=0,u[p++]=0,u[p++]=l>>>24&255,u[p++]=l>>>16&255,u[p++]=l>>>8&255,u[p++]=l&255}else for(u[p++]=l&255,u[p++]=l>>>8&255,u[p++]=l>>>16&255,u[p++]=l>>>24&255,u[p++]=0,u[p++]=0,u[p++]=0,u[p++]=0,y=8;y<this.padLength;y++)u[p++]=0;return u},zh}var zs={},gn={},Wv;function q0(){if(Wv)return gn;Wv=1;var r=bn(),e=r.rotr32;function i(v,k,E,C){if(v===0)return a(k,E,C);if(v===1||v===3)return c(k,E,C);if(v===2)return l(k,E,C)}gn.ft_1=i;function a(v,k,E){return v&k^~v&E}gn.ch32=a;function l(v,k,E){return v&k^v&E^k&E}gn.maj32=l;function c(v,k,E){return v^k^E}gn.p32=c;function d(v){return e(v,2)^e(v,13)^e(v,22)}gn.s0_256=d;function u(v){return e(v,6)^e(v,11)^e(v,25)}gn.s1_256=u;function p(v){return e(v,7)^e(v,18)^v>>>3}gn.g0_256=p;function y(v){return e(v,17)^e(v,19)^v>>>10}return gn.g1_256=y,gn}var Oh,Vv;function E2(){if(Vv)return Oh;Vv=1;var r=bn(),e=Xa(),i=q0(),a=r.rotl32,l=r.sum32,c=r.sum32_5,d=i.ft_1,u=e.BlockHash,p=[1518500249,1859775393,2400959708,3395469782];function y(){if(!(this instanceof y))return new y;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return r.inherits(y,u),Oh=y,y.blockSize=512,y.outSize=160,y.hmacStrength=80,y.padLength=64,y.prototype._update=function(k,E){for(var C=this.W,N=0;N<16;N++)C[N]=k[E+N];for(;N<C.length;N++)C[N]=a(C[N-3]^C[N-8]^C[N-14]^C[N-16],1);var g=this.h[0],j=this.h[1],f=this.h[2],b=this.h[3],w=this.h[4];for(N=0;N<C.length;N++){var _=~~(N/20),A=c(a(g,5),d(_,j,f,b),w,C[N],p[_]);w=b,b=f,f=a(j,30),j=g,g=A}this.h[0]=l(this.h[0],g),this.h[1]=l(this.h[1],j),this.h[2]=l(this.h[2],f),this.h[3]=l(this.h[3],b),this.h[4]=l(this.h[4],w)},y.prototype._digest=function(k){return k==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")},Oh}var Ih,qv;function K0(){if(qv)return Ih;qv=1;var r=bn(),e=Xa(),i=q0(),a=Za(),l=r.sum32,c=r.sum32_4,d=r.sum32_5,u=i.ch32,p=i.maj32,y=i.s0_256,v=i.s1_256,k=i.g0_256,E=i.g1_256,C=e.BlockHash,N=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function g(){if(!(this instanceof g))return new g;C.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=N,this.W=new Array(64)}return r.inherits(g,C),Ih=g,g.blockSize=512,g.outSize=256,g.hmacStrength=192,g.padLength=64,g.prototype._update=function(f,b){for(var w=this.W,_=0;_<16;_++)w[_]=f[b+_];for(;_<w.length;_++)w[_]=c(E(w[_-2]),w[_-7],k(w[_-15]),w[_-16]);var A=this.h[0],B=this.h[1],M=this.h[2],$=this.h[3],D=this.h[4],le=this.h[5],pe=this.h[6],H=this.h[7];for(a(this.k.length===w.length),_=0;_<w.length;_++){var q=d(H,v(D),u(D,le,pe),this.k[_],w[_]),T=l(y(A),p(A,B,M));H=pe,pe=le,le=D,D=l($,q),$=M,M=B,B=A,A=l(q,T)}this.h[0]=l(this.h[0],A),this.h[1]=l(this.h[1],B),this.h[2]=l(this.h[2],M),this.h[3]=l(this.h[3],$),this.h[4]=l(this.h[4],D),this.h[5]=l(this.h[5],le),this.h[6]=l(this.h[6],pe),this.h[7]=l(this.h[7],H)},g.prototype._digest=function(f){return f==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")},Ih}var Fh,Kv;function C2(){if(Kv)return Fh;Kv=1;var r=bn(),e=K0();function i(){if(!(this instanceof i))return new i;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return r.inherits(i,e),Fh=i,i.blockSize=512,i.outSize=224,i.hmacStrength=192,i.padLength=64,i.prototype._digest=function(l){return l==="hex"?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")},Fh}var Dh,Gv;function G0(){if(Gv)return Dh;Gv=1;var r=bn(),e=Xa(),i=Za(),a=r.rotr64_hi,l=r.rotr64_lo,c=r.shr64_hi,d=r.shr64_lo,u=r.sum64,p=r.sum64_hi,y=r.sum64_lo,v=r.sum64_4_hi,k=r.sum64_4_lo,E=r.sum64_5_hi,C=r.sum64_5_lo,N=e.BlockHash,g=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function j(){if(!(this instanceof j))return new j;N.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=g,this.W=new Array(160)}r.inherits(j,N),Dh=j,j.blockSize=1024,j.outSize=512,j.hmacStrength=192,j.padLength=128,j.prototype._prepareBlock=function(T,Z){for(var Q=this.W,Y=0;Y<32;Y++)Q[Y]=T[Z+Y];for(;Y<Q.length;Y+=2){var ne=pe(Q[Y-4],Q[Y-3]),J=H(Q[Y-4],Q[Y-3]),ue=Q[Y-14],W=Q[Y-13],U=D(Q[Y-30],Q[Y-29]),re=le(Q[Y-30],Q[Y-29]),ae=Q[Y-32],ye=Q[Y-31];Q[Y]=v(ne,J,ue,W,U,re,ae,ye),Q[Y+1]=k(ne,J,ue,W,U,re,ae,ye)}},j.prototype._update=function(T,Z){this._prepareBlock(T,Z);var Q=this.W,Y=this.h[0],ne=this.h[1],J=this.h[2],ue=this.h[3],W=this.h[4],U=this.h[5],re=this.h[6],ae=this.h[7],ye=this.h[8],ce=this.h[9],P=this.h[10],O=this.h[11],te=this.h[12],ee=this.h[13],G=this.h[14],L=this.h[15];i(this.k.length===Q.length);for(var ie=0;ie<Q.length;ie+=2){var z=G,fe=L,F=M(ye,ce),x=$(ye,ce),m=f(ye,ce,P,O,te),R=b(ye,ce,P,O,te,ee),X=this.k[ie],oe=this.k[ie+1],se=Q[ie],ge=Q[ie+1],ke=E(z,fe,F,x,m,R,X,oe,se,ge),Ce=C(z,fe,F,x,m,R,X,oe,se,ge);z=A(Y,ne),fe=B(Y,ne),F=w(Y,ne,J,ue,W),x=_(Y,ne,J,ue,W,U);var Fe=p(z,fe,F,x),He=y(z,fe,F,x);G=te,L=ee,te=P,ee=O,P=ye,O=ce,ye=p(re,ae,ke,Ce),ce=y(ae,ae,ke,Ce),re=W,ae=U,W=J,U=ue,J=Y,ue=ne,Y=p(ke,Ce,Fe,He),ne=y(ke,Ce,Fe,He)}u(this.h,0,Y,ne),u(this.h,2,J,ue),u(this.h,4,W,U),u(this.h,6,re,ae),u(this.h,8,ye,ce),u(this.h,10,P,O),u(this.h,12,te,ee),u(this.h,14,G,L)},j.prototype._digest=function(T){return T==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")};function f(q,T,Z,Q,Y){var ne=q&Z^~q&Y;return ne<0&&(ne+=4294967296),ne}function b(q,T,Z,Q,Y,ne){var J=T&Q^~T&ne;return J<0&&(J+=4294967296),J}function w(q,T,Z,Q,Y){var ne=q&Z^q&Y^Z&Y;return ne<0&&(ne+=4294967296),ne}function _(q,T,Z,Q,Y,ne){var J=T&Q^T&ne^Q&ne;return J<0&&(J+=4294967296),J}function A(q,T){var Z=a(q,T,28),Q=a(T,q,2),Y=a(T,q,7),ne=Z^Q^Y;return ne<0&&(ne+=4294967296),ne}function B(q,T){var Z=l(q,T,28),Q=l(T,q,2),Y=l(T,q,7),ne=Z^Q^Y;return ne<0&&(ne+=4294967296),ne}function M(q,T){var Z=a(q,T,14),Q=a(q,T,18),Y=a(T,q,9),ne=Z^Q^Y;return ne<0&&(ne+=4294967296),ne}function $(q,T){var Z=l(q,T,14),Q=l(q,T,18),Y=l(T,q,9),ne=Z^Q^Y;return ne<0&&(ne+=4294967296),ne}function D(q,T){var Z=a(q,T,1),Q=a(q,T,8),Y=c(q,T,7),ne=Z^Q^Y;return ne<0&&(ne+=4294967296),ne}function le(q,T){var Z=l(q,T,1),Q=l(q,T,8),Y=d(q,T,7),ne=Z^Q^Y;return ne<0&&(ne+=4294967296),ne}function pe(q,T){var Z=a(q,T,19),Q=a(T,q,29),Y=c(q,T,6),ne=Z^Q^Y;return ne<0&&(ne+=4294967296),ne}function H(q,T){var Z=l(q,T,19),Q=l(T,q,29),Y=d(q,T,6),ne=Z^Q^Y;return ne<0&&(ne+=4294967296),ne}return Dh}var Lh,Zv;function T2(){if(Zv)return Lh;Zv=1;var r=bn(),e=G0();function i(){if(!(this instanceof i))return new i;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return r.inherits(i,e),Lh=i,i.blockSize=1024,i.outSize=384,i.hmacStrength=192,i.padLength=128,i.prototype._digest=function(l){return l==="hex"?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")},Lh}var Xv;function A2(){return Xv||(Xv=1,zs.sha1=E2(),zs.sha224=C2(),zs.sha256=K0(),zs.sha384=T2(),zs.sha512=G0()),zs}var Bh={},Jv;function R2(){if(Jv)return Bh;Jv=1;var r=bn(),e=Xa(),i=r.rotl32,a=r.sum32,l=r.sum32_3,c=r.sum32_4,d=e.BlockHash;function u(){if(!(this instanceof u))return new u;d.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}r.inherits(u,d),Bh.ripemd160=u,u.blockSize=512,u.outSize=160,u.hmacStrength=192,u.padLength=64,u.prototype._update=function(j,f){for(var b=this.h[0],w=this.h[1],_=this.h[2],A=this.h[3],B=this.h[4],M=b,$=w,D=_,le=A,pe=B,H=0;H<80;H++){var q=a(i(c(b,p(H,w,_,A),j[k[H]+f],y(H)),C[H]),B);b=B,B=A,A=i(_,10),_=w,w=q,q=a(i(c(M,p(79-H,$,D,le),j[E[H]+f],v(H)),N[H]),pe),M=pe,pe=le,le=i(D,10),D=$,$=q}q=l(this.h[1],_,le),this.h[1]=l(this.h[2],A,pe),this.h[2]=l(this.h[3],B,M),this.h[3]=l(this.h[4],b,$),this.h[4]=l(this.h[0],w,D),this.h[0]=q},u.prototype._digest=function(j){return j==="hex"?r.toHex32(this.h,"little"):r.split32(this.h,"little")};function p(g,j,f,b){return g<=15?j^f^b:g<=31?j&f|~j&b:g<=47?(j|~f)^b:g<=63?j&b|f&~b:j^(f|~b)}function y(g){return g<=15?0:g<=31?1518500249:g<=47?1859775393:g<=63?2400959708:2840853838}function v(g){return g<=15?1352829926:g<=31?1548603684:g<=47?1836072691:g<=63?2053994217:0}var k=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],E=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],C=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],N=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return Bh}var Mh,Yv;function P2(){if(Yv)return Mh;Yv=1;var r=bn(),e=Za();function i(a,l,c){if(!(this instanceof i))return new i(a,l,c);this.Hash=a,this.blockSize=a.blockSize/8,this.outSize=a.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(l,c))}return Mh=i,i.prototype._init=function(l){l.length>this.blockSize&&(l=new this.Hash().update(l).digest()),e(l.length<=this.blockSize);for(var c=l.length;c<this.blockSize;c++)l.push(0);for(c=0;c<l.length;c++)l[c]^=54;for(this.inner=new this.Hash().update(l),c=0;c<l.length;c++)l[c]^=106;this.outer=new this.Hash().update(l)},i.prototype.update=function(l,c){return this.inner.update(l,c),this},i.prototype.digest=function(l){return this.outer.update(this.inner.digest()),this.outer.digest(l)},Mh}var Qv;function z2(){return Qv||(Qv=1,(function(r){var e=r;e.utils=bn(),e.common=Xa(),e.sha=A2(),e.ripemd=R2(),e.hmac=P2(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(Rh)),Rh}var O2=z2();const I2=Of(O2);let F2="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",D2=(r,e=21)=>(i=e)=>{let a="",l=i|0;for(;l--;)a+=r[Math.random()*r.length|0];return a},L2=(r=21)=>{let e="",i=r|0;for(;i--;)e+=F2[Math.random()*64|0];return e};const rn=r=>Math.floor(r*72*20),sc=(r=0)=>{let e=r;return()=>++e},B2=()=>sc(),M2=()=>sc(1),U2=()=>sc(),$2=()=>sc(),H2=()=>L2().toLowerCase(),ex=r=>I2.sha1().update(r instanceof ArrayBuffer?new Uint8Array(r):r).digest("hex"),Aa=r=>D2("1234567890abcdef",r)(),W2=()=>`${Aa(8)}-${Aa(4)}-${Aa(4)}-${Aa(4)}-${Aa(12)}`,V2={PAGE:"page"},q2={PAGE:"page"},K2=()=>new vt({name:"wp:simplePos",attributes:{x:{key:"x",value:0},y:{key:"y",value:0}}}),Z0=r=>new vt({name:"wp:align",children:[r]}),X0=r=>new vt({name:"wp:posOffset",children:[r.toString()]}),G2=({relative:r,align:e,offset:i})=>new vt({name:"wp:positionH",attributes:{relativeFrom:{key:"relativeFrom",value:r??V2.PAGE}},children:[(()=>{if(e)return Z0(e);if(i!==void 0)return X0(i);throw new Error("There is no configuration provided for floating position (Align or offset)")})()]}),Z2=({relative:r,align:e,offset:i})=>new vt({name:"wp:positionV",attributes:{relativeFrom:{key:"relativeFrom",value:r??q2.PAGE}},children:[(()=>{if(e)return Z0(e);if(i!==void 0)return X0(i);throw new Error("There is no configuration provided for floating position (Align or offset)")})()]});class X2 extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{uri:"uri"})}}const J2=r=>new vt({name:"asvg:svgBlip",attributes:{asvg:{key:"xmlns:asvg",value:"http://schemas.microsoft.com/office/drawing/2016/SVG/main"},embed:{key:"r:embed",value:`rId{${r.fileName}}`}}}),Y2=r=>new vt({name:"a:ext",attributes:{uri:{key:"uri",value:"{96DAC541-7B7A-43D3-8B79-37D633B846F1}"}},children:[J2(r)]}),Q2=r=>new vt({name:"a:extLst",children:[Y2(r)]}),eE=r=>new vt({name:"a:blip",attributes:{embed:{key:"r:embed",value:`rId{${r.type==="svg"?r.fallback.fileName:r.fileName}}`},cstate:{key:"cstate",value:"none"}},children:r.type==="svg"?[Q2(r)]:[]});class tE extends Ne{constructor(){super("a:srcRect")}}class rE extends Ne{constructor(){super("a:fillRect")}}class nE extends Ne{constructor(){super("a:stretch"),this.root.push(new rE)}}class sE extends Ne{constructor(e){super("pic:blipFill"),this.root.push(eE(e)),this.root.push(new tE),this.root.push(new nE)}}class iE extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{noChangeAspect:"noChangeAspect",noChangeArrowheads:"noChangeArrowheads"})}}class aE extends Ne{constructor(){super("a:picLocks"),this.root.push(new iE({noChangeAspect:1,noChangeArrowheads:1}))}}class oE extends Ne{constructor(){super("pic:cNvPicPr"),this.root.push(new aE)}}const J0=(r,e)=>new vt({name:"a:hlinkClick",attributes:Hn(ut({},e?{xmlns:{key:"xmlns:a",value:"http://schemas.openxmlformats.org/drawingml/2006/main"}}:{}),{id:{key:"r:id",value:`rId${r}`}})});class lE extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{id:"id",name:"name",descr:"descr"})}}class cE extends Ne{constructor(){super("pic:cNvPr"),this.root.push(new lE({id:0,name:"",descr:""}))}prepForXml(e){for(let i=e.stack.length-1;i>=0;i--){const a=e.stack[i];if(a instanceof Kf){this.root.push(J0(a.linkId,!1));break}}return super.prepForXml(e)}}class uE extends Ne{constructor(){super("pic:nvPicPr"),this.root.push(new cE),this.root.push(new oE)}}class dE extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{xmlns:"xmlns:pic"})}}class hE extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{cx:"cx",cy:"cy"})}}class fE extends Ne{constructor(e,i){super("a:ext"),je(this,"attributes"),this.attributes=new hE({cx:e,cy:i}),this.root.push(this.attributes)}}class pE extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{x:"x",y:"y"})}}class mE extends Ne{constructor(){super("a:off"),this.root.push(new pE({x:0,y:0}))}}class yE extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{flipVertical:"flipV",flipHorizontal:"flipH",rotation:"rot"})}}class gE extends Ne{constructor(e){var i,a;super("a:xfrm"),je(this,"extents"),this.root.push(new yE({flipVertical:(i=e.flip)==null?void 0:i.vertical,flipHorizontal:(a=e.flip)==null?void 0:a.horizontal,rotation:e.rotation})),this.extents=new fE(e.emus.x,e.emus.y),this.root.push(new mE),this.root.push(this.extents)}}const Y0=()=>new vt({name:"a:noFill"}),vE=r=>new vt({name:"a:srgbClr",attributes:{value:{key:"val",value:r.value}}}),xE=r=>new vt({name:"a:schemeClr",attributes:{value:{key:"val",value:r.value}}}),tx=r=>new vt({name:"a:solidFill",children:[r.type==="rgb"?vE(r):xE(r)]}),wE=r=>new vt({name:"a:ln",attributes:{width:{key:"w",value:r.width},cap:{key:"cap",value:r.cap},compoundLine:{key:"cmpd",value:r.compoundLine},align:{key:"algn",value:r.align}},children:[r.type==="noFill"?Y0():r.solidFillType==="rgb"?tx({type:"rgb",value:r.value}):tx({type:"scheme",value:r.value})]});class bE extends Ne{constructor(){super("a:avLst")}}class jE extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{prst:"prst"})}}class NE extends Ne{constructor(){super("a:prstGeom"),this.root.push(new jE({prst:"rect"})),this.root.push(new bE)}}class kE extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{bwMode:"bwMode"})}}class _E extends Ne{constructor({outline:e,transform:i}){super("pic:spPr"),je(this,"form"),this.root.push(new kE({bwMode:"auto"})),this.form=new gE(i),this.root.push(this.form),this.root.push(new NE),e&&(this.root.push(Y0()),this.root.push(wE(e)))}}class SE extends Ne{constructor({mediaData:e,transform:i,outline:a}){super("pic:pic"),this.root.push(new dE({xmlns:"http://schemas.openxmlformats.org/drawingml/2006/picture"})),this.root.push(new uE),this.root.push(new sE(e)),this.root.push(new _E({transform:i,outline:a}))}}class EE extends Ne{constructor({mediaData:e,transform:i,outline:a}){super("a:graphicData"),je(this,"pic"),this.root.push(new X2({uri:"http://schemas.openxmlformats.org/drawingml/2006/picture"})),this.pic=new SE({mediaData:e,transform:i,outline:a}),this.root.push(this.pic)}}class CE extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{a:"xmlns:a"})}}class Q0 extends Ne{constructor({mediaData:e,transform:i,outline:a}){super("a:graphic"),je(this,"data"),this.root.push(new CE({a:"http://schemas.openxmlformats.org/drawingml/2006/main"})),this.data=new EE({mediaData:e,transform:i,outline:a}),this.root.push(this.data)}}const yl={NONE:0,SQUARE:1,TIGHT:2,TOP_AND_BOTTOM:3},TE={BOTH_SIDES:"bothSides"};class rx extends Ne{constructor(){super("wp:wrapNone")}}class AE extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{distT:"distT",distB:"distB",distL:"distL",distR:"distR",wrapText:"wrapText"})}}class RE extends Ne{constructor(e,i={top:0,bottom:0,left:0,right:0}){super("wp:wrapSquare"),this.root.push(new AE({wrapText:e.side||TE.BOTH_SIDES,distT:i.top,distB:i.bottom,distL:i.left,distR:i.right}))}}class PE extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{distT:"distT",distB:"distB"})}}class zE extends Ne{constructor(e={top:0,bottom:0}){super("wp:wrapTight"),this.root.push(new PE({distT:e.top,distB:e.bottom}))}}class OE extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{distT:"distT",distB:"distB"})}}class IE extends Ne{constructor(e={top:0,bottom:0}){super("wp:wrapTopAndBottom"),this.root.push(new OE({distT:e.top,distB:e.bottom}))}}class ew extends Ne{constructor({name:e,description:i,title:a}={name:"",description:"",title:""}){super("wp:docPr"),je(this,"docPropertiesUniqueNumericId",U2());const l={id:{key:"id",value:this.docPropertiesUniqueNumericId()},name:{key:"name",value:e}};i!=null&&(l.description={key:"descr",value:i}),a!=null&&(l.title={key:"title",value:a}),this.root.push(new Vn(l))}prepForXml(e){for(let i=e.stack.length-1;i>=0;i--){const a=e.stack[i];if(a instanceof Kf){this.root.push(J0(a.linkId,!0));break}}return super.prepForXml(e)}}const tw=({top:r,right:e,bottom:i,left:a})=>new vt({name:"wp:effectExtent",attributes:{top:{key:"t",value:r},right:{key:"r",value:e},bottom:{key:"b",value:i},left:{key:"l",value:a}}}),rw=({x:r,y:e})=>new vt({name:"wp:extent",attributes:{x:{key:"cx",value:r},y:{key:"cy",value:e}}});class FE extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{xmlns:"xmlns:a",noChangeAspect:"noChangeAspect"})}}class DE extends Ne{constructor(){super("a:graphicFrameLocks"),this.root.push(new FE({xmlns:"http://schemas.openxmlformats.org/drawingml/2006/main",noChangeAspect:1}))}}const nw=()=>new vt({name:"wp:cNvGraphicFramePr",children:[new DE]});class LE extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{distT:"distT",distB:"distB",distL:"distL",distR:"distR",allowOverlap:"allowOverlap",behindDoc:"behindDoc",layoutInCell:"layoutInCell",locked:"locked",relativeHeight:"relativeHeight",simplePos:"simplePos"})}}class BE extends Ne{constructor({mediaData:e,transform:i,drawingOptions:a}){super("wp:anchor");const l=ut({allowOverlap:!0,behindDocument:!1,lockAnchor:!1,layoutInCell:!0,verticalPosition:{},horizontalPosition:{}},a.floating);if(this.root.push(new LE({distT:l.margins&&l.margins.top||0,distB:l.margins&&l.margins.bottom||0,distL:l.margins&&l.margins.left||0,distR:l.margins&&l.margins.right||0,simplePos:"0",allowOverlap:l.allowOverlap===!0?"1":"0",behindDoc:l.behindDocument===!0?"1":"0",locked:l.lockAnchor===!0?"1":"0",layoutInCell:l.layoutInCell===!0?"1":"0",relativeHeight:l.zIndex?l.zIndex:i.emus.y})),this.root.push(K2()),this.root.push(G2(l.horizontalPosition)),this.root.push(Z2(l.verticalPosition)),this.root.push(rw({x:i.emus.x,y:i.emus.y})),this.root.push(tw({top:0,right:0,bottom:0,left:0})),a.floating!==void 0&&a.floating.wrap!==void 0)switch(a.floating.wrap.type){case yl.SQUARE:this.root.push(new RE(a.floating.wrap,a.floating.margins));break;case yl.TIGHT:this.root.push(new zE(a.floating.margins));break;case yl.TOP_AND_BOTTOM:this.root.push(new IE(a.floating.margins));break;case yl.NONE:default:this.root.push(new rx)}else this.root.push(new rx);this.root.push(new ew(a.docProperties)),this.root.push(nw()),this.root.push(new Q0({mediaData:e,transform:i,outline:a.outline}))}}const ME=({mediaData:r,transform:e,docProperties:i,outline:a})=>{var l,c,d,u;return new vt({name:"wp:inline",attributes:{distanceTop:{key:"distT",value:0},distanceBottom:{key:"distB",value:0},distanceLeft:{key:"distL",value:0},distanceRight:{key:"distR",value:0}},children:[rw({x:e.emus.x,y:e.emus.y}),tw(a?{top:((l=a.width)!=null?l:9525)*2,right:((c=a.width)!=null?c:9525)*2,bottom:((d=a.width)!=null?d:9525)*2,left:((u=a.width)!=null?u:9525)*2}:{top:0,right:0,bottom:0,left:0}),new ew(i),nw(),new Q0({mediaData:r,transform:e,outline:a})]})};class UE extends Ne{constructor(e,i={}){super("w:drawing"),i.floating?this.root.push(new BE({mediaData:e,transform:e.transformation,drawingOptions:i})):this.root.push(ME({mediaData:e,transform:e.transformation,docProperties:i.docProperties,outline:i.outline}))}}const $E=r=>{if(typeof atob=="function"){const e=";base64,",i=r.indexOf(e),a=i===-1?0:i+e.length;return new Uint8Array(atob(r.substring(a)).split("").map(l=>l.charCodeAt(0)))}else{const e=require("buffer");return new e.Buffer(r,"base64")}},HE=r=>typeof r=="string"?$E(r):r,Uh=(r,e)=>({data:HE(r.data),fileName:e,transformation:{pixels:{x:Math.round(r.transformation.width),y:Math.round(r.transformation.height)},emus:{x:Math.round(r.transformation.width*9525),y:Math.round(r.transformation.height*9525)},flip:r.transformation.flip,rotation:r.transformation.rotation?r.transformation.rotation*6e4:void 0}});class WE extends Ga{constructor(e){super({}),je(this,"imageData");const a=`${ex(e.data)}.${e.type}`;this.imageData=e.type==="svg"?Hn(ut({type:e.type},Uh(e,a)),{fallback:ut({type:e.fallback.type},Uh(Hn(ut({},e.fallback),{transformation:e.transformation}),`${ex(e.fallback.data)}.${e.fallback.type}`))}):ut({type:e.type},Uh(e,a));const l=new UE(this.imageData,{floating:e.floating,docProperties:e.altText,outline:e.outline});this.root.push(l)}prepForXml(e){return e.file.Media.addImage(this.imageData.fileName,this.imageData),this.imageData.type==="svg"&&e.file.Media.addImage(this.imageData.fallback.fileName,this.imageData.fallback),super.prepForXml(e)}}class VE extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{xmlns:"xmlns"})}}class qE extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{id:"Id",type:"Type",target:"Target",targetMode:"TargetMode"})}}const KE={EXTERNAL:"External"};class GE extends Ne{constructor(e,i,a,l){super("Relationship"),this.root.push(new qE({id:e,type:i,target:a,targetMode:l}))}}class Gs extends Ne{constructor(){super("Relationships"),this.root.push(new VE({xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}))}createRelationship(e,i,a,l){const c=new GE(`rId${e}`,i,a,l);return this.root.push(c),c}get RelationshipCount(){return this.root.length-1}}class ZE extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{id:"w:id",initials:"w:initials",author:"w:author",date:"w:date"})}}class XE extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{"xmlns:cx":"xmlns:cx","xmlns:cx1":"xmlns:cx1","xmlns:cx2":"xmlns:cx2","xmlns:cx3":"xmlns:cx3","xmlns:cx4":"xmlns:cx4","xmlns:cx5":"xmlns:cx5","xmlns:cx6":"xmlns:cx6","xmlns:cx7":"xmlns:cx7","xmlns:cx8":"xmlns:cx8","xmlns:mc":"xmlns:mc","xmlns:aink":"xmlns:aink","xmlns:am3d":"xmlns:am3d","xmlns:o":"xmlns:o","xmlns:r":"xmlns:r","xmlns:m":"xmlns:m","xmlns:v":"xmlns:v","xmlns:wp14":"xmlns:wp14","xmlns:wp":"xmlns:wp","xmlns:w10":"xmlns:w10","xmlns:w":"xmlns:w","xmlns:w14":"xmlns:w14","xmlns:w15":"xmlns:w15","xmlns:w16cex":"xmlns:w16cex","xmlns:w16cid":"xmlns:w16cid","xmlns:w16":"xmlns:w16","xmlns:w16sdtdh":"xmlns:w16sdtdh","xmlns:w16se":"xmlns:w16se","xmlns:wpg":"xmlns:wpg","xmlns:wpi":"xmlns:wpi","xmlns:wne":"xmlns:wne","xmlns:wps":"xmlns:wps"})}}class JE extends Ne{constructor({id:e,initials:i,author:a,date:l=new Date,children:c}){super("w:comment"),this.root.push(new ZE({id:e,initials:i,author:a,date:l.toISOString()}));for(const d of c)this.root.push(d)}}class YE extends Ne{constructor({children:e}){super("w:comments"),je(this,"relationships"),this.root.push(new XE({"xmlns:cx":"http://schemas.microsoft.com/office/drawing/2014/chartex","xmlns:cx1":"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex","xmlns:cx2":"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex","xmlns:cx3":"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex","xmlns:cx4":"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex","xmlns:cx5":"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex","xmlns:cx6":"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex","xmlns:cx7":"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex","xmlns:cx8":"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:aink":"http://schemas.microsoft.com/office/drawing/2016/ink","xmlns:am3d":"http://schemas.microsoft.com/office/drawing/2017/model3d","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:m":"http://schemas.openxmlformats.org/officeDocument/2006/math","xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:wp14":"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing","xmlns:wp":"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing","xmlns:w10":"urn:schemas-microsoft-com:office:word","xmlns:w":"http://schemas.openxmlformats.org/wordprocessingml/2006/main","xmlns:w14":"http://schemas.microsoft.com/office/word/2010/wordml","xmlns:w15":"http://schemas.microsoft.com/office/word/2012/wordml","xmlns:w16cex":"http://schemas.microsoft.com/office/word/2018/wordml/cex","xmlns:w16cid":"http://schemas.microsoft.com/office/word/2016/wordml/cid","xmlns:w16":"http://schemas.microsoft.com/office/word/2018/wordml","xmlns:w16sdtdh":"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash","xmlns:w16se":"http://schemas.microsoft.com/office/word/2015/wordml/symex","xmlns:wpg":"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup","xmlns:wpi":"http://schemas.microsoft.com/office/word/2010/wordprocessingInk","xmlns:wne":"http://schemas.microsoft.com/office/word/2006/wordml","xmlns:wps":"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}));for(const i of e)this.root.push(new JE(i));this.relationships=new Gs}get Relationships(){return this.relationships}}class QE extends Ne{constructor(){super("w:pageBreakBefore")}}const vf={AUTO:"auto"};class eC extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{after:"w:after",before:"w:before",line:"w:line",lineRule:"w:lineRule",beforeAutoSpacing:"w:beforeAutospacing",afterAutoSpacing:"w:afterAutospacing"})}}class tC extends Ne{constructor(e){super("w:spacing"),this.root.push(new eC(e))}}let gl=class extends Ne{constructor(e){super("w:pStyle"),this.root.push(new Lt({val:e}))}};class rC extends Ne{constructor(e){super("w:tabs");for(const i of e)this.root.push(new sC(i))}}const Ul={LEFT:"left",RIGHT:"right"};class nC extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{val:"w:val",pos:"w:pos",leader:"w:leader"})}}class sC extends Ne{constructor({type:e,position:i,leader:a}){super("w:tab"),this.root.push(new nC({val:e,pos:i,leader:a}))}}class $h extends Ne{constructor(e,i){super("w:numPr"),this.root.push(new iC(i)),this.root.push(new aC(e))}}class iC extends Ne{constructor(e){if(super("w:ilvl"),e>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new Lt({val:e}))}}class aC extends Ne{constructor(e){super("w:numId"),this.root.push(new Lt({val:typeof e=="string"?`{${e}}`:e}))}}class sw extends Ne{constructor(){super(...arguments),je(this,"fileChild",Symbol())}}class oC extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{id:"r:id",history:"w:history",anchor:"w:anchor"})}}class Kf extends Ne{constructor(e,i,a){super("w:hyperlink"),je(this,"linkId"),this.linkId=i;const l={history:1,anchor:a||void 0,id:a?void 0:`rId${this.linkId}`},c=new oC(l);this.root.push(c),e.forEach(d=>{this.root.push(d)})}}class lC extends Ne{constructor(e){super("w:externalHyperlink"),this.options=e}}class cC extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{id:"w:id",name:"w:name"})}}class uC extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{id:"w:id"})}}class dC{constructor(e){je(this,"bookmarkUniqueNumericId",$2()),je(this,"start"),je(this,"children"),je(this,"end");const i=this.bookmarkUniqueNumericId();this.start=new hC(e.id,i),this.children=e.children,this.end=new fC(i)}}class hC extends Ne{constructor(e,i){super("w:bookmarkStart");const a=new cC({name:e,id:i});this.root.push(a)}}class fC extends Ne{constructor(e){super("w:bookmarkEnd");const i=new uC({id:e});this.root.push(i)}}class pC extends Ne{constructor(e){super("w:outlineLvl"),this.level=e,this.root.push(new Lt({val:e}))}}const mC={TOP:"top",CENTER:"center",BOTTOM:"bottom"};Hn(ut({},mC),{BOTH:"both"});class yC extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{verticalAlign:"w:val"})}}class iw extends Ne{constructor(e){super("w:vAlign"),this.root.push(new yC({verticalAlign:e}))}}class gC extends Ne{constructor({space:e,count:i,separate:a,equalWidth:l,children:c}){super("w:cols"),this.root.push(new Vn({space:{key:"w:space",value:e===void 0?void 0:sr(e)},count:{key:"w:num",value:i===void 0?void 0:pr(i)},separate:{key:"w:sep",value:a},equalWidth:{key:"w:equalWidth",value:l}})),!l&&c&&c.forEach(d=>this.addChildElement(d))}}const vC=({type:r,linePitch:e,charSpace:i})=>new vt({name:"w:docGrid",attributes:{type:{key:"w:type",value:r},linePitch:{key:"w:linePitch",value:pr(e)},charSpace:{key:"w:charSpace",value:i?pr(i):void 0}}}),Si={DEFAULT:"default",FIRST:"first",EVEN:"even"};class xC extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{type:"w:type",id:"r:id"})}}const nx={HEADER:"w:headerReference",FOOTER:"w:footerReference"};class Hh extends Ne{constructor(e,i){super(e),this.root.push(new xC({type:i.type||Si.DEFAULT,id:`rId${i.id}`}))}}const wC=({countBy:r,start:e,restart:i,distance:a})=>new vt({name:"w:lnNumType",attributes:{countBy:{key:"w:countBy",value:r===void 0?void 0:pr(r)},start:{key:"w:start",value:e===void 0?void 0:pr(e)},restart:{key:"w:restart",value:i},distance:{key:"w:distance",value:a===void 0?void 0:sr(a)}}});class sx extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{display:"w:display",offsetFrom:"w:offsetFrom",zOrder:"w:zOrder"})}}class bC extends Wn{constructor(e){if(super("w:pgBorders"),!e)return this;e.pageBorders?this.root.push(new sx({display:e.pageBorders.display,offsetFrom:e.pageBorders.offsetFrom,zOrder:e.pageBorders.zOrder})):this.root.push(new sx({})),e.pageBorderTop&&this.root.push(new bt("w:top",e.pageBorderTop)),e.pageBorderLeft&&this.root.push(new bt("w:left",e.pageBorderLeft)),e.pageBorderBottom&&this.root.push(new bt("w:bottom",e.pageBorderBottom)),e.pageBorderRight&&this.root.push(new bt("w:right",e.pageBorderRight))}}class jC extends Ne{constructor(e,i,a,l,c,d,u){super("w:pgMar"),this.root.push(new Vn({top:{key:"w:top",value:Ln(e)},right:{key:"w:right",value:sr(i)},bottom:{key:"w:bottom",value:Ln(a)},left:{key:"w:left",value:sr(l)},header:{key:"w:header",value:sr(c)},footer:{key:"w:footer",value:sr(d)},gutter:{key:"w:gutter",value:sr(u)}}))}}class NC extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{start:"w:start",formatType:"w:fmt",separator:"w:chapSep"})}}class kC extends Ne{constructor({start:e,formatType:i,separator:a}){super("w:pgNumType"),this.root.push(new NC({start:e===void 0?void 0:pr(e),formatType:i,separator:a}))}}const $l={PORTRAIT:"portrait",LANDSCAPE:"landscape"},_C=({width:r,height:e,orientation:i,code:a})=>{const l=sr(r),c=sr(e);return new vt({name:"w:pgSz",attributes:{width:{key:"w:w",value:i===$l.LANDSCAPE?c:l},height:{key:"w:h",value:i===$l.LANDSCAPE?l:c},orientation:{key:"w:orient",value:i},code:{key:"w:code",value:a}}})};class SC extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{val:"w:val"})}}class EC extends Ne{constructor(e){super("w:textDirection"),this.root.push(new SC({val:e}))}}class CC extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{val:"w:val"})}}class TC extends Ne{constructor(e){super("w:type"),this.root.push(new CC({val:e}))}}const Os={TOP:1440,RIGHT:1440,BOTTOM:1440,LEFT:1440,HEADER:708,FOOTER:708,GUTTER:0},Wh={WIDTH:11906,HEIGHT:16838,ORIENTATION:$l.PORTRAIT};class AC extends Ne{constructor({page:{size:{width:e=Wh.WIDTH,height:i=Wh.HEIGHT,orientation:a=Wh.ORIENTATION}={},margin:{top:l=Os.TOP,right:c=Os.RIGHT,bottom:d=Os.BOTTOM,left:u=Os.LEFT,header:p=Os.HEADER,footer:y=Os.FOOTER,gutter:v=Os.GUTTER}={},pageNumbers:k={},borders:E,textDirection:C}={},grid:{linePitch:N=360,charSpace:g,type:j}={},headerWrapperGroup:f={},footerWrapperGroup:b={},lineNumbers:w,titlePage:_,verticalAlign:A,column:B,type:M}={}){super("w:sectPr"),this.addHeaderFooterGroup(nx.HEADER,f),this.addHeaderFooterGroup(nx.FOOTER,b),M&&this.root.push(new TC(M)),this.root.push(_C({width:e,height:i,orientation:a})),this.root.push(new jC(l,c,d,u,p,y,v)),E&&this.root.push(new bC(E)),w&&this.root.push(wC(w)),this.root.push(new kC(k)),B&&this.root.push(new gC(B)),A&&this.root.push(new iw(A)),_!==void 0&&this.root.push(new Ae("w:titlePg",_)),C&&this.root.push(new EC(C)),this.root.push(vC({linePitch:N,charSpace:g,type:j}))}addHeaderFooterGroup(e,i){i.default&&this.root.push(new Hh(e,{type:Si.DEFAULT,id:i.default.View.ReferenceId})),i.first&&this.root.push(new Hh(e,{type:Si.FIRST,id:i.first.View.ReferenceId})),i.even&&this.root.push(new Hh(e,{type:Si.EVEN,id:i.even.View.ReferenceId}))}}class RC extends Ne{constructor(){super("w:body"),je(this,"sections",[])}addSection(e){const i=this.sections.pop();this.root.push(this.createSectionParagraph(i)),this.sections.push(new AC(e))}prepForXml(e){return this.sections.length===1&&(this.root.splice(0,1),this.root.push(this.sections.pop())),super.prepForXml(e)}push(e){this.root.push(e)}createSectionParagraph(e){const i=new at({}),a=new Oi({});return a.push(e),i.addChildElement(a),i}}const ix={wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",aink:"http://schemas.microsoft.com/office/drawing/2016/ink",am3d:"http://schemas.microsoft.com/office/drawing/2017/model3d",w16cex:"http://schemas.microsoft.com/office/word/2018/wordml/cex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16:"http://schemas.microsoft.com/office/word/2018/wordml",w16sdtdh:"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex"};class ic extends Ue{constructor(e,i){super(ut({Ignorable:i},Object.fromEntries(e.map(a=>[a,ix[a]])))),je(this,"xmlKeys",ut({Ignorable:"mc:Ignorable"},Object.fromEntries(Object.keys(ix).map(a=>[a,`xmlns:${a}`]))))}}class PC extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{color:"w:color",themeColor:"w:themeColor",themeShade:"w:themeShade",themeTint:"w:themeTint"})}}class zC extends Ne{constructor(e){super("w:background"),this.root.push(new PC({color:e.color===void 0?void 0:Ri(e.color),themeColor:e.themeColor,themeShade:e.themeShade===void 0?void 0:Lv(e.themeShade),themeTint:e.themeTint===void 0?void 0:Lv(e.themeTint)}))}}class OC extends Ne{constructor(e){super("w:document"),je(this,"body"),this.root.push(new ic(["wpc","mc","o","r","m","v","wp14","wp","w10","w","w14","w15","wpg","wpi","wne","wps","cx","cx1","cx2","cx3","cx4","cx5","cx6","cx7","cx8","aink","am3d","w16cex","w16cid","w16","w16sdtdh","w16se"],"w14 w15 wp14")),this.body=new RC,e.background&&this.root.push(new zC(e.background)),this.root.push(this.body)}add(e){return this.body.push(e),this}get Body(){return this.body}}class aw{constructor(e){je(this,"document"),je(this,"relationships"),this.document=new OC(e),this.relationships=new Gs}get View(){return this.document}get Relationships(){return this.relationships}}class IC extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{val:"w:val"})}}class FC extends Ne{constructor(){super("w:wordWrap"),this.root.push(new IC({val:0}))}}const DC=r=>{var e,i;return new vt({name:"w:framePr",attributes:{anchorLock:{key:"w:anchorLock",value:r.anchorLock},dropCap:{key:"w:dropCap",value:r.dropCap},width:{key:"w:w",value:r.width},height:{key:"w:h",value:r.height},x:{key:"w:x",value:r.position?r.position.x:void 0},y:{key:"w:y",value:r.position?r.position.y:void 0},anchorHorizontal:{key:"w:hAnchor",value:r.anchor.horizontal},anchorVertical:{key:"w:vAnchor",value:r.anchor.vertical},spaceHorizontal:{key:"w:hSpace",value:(e=r.space)==null?void 0:e.horizontal},spaceVertical:{key:"w:vSpace",value:(i=r.space)==null?void 0:i.vertical},rule:{key:"w:hRule",value:r.rule},alignmentX:{key:"w:xAlign",value:r.alignment?r.alignment.x:void 0},alignmentY:{key:"w:yAlign",value:r.alignment?r.alignment.y:void 0},lines:{key:"w:lines",value:r.lines},wrap:{key:"w:wrap",value:r.wrap}}})};class Oi extends Wn{constructor(e){var i,a;if(super("w:pPr"),je(this,"numberingReferences",[]),!e)return this;e.heading&&this.push(new gl(e.heading)),e.bullet&&this.push(new gl("ListParagraph")),e.numbering&&!e.style&&!e.heading&&(e.numbering.custom||this.push(new gl("ListParagraph"))),e.style&&this.push(new gl(e.style)),e.keepNext!==void 0&&this.push(new Ae("w:keepNext",e.keepNext)),e.keepLines!==void 0&&this.push(new Ae("w:keepLines",e.keepLines)),e.pageBreakBefore&&this.push(new QE),e.frame&&this.push(DC(e.frame)),e.widowControl!==void 0&&this.push(new Ae("w:widowControl",e.widowControl)),e.bullet&&this.push(new $h(1,e.bullet.level)),e.numbering?(this.numberingReferences.push({reference:e.numbering.reference,instance:(i=e.numbering.instance)!=null?i:0}),this.push(new $h(`${e.numbering.reference}-${(a=e.numbering.instance)!=null?a:0}`,e.numbering.level))):e.numbering===!1&&this.push(new $h(0,0)),e.border&&this.push(new i2(e.border)),e.thematicBreak&&this.push(new a2),e.shading&&this.push(new nc(e.shading)),e.wordWrap&&this.push(new FC),e.overflowPunctuation&&this.push(new Ae("w:overflowPunct",e.overflowPunctuation));const l=[...e.rightTabStop!==void 0?[{type:Ul.RIGHT,position:e.rightTabStop}]:[],...e.tabStops?e.tabStops:[],...e.leftTabStop!==void 0?[{type:Ul.LEFT,position:e.leftTabStop}]:[]];l.length>0&&this.push(new rC(l)),e.bidirectional!==void 0&&this.push(new Ae("w:bidi",e.bidirectional)),e.spacing&&this.push(new tC(e.spacing)),e.indent&&this.push(new o2(e.indent)),e.contextualSpacing!==void 0&&this.push(new Ae("w:contextualSpacing",e.contextualSpacing)),e.alignment&&this.push(new H0(e.alignment)),e.outlineLevel!==void 0&&this.push(new pC(e.outlineLevel)),e.suppressLineNumbers!==void 0&&this.push(new Ae("w:suppressLineNumbers",e.suppressLineNumbers)),e.autoSpaceEastAsianText!==void 0&&this.push(new Ae("w:autoSpaceDN",e.autoSpaceEastAsianText)),e.run&&this.push(new Ks(e.run))}push(e){this.root.push(e)}prepForXml(e){if(e.viewWrapper instanceof aw)for(const i of this.numberingReferences)e.file.Numbering.createConcreteNumberingInstance(i.reference,i.instance);return super.prepForXml(e)}}class at extends sw{constructor(e){if(super("w:p"),je(this,"properties"),typeof e=="string")return this.properties=new Oi({}),this.root.push(this.properties),this.root.push(new jt(e)),this;if(this.properties=new Oi(e),this.root.push(this.properties),e.text&&this.root.push(new jt(e.text)),e.children)for(const i of e.children){if(i instanceof dC){this.root.push(i.start);for(const a of i.children)this.root.push(a);this.root.push(i.end);continue}this.root.push(i)}}prepForXml(e){for(const i of this.root)if(i instanceof lC){const a=this.root.indexOf(i),l=new Kf(i.options.children,H2());e.viewWrapper.Relationships.createRelationship(l.linkId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",i.options.link,KE.EXTERNAL),this.root[a]=l}return super.prepForXml(e)}addRunToFront(e){return this.root.splice(1,0,e),this}}class LC extends Ne{constructor(e){super("w:tblGrid");for(const i of e)this.root.push(new BC(i))}}class BC extends Ne{constructor(e){super("w:gridCol"),e!==void 0&&this.root.push(new Vn({width:{key:"w:w",value:sr(e)}}))}}const ow={TABLE:"w:tblCellMar",TABLE_CELL:"w:tcMar"};class lw extends Wn{constructor(e,{marginUnitType:i=Xt.DXA,top:a,left:l,bottom:c,right:d}){super(e),a!==void 0&&this.root.push(new Ms("w:top",{type:i,size:a})),l!==void 0&&this.root.push(new Ms("w:left",{type:i,size:l})),c!==void 0&&this.root.push(new Ms("w:bottom",{type:i,size:c})),d!==void 0&&this.root.push(new Ms("w:right",{type:i,size:d}))}}const Xt={AUTO:"auto",DXA:"dxa",PERCENTAGE:"pct"};class Ms extends Ne{constructor(e,{type:i=Xt.AUTO,size:a}){super(e);let l=a;i===Xt.PERCENTAGE&&typeof a=="number"&&(l=`${a}%`),this.root.push(new Vn({type:{key:"w:type",value:i},size:{key:"w:w",value:$0(l)}}))}}class MC extends Wn{constructor(e){super("w:tcBorders"),e.top&&this.root.push(new bt("w:top",e.top)),e.start&&this.root.push(new bt("w:start",e.start)),e.left&&this.root.push(new bt("w:left",e.left)),e.bottom&&this.root.push(new bt("w:bottom",e.bottom)),e.end&&this.root.push(new bt("w:end",e.end)),e.right&&this.root.push(new bt("w:right",e.right))}}class UC extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{val:"w:val"})}}class $C extends Ne{constructor(e){super("w:gridSpan"),this.root.push(new UC({val:pr(e)}))}}const cw={CONTINUE:"continue",RESTART:"restart"};class HC extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{val:"w:val"})}}class ax extends Ne{constructor(e){super("w:vMerge"),this.root.push(new HC({val:e}))}}class WC extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{val:"w:val"})}}class VC extends Ne{constructor(e){super("w:textDirection"),this.root.push(new WC({val:e}))}}class qC extends Wn{constructor(e){super("w:tcPr"),e.width&&this.root.push(new Ms("w:tcW",e.width)),e.columnSpan&&this.root.push(new $C(e.columnSpan)),e.verticalMerge?this.root.push(new ax(e.verticalMerge)):e.rowSpan&&e.rowSpan>1&&this.root.push(new ax(cw.RESTART)),e.borders&&this.root.push(new MC(e.borders)),e.shading&&this.root.push(new nc(e.shading)),e.margins&&this.root.push(new lw(ow.TABLE_CELL,e.margins)),e.textDirection&&this.root.push(new VC(e.textDirection)),e.verticalAlign&&this.root.push(new iw(e.verticalAlign))}}class fr extends Ne{constructor(e){super("w:tc"),this.options=e,this.root.push(new qC(e));for(const i of e.children)this.root.push(i)}prepForXml(e){return this.root[this.root.length-1]instanceof at||this.root.push(new at({})),super.prepForXml(e)}}const vi={style:We.NONE,size:0,color:"auto"},xi={style:We.SINGLE,size:4,color:"auto"};class uw extends Ne{constructor(e){super("w:tblBorders"),e.top?this.root.push(new bt("w:top",e.top)):this.root.push(new bt("w:top",xi)),e.left?this.root.push(new bt("w:left",e.left)):this.root.push(new bt("w:left",xi)),e.bottom?this.root.push(new bt("w:bottom",e.bottom)):this.root.push(new bt("w:bottom",xi)),e.right?this.root.push(new bt("w:right",e.right)):this.root.push(new bt("w:right",xi)),e.insideHorizontal?this.root.push(new bt("w:insideH",e.insideHorizontal)):this.root.push(new bt("w:insideH",xi)),e.insideVertical?this.root.push(new bt("w:insideV",e.insideVertical)):this.root.push(new bt("w:insideV",xi))}}je(uw,"NONE",{top:vi,bottom:vi,left:vi,right:vi,insideHorizontal:vi,insideVertical:vi});class KC extends Ne{constructor({horizontalAnchor:e,verticalAnchor:i,absoluteHorizontalPosition:a,relativeHorizontalPosition:l,absoluteVerticalPosition:c,relativeVerticalPosition:d,bottomFromText:u,topFromText:p,leftFromText:y,rightFromText:v,overlap:k}){super("w:tblpPr"),this.root.push(new Vn({leftFromText:{key:"w:leftFromText",value:y===void 0?void 0:sr(y)},rightFromText:{key:"w:rightFromText",value:v===void 0?void 0:sr(v)},topFromText:{key:"w:topFromText",value:p===void 0?void 0:sr(p)},bottomFromText:{key:"w:bottomFromText",value:u===void 0?void 0:sr(u)},absoluteHorizontalPosition:{key:"w:tblpX",value:a===void 0?void 0:Ln(a)},absoluteVerticalPosition:{key:"w:tblpY",value:c===void 0?void 0:Ln(c)},horizontalAnchor:{key:"w:horzAnchor",value:e===void 0?void 0:e},relativeHorizontalPosition:{key:"w:tblpXSpec",value:l},relativeVerticalPosition:{key:"w:tblpYSpec",value:d},verticalAnchor:{key:"w:vertAnchor",value:i}})),k&&this.root.push(new r2("w:tblOverlap",k))}}class GC extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{type:"w:type"})}}class ZC extends Ne{constructor(e){super("w:tblLayout"),this.root.push(new GC({type:e}))}}const XC={DXA:"dxa"};class dw extends Ne{constructor({type:e=XC.DXA,value:i}){super("w:tblCellSpacing"),this.root.push(new Vn({type:{key:"w:type",value:e},value:{key:"w:w",value:$0(i)}}))}}class JC extends Wn{constructor(e){super("w:tblPr"),e.style&&this.root.push(new $s("w:tblStyle",e.style)),e.float&&this.root.push(new KC(e.float)),e.visuallyRightToLeft!==void 0&&this.root.push(new Ae("w:bidiVisual",e.visuallyRightToLeft)),e.width&&this.root.push(new Ms("w:tblW",e.width)),e.alignment&&this.root.push(new H0(e.alignment)),e.indent&&this.root.push(new Ms("w:tblInd",e.indent)),e.borders&&this.root.push(new uw(e.borders)),e.shading&&this.root.push(new nc(e.shading)),e.layout&&this.root.push(new ZC(e.layout)),e.cellMargin&&this.root.push(new lw(ow.TABLE,e.cellMargin)),e.cellSpacing&&this.root.push(new dw(e.cellSpacing))}}let nn=class extends sw{constructor({rows:e,width:i,columnWidths:a=Array(Math.max(...e.map(C=>C.CellCount))).fill(100),margins:l,indent:c,float:d,layout:u,style:p,borders:y,alignment:v,visuallyRightToLeft:k,cellSpacing:E}){super("w:tbl"),this.root.push(new JC({borders:y??{},width:i??{size:100},indent:c,float:d,layout:u,style:p,alignment:v,cellMargin:l,visuallyRightToLeft:k,cellSpacing:E})),this.root.push(new LC(a));for(const C of e)this.root.push(C);e.forEach((C,N)=>{if(N===e.length-1)return;let g=0;C.cells.forEach(j=>{if(j.options.rowSpan&&j.options.rowSpan>1){const f=new fr({rowSpan:j.options.rowSpan-1,columnSpan:j.options.columnSpan,borders:j.options.borders,children:[],verticalMerge:cw.CONTINUE});e[N+1].addCellToColumnIndex(f,g)}g+=j.options.columnSpan||1})})}};class YC extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{value:"w:val",rule:"w:hRule"})}}class QC extends Ne{constructor(e,i){super("w:trHeight"),this.root.push(new YC({value:sr(e),rule:i}))}}class eT extends Wn{constructor(e){super("w:trPr"),e.cantSplit!==void 0&&this.root.push(new Ae("w:cantSplit",e.cantSplit)),e.tableHeader!==void 0&&this.root.push(new Ae("w:tblHeader",e.tableHeader)),e.height&&this.root.push(new QC(e.height.value,e.height.rule)),e.cellSpacing&&this.root.push(new dw(e.cellSpacing))}}class vr extends Ne{constructor(e){super("w:tr"),this.options=e,this.root.push(new eT(e));for(const i of e.children)this.root.push(i)}get CellCount(){return this.options.children.length}get cells(){return this.root.filter(e=>e instanceof fr)}addCellToIndex(e,i){this.root.splice(i+1,0,e)}addCellToColumnIndex(e,i){const a=this.columnIndexToRootIndex(i,!0);this.addCellToIndex(e,a-1)}rootIndexToColumnIndex(e){if(e<1||e>=this.root.length)throw new Error(`cell 'rootIndex' should between 1 to ${this.root.length-1}`);let i=0;for(let a=1;a<e;a++){const l=this.root[a];i+=l.options.columnSpan||1}return i}columnIndexToRootIndex(e,i=!1){if(e<0)throw new Error("cell 'columnIndex' should not less than zero");let a=0,l=1;for(;a<=e;){if(l>=this.root.length){if(i)return this.root.length;throw new Error(`cell 'columnIndex' should not great than ${a-1}`)}const c=this.root[l];l+=1,a+=c&&c.options.columnSpan||1}return l-1}}class tT extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{xmlns:"xmlns",vt:"xmlns:vt"})}}class rT extends Ne{constructor(){super("Properties"),this.root.push(new tT({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"}))}}class nT extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{xmlns:"xmlns"})}}class sT extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{contentType:"ContentType",extension:"Extension"})}}class zn extends Ne{constructor(e,i){super("Default"),this.root.push(new sT({contentType:e,extension:i}))}}class iT extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{contentType:"ContentType",partName:"PartName"})}}class Wr extends Ne{constructor(e,i){super("Override"),this.root.push(new iT({contentType:e,partName:i}))}}class aT extends Ne{constructor(){super("Types"),this.root.push(new nT({xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"})),this.root.push(new zn("image/png","png")),this.root.push(new zn("image/jpeg","jpeg")),this.root.push(new zn("image/jpeg","jpg")),this.root.push(new zn("image/bmp","bmp")),this.root.push(new zn("image/gif","gif")),this.root.push(new zn("image/svg+xml","svg")),this.root.push(new zn("application/vnd.openxmlformats-package.relationships+xml","rels")),this.root.push(new zn("application/xml","xml")),this.root.push(new zn("application/vnd.openxmlformats-officedocument.obfuscatedFont","odttf")),this.root.push(new Wr("application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml","/word/document.xml")),this.root.push(new Wr("application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml","/word/styles.xml")),this.root.push(new Wr("application/vnd.openxmlformats-package.core-properties+xml","/docProps/core.xml")),this.root.push(new Wr("application/vnd.openxmlformats-officedocument.custom-properties+xml","/docProps/custom.xml")),this.root.push(new Wr("application/vnd.openxmlformats-officedocument.extended-properties+xml","/docProps/app.xml")),this.root.push(new Wr("application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml","/word/numbering.xml")),this.root.push(new Wr("application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml","/word/footnotes.xml")),this.root.push(new Wr("application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml","/word/settings.xml")),this.root.push(new Wr("application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml","/word/comments.xml")),this.root.push(new Wr("application/vnd.openxmlformats-officedocument.wordprocessingml.fontTable+xml","/word/fontTable.xml"))}addFooter(e){this.root.push(new Wr("application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml",`/word/footer${e}.xml`))}addHeader(e){this.root.push(new Wr("application/vnd.openxmlformats-officedocument.wordprocessingml.header+xml",`/word/header${e}.xml`))}}class oT extends Ne{constructor(e){super("cp:coreProperties"),this.root.push(new ic(["cp","dc","dcterms","dcmitype","xsi"])),e.title&&this.root.push(new Ps("dc:title",e.title)),e.subject&&this.root.push(new Ps("dc:subject",e.subject)),e.creator&&this.root.push(new Ps("dc:creator",e.creator)),e.keywords&&this.root.push(new Ps("cp:keywords",e.keywords)),e.description&&this.root.push(new Ps("dc:description",e.description)),e.lastModifiedBy&&this.root.push(new Ps("cp:lastModifiedBy",e.lastModifiedBy)),e.revision&&this.root.push(new Ps("cp:revision",String(e.revision))),this.root.push(new ox("dcterms:created")),this.root.push(new ox("dcterms:modified"))}}class lT extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{type:"xsi:type"})}}class ox extends Ne{constructor(e){super(e),this.root.push(new lT({type:"dcterms:W3CDTF"})),this.root.push(t2(new Date))}}class cT extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{xmlns:"xmlns",vt:"xmlns:vt"})}}class uT extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{fmtid:"fmtid",pid:"pid",name:"name"})}}class dT extends Ne{constructor(e,i){super("property"),this.root.push(new uT({fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:e.toString(),name:i.name})),this.root.push(new hT(i.value))}}class hT extends Ne{constructor(e){super("vt:lpwstr"),this.root.push(e)}}class fT extends Ne{constructor(e){super("Properties"),je(this,"nextId"),je(this,"properties",[]),this.root.push(new cT({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"})),this.nextId=2;for(const i of e)this.addCustomProperty(i)}prepForXml(e){return this.properties.forEach(i=>this.root.push(i)),super.prepForXml(e)}addCustomProperty(e){this.properties.push(new dT(this.nextId++,e))}}const vl=({id:r,fontKey:e,subsetted:i},a)=>new vt({name:a,attributes:ut({id:{key:"r:id",value:r}},e?{fontKey:{key:"w:fontKey",value:`{${e}}`}}:{}),children:[...i?[new Ae("w:subsetted",i)]:[]]}),pT=({name:r,altName:e,panose1:i,charset:a,family:l,notTrueType:c,pitch:d,sig:u,embedRegular:p,embedBold:y,embedItalic:v,embedBoldItalic:k})=>new vt({name:"w:font",attributes:{name:{key:"w:name",value:r}},children:[...e?[Ta("w:altName",e)]:[],...i?[Ta("w:panose1",i)]:[],...a?[Ta("w:charset",a)]:[],Ta("w:family",l),...c?[new Ae("w:notTrueType",c)]:[],Ta("w:pitch",d),...u?[new vt({name:"w:sig",attributes:{usb0:{key:"w:usb0",value:u.usb0},usb1:{key:"w:usb1",value:u.usb1},usb2:{key:"w:usb2",value:u.usb2},usb3:{key:"w:usb3",value:u.usb3},csb0:{key:"w:csb0",value:u.csb0},csb1:{key:"w:csb1",value:u.csb1}}})]:[],...p?[vl(p,"w:embedRegular")]:[],...y?[vl(y,"w:embedBold")]:[],...v?[vl(v,"w:embedItalic")]:[],...k?[vl(k,"w:embedBoldItalic")]:[]]}),mT=({name:r,index:e,fontKey:i,characterSet:a})=>pT({name:r,sig:{usb0:"E0002AFF",usb1:"C000247B",usb2:"00000009",usb3:"00000000",csb0:"000001FF",csb1:"00000000"},charset:a,family:"auto",pitch:"variable",embedRegular:{fontKey:i,id:`rId${e}`}}),yT=r=>new vt({name:"w:fonts",attributes:{mc:{key:"xmlns:mc",value:"http://schemas.openxmlformats.org/markup-compatibility/2006"},r:{key:"xmlns:r",value:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"},w:{key:"xmlns:w",value:"http://schemas.openxmlformats.org/wordprocessingml/2006/main"},w14:{key:"xmlns:w14",value:"http://schemas.microsoft.com/office/word/2010/wordml"},w15:{key:"xmlns:w15",value:"http://schemas.microsoft.com/office/word/2012/wordml"},w16cex:{key:"xmlns:w16cex",value:"http://schemas.microsoft.com/office/word/2018/wordml/cex"},w16cid:{key:"xmlns:w16cid",value:"http://schemas.microsoft.com/office/word/2016/wordml/cid"},w16:{key:"xmlns:w16",value:"http://schemas.microsoft.com/office/word/2018/wordml"},w16sdtdh:{key:"xmlns:w16sdtdh",value:"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash"},w16se:{key:"xmlns:w16se",value:"http://schemas.microsoft.com/office/word/2015/wordml/symex"},Ignorable:{key:"mc:Ignorable",value:"w14 w15 w16se w16cid w16 w16cex w16sdtdh"}},children:r.map((e,i)=>mT({name:e.name,index:i+1,fontKey:e.fontKey}))});class gT{constructor(e){je(this,"fontTable"),je(this,"relationships"),je(this,"fontOptionsWithKey",[]),this.options=e,this.fontOptionsWithKey=e.map(i=>Hn(ut({},i),{fontKey:W2()})),this.fontTable=yT(this.fontOptionsWithKey),this.relationships=new Gs;for(let i=0;i<e.length;i++)this.relationships.createRelationship(i+1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/font",`fonts/${e[i].name}.odttf`)}get View(){return this.fontTable}get Relationships(){return this.relationships}}class vT extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type"})}}let xT=class extends B0{constructor(e,i){super("w:ftr",i),je(this,"refId"),this.refId=e,i||this.root.push(new vT({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}))}get ReferenceId(){return this.refId}add(e){this.root.push(e)}};class wT{constructor(e,i,a){je(this,"footer"),je(this,"relationships"),this.media=e,this.footer=new xT(i,a),this.relationships=new Gs}add(e){this.footer.add(e)}addChildElement(e){this.footer.addChildElement(e)}get View(){return this.footer}get Relationships(){return this.relationships}get Media(){return this.media}}class bT extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{type:"w:type",id:"w:id"})}}class jT extends Ne{constructor(){super("w:footnoteRef")}}class NT extends Ga{constructor(){super({style:"FootnoteReference"}),this.root.push(new jT)}}const lx={SEPERATOR:"separator",CONTINUATION_SEPERATOR:"continuationSeparator"};class Vh extends Ne{constructor(e){super("w:footnote"),this.root.push(new bT({type:e.type,id:e.id}));for(let i=0;i<e.children.length;i++){const a=e.children[i];i===0&&a.addRunToFront(new NT),this.root.push(a)}}}class kT extends Ne{constructor(){super("w:continuationSeparator")}}class _T extends Ga{constructor(){super({}),this.root.push(new kT)}}class ST extends Ne{constructor(){super("w:separator")}}class ET extends Ga{constructor(){super({}),this.root.push(new ST)}}class CT extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"})}}class TT extends Ne{constructor(){super("w:footnotes"),this.root.push(new CT({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"}));const e=new Vh({id:-1,type:lx.SEPERATOR,children:[new at({spacing:{after:0,line:240,lineRule:vf.AUTO},children:[new ET]})]});this.root.push(e);const i=new Vh({id:0,type:lx.CONTINUATION_SEPERATOR,children:[new at({spacing:{after:0,line:240,lineRule:vf.AUTO},children:[new _T]})]});this.root.push(i)}createFootNote(e,i){const a=new Vh({id:e,children:i});this.root.push(a)}}class AT{constructor(){je(this,"footnotess"),je(this,"relationships"),this.footnotess=new TT,this.relationships=new Gs}get View(){return this.footnotess}get Relationships(){return this.relationships}}class RT extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type",cx:"xmlns:cx",cx1:"xmlns:cx1",cx2:"xmlns:cx2",cx3:"xmlns:cx3",cx4:"xmlns:cx4",cx5:"xmlns:cx5",cx6:"xmlns:cx6",cx7:"xmlns:cx7",cx8:"xmlns:cx8",w16cid:"xmlns:w16cid",w16se:"xmlns:w16se"})}}let PT=class extends B0{constructor(e,i){super("w:hdr",i),je(this,"refId"),this.refId=e,i||this.root.push(new RT({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex"}))}get ReferenceId(){return this.refId}add(e){this.root.push(e)}};class zT{constructor(e,i,a){je(this,"header"),je(this,"relationships"),this.media=e,this.header=new PT(i,a),this.relationships=new Gs}add(e){return this.header.add(e),this}addChildElement(e){this.header.addChildElement(e)}get View(){return this.header}get Relationships(){return this.relationships}get Media(){return this.media}}class OT{constructor(){je(this,"map"),this.map=new Map}addImage(e,i){this.map.set(e,i)}get Array(){return Array.from(this.map.values())}}const On={BULLET:"bullet"};class IT extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{ilvl:"w:ilvl",tentative:"w15:tentative"})}}class FT extends Ne{constructor(e){super("w:numFmt"),this.root.push(new Lt({val:e}))}}class DT extends Ne{constructor(e){super("w:lvlText"),this.root.push(new Lt({val:e}))}}class LT extends Ne{constructor(e){super("w:lvlJc"),this.root.push(new Lt({val:e}))}}class BT extends Ne{constructor(e){super("w:suff"),this.root.push(new Lt({val:e}))}}class MT extends Ne{constructor(){super("w:isLgl")}}class UT extends Ne{constructor({level:e,format:i,text:a,alignment:l=Ft.START,start:c=1,style:d,suffix:u,isLegalNumberingStyle:p}){if(super("w:lvl"),je(this,"paragraphProperties"),je(this,"runProperties"),this.root.push(new Fa("w:start",pr(c))),i&&this.root.push(new FT(i)),u&&this.root.push(new BT(u)),p&&this.root.push(new MT),a&&this.root.push(new DT(a)),this.root.push(new LT(l)),this.paragraphProperties=new Oi(d&&d.paragraph),this.runProperties=new Ks(d&&d.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties),e>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new IT({ilvl:pr(e),tentative:1}))}}class $T extends UT{}class HT extends Ne{constructor(e){super("w:multiLevelType"),this.root.push(new Lt({val:e}))}}class WT extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{abstractNumId:"w:abstractNumId",restartNumberingAfterBreak:"w15:restartNumberingAfterBreak"})}}class cx extends Ne{constructor(e,i){super("w:abstractNum"),je(this,"id"),this.root.push(new WT({abstractNumId:pr(e),restartNumberingAfterBreak:0})),this.root.push(new HT("hybridMultilevel")),this.id=e;for(const a of i)this.root.push(new $T(a))}}class VT extends Ne{constructor(e){super("w:abstractNumId"),this.root.push(new Lt({val:e}))}}class qT extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{numId:"w:numId"})}}class ux extends Ne{constructor(e){if(super("w:num"),je(this,"numId"),je(this,"reference"),je(this,"instance"),this.numId=e.numId,this.reference=e.reference,this.instance=e.instance,this.root.push(new qT({numId:pr(e.numId)})),this.root.push(new VT(pr(e.abstractNumId))),e.overrideLevels&&e.overrideLevels.length)for(const i of e.overrideLevels)this.root.push(new GT(i.num,i.start))}}class KT extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{ilvl:"w:ilvl"})}}class GT extends Ne{constructor(e,i){super("w:lvlOverride"),this.root.push(new KT({ilvl:e})),i!==void 0&&this.root.push(new XT(i))}}class ZT extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{val:"w:val"})}}class XT extends Ne{constructor(e){super("w:startOverride"),this.root.push(new ZT({val:e}))}}class JT extends Ne{constructor(e){super("w:numbering"),je(this,"abstractNumberingMap",new Map),je(this,"concreteNumberingMap",new Map),je(this,"referenceConfigMap",new Map),je(this,"abstractNumUniqueNumericId",B2()),je(this,"concreteNumUniqueNumericId",M2()),this.root.push(new ic(["wpc","mc","o","r","m","v","wp14","wp","w10","w","w14","w15","wpg","wpi","wne","wps"],"w14 w15 wp14"));const i=new cx(this.abstractNumUniqueNumericId(),[{level:0,format:On.BULLET,text:"",alignment:Ft.LEFT,style:{paragraph:{indent:{left:rn(.5),hanging:rn(.25)}}}},{level:1,format:On.BULLET,text:"",alignment:Ft.LEFT,style:{paragraph:{indent:{left:rn(1),hanging:rn(.25)}}}},{level:2,format:On.BULLET,text:"",alignment:Ft.LEFT,style:{paragraph:{indent:{left:2160,hanging:rn(.25)}}}},{level:3,format:On.BULLET,text:"",alignment:Ft.LEFT,style:{paragraph:{indent:{left:2880,hanging:rn(.25)}}}},{level:4,format:On.BULLET,text:"",alignment:Ft.LEFT,style:{paragraph:{indent:{left:3600,hanging:rn(.25)}}}},{level:5,format:On.BULLET,text:"",alignment:Ft.LEFT,style:{paragraph:{indent:{left:4320,hanging:rn(.25)}}}},{level:6,format:On.BULLET,text:"",alignment:Ft.LEFT,style:{paragraph:{indent:{left:5040,hanging:rn(.25)}}}},{level:7,format:On.BULLET,text:"",alignment:Ft.LEFT,style:{paragraph:{indent:{left:5760,hanging:rn(.25)}}}},{level:8,format:On.BULLET,text:"",alignment:Ft.LEFT,style:{paragraph:{indent:{left:6480,hanging:rn(.25)}}}}]);this.concreteNumberingMap.set("default-bullet-numbering",new ux({numId:1,abstractNumId:i.id,reference:"default-bullet-numbering",instance:0,overrideLevels:[{num:0,start:1}]})),this.abstractNumberingMap.set("default-bullet-numbering",i);for(const a of e.config)this.abstractNumberingMap.set(a.reference,new cx(this.abstractNumUniqueNumericId(),a.levels)),this.referenceConfigMap.set(a.reference,a.levels)}prepForXml(e){for(const i of this.abstractNumberingMap.values())this.root.push(i);for(const i of this.concreteNumberingMap.values())this.root.push(i);return super.prepForXml(e)}createConcreteNumberingInstance(e,i){const a=this.abstractNumberingMap.get(e);if(!a)return;const l=`${e}-${i}`;if(this.concreteNumberingMap.has(l))return;const c=this.referenceConfigMap.get(e),d=c&&c[0].start,u={numId:this.concreteNumUniqueNumericId(),abstractNumId:a.id,reference:e,instance:i,overrideLevels:[d&&Number.isInteger(d)?{num:0,start:d}:{num:0,start:1}]};this.concreteNumberingMap.set(l,new ux(u))}get ConcreteNumbering(){return Array.from(this.concreteNumberingMap.values())}get ReferenceConfig(){return Array.from(this.referenceConfigMap.values())}}class YT extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{version:"w:val",name:"w:name",uri:"w:uri"})}}class QT extends Ne{constructor(e){super("w:compatSetting"),this.root.push(new YT({version:e,uri:"http://schemas.microsoft.com/office/word",name:"compatibilityMode"}))}}class e3 extends Ne{constructor(e){super("w:compat"),e.version&&this.root.push(new QT(e.version)),e.useSingleBorderforContiguousCells&&this.root.push(new Ae("w:useSingleBorderforContiguousCells",e.useSingleBorderforContiguousCells)),e.wordPerfectJustification&&this.root.push(new Ae("w:wpJustification",e.wordPerfectJustification)),e.noTabStopForHangingIndent&&this.root.push(new Ae("w:noTabHangInd",e.noTabStopForHangingIndent)),e.noLeading&&this.root.push(new Ae("w:noLeading",e.noLeading)),e.spaceForUnderline&&this.root.push(new Ae("w:spaceForUL",e.spaceForUnderline)),e.noColumnBalance&&this.root.push(new Ae("w:noColumnBalance",e.noColumnBalance)),e.balanceSingleByteDoubleByteWidth&&this.root.push(new Ae("w:balanceSingleByteDoubleByteWidth",e.balanceSingleByteDoubleByteWidth)),e.noExtraLineSpacing&&this.root.push(new Ae("w:noExtraLineSpacing",e.noExtraLineSpacing)),e.doNotLeaveBackslashAlone&&this.root.push(new Ae("w:doNotLeaveBackslashAlone",e.doNotLeaveBackslashAlone)),e.underlineTrailingSpaces&&this.root.push(new Ae("w:ulTrailSpace",e.underlineTrailingSpaces)),e.doNotExpandShiftReturn&&this.root.push(new Ae("w:doNotExpandShiftReturn",e.doNotExpandShiftReturn)),e.spacingInWholePoints&&this.root.push(new Ae("w:spacingInWholePoints",e.spacingInWholePoints)),e.lineWrapLikeWord6&&this.root.push(new Ae("w:lineWrapLikeWord6",e.lineWrapLikeWord6)),e.printBodyTextBeforeHeader&&this.root.push(new Ae("w:printBodyTextBeforeHeader",e.printBodyTextBeforeHeader)),e.printColorsBlack&&this.root.push(new Ae("w:printColBlack",e.printColorsBlack)),e.spaceWidth&&this.root.push(new Ae("w:wpSpaceWidth",e.spaceWidth)),e.showBreaksInFrames&&this.root.push(new Ae("w:showBreaksInFrames",e.showBreaksInFrames)),e.subFontBySize&&this.root.push(new Ae("w:subFontBySize",e.subFontBySize)),e.suppressBottomSpacing&&this.root.push(new Ae("w:suppressBottomSpacing",e.suppressBottomSpacing)),e.suppressTopSpacing&&this.root.push(new Ae("w:suppressTopSpacing",e.suppressTopSpacing)),e.suppressSpacingAtTopOfPage&&this.root.push(new Ae("w:suppressSpacingAtTopOfPage",e.suppressSpacingAtTopOfPage)),e.suppressTopSpacingWP&&this.root.push(new Ae("w:suppressTopSpacingWP",e.suppressTopSpacingWP)),e.suppressSpBfAfterPgBrk&&this.root.push(new Ae("w:suppressSpBfAfterPgBrk",e.suppressSpBfAfterPgBrk)),e.swapBordersFacingPages&&this.root.push(new Ae("w:swapBordersFacingPages",e.swapBordersFacingPages)),e.convertMailMergeEsc&&this.root.push(new Ae("w:convMailMergeEsc",e.convertMailMergeEsc)),e.truncateFontHeightsLikeWP6&&this.root.push(new Ae("w:truncateFontHeightsLikeWP6",e.truncateFontHeightsLikeWP6)),e.macWordSmallCaps&&this.root.push(new Ae("w:mwSmallCaps",e.macWordSmallCaps)),e.usePrinterMetrics&&this.root.push(new Ae("w:usePrinterMetrics",e.usePrinterMetrics)),e.doNotSuppressParagraphBorders&&this.root.push(new Ae("w:doNotSuppressParagraphBorders",e.doNotSuppressParagraphBorders)),e.wrapTrailSpaces&&this.root.push(new Ae("w:wrapTrailSpaces",e.wrapTrailSpaces)),e.footnoteLayoutLikeWW8&&this.root.push(new Ae("w:footnoteLayoutLikeWW8",e.footnoteLayoutLikeWW8)),e.shapeLayoutLikeWW8&&this.root.push(new Ae("w:shapeLayoutLikeWW8",e.shapeLayoutLikeWW8)),e.alignTablesRowByRow&&this.root.push(new Ae("w:alignTablesRowByRow",e.alignTablesRowByRow)),e.forgetLastTabAlignment&&this.root.push(new Ae("w:forgetLastTabAlignment",e.forgetLastTabAlignment)),e.adjustLineHeightInTable&&this.root.push(new Ae("w:adjustLineHeightInTable",e.adjustLineHeightInTable)),e.autoSpaceLikeWord95&&this.root.push(new Ae("w:autoSpaceLikeWord95",e.autoSpaceLikeWord95)),e.noSpaceRaiseLower&&this.root.push(new Ae("w:noSpaceRaiseLower",e.noSpaceRaiseLower)),e.doNotUseHTMLParagraphAutoSpacing&&this.root.push(new Ae("w:doNotUseHTMLParagraphAutoSpacing",e.doNotUseHTMLParagraphAutoSpacing)),e.layoutRawTableWidth&&this.root.push(new Ae("w:layoutRawTableWidth",e.layoutRawTableWidth)),e.layoutTableRowsApart&&this.root.push(new Ae("w:layoutTableRowsApart",e.layoutTableRowsApart)),e.useWord97LineBreakRules&&this.root.push(new Ae("w:useWord97LineBreakRules",e.useWord97LineBreakRules)),e.doNotBreakWrappedTables&&this.root.push(new Ae("w:doNotBreakWrappedTables",e.doNotBreakWrappedTables)),e.doNotSnapToGridInCell&&this.root.push(new Ae("w:doNotSnapToGridInCell",e.doNotSnapToGridInCell)),e.selectFieldWithFirstOrLastCharacter&&this.root.push(new Ae("w:selectFldWithFirstOrLastChar",e.selectFieldWithFirstOrLastCharacter)),e.applyBreakingRules&&this.root.push(new Ae("w:applyBreakingRules",e.applyBreakingRules)),e.doNotWrapTextWithPunctuation&&this.root.push(new Ae("w:doNotWrapTextWithPunct",e.doNotWrapTextWithPunctuation)),e.doNotUseEastAsianBreakRules&&this.root.push(new Ae("w:doNotUseEastAsianBreakRules",e.doNotUseEastAsianBreakRules)),e.useWord2002TableStyleRules&&this.root.push(new Ae("w:useWord2002TableStyleRules",e.useWord2002TableStyleRules)),e.growAutofit&&this.root.push(new Ae("w:growAutofit",e.growAutofit)),e.useFELayout&&this.root.push(new Ae("w:useFELayout",e.useFELayout)),e.useNormalStyleForList&&this.root.push(new Ae("w:useNormalStyleForList",e.useNormalStyleForList)),e.doNotUseIndentAsNumberingTabStop&&this.root.push(new Ae("w:doNotUseIndentAsNumberingTabStop",e.doNotUseIndentAsNumberingTabStop)),e.useAlternateEastAsianLineBreakRules&&this.root.push(new Ae("w:useAltKinsokuLineBreakRules",e.useAlternateEastAsianLineBreakRules)),e.allowSpaceOfSameStyleInTable&&this.root.push(new Ae("w:allowSpaceOfSameStyleInTable",e.allowSpaceOfSameStyleInTable)),e.doNotSuppressIndentation&&this.root.push(new Ae("w:doNotSuppressIndentation",e.doNotSuppressIndentation)),e.doNotAutofitConstrainedTables&&this.root.push(new Ae("w:doNotAutofitConstrainedTables",e.doNotAutofitConstrainedTables)),e.autofitToFirstFixedWidthCell&&this.root.push(new Ae("w:autofitToFirstFixedWidthCell",e.autofitToFirstFixedWidthCell)),e.underlineTabInNumberingList&&this.root.push(new Ae("w:underlineTabInNumList",e.underlineTabInNumberingList)),e.displayHangulFixedWidth&&this.root.push(new Ae("w:displayHangulFixedWidth",e.displayHangulFixedWidth)),e.splitPgBreakAndParaMark&&this.root.push(new Ae("w:splitPgBreakAndParaMark",e.splitPgBreakAndParaMark)),e.doNotVerticallyAlignCellWithSp&&this.root.push(new Ae("w:doNotVertAlignCellWithSp",e.doNotVerticallyAlignCellWithSp)),e.doNotBreakConstrainedForcedTable&&this.root.push(new Ae("w:doNotBreakConstrainedForcedTable",e.doNotBreakConstrainedForcedTable)),e.ignoreVerticalAlignmentInTextboxes&&this.root.push(new Ae("w:doNotVertAlignInTxbx",e.ignoreVerticalAlignmentInTextboxes)),e.useAnsiKerningPairs&&this.root.push(new Ae("w:useAnsiKerningPairs",e.useAnsiKerningPairs)),e.cachedColumnBalance&&this.root.push(new Ae("w:cachedColBalance",e.cachedColumnBalance))}}class t3 extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"})}}class r3 extends Ne{constructor(e){var i,a,l,c,d,u,p,y;super("w:settings"),this.root.push(new t3({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"})),this.root.push(new Ae("w:displayBackgroundShape",!0)),e.trackRevisions!==void 0&&this.root.push(new Ae("w:trackRevisions",e.trackRevisions)),e.evenAndOddHeaders!==void 0&&this.root.push(new Ae("w:evenAndOddHeaders",e.evenAndOddHeaders)),e.updateFields!==void 0&&this.root.push(new Ae("w:updateFields",e.updateFields)),e.defaultTabStop!==void 0&&this.root.push(new Fa("w:defaultTabStop",e.defaultTabStop)),((i=e.hyphenation)==null?void 0:i.autoHyphenation)!==void 0&&this.root.push(new Ae("w:autoHyphenation",e.hyphenation.autoHyphenation)),((a=e.hyphenation)==null?void 0:a.hyphenationZone)!==void 0&&this.root.push(new Fa("w:hyphenationZone",e.hyphenation.hyphenationZone)),((l=e.hyphenation)==null?void 0:l.consecutiveHyphenLimit)!==void 0&&this.root.push(new Fa("w:consecutiveHyphenLimit",e.hyphenation.consecutiveHyphenLimit)),((c=e.hyphenation)==null?void 0:c.doNotHyphenateCaps)!==void 0&&this.root.push(new Ae("w:doNotHyphenateCaps",e.hyphenation.doNotHyphenateCaps)),this.root.push(new e3(Hn(ut({},(d=e.compatibility)!=null?d:{}),{version:(y=(p=(u=e.compatibility)==null?void 0:u.version)!=null?p:e.compatibilityModeVersion)!=null?y:15})))}}class hw extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{val:"w:val"})}}class n3 extends Ne{constructor(e){super("w:name"),this.root.push(new hw({val:e}))}}class s3 extends Ne{constructor(e){super("w:uiPriority"),this.root.push(new hw({val:pr(e)}))}}class i3 extends Ue{constructor(){super(...arguments),je(this,"xmlKeys",{type:"w:type",styleId:"w:styleId",default:"w:default",customStyle:"w:customStyle"})}}class fw extends Ne{constructor(e,i){super("w:style"),this.root.push(new i3(e)),i.name&&this.root.push(new n3(i.name)),i.basedOn&&this.root.push(new $s("w:basedOn",i.basedOn)),i.next&&this.root.push(new $s("w:next",i.next)),i.link&&this.root.push(new $s("w:link",i.link)),i.uiPriority!==void 0&&this.root.push(new s3(i.uiPriority)),i.semiHidden!==void 0&&this.root.push(new Ae("w:semiHidden",i.semiHidden)),i.unhideWhenUsed!==void 0&&this.root.push(new Ae("w:unhideWhenUsed",i.unhideWhenUsed)),i.quickFormat!==void 0&&this.root.push(new Ae("w:qFormat",i.quickFormat))}}class ac extends fw{constructor(e){super({type:"paragraph",styleId:e.id},e),je(this,"paragraphProperties"),je(this,"runProperties"),this.paragraphProperties=new Oi(e.paragraph),this.runProperties=new Ks(e.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties)}}class oc extends fw{constructor(e){super({type:"character",styleId:e.id},ut({uiPriority:99,unhideWhenUsed:!0},e)),je(this,"runProperties"),this.runProperties=new Ks(e.run),this.root.push(this.runProperties)}}class ys extends ac{constructor(e){super(ut({basedOn:"Normal",next:"Normal",quickFormat:!0},e))}}class a3 extends ys{constructor(e){super(ut({id:"Title",name:"Title"},e))}}class o3 extends ys{constructor(e){super(ut({id:"Heading1",name:"Heading 1"},e))}}class l3 extends ys{constructor(e){super(ut({id:"Heading2",name:"Heading 2"},e))}}class c3 extends ys{constructor(e){super(ut({id:"Heading3",name:"Heading 3"},e))}}class u3 extends ys{constructor(e){super(ut({id:"Heading4",name:"Heading 4"},e))}}class d3 extends ys{constructor(e){super(ut({id:"Heading5",name:"Heading 5"},e))}}class h3 extends ys{constructor(e){super(ut({id:"Heading6",name:"Heading 6"},e))}}class f3 extends ys{constructor(e){super(ut({id:"Strong",name:"Strong"},e))}}class p3 extends ac{constructor(e){super(ut({id:"ListParagraph",name:"List Paragraph",basedOn:"Normal",quickFormat:!0},e))}}class m3 extends ac{constructor(e){super(ut({id:"FootnoteText",name:"footnote text",link:"FootnoteTextChar",basedOn:"Normal",uiPriority:99,semiHidden:!0,unhideWhenUsed:!0,paragraph:{spacing:{after:0,line:240,lineRule:vf.AUTO}},run:{size:20}},e))}}class y3 extends oc{constructor(e){super(ut({id:"FootnoteReference",name:"footnote reference",basedOn:"DefaultParagraphFont",semiHidden:!0,run:{superScript:!0}},e))}}class g3 extends oc{constructor(e){super(ut({id:"FootnoteTextChar",name:"Footnote Text Char",basedOn:"DefaultParagraphFont",link:"FootnoteText",semiHidden:!0,run:{size:20}},e))}}class v3 extends oc{constructor(e){super(ut({id:"Hyperlink",name:"Hyperlink",basedOn:"DefaultParagraphFont",run:{color:"0563C1",underline:{type:V0.SINGLE}}},e))}}class xf extends Ne{constructor(e){if(super("w:styles"),e.initialStyles&&this.root.push(e.initialStyles),e.importedStyles)for(const i of e.importedStyles)this.root.push(i);if(e.paragraphStyles)for(const i of e.paragraphStyles)this.root.push(new ac(i));if(e.characterStyles)for(const i of e.characterStyles)this.root.push(new oc(i))}}class x3 extends Ne{constructor(e){super("w:pPrDefault"),this.root.push(new Oi(e))}}class w3 extends Ne{constructor(e){super("w:rPrDefault"),this.root.push(new Ks(e))}}class b3 extends Ne{constructor(e){super("w:docDefaults"),je(this,"runPropertiesDefaults"),je(this,"paragraphPropertiesDefaults"),this.runPropertiesDefaults=new w3(e.run),this.paragraphPropertiesDefaults=new x3(e.paragraph),this.root.push(this.runPropertiesDefaults),this.root.push(this.paragraphPropertiesDefaults)}}class j3{newInstance(e){const i=L0.xml2js(e,{compact:!1});let a;for(const d of i.elements||[])d.name==="w:styles"&&(a=d);if(a===void 0)throw new Error("can not find styles element");const l=a.elements||[];return new xf({initialStyles:new XS(a.attributes),importedStyles:l.map(d=>Hf(d))})}}class dx{newInstance(e={}){var i;return{initialStyles:new ic(["mc","r","w","w14","w15"],"w14 w15"),importedStyles:[new b3((i=e.document)!=null?i:{}),new a3(ut({run:{size:56}},e.title)),new o3(ut({run:{color:"2E74B5",size:32}},e.heading1)),new l3(ut({run:{color:"2E74B5",size:26}},e.heading2)),new c3(ut({run:{color:"1F4D78",size:24}},e.heading3)),new u3(ut({run:{color:"2E74B5",italics:!0}},e.heading4)),new d3(ut({run:{color:"2E74B5"}},e.heading5)),new h3(ut({run:{color:"1F4D78"}},e.heading6)),new f3(ut({run:{bold:!0}},e.strong)),new p3(e.listParagraph||{}),new v3(e.hyperlink||{}),new y3(e.footnoteReference||{}),new m3(e.footnoteText||{}),new g3(e.footnoteTextChar||{})]}}}class pw{constructor(e){je(this,"currentRelationshipId",1),je(this,"documentWrapper"),je(this,"headers",[]),je(this,"footers",[]),je(this,"coreProperties"),je(this,"numbering"),je(this,"media"),je(this,"fileRelationships"),je(this,"footnotesWrapper"),je(this,"settings"),je(this,"contentTypes"),je(this,"customProperties"),je(this,"appProperties"),je(this,"styles"),je(this,"comments"),je(this,"fontWrapper");var i,a,l,c,d,u,p,y,v,k,E,C;if(this.coreProperties=new oT(Hn(ut({},e),{creator:(i=e.creator)!=null?i:"Un-named",revision:(a=e.revision)!=null?a:1,lastModifiedBy:(l=e.lastModifiedBy)!=null?l:"Un-named"})),this.numbering=new JT(e.numbering?e.numbering:{config:[]}),this.comments=new YE((c=e.comments)!=null?c:{children:[]}),this.fileRelationships=new Gs,this.customProperties=new fT((d=e.customProperties)!=null?d:[]),this.appProperties=new rT,this.footnotesWrapper=new AT,this.contentTypes=new aT,this.documentWrapper=new aw({background:e.background}),this.settings=new r3({compatibilityModeVersion:e.compatabilityModeVersion,compatibility:e.compatibility,evenAndOddHeaders:!!e.evenAndOddHeaderAndFooters,trackRevisions:(u=e.features)==null?void 0:u.trackRevisions,updateFields:(p=e.features)==null?void 0:p.updateFields,defaultTabStop:e.defaultTabStop,hyphenation:{autoHyphenation:(y=e.hyphenation)==null?void 0:y.autoHyphenation,hyphenationZone:(v=e.hyphenation)==null?void 0:v.hyphenationZone,consecutiveHyphenLimit:(k=e.hyphenation)==null?void 0:k.consecutiveHyphenLimit,doNotHyphenateCaps:(E=e.hyphenation)==null?void 0:E.doNotHyphenateCaps}}),this.media=new OT,e.externalStyles!==void 0){const N=new j3;this.styles=N.newInstance(e.externalStyles)}else if(e.styles){const g=new dx().newInstance(e.styles.default);this.styles=new xf(ut(ut({},g),e.styles))}else{const N=new dx;this.styles=new xf(N.newInstance())}this.addDefaultRelationships();for(const N of e.sections)this.addSection(N);if(e.footnotes)for(const N in e.footnotes)this.footnotesWrapper.View.createFootNote(parseFloat(N),e.footnotes[N].children);this.fontWrapper=new gT((C=e.fonts)!=null?C:[])}addSection({headers:e={},footers:i={},children:a,properties:l}){this.documentWrapper.View.Body.addSection(Hn(ut({},l),{headerWrapperGroup:{default:e.default?this.createHeader(e.default):void 0,first:e.first?this.createHeader(e.first):void 0,even:e.even?this.createHeader(e.even):void 0},footerWrapperGroup:{default:i.default?this.createFooter(i.default):void 0,first:i.first?this.createFooter(i.first):void 0,even:i.even?this.createFooter(i.even):void 0}}));for(const c of a)this.documentWrapper.View.add(c)}createHeader(e){const i=new zT(this.media,this.currentRelationshipId++);for(const a of e.options.children)i.add(a);return this.addHeaderToDocument(i),i}createFooter(e){const i=new wT(this.media,this.currentRelationshipId++);for(const a of e.options.children)i.add(a);return this.addFooterToDocument(i),i}addHeaderToDocument(e,i=Si.DEFAULT){this.headers.push({header:e,type:i}),this.documentWrapper.Relationships.createRelationship(e.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/header",`header${this.headers.length}.xml`),this.contentTypes.addHeader(this.headers.length)}addFooterToDocument(e,i=Si.DEFAULT){this.footers.push({footer:e,type:i}),this.documentWrapper.Relationships.createRelationship(e.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footer",`footer${this.footers.length}.xml`),this.contentTypes.addFooter(this.footers.length)}addDefaultRelationships(){this.fileRelationships.createRelationship(1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument","word/document.xml"),this.fileRelationships.createRelationship(2,"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties","docProps/core.xml"),this.fileRelationships.createRelationship(3,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties","docProps/app.xml"),this.fileRelationships.createRelationship(4,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties","docProps/custom.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles","styles.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/numbering","numbering.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footnotes","footnotes.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/settings","settings.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments","comments.xml")}get Document(){return this.documentWrapper}get Styles(){return this.styles}get CoreProperties(){return this.coreProperties}get Numbering(){return this.numbering}get Media(){return this.media}get FileRelationships(){return this.fileRelationships}get Headers(){return this.headers.map(e=>e.header)}get Footers(){return this.footers.map(e=>e.footer)}get ContentTypes(){return this.contentTypes}get CustomProperties(){return this.customProperties}get AppProperties(){return this.appProperties}get FootNotes(){return this.footnotesWrapper}get Settings(){return this.settings}get Comments(){return this.comments}get FontTable(){return this.fontWrapper}}class mw{constructor(e={children:[]}){je(this,"options"),this.options=e}}class yw{constructor(e={children:[]}){je(this,"options"),this.options=e}}var N3=Mf();function xl(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var qh={exports:{}},hx;function k3(){return hx||(hx=1,(function(r,e){(function(i){r.exports=i()})(function(){return(function i(a,l,c){function d(y,v){if(!l[y]){if(!a[y]){var k=typeof xl=="function"&&xl;if(!v&&k)return k(y,!0);if(u)return u(y,!0);var E=new Error("Cannot find module '"+y+"'");throw E.code="MODULE_NOT_FOUND",E}var C=l[y]={exports:{}};a[y][0].call(C.exports,function(N){var g=a[y][1][N];return d(g||N)},C,C.exports,i,a,l,c)}return l[y].exports}for(var u=typeof xl=="function"&&xl,p=0;p<c.length;p++)d(c[p]);return d})({1:[function(i,a,l){var c=i("./utils"),d=i("./support"),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";l.encode=function(p){for(var y,v,k,E,C,N,g,j=[],f=0,b=p.length,w=b,_=c.getTypeOf(p)!=="string";f<p.length;)w=b-f,k=_?(y=p[f++],v=f<b?p[f++]:0,f<b?p[f++]:0):(y=p.charCodeAt(f++),v=f<b?p.charCodeAt(f++):0,f<b?p.charCodeAt(f++):0),E=y>>2,C=(3&y)<<4|v>>4,N=1<w?(15&v)<<2|k>>6:64,g=2<w?63&k:64,j.push(u.charAt(E)+u.charAt(C)+u.charAt(N)+u.charAt(g));return j.join("")},l.decode=function(p){var y,v,k,E,C,N,g=0,j=0,f="data:";if(p.substr(0,f.length)===f)throw new Error("Invalid base64 input, it looks like a data url.");var b,w=3*(p=p.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(p.charAt(p.length-1)===u.charAt(64)&&w--,p.charAt(p.length-2)===u.charAt(64)&&w--,w%1!=0)throw new Error("Invalid base64 input, bad content length.");for(b=d.uint8array?new Uint8Array(0|w):new Array(0|w);g<p.length;)y=u.indexOf(p.charAt(g++))<<2|(E=u.indexOf(p.charAt(g++)))>>4,v=(15&E)<<4|(C=u.indexOf(p.charAt(g++)))>>2,k=(3&C)<<6|(N=u.indexOf(p.charAt(g++))),b[j++]=y,C!==64&&(b[j++]=v),N!==64&&(b[j++]=k);return b}},{"./support":30,"./utils":32}],2:[function(i,a,l){var c=i("./external"),d=i("./stream/DataWorker"),u=i("./stream/Crc32Probe"),p=i("./stream/DataLengthProbe");function y(v,k,E,C,N){this.compressedSize=v,this.uncompressedSize=k,this.crc32=E,this.compression=C,this.compressedContent=N}y.prototype={getContentWorker:function(){var v=new d(c.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new p("data_length")),k=this;return v.on("end",function(){if(this.streamInfo.data_length!==k.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),v},getCompressedWorker:function(){return new d(c.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},y.createWorkerFrom=function(v,k,E){return v.pipe(new u).pipe(new p("uncompressedSize")).pipe(k.compressWorker(E)).pipe(new p("compressedSize")).withStreamInfo("compression",k)},a.exports=y},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(i,a,l){var c=i("./stream/GenericWorker");l.STORE={magic:"\0\0",compressWorker:function(){return new c("STORE compression")},uncompressWorker:function(){return new c("STORE decompression")}},l.DEFLATE=i("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(i,a,l){var c=i("./utils"),d=(function(){for(var u,p=[],y=0;y<256;y++){u=y;for(var v=0;v<8;v++)u=1&u?3988292384^u>>>1:u>>>1;p[y]=u}return p})();a.exports=function(u,p){return u!==void 0&&u.length?c.getTypeOf(u)!=="string"?(function(y,v,k,E){var C=d,N=E+k;y^=-1;for(var g=E;g<N;g++)y=y>>>8^C[255&(y^v[g])];return-1^y})(0|p,u,u.length,0):(function(y,v,k,E){var C=d,N=E+k;y^=-1;for(var g=E;g<N;g++)y=y>>>8^C[255&(y^v.charCodeAt(g))];return-1^y})(0|p,u,u.length,0):0}},{"./utils":32}],5:[function(i,a,l){l.base64=!1,l.binary=!1,l.dir=!1,l.createFolders=!0,l.date=null,l.compression=null,l.compressionOptions=null,l.comment=null,l.unixPermissions=null,l.dosPermissions=null},{}],6:[function(i,a,l){var c=null;c=typeof Promise<"u"?Promise:i("lie"),a.exports={Promise:c}},{lie:37}],7:[function(i,a,l){var c=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",d=i("pako"),u=i("./utils"),p=i("./stream/GenericWorker"),y=c?"uint8array":"array";function v(k,E){p.call(this,"FlateWorker/"+k),this._pako=null,this._pakoAction=k,this._pakoOptions=E,this.meta={}}l.magic="\b\0",u.inherits(v,p),v.prototype.processChunk=function(k){this.meta=k.meta,this._pako===null&&this._createPako(),this._pako.push(u.transformTo(y,k.data),!1)},v.prototype.flush=function(){p.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},v.prototype.cleanUp=function(){p.prototype.cleanUp.call(this),this._pako=null},v.prototype._createPako=function(){this._pako=new d[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var k=this;this._pako.onData=function(E){k.push({data:E,meta:k.meta})}},l.compressWorker=function(k){return new v("Deflate",k)},l.uncompressWorker=function(){return new v("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(i,a,l){function c(C,N){var g,j="";for(g=0;g<N;g++)j+=String.fromCharCode(255&C),C>>>=8;return j}function d(C,N,g,j,f,b){var w,_,A=C.file,B=C.compression,M=b!==y.utf8encode,$=u.transformTo("string",b(A.name)),D=u.transformTo("string",y.utf8encode(A.name)),le=A.comment,pe=u.transformTo("string",b(le)),H=u.transformTo("string",y.utf8encode(le)),q=D.length!==A.name.length,T=H.length!==le.length,Z="",Q="",Y="",ne=A.dir,J=A.date,ue={crc32:0,compressedSize:0,uncompressedSize:0};N&&!g||(ue.crc32=C.crc32,ue.compressedSize=C.compressedSize,ue.uncompressedSize=C.uncompressedSize);var W=0;N&&(W|=8),M||!q&&!T||(W|=2048);var U=0,re=0;ne&&(U|=16),f==="UNIX"?(re=798,U|=(function(ye,ce){var P=ye;return ye||(P=ce?16893:33204),(65535&P)<<16})(A.unixPermissions,ne)):(re=20,U|=(function(ye){return 63&(ye||0)})(A.dosPermissions)),w=J.getUTCHours(),w<<=6,w|=J.getUTCMinutes(),w<<=5,w|=J.getUTCSeconds()/2,_=J.getUTCFullYear()-1980,_<<=4,_|=J.getUTCMonth()+1,_<<=5,_|=J.getUTCDate(),q&&(Q=c(1,1)+c(v($),4)+D,Z+="up"+c(Q.length,2)+Q),T&&(Y=c(1,1)+c(v(pe),4)+H,Z+="uc"+c(Y.length,2)+Y);var ae="";return ae+=`
\0`,ae+=c(W,2),ae+=B.magic,ae+=c(w,2),ae+=c(_,2),ae+=c(ue.crc32,4),ae+=c(ue.compressedSize,4),ae+=c(ue.uncompressedSize,4),ae+=c($.length,2),ae+=c(Z.length,2),{fileRecord:k.LOCAL_FILE_HEADER+ae+$+Z,dirRecord:k.CENTRAL_FILE_HEADER+c(re,2)+ae+c(pe.length,2)+"\0\0\0\0"+c(U,4)+c(j,4)+$+Z+pe}}var u=i("../utils"),p=i("../stream/GenericWorker"),y=i("../utf8"),v=i("../crc32"),k=i("../signature");function E(C,N,g,j){p.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=N,this.zipPlatform=g,this.encodeFileName=j,this.streamFiles=C,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}u.inherits(E,p),E.prototype.push=function(C){var N=C.meta.percent||0,g=this.entriesCount,j=this._sources.length;this.accumulate?this.contentBuffer.push(C):(this.bytesWritten+=C.data.length,p.prototype.push.call(this,{data:C.data,meta:{currentFile:this.currentFile,percent:g?(N+100*(g-j-1))/g:100}}))},E.prototype.openedSource=function(C){this.currentSourceOffset=this.bytesWritten,this.currentFile=C.file.name;var N=this.streamFiles&&!C.file.dir;if(N){var g=d(C,N,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},E.prototype.closedSource=function(C){this.accumulate=!1;var N=this.streamFiles&&!C.file.dir,g=d(C,N,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),N)this.push({data:(function(j){return k.DATA_DESCRIPTOR+c(j.crc32,4)+c(j.compressedSize,4)+c(j.uncompressedSize,4)})(C),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},E.prototype.flush=function(){for(var C=this.bytesWritten,N=0;N<this.dirRecords.length;N++)this.push({data:this.dirRecords[N],meta:{percent:100}});var g=this.bytesWritten-C,j=(function(f,b,w,_,A){var B=u.transformTo("string",A(_));return k.CENTRAL_DIRECTORY_END+"\0\0\0\0"+c(f,2)+c(f,2)+c(b,4)+c(w,4)+c(B.length,2)+B})(this.dirRecords.length,g,C,this.zipComment,this.encodeFileName);this.push({data:j,meta:{percent:100}})},E.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},E.prototype.registerPrevious=function(C){this._sources.push(C);var N=this;return C.on("data",function(g){N.processChunk(g)}),C.on("end",function(){N.closedSource(N.previous.streamInfo),N._sources.length?N.prepareNextSource():N.end()}),C.on("error",function(g){N.error(g)}),this},E.prototype.resume=function(){return!!p.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},E.prototype.error=function(C){var N=this._sources;if(!p.prototype.error.call(this,C))return!1;for(var g=0;g<N.length;g++)try{N[g].error(C)}catch{}return!0},E.prototype.lock=function(){p.prototype.lock.call(this);for(var C=this._sources,N=0;N<C.length;N++)C[N].lock()},a.exports=E},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(i,a,l){var c=i("../compressions"),d=i("./ZipFileWorker");l.generateWorker=function(u,p,y){var v=new d(p.streamFiles,y,p.platform,p.encodeFileName),k=0;try{u.forEach(function(E,C){k++;var N=(function(b,w){var _=b||w,A=c[_];if(!A)throw new Error(_+" is not a valid compression method !");return A})(C.options.compression,p.compression),g=C.options.compressionOptions||p.compressionOptions||{},j=C.dir,f=C.date;C._compressWorker(N,g).withStreamInfo("file",{name:E,dir:j,date:f,comment:C.comment||"",unixPermissions:C.unixPermissions,dosPermissions:C.dosPermissions}).pipe(v)}),v.entriesCount=k}catch(E){v.error(E)}return v}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(i,a,l){function c(){if(!(this instanceof c))return new c;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var d=new c;for(var u in this)typeof this[u]!="function"&&(d[u]=this[u]);return d}}(c.prototype=i("./object")).loadAsync=i("./load"),c.support=i("./support"),c.defaults=i("./defaults"),c.version="3.10.1",c.loadAsync=function(d,u){return new c().loadAsync(d,u)},c.external=i("./external"),a.exports=c},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(i,a,l){var c=i("./utils"),d=i("./external"),u=i("./utf8"),p=i("./zipEntries"),y=i("./stream/Crc32Probe"),v=i("./nodejsUtils");function k(E){return new d.Promise(function(C,N){var g=E.decompressed.getContentWorker().pipe(new y);g.on("error",function(j){N(j)}).on("end",function(){g.streamInfo.crc32!==E.decompressed.crc32?N(new Error("Corrupted zip : CRC32 mismatch")):C()}).resume()})}a.exports=function(E,C){var N=this;return C=c.extend(C||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:u.utf8decode}),v.isNode&&v.isStream(E)?d.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):c.prepareContent("the loaded zip file",E,!0,C.optimizedBinaryString,C.base64).then(function(g){var j=new p(C);return j.load(g),j}).then(function(g){var j=[d.Promise.resolve(g)],f=g.files;if(C.checkCRC32)for(var b=0;b<f.length;b++)j.push(k(f[b]));return d.Promise.all(j)}).then(function(g){for(var j=g.shift(),f=j.files,b=0;b<f.length;b++){var w=f[b],_=w.fileNameStr,A=c.resolve(w.fileNameStr);N.file(A,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:C.createFolders}),w.dir||(N.file(A).unsafeOriginalName=_)}return j.zipComment.length&&(N.comment=j.zipComment),N})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(i,a,l){var c=i("../utils"),d=i("../stream/GenericWorker");function u(p,y){d.call(this,"Nodejs stream input adapter for "+p),this._upstreamEnded=!1,this._bindStream(y)}c.inherits(u,d),u.prototype._bindStream=function(p){var y=this;(this._stream=p).pause(),p.on("data",function(v){y.push({data:v,meta:{percent:0}})}).on("error",function(v){y.isPaused?this.generatedError=v:y.error(v)}).on("end",function(){y.isPaused?y._upstreamEnded=!0:y.end()})},u.prototype.pause=function(){return!!d.prototype.pause.call(this)&&(this._stream.pause(),!0)},u.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},a.exports=u},{"../stream/GenericWorker":28,"../utils":32}],13:[function(i,a,l){var c=i("readable-stream").Readable;function d(u,p,y){c.call(this,p),this._helper=u;var v=this;u.on("data",function(k,E){v.push(k)||v._helper.pause(),y&&y(E)}).on("error",function(k){v.emit("error",k)}).on("end",function(){v.push(null)})}i("../utils").inherits(d,c),d.prototype._read=function(){this._helper.resume()},a.exports=d},{"../utils":32,"readable-stream":16}],14:[function(i,a,l){a.exports={isNode:typeof Buffer<"u",newBufferFrom:function(c,d){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(c,d);if(typeof c=="number")throw new Error('The "data" argument must not be a number');return new Buffer(c,d)},allocBuffer:function(c){if(Buffer.alloc)return Buffer.alloc(c);var d=new Buffer(c);return d.fill(0),d},isBuffer:function(c){return Buffer.isBuffer(c)},isStream:function(c){return c&&typeof c.on=="function"&&typeof c.pause=="function"&&typeof c.resume=="function"}}},{}],15:[function(i,a,l){function c(A,B,M){var $,D=u.getTypeOf(B),le=u.extend(M||{},v);le.date=le.date||new Date,le.compression!==null&&(le.compression=le.compression.toUpperCase()),typeof le.unixPermissions=="string"&&(le.unixPermissions=parseInt(le.unixPermissions,8)),le.unixPermissions&&16384&le.unixPermissions&&(le.dir=!0),le.dosPermissions&&16&le.dosPermissions&&(le.dir=!0),le.dir&&(A=f(A)),le.createFolders&&($=j(A))&&b.call(this,$,!0);var pe=D==="string"&&le.binary===!1&&le.base64===!1;M&&M.binary!==void 0||(le.binary=!pe),(B instanceof k&&B.uncompressedSize===0||le.dir||!B||B.length===0)&&(le.base64=!1,le.binary=!0,B="",le.compression="STORE",D="string");var H=null;H=B instanceof k||B instanceof p?B:N.isNode&&N.isStream(B)?new g(A,B):u.prepareContent(A,B,le.binary,le.optimizedBinaryString,le.base64);var q=new E(A,H,le);this.files[A]=q}var d=i("./utf8"),u=i("./utils"),p=i("./stream/GenericWorker"),y=i("./stream/StreamHelper"),v=i("./defaults"),k=i("./compressedObject"),E=i("./zipObject"),C=i("./generate"),N=i("./nodejsUtils"),g=i("./nodejs/NodejsStreamInputAdapter"),j=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var B=A.lastIndexOf("/");return 0<B?A.substring(0,B):""},f=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},b=function(A,B){return B=B!==void 0?B:v.createFolders,A=f(A),this.files[A]||c.call(this,A,null,{dir:!0,createFolders:B}),this.files[A]};function w(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var _={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var B,M,$;for(B in this.files)$=this.files[B],(M=B.slice(this.root.length,B.length))&&B.slice(0,this.root.length)===this.root&&A(M,$)},filter:function(A){var B=[];return this.forEach(function(M,$){A(M,$)&&B.push($)}),B},file:function(A,B,M){if(arguments.length!==1)return A=this.root+A,c.call(this,A,B,M),this;if(w(A)){var $=A;return this.filter(function(le,pe){return!pe.dir&&$.test(le)})}var D=this.files[this.root+A];return D&&!D.dir?D:null},folder:function(A){if(!A)return this;if(w(A))return this.filter(function(D,le){return le.dir&&A.test(D)});var B=this.root+A,M=b.call(this,B),$=this.clone();return $.root=M.name,$},remove:function(A){A=this.root+A;var B=this.files[A];if(B||(A.slice(-1)!=="/"&&(A+="/"),B=this.files[A]),B&&!B.dir)delete this.files[A];else for(var M=this.filter(function(D,le){return le.name.slice(0,A.length)===A}),$=0;$<M.length;$++)delete this.files[M[$].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var B,M={};try{if((M=u.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:d.utf8encode})).type=M.type.toLowerCase(),M.compression=M.compression.toUpperCase(),M.type==="binarystring"&&(M.type="string"),!M.type)throw new Error("No output type specified.");u.checkSupport(M.type),M.platform!=="darwin"&&M.platform!=="freebsd"&&M.platform!=="linux"&&M.platform!=="sunos"||(M.platform="UNIX"),M.platform==="win32"&&(M.platform="DOS");var $=M.comment||this.comment||"";B=C.generateWorker(this,M,$)}catch(D){(B=new p("error")).error(D)}return new y(B,M.type||"string",M.mimeType)},generateAsync:function(A,B){return this.generateInternalStream(A).accumulate(B)},generateNodeStream:function(A,B){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(B)}};a.exports=_},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(i,a,l){a.exports=i("stream")},{stream:void 0}],17:[function(i,a,l){var c=i("./DataReader");function d(u){c.call(this,u);for(var p=0;p<this.data.length;p++)u[p]=255&u[p]}i("../utils").inherits(d,c),d.prototype.byteAt=function(u){return this.data[this.zero+u]},d.prototype.lastIndexOfSignature=function(u){for(var p=u.charCodeAt(0),y=u.charCodeAt(1),v=u.charCodeAt(2),k=u.charCodeAt(3),E=this.length-4;0<=E;--E)if(this.data[E]===p&&this.data[E+1]===y&&this.data[E+2]===v&&this.data[E+3]===k)return E-this.zero;return-1},d.prototype.readAndCheckSignature=function(u){var p=u.charCodeAt(0),y=u.charCodeAt(1),v=u.charCodeAt(2),k=u.charCodeAt(3),E=this.readData(4);return p===E[0]&&y===E[1]&&v===E[2]&&k===E[3]},d.prototype.readData=function(u){if(this.checkOffset(u),u===0)return[];var p=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,p},a.exports=d},{"../utils":32,"./DataReader":18}],18:[function(i,a,l){var c=i("../utils");function d(u){this.data=u,this.length=u.length,this.index=0,this.zero=0}d.prototype={checkOffset:function(u){this.checkIndex(this.index+u)},checkIndex:function(u){if(this.length<this.zero+u||u<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+u+"). Corrupted zip ?")},setIndex:function(u){this.checkIndex(u),this.index=u},skip:function(u){this.setIndex(this.index+u)},byteAt:function(){},readInt:function(u){var p,y=0;for(this.checkOffset(u),p=this.index+u-1;p>=this.index;p--)y=(y<<8)+this.byteAt(p);return this.index+=u,y},readString:function(u){return c.transformTo("string",this.readData(u))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var u=this.readInt(4);return new Date(Date.UTC(1980+(u>>25&127),(u>>21&15)-1,u>>16&31,u>>11&31,u>>5&63,(31&u)<<1))}},a.exports=d},{"../utils":32}],19:[function(i,a,l){var c=i("./Uint8ArrayReader");function d(u){c.call(this,u)}i("../utils").inherits(d,c),d.prototype.readData=function(u){this.checkOffset(u);var p=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,p},a.exports=d},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(i,a,l){var c=i("./DataReader");function d(u){c.call(this,u)}i("../utils").inherits(d,c),d.prototype.byteAt=function(u){return this.data.charCodeAt(this.zero+u)},d.prototype.lastIndexOfSignature=function(u){return this.data.lastIndexOf(u)-this.zero},d.prototype.readAndCheckSignature=function(u){return u===this.readData(4)},d.prototype.readData=function(u){this.checkOffset(u);var p=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,p},a.exports=d},{"../utils":32,"./DataReader":18}],21:[function(i,a,l){var c=i("./ArrayReader");function d(u){c.call(this,u)}i("../utils").inherits(d,c),d.prototype.readData=function(u){if(this.checkOffset(u),u===0)return new Uint8Array(0);var p=this.data.subarray(this.zero+this.index,this.zero+this.index+u);return this.index+=u,p},a.exports=d},{"../utils":32,"./ArrayReader":17}],22:[function(i,a,l){var c=i("../utils"),d=i("../support"),u=i("./ArrayReader"),p=i("./StringReader"),y=i("./NodeBufferReader"),v=i("./Uint8ArrayReader");a.exports=function(k){var E=c.getTypeOf(k);return c.checkSupport(E),E!=="string"||d.uint8array?E==="nodebuffer"?new y(k):d.uint8array?new v(c.transformTo("uint8array",k)):new u(c.transformTo("array",k)):new p(k)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(i,a,l){l.LOCAL_FILE_HEADER="PK",l.CENTRAL_FILE_HEADER="PK",l.CENTRAL_DIRECTORY_END="PK",l.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",l.ZIP64_CENTRAL_DIRECTORY_END="PK",l.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(i,a,l){var c=i("./GenericWorker"),d=i("../utils");function u(p){c.call(this,"ConvertWorker to "+p),this.destType=p}d.inherits(u,c),u.prototype.processChunk=function(p){this.push({data:d.transformTo(this.destType,p.data),meta:p.meta})},a.exports=u},{"../utils":32,"./GenericWorker":28}],25:[function(i,a,l){var c=i("./GenericWorker"),d=i("../crc32");function u(){c.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}i("../utils").inherits(u,c),u.prototype.processChunk=function(p){this.streamInfo.crc32=d(p.data,this.streamInfo.crc32||0),this.push(p)},a.exports=u},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(i,a,l){var c=i("../utils"),d=i("./GenericWorker");function u(p){d.call(this,"DataLengthProbe for "+p),this.propName=p,this.withStreamInfo(p,0)}c.inherits(u,d),u.prototype.processChunk=function(p){if(p){var y=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=y+p.data.length}d.prototype.processChunk.call(this,p)},a.exports=u},{"../utils":32,"./GenericWorker":28}],27:[function(i,a,l){var c=i("../utils"),d=i("./GenericWorker");function u(p){d.call(this,"DataWorker");var y=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,p.then(function(v){y.dataIsReady=!0,y.data=v,y.max=v&&v.length||0,y.type=c.getTypeOf(v),y.isPaused||y._tickAndRepeat()},function(v){y.error(v)})}c.inherits(u,d),u.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this.data=null},u.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,c.delay(this._tickAndRepeat,[],this)),!0)},u.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(c.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},u.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var p=null,y=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":p=this.data.substring(this.index,y);break;case"uint8array":p=this.data.subarray(this.index,y);break;case"array":case"nodebuffer":p=this.data.slice(this.index,y)}return this.index=y,this.push({data:p,meta:{percent:this.max?this.index/this.max*100:0}})},a.exports=u},{"../utils":32,"./GenericWorker":28}],28:[function(i,a,l){function c(d){this.name=d||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}c.prototype={push:function(d){this.emit("data",d)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(d){this.emit("error",d)}return!0},error:function(d){return!this.isFinished&&(this.isPaused?this.generatedError=d:(this.isFinished=!0,this.emit("error",d),this.previous&&this.previous.error(d),this.cleanUp()),!0)},on:function(d,u){return this._listeners[d].push(u),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(d,u){if(this._listeners[d])for(var p=0;p<this._listeners[d].length;p++)this._listeners[d][p].call(this,u)},pipe:function(d){return d.registerPrevious(this)},registerPrevious:function(d){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=d.streamInfo,this.mergeStreamInfo(),this.previous=d;var u=this;return d.on("data",function(p){u.processChunk(p)}),d.on("end",function(){u.end()}),d.on("error",function(p){u.error(p)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var d=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),d=!0),this.previous&&this.previous.resume(),!d},flush:function(){},processChunk:function(d){this.push(d)},withStreamInfo:function(d,u){return this.extraStreamInfo[d]=u,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var d in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,d)&&(this.streamInfo[d]=this.extraStreamInfo[d])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var d="Worker "+this.name;return this.previous?this.previous+" -> "+d:d}},a.exports=c},{}],29:[function(i,a,l){var c=i("../utils"),d=i("./ConvertWorker"),u=i("./GenericWorker"),p=i("../base64"),y=i("../support"),v=i("../external"),k=null;if(y.nodestream)try{k=i("../nodejs/NodejsStreamOutputAdapter")}catch{}function E(N,g){return new v.Promise(function(j,f){var b=[],w=N._internalType,_=N._outputType,A=N._mimeType;N.on("data",function(B,M){b.push(B),g&&g(M)}).on("error",function(B){b=[],f(B)}).on("end",function(){try{var B=(function(M,$,D){switch(M){case"blob":return c.newBlob(c.transformTo("arraybuffer",$),D);case"base64":return p.encode($);default:return c.transformTo(M,$)}})(_,(function(M,$){var D,le=0,pe=null,H=0;for(D=0;D<$.length;D++)H+=$[D].length;switch(M){case"string":return $.join("");case"array":return Array.prototype.concat.apply([],$);case"uint8array":for(pe=new Uint8Array(H),D=0;D<$.length;D++)pe.set($[D],le),le+=$[D].length;return pe;case"nodebuffer":return Buffer.concat($);default:throw new Error("concat : unsupported type '"+M+"'")}})(w,b),A);j(B)}catch(M){f(M)}b=[]}).resume()})}function C(N,g,j){var f=g;switch(g){case"blob":case"arraybuffer":f="uint8array";break;case"base64":f="string"}try{this._internalType=f,this._outputType=g,this._mimeType=j,c.checkSupport(f),this._worker=N.pipe(new d(f)),N.lock()}catch(b){this._worker=new u("error"),this._worker.error(b)}}C.prototype={accumulate:function(N){return E(this,N)},on:function(N,g){var j=this;return N==="data"?this._worker.on(N,function(f){g.call(j,f.data,f.meta)}):this._worker.on(N,function(){c.delay(g,arguments,j)}),this},resume:function(){return c.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(N){if(c.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new k(this,{objectMode:this._outputType!=="nodebuffer"},N)}},a.exports=C},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(i,a,l){if(l.base64=!0,l.array=!0,l.string=!0,l.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",l.nodebuffer=typeof Buffer<"u",l.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")l.blob=!1;else{var c=new ArrayBuffer(0);try{l.blob=new Blob([c],{type:"application/zip"}).size===0}catch{try{var d=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);d.append(c),l.blob=d.getBlob("application/zip").size===0}catch{l.blob=!1}}}try{l.nodestream=!!i("readable-stream").Readable}catch{l.nodestream=!1}},{"readable-stream":16}],31:[function(i,a,l){for(var c=i("./utils"),d=i("./support"),u=i("./nodejsUtils"),p=i("./stream/GenericWorker"),y=new Array(256),v=0;v<256;v++)y[v]=252<=v?6:248<=v?5:240<=v?4:224<=v?3:192<=v?2:1;y[254]=y[254]=1;function k(){p.call(this,"utf-8 decode"),this.leftOver=null}function E(){p.call(this,"utf-8 encode")}l.utf8encode=function(C){return d.nodebuffer?u.newBufferFrom(C,"utf-8"):(function(N){var g,j,f,b,w,_=N.length,A=0;for(b=0;b<_;b++)(64512&(j=N.charCodeAt(b)))==55296&&b+1<_&&(64512&(f=N.charCodeAt(b+1)))==56320&&(j=65536+(j-55296<<10)+(f-56320),b++),A+=j<128?1:j<2048?2:j<65536?3:4;for(g=d.uint8array?new Uint8Array(A):new Array(A),b=w=0;w<A;b++)(64512&(j=N.charCodeAt(b)))==55296&&b+1<_&&(64512&(f=N.charCodeAt(b+1)))==56320&&(j=65536+(j-55296<<10)+(f-56320),b++),j<128?g[w++]=j:(j<2048?g[w++]=192|j>>>6:(j<65536?g[w++]=224|j>>>12:(g[w++]=240|j>>>18,g[w++]=128|j>>>12&63),g[w++]=128|j>>>6&63),g[w++]=128|63&j);return g})(C)},l.utf8decode=function(C){return d.nodebuffer?c.transformTo("nodebuffer",C).toString("utf-8"):(function(N){var g,j,f,b,w=N.length,_=new Array(2*w);for(g=j=0;g<w;)if((f=N[g++])<128)_[j++]=f;else if(4<(b=y[f]))_[j++]=65533,g+=b-1;else{for(f&=b===2?31:b===3?15:7;1<b&&g<w;)f=f<<6|63&N[g++],b--;1<b?_[j++]=65533:f<65536?_[j++]=f:(f-=65536,_[j++]=55296|f>>10&1023,_[j++]=56320|1023&f)}return _.length!==j&&(_.subarray?_=_.subarray(0,j):_.length=j),c.applyFromCharCode(_)})(C=c.transformTo(d.uint8array?"uint8array":"array",C))},c.inherits(k,p),k.prototype.processChunk=function(C){var N=c.transformTo(d.uint8array?"uint8array":"array",C.data);if(this.leftOver&&this.leftOver.length){if(d.uint8array){var g=N;(N=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),N.set(g,this.leftOver.length)}else N=this.leftOver.concat(N);this.leftOver=null}var j=(function(b,w){var _;for((w=w||b.length)>b.length&&(w=b.length),_=w-1;0<=_&&(192&b[_])==128;)_--;return _<0||_===0?w:_+y[b[_]]>w?_:w})(N),f=N;j!==N.length&&(d.uint8array?(f=N.subarray(0,j),this.leftOver=N.subarray(j,N.length)):(f=N.slice(0,j),this.leftOver=N.slice(j,N.length))),this.push({data:l.utf8decode(f),meta:C.meta})},k.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:l.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},l.Utf8DecodeWorker=k,c.inherits(E,p),E.prototype.processChunk=function(C){this.push({data:l.utf8encode(C.data),meta:C.meta})},l.Utf8EncodeWorker=E},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(i,a,l){var c=i("./support"),d=i("./base64"),u=i("./nodejsUtils"),p=i("./external");function y(g){return g}function v(g,j){for(var f=0;f<g.length;++f)j[f]=255&g.charCodeAt(f);return j}i("setimmediate"),l.newBlob=function(g,j){l.checkSupport("blob");try{return new Blob([g],{type:j})}catch{try{var f=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return f.append(g),f.getBlob(j)}catch{throw new Error("Bug : can't construct the Blob.")}}};var k={stringifyByChunk:function(g,j,f){var b=[],w=0,_=g.length;if(_<=f)return String.fromCharCode.apply(null,g);for(;w<_;)j==="array"||j==="nodebuffer"?b.push(String.fromCharCode.apply(null,g.slice(w,Math.min(w+f,_)))):b.push(String.fromCharCode.apply(null,g.subarray(w,Math.min(w+f,_)))),w+=f;return b.join("")},stringifyByChar:function(g){for(var j="",f=0;f<g.length;f++)j+=String.fromCharCode(g[f]);return j},applyCanBeUsed:{uint8array:(function(){try{return c.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return c.nodebuffer&&String.fromCharCode.apply(null,u.allocBuffer(1)).length===1}catch{return!1}})()}};function E(g){var j=65536,f=l.getTypeOf(g),b=!0;if(f==="uint8array"?b=k.applyCanBeUsed.uint8array:f==="nodebuffer"&&(b=k.applyCanBeUsed.nodebuffer),b)for(;1<j;)try{return k.stringifyByChunk(g,f,j)}catch{j=Math.floor(j/2)}return k.stringifyByChar(g)}function C(g,j){for(var f=0;f<g.length;f++)j[f]=g[f];return j}l.applyFromCharCode=E;var N={};N.string={string:y,array:function(g){return v(g,new Array(g.length))},arraybuffer:function(g){return N.string.uint8array(g).buffer},uint8array:function(g){return v(g,new Uint8Array(g.length))},nodebuffer:function(g){return v(g,u.allocBuffer(g.length))}},N.array={string:E,array:y,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return u.newBufferFrom(g)}},N.arraybuffer={string:function(g){return E(new Uint8Array(g))},array:function(g){return C(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:y,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return u.newBufferFrom(new Uint8Array(g))}},N.uint8array={string:E,array:function(g){return C(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:y,nodebuffer:function(g){return u.newBufferFrom(g)}},N.nodebuffer={string:E,array:function(g){return C(g,new Array(g.length))},arraybuffer:function(g){return N.nodebuffer.uint8array(g).buffer},uint8array:function(g){return C(g,new Uint8Array(g.length))},nodebuffer:y},l.transformTo=function(g,j){if(j=j||"",!g)return j;l.checkSupport(g);var f=l.getTypeOf(j);return N[f][g](j)},l.resolve=function(g){for(var j=g.split("/"),f=[],b=0;b<j.length;b++){var w=j[b];w==="."||w===""&&b!==0&&b!==j.length-1||(w===".."?f.pop():f.push(w))}return f.join("/")},l.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":c.nodebuffer&&u.isBuffer(g)?"nodebuffer":c.uint8array&&g instanceof Uint8Array?"uint8array":c.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},l.checkSupport=function(g){if(!c[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},l.MAX_VALUE_16BITS=65535,l.MAX_VALUE_32BITS=-1,l.pretty=function(g){var j,f,b="";for(f=0;f<(g||"").length;f++)b+="\\x"+((j=g.charCodeAt(f))<16?"0":"")+j.toString(16).toUpperCase();return b},l.delay=function(g,j,f){setImmediate(function(){g.apply(f||null,j||[])})},l.inherits=function(g,j){function f(){}f.prototype=j.prototype,g.prototype=new f},l.extend=function(){var g,j,f={};for(g=0;g<arguments.length;g++)for(j in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],j)&&f[j]===void 0&&(f[j]=arguments[g][j]);return f},l.prepareContent=function(g,j,f,b,w){return p.Promise.resolve(j).then(function(_){return c.blob&&(_ instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(_))!==-1)&&typeof FileReader<"u"?new p.Promise(function(A,B){var M=new FileReader;M.onload=function($){A($.target.result)},M.onerror=function($){B($.target.error)},M.readAsArrayBuffer(_)}):_}).then(function(_){var A=l.getTypeOf(_);return A?(A==="arraybuffer"?_=l.transformTo("uint8array",_):A==="string"&&(w?_=d.decode(_):f&&b!==!0&&(_=(function(B){return v(B,c.uint8array?new Uint8Array(B.length):new Array(B.length))})(_))),_):p.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(i,a,l){var c=i("./reader/readerFor"),d=i("./utils"),u=i("./signature"),p=i("./zipEntry"),y=i("./support");function v(k){this.files=[],this.loadOptions=k}v.prototype={checkSignature:function(k){if(!this.reader.readAndCheckSignature(k)){this.reader.index-=4;var E=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+d.pretty(E)+", expected "+d.pretty(k)+")")}},isSignature:function(k,E){var C=this.reader.index;this.reader.setIndex(k);var N=this.reader.readString(4)===E;return this.reader.setIndex(C),N},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var k=this.reader.readData(this.zipCommentLength),E=y.uint8array?"uint8array":"array",C=d.transformTo(E,k);this.zipComment=this.loadOptions.decodeFileName(C)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var k,E,C,N=this.zip64EndOfCentralSize-44;0<N;)k=this.reader.readInt(2),E=this.reader.readInt(4),C=this.reader.readData(E),this.zip64ExtensibleData[k]={id:k,length:E,value:C}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var k,E;for(k=0;k<this.files.length;k++)E=this.files[k],this.reader.setIndex(E.localHeaderOffset),this.checkSignature(u.LOCAL_FILE_HEADER),E.readLocalPart(this.reader),E.handleUTF8(),E.processAttributes()},readCentralDir:function(){var k;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(u.CENTRAL_FILE_HEADER);)(k=new p({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(k);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var k=this.reader.lastIndexOfSignature(u.CENTRAL_DIRECTORY_END);if(k<0)throw this.isSignature(0,u.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(k);var E=k;if(this.checkSignature(u.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===d.MAX_VALUE_16BITS||this.diskWithCentralDirStart===d.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===d.MAX_VALUE_16BITS||this.centralDirRecords===d.MAX_VALUE_16BITS||this.centralDirSize===d.MAX_VALUE_32BITS||this.centralDirOffset===d.MAX_VALUE_32BITS){if(this.zip64=!0,(k=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(k),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,u.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var C=this.centralDirOffset+this.centralDirSize;this.zip64&&(C+=20,C+=12+this.zip64EndOfCentralSize);var N=E-C;if(0<N)this.isSignature(E,u.CENTRAL_FILE_HEADER)||(this.reader.zero=N);else if(N<0)throw new Error("Corrupted zip: missing "+Math.abs(N)+" bytes.")},prepareReader:function(k){this.reader=c(k)},load:function(k){this.prepareReader(k),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},a.exports=v},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(i,a,l){var c=i("./reader/readerFor"),d=i("./utils"),u=i("./compressedObject"),p=i("./crc32"),y=i("./utf8"),v=i("./compressions"),k=i("./support");function E(C,N){this.options=C,this.loadOptions=N}E.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(C){var N,g;if(C.skip(22),this.fileNameLength=C.readInt(2),g=C.readInt(2),this.fileName=C.readData(this.fileNameLength),C.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((N=(function(j){for(var f in v)if(Object.prototype.hasOwnProperty.call(v,f)&&v[f].magic===j)return v[f];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+d.pretty(this.compressionMethod)+" unknown (inner file : "+d.transformTo("string",this.fileName)+")");this.decompressed=new u(this.compressedSize,this.uncompressedSize,this.crc32,N,C.readData(this.compressedSize))},readCentralPart:function(C){this.versionMadeBy=C.readInt(2),C.skip(2),this.bitFlag=C.readInt(2),this.compressionMethod=C.readString(2),this.date=C.readDate(),this.crc32=C.readInt(4),this.compressedSize=C.readInt(4),this.uncompressedSize=C.readInt(4);var N=C.readInt(2);if(this.extraFieldsLength=C.readInt(2),this.fileCommentLength=C.readInt(2),this.diskNumberStart=C.readInt(2),this.internalFileAttributes=C.readInt(2),this.externalFileAttributes=C.readInt(4),this.localHeaderOffset=C.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");C.skip(N),this.readExtraFields(C),this.parseZIP64ExtraField(C),this.fileComment=C.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var C=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),C==0&&(this.dosPermissions=63&this.externalFileAttributes),C==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var C=c(this.extraFields[1].value);this.uncompressedSize===d.MAX_VALUE_32BITS&&(this.uncompressedSize=C.readInt(8)),this.compressedSize===d.MAX_VALUE_32BITS&&(this.compressedSize=C.readInt(8)),this.localHeaderOffset===d.MAX_VALUE_32BITS&&(this.localHeaderOffset=C.readInt(8)),this.diskNumberStart===d.MAX_VALUE_32BITS&&(this.diskNumberStart=C.readInt(4))}},readExtraFields:function(C){var N,g,j,f=C.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});C.index+4<f;)N=C.readInt(2),g=C.readInt(2),j=C.readData(g),this.extraFields[N]={id:N,length:g,value:j};C.setIndex(f)},handleUTF8:function(){var C=k.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=y.utf8decode(this.fileName),this.fileCommentStr=y.utf8decode(this.fileComment);else{var N=this.findExtraFieldUnicodePath();if(N!==null)this.fileNameStr=N;else{var g=d.transformTo(C,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var j=this.findExtraFieldUnicodeComment();if(j!==null)this.fileCommentStr=j;else{var f=d.transformTo(C,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(f)}}},findExtraFieldUnicodePath:function(){var C=this.extraFields[28789];if(C){var N=c(C.value);return N.readInt(1)!==1||p(this.fileName)!==N.readInt(4)?null:y.utf8decode(N.readData(C.length-5))}return null},findExtraFieldUnicodeComment:function(){var C=this.extraFields[25461];if(C){var N=c(C.value);return N.readInt(1)!==1||p(this.fileComment)!==N.readInt(4)?null:y.utf8decode(N.readData(C.length-5))}return null}},a.exports=E},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(i,a,l){function c(N,g,j){this.name=N,this.dir=j.dir,this.date=j.date,this.comment=j.comment,this.unixPermissions=j.unixPermissions,this.dosPermissions=j.dosPermissions,this._data=g,this._dataBinary=j.binary,this.options={compression:j.compression,compressionOptions:j.compressionOptions}}var d=i("./stream/StreamHelper"),u=i("./stream/DataWorker"),p=i("./utf8"),y=i("./compressedObject"),v=i("./stream/GenericWorker");c.prototype={internalStream:function(N){var g=null,j="string";try{if(!N)throw new Error("No output type specified.");var f=(j=N.toLowerCase())==="string"||j==="text";j!=="binarystring"&&j!=="text"||(j="string"),g=this._decompressWorker();var b=!this._dataBinary;b&&!f&&(g=g.pipe(new p.Utf8EncodeWorker)),!b&&f&&(g=g.pipe(new p.Utf8DecodeWorker))}catch(w){(g=new v("error")).error(w)}return new d(g,j,"")},async:function(N,g){return this.internalStream(N).accumulate(g)},nodeStream:function(N,g){return this.internalStream(N||"nodebuffer").toNodejsStream(g)},_compressWorker:function(N,g){if(this._data instanceof y&&this._data.compression.magic===N.magic)return this._data.getCompressedWorker();var j=this._decompressWorker();return this._dataBinary||(j=j.pipe(new p.Utf8EncodeWorker)),y.createWorkerFrom(j,N,g)},_decompressWorker:function(){return this._data instanceof y?this._data.getContentWorker():this._data instanceof v?this._data:new u(this._data)}};for(var k=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],E=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},C=0;C<k.length;C++)c.prototype[k[C]]=E;a.exports=c},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(i,a,l){(function(c){var d,u,p=c.MutationObserver||c.WebKitMutationObserver;if(p){var y=0,v=new p(N),k=c.document.createTextNode("");v.observe(k,{characterData:!0}),d=function(){k.data=y=++y%2}}else if(c.setImmediate||c.MessageChannel===void 0)d="document"in c&&"onreadystatechange"in c.document.createElement("script")?function(){var g=c.document.createElement("script");g.onreadystatechange=function(){N(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},c.document.documentElement.appendChild(g)}:function(){setTimeout(N,0)};else{var E=new c.MessageChannel;E.port1.onmessage=N,d=function(){E.port2.postMessage(0)}}var C=[];function N(){var g,j;u=!0;for(var f=C.length;f;){for(j=C,C=[],g=-1;++g<f;)j[g]();f=C.length}u=!1}a.exports=function(g){C.push(g)!==1||u||d()}}).call(this,typeof wn<"u"?wn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(i,a,l){var c=i("immediate");function d(){}var u={},p=["REJECTED"],y=["FULFILLED"],v=["PENDING"];function k(f){if(typeof f!="function")throw new TypeError("resolver must be a function");this.state=v,this.queue=[],this.outcome=void 0,f!==d&&g(this,f)}function E(f,b,w){this.promise=f,typeof b=="function"&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),typeof w=="function"&&(this.onRejected=w,this.callRejected=this.otherCallRejected)}function C(f,b,w){c(function(){var _;try{_=b(w)}catch(A){return u.reject(f,A)}_===f?u.reject(f,new TypeError("Cannot resolve promise with itself")):u.resolve(f,_)})}function N(f){var b=f&&f.then;if(f&&(typeof f=="object"||typeof f=="function")&&typeof b=="function")return function(){b.apply(f,arguments)}}function g(f,b){var w=!1;function _(M){w||(w=!0,u.reject(f,M))}function A(M){w||(w=!0,u.resolve(f,M))}var B=j(function(){b(A,_)});B.status==="error"&&_(B.value)}function j(f,b){var w={};try{w.value=f(b),w.status="success"}catch(_){w.status="error",w.value=_}return w}(a.exports=k).prototype.finally=function(f){if(typeof f!="function")return this;var b=this.constructor;return this.then(function(w){return b.resolve(f()).then(function(){return w})},function(w){return b.resolve(f()).then(function(){throw w})})},k.prototype.catch=function(f){return this.then(null,f)},k.prototype.then=function(f,b){if(typeof f!="function"&&this.state===y||typeof b!="function"&&this.state===p)return this;var w=new this.constructor(d);return this.state!==v?C(w,this.state===y?f:b,this.outcome):this.queue.push(new E(w,f,b)),w},E.prototype.callFulfilled=function(f){u.resolve(this.promise,f)},E.prototype.otherCallFulfilled=function(f){C(this.promise,this.onFulfilled,f)},E.prototype.callRejected=function(f){u.reject(this.promise,f)},E.prototype.otherCallRejected=function(f){C(this.promise,this.onRejected,f)},u.resolve=function(f,b){var w=j(N,b);if(w.status==="error")return u.reject(f,w.value);var _=w.value;if(_)g(f,_);else{f.state=y,f.outcome=b;for(var A=-1,B=f.queue.length;++A<B;)f.queue[A].callFulfilled(b)}return f},u.reject=function(f,b){f.state=p,f.outcome=b;for(var w=-1,_=f.queue.length;++w<_;)f.queue[w].callRejected(b);return f},k.resolve=function(f){return f instanceof this?f:u.resolve(new this(d),f)},k.reject=function(f){var b=new this(d);return u.reject(b,f)},k.all=function(f){var b=this;if(Object.prototype.toString.call(f)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=f.length,_=!1;if(!w)return this.resolve([]);for(var A=new Array(w),B=0,M=-1,$=new this(d);++M<w;)D(f[M],M);return $;function D(le,pe){b.resolve(le).then(function(H){A[pe]=H,++B!==w||_||(_=!0,u.resolve($,A))},function(H){_||(_=!0,u.reject($,H))})}},k.race=function(f){var b=this;if(Object.prototype.toString.call(f)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=f.length,_=!1;if(!w)return this.resolve([]);for(var A=-1,B=new this(d);++A<w;)M=f[A],b.resolve(M).then(function($){_||(_=!0,u.resolve(B,$))},function($){_||(_=!0,u.reject(B,$))});var M;return B}},{immediate:36}],38:[function(i,a,l){var c={};(0,i("./lib/utils/common").assign)(c,i("./lib/deflate"),i("./lib/inflate"),i("./lib/zlib/constants")),a.exports=c},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(i,a,l){var c=i("./zlib/deflate"),d=i("./utils/common"),u=i("./utils/strings"),p=i("./zlib/messages"),y=i("./zlib/zstream"),v=Object.prototype.toString,k=0,E=-1,C=0,N=8;function g(f){if(!(this instanceof g))return new g(f);this.options=d.assign({level:E,method:N,chunkSize:16384,windowBits:15,memLevel:8,strategy:C,to:""},f||{});var b=this.options;b.raw&&0<b.windowBits?b.windowBits=-b.windowBits:b.gzip&&0<b.windowBits&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var w=c.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(w!==k)throw new Error(p[w]);if(b.header&&c.deflateSetHeader(this.strm,b.header),b.dictionary){var _;if(_=typeof b.dictionary=="string"?u.string2buf(b.dictionary):v.call(b.dictionary)==="[object ArrayBuffer]"?new Uint8Array(b.dictionary):b.dictionary,(w=c.deflateSetDictionary(this.strm,_))!==k)throw new Error(p[w]);this._dict_set=!0}}function j(f,b){var w=new g(b);if(w.push(f,!0),w.err)throw w.msg||p[w.err];return w.result}g.prototype.push=function(f,b){var w,_,A=this.strm,B=this.options.chunkSize;if(this.ended)return!1;_=b===~~b?b:b===!0?4:0,typeof f=="string"?A.input=u.string2buf(f):v.call(f)==="[object ArrayBuffer]"?A.input=new Uint8Array(f):A.input=f,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new d.Buf8(B),A.next_out=0,A.avail_out=B),(w=c.deflate(A,_))!==1&&w!==k)return this.onEnd(w),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||_!==4&&_!==2)||(this.options.to==="string"?this.onData(u.buf2binstring(d.shrinkBuf(A.output,A.next_out))):this.onData(d.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&w!==1);return _===4?(w=c.deflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===k):_!==2||(this.onEnd(k),!(A.avail_out=0))},g.prototype.onData=function(f){this.chunks.push(f)},g.prototype.onEnd=function(f){f===k&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=d.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg},l.Deflate=g,l.deflate=j,l.deflateRaw=function(f,b){return(b=b||{}).raw=!0,j(f,b)},l.gzip=function(f,b){return(b=b||{}).gzip=!0,j(f,b)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(i,a,l){var c=i("./zlib/inflate"),d=i("./utils/common"),u=i("./utils/strings"),p=i("./zlib/constants"),y=i("./zlib/messages"),v=i("./zlib/zstream"),k=i("./zlib/gzheader"),E=Object.prototype.toString;function C(g){if(!(this instanceof C))return new C(g);this.options=d.assign({chunkSize:16384,windowBits:0,to:""},g||{});var j=this.options;j.raw&&0<=j.windowBits&&j.windowBits<16&&(j.windowBits=-j.windowBits,j.windowBits===0&&(j.windowBits=-15)),!(0<=j.windowBits&&j.windowBits<16)||g&&g.windowBits||(j.windowBits+=32),15<j.windowBits&&j.windowBits<48&&(15&j.windowBits)==0&&(j.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v,this.strm.avail_out=0;var f=c.inflateInit2(this.strm,j.windowBits);if(f!==p.Z_OK)throw new Error(y[f]);this.header=new k,c.inflateGetHeader(this.strm,this.header)}function N(g,j){var f=new C(j);if(f.push(g,!0),f.err)throw f.msg||y[f.err];return f.result}C.prototype.push=function(g,j){var f,b,w,_,A,B,M=this.strm,$=this.options.chunkSize,D=this.options.dictionary,le=!1;if(this.ended)return!1;b=j===~~j?j:j===!0?p.Z_FINISH:p.Z_NO_FLUSH,typeof g=="string"?M.input=u.binstring2buf(g):E.call(g)==="[object ArrayBuffer]"?M.input=new Uint8Array(g):M.input=g,M.next_in=0,M.avail_in=M.input.length;do{if(M.avail_out===0&&(M.output=new d.Buf8($),M.next_out=0,M.avail_out=$),(f=c.inflate(M,p.Z_NO_FLUSH))===p.Z_NEED_DICT&&D&&(B=typeof D=="string"?u.string2buf(D):E.call(D)==="[object ArrayBuffer]"?new Uint8Array(D):D,f=c.inflateSetDictionary(this.strm,B)),f===p.Z_BUF_ERROR&&le===!0&&(f=p.Z_OK,le=!1),f!==p.Z_STREAM_END&&f!==p.Z_OK)return this.onEnd(f),!(this.ended=!0);M.next_out&&(M.avail_out!==0&&f!==p.Z_STREAM_END&&(M.avail_in!==0||b!==p.Z_FINISH&&b!==p.Z_SYNC_FLUSH)||(this.options.to==="string"?(w=u.utf8border(M.output,M.next_out),_=M.next_out-w,A=u.buf2string(M.output,w),M.next_out=_,M.avail_out=$-_,_&&d.arraySet(M.output,M.output,w,_,0),this.onData(A)):this.onData(d.shrinkBuf(M.output,M.next_out)))),M.avail_in===0&&M.avail_out===0&&(le=!0)}while((0<M.avail_in||M.avail_out===0)&&f!==p.Z_STREAM_END);return f===p.Z_STREAM_END&&(b=p.Z_FINISH),b===p.Z_FINISH?(f=c.inflateEnd(this.strm),this.onEnd(f),this.ended=!0,f===p.Z_OK):b!==p.Z_SYNC_FLUSH||(this.onEnd(p.Z_OK),!(M.avail_out=0))},C.prototype.onData=function(g){this.chunks.push(g)},C.prototype.onEnd=function(g){g===p.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=d.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},l.Inflate=C,l.inflate=N,l.inflateRaw=function(g,j){return(j=j||{}).raw=!0,N(g,j)},l.ungzip=N},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(i,a,l){var c=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";l.assign=function(p){for(var y=Array.prototype.slice.call(arguments,1);y.length;){var v=y.shift();if(v){if(typeof v!="object")throw new TypeError(v+"must be non-object");for(var k in v)v.hasOwnProperty(k)&&(p[k]=v[k])}}return p},l.shrinkBuf=function(p,y){return p.length===y?p:p.subarray?p.subarray(0,y):(p.length=y,p)};var d={arraySet:function(p,y,v,k,E){if(y.subarray&&p.subarray)p.set(y.subarray(v,v+k),E);else for(var C=0;C<k;C++)p[E+C]=y[v+C]},flattenChunks:function(p){var y,v,k,E,C,N;for(y=k=0,v=p.length;y<v;y++)k+=p[y].length;for(N=new Uint8Array(k),y=E=0,v=p.length;y<v;y++)C=p[y],N.set(C,E),E+=C.length;return N}},u={arraySet:function(p,y,v,k,E){for(var C=0;C<k;C++)p[E+C]=y[v+C]},flattenChunks:function(p){return[].concat.apply([],p)}};l.setTyped=function(p){p?(l.Buf8=Uint8Array,l.Buf16=Uint16Array,l.Buf32=Int32Array,l.assign(l,d)):(l.Buf8=Array,l.Buf16=Array,l.Buf32=Array,l.assign(l,u))},l.setTyped(c)},{}],42:[function(i,a,l){var c=i("./common"),d=!0,u=!0;try{String.fromCharCode.apply(null,[0])}catch{d=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{u=!1}for(var p=new c.Buf8(256),y=0;y<256;y++)p[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;function v(k,E){if(E<65537&&(k.subarray&&u||!k.subarray&&d))return String.fromCharCode.apply(null,c.shrinkBuf(k,E));for(var C="",N=0;N<E;N++)C+=String.fromCharCode(k[N]);return C}p[254]=p[254]=1,l.string2buf=function(k){var E,C,N,g,j,f=k.length,b=0;for(g=0;g<f;g++)(64512&(C=k.charCodeAt(g)))==55296&&g+1<f&&(64512&(N=k.charCodeAt(g+1)))==56320&&(C=65536+(C-55296<<10)+(N-56320),g++),b+=C<128?1:C<2048?2:C<65536?3:4;for(E=new c.Buf8(b),g=j=0;j<b;g++)(64512&(C=k.charCodeAt(g)))==55296&&g+1<f&&(64512&(N=k.charCodeAt(g+1)))==56320&&(C=65536+(C-55296<<10)+(N-56320),g++),C<128?E[j++]=C:(C<2048?E[j++]=192|C>>>6:(C<65536?E[j++]=224|C>>>12:(E[j++]=240|C>>>18,E[j++]=128|C>>>12&63),E[j++]=128|C>>>6&63),E[j++]=128|63&C);return E},l.buf2binstring=function(k){return v(k,k.length)},l.binstring2buf=function(k){for(var E=new c.Buf8(k.length),C=0,N=E.length;C<N;C++)E[C]=k.charCodeAt(C);return E},l.buf2string=function(k,E){var C,N,g,j,f=E||k.length,b=new Array(2*f);for(C=N=0;C<f;)if((g=k[C++])<128)b[N++]=g;else if(4<(j=p[g]))b[N++]=65533,C+=j-1;else{for(g&=j===2?31:j===3?15:7;1<j&&C<f;)g=g<<6|63&k[C++],j--;1<j?b[N++]=65533:g<65536?b[N++]=g:(g-=65536,b[N++]=55296|g>>10&1023,b[N++]=56320|1023&g)}return v(b,N)},l.utf8border=function(k,E){var C;for((E=E||k.length)>k.length&&(E=k.length),C=E-1;0<=C&&(192&k[C])==128;)C--;return C<0||C===0?E:C+p[k[C]]>E?C:E}},{"./common":41}],43:[function(i,a,l){a.exports=function(c,d,u,p){for(var y=65535&c|0,v=c>>>16&65535|0,k=0;u!==0;){for(u-=k=2e3<u?2e3:u;v=v+(y=y+d[p++]|0)|0,--k;);y%=65521,v%=65521}return y|v<<16|0}},{}],44:[function(i,a,l){a.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(i,a,l){var c=(function(){for(var d,u=[],p=0;p<256;p++){d=p;for(var y=0;y<8;y++)d=1&d?3988292384^d>>>1:d>>>1;u[p]=d}return u})();a.exports=function(d,u,p,y){var v=c,k=y+p;d^=-1;for(var E=y;E<k;E++)d=d>>>8^v[255&(d^u[E])];return-1^d}},{}],46:[function(i,a,l){var c,d=i("../utils/common"),u=i("./trees"),p=i("./adler32"),y=i("./crc32"),v=i("./messages"),k=0,E=4,C=0,N=-2,g=-1,j=4,f=2,b=8,w=9,_=286,A=30,B=19,M=2*_+1,$=15,D=3,le=258,pe=le+D+1,H=42,q=113,T=1,Z=2,Q=3,Y=4;function ne(z,fe){return z.msg=v[fe],fe}function J(z){return(z<<1)-(4<z?9:0)}function ue(z){for(var fe=z.length;0<=--fe;)z[fe]=0}function W(z){var fe=z.state,F=fe.pending;F>z.avail_out&&(F=z.avail_out),F!==0&&(d.arraySet(z.output,fe.pending_buf,fe.pending_out,F,z.next_out),z.next_out+=F,fe.pending_out+=F,z.total_out+=F,z.avail_out-=F,fe.pending-=F,fe.pending===0&&(fe.pending_out=0))}function U(z,fe){u._tr_flush_block(z,0<=z.block_start?z.block_start:-1,z.strstart-z.block_start,fe),z.block_start=z.strstart,W(z.strm)}function re(z,fe){z.pending_buf[z.pending++]=fe}function ae(z,fe){z.pending_buf[z.pending++]=fe>>>8&255,z.pending_buf[z.pending++]=255&fe}function ye(z,fe){var F,x,m=z.max_chain_length,R=z.strstart,X=z.prev_length,oe=z.nice_match,se=z.strstart>z.w_size-pe?z.strstart-(z.w_size-pe):0,ge=z.window,ke=z.w_mask,Ce=z.prev,Fe=z.strstart+le,He=ge[R+X-1],Ye=ge[R+X];z.prev_length>=z.good_match&&(m>>=2),oe>z.lookahead&&(oe=z.lookahead);do if(ge[(F=fe)+X]===Ye&&ge[F+X-1]===He&&ge[F]===ge[R]&&ge[++F]===ge[R+1]){R+=2,F++;do;while(ge[++R]===ge[++F]&&ge[++R]===ge[++F]&&ge[++R]===ge[++F]&&ge[++R]===ge[++F]&&ge[++R]===ge[++F]&&ge[++R]===ge[++F]&&ge[++R]===ge[++F]&&ge[++R]===ge[++F]&&R<Fe);if(x=le-(Fe-R),R=Fe-le,X<x){if(z.match_start=fe,oe<=(X=x))break;He=ge[R+X-1],Ye=ge[R+X]}}while((fe=Ce[fe&ke])>se&&--m!=0);return X<=z.lookahead?X:z.lookahead}function ce(z){var fe,F,x,m,R,X,oe,se,ge,ke,Ce=z.w_size;do{if(m=z.window_size-z.lookahead-z.strstart,z.strstart>=Ce+(Ce-pe)){for(d.arraySet(z.window,z.window,Ce,Ce,0),z.match_start-=Ce,z.strstart-=Ce,z.block_start-=Ce,fe=F=z.hash_size;x=z.head[--fe],z.head[fe]=Ce<=x?x-Ce:0,--F;);for(fe=F=Ce;x=z.prev[--fe],z.prev[fe]=Ce<=x?x-Ce:0,--F;);m+=Ce}if(z.strm.avail_in===0)break;if(X=z.strm,oe=z.window,se=z.strstart+z.lookahead,ge=m,ke=void 0,ke=X.avail_in,ge<ke&&(ke=ge),F=ke===0?0:(X.avail_in-=ke,d.arraySet(oe,X.input,X.next_in,ke,se),X.state.wrap===1?X.adler=p(X.adler,oe,ke,se):X.state.wrap===2&&(X.adler=y(X.adler,oe,ke,se)),X.next_in+=ke,X.total_in+=ke,ke),z.lookahead+=F,z.lookahead+z.insert>=D)for(R=z.strstart-z.insert,z.ins_h=z.window[R],z.ins_h=(z.ins_h<<z.hash_shift^z.window[R+1])&z.hash_mask;z.insert&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[R+D-1])&z.hash_mask,z.prev[R&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=R,R++,z.insert--,!(z.lookahead+z.insert<D)););}while(z.lookahead<pe&&z.strm.avail_in!==0)}function P(z,fe){for(var F,x;;){if(z.lookahead<pe){if(ce(z),z.lookahead<pe&&fe===k)return T;if(z.lookahead===0)break}if(F=0,z.lookahead>=D&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+D-1])&z.hash_mask,F=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),F!==0&&z.strstart-F<=z.w_size-pe&&(z.match_length=ye(z,F)),z.match_length>=D)if(x=u._tr_tally(z,z.strstart-z.match_start,z.match_length-D),z.lookahead-=z.match_length,z.match_length<=z.max_lazy_match&&z.lookahead>=D){for(z.match_length--;z.strstart++,z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+D-1])&z.hash_mask,F=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart,--z.match_length!=0;);z.strstart++}else z.strstart+=z.match_length,z.match_length=0,z.ins_h=z.window[z.strstart],z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+1])&z.hash_mask;else x=u._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++;if(x&&(U(z,!1),z.strm.avail_out===0))return T}return z.insert=z.strstart<D-1?z.strstart:D-1,fe===E?(U(z,!0),z.strm.avail_out===0?Q:Y):z.last_lit&&(U(z,!1),z.strm.avail_out===0)?T:Z}function O(z,fe){for(var F,x,m;;){if(z.lookahead<pe){if(ce(z),z.lookahead<pe&&fe===k)return T;if(z.lookahead===0)break}if(F=0,z.lookahead>=D&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+D-1])&z.hash_mask,F=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),z.prev_length=z.match_length,z.prev_match=z.match_start,z.match_length=D-1,F!==0&&z.prev_length<z.max_lazy_match&&z.strstart-F<=z.w_size-pe&&(z.match_length=ye(z,F),z.match_length<=5&&(z.strategy===1||z.match_length===D&&4096<z.strstart-z.match_start)&&(z.match_length=D-1)),z.prev_length>=D&&z.match_length<=z.prev_length){for(m=z.strstart+z.lookahead-D,x=u._tr_tally(z,z.strstart-1-z.prev_match,z.prev_length-D),z.lookahead-=z.prev_length-1,z.prev_length-=2;++z.strstart<=m&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+D-1])&z.hash_mask,F=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),--z.prev_length!=0;);if(z.match_available=0,z.match_length=D-1,z.strstart++,x&&(U(z,!1),z.strm.avail_out===0))return T}else if(z.match_available){if((x=u._tr_tally(z,0,z.window[z.strstart-1]))&&U(z,!1),z.strstart++,z.lookahead--,z.strm.avail_out===0)return T}else z.match_available=1,z.strstart++,z.lookahead--}return z.match_available&&(x=u._tr_tally(z,0,z.window[z.strstart-1]),z.match_available=0),z.insert=z.strstart<D-1?z.strstart:D-1,fe===E?(U(z,!0),z.strm.avail_out===0?Q:Y):z.last_lit&&(U(z,!1),z.strm.avail_out===0)?T:Z}function te(z,fe,F,x,m){this.good_length=z,this.max_lazy=fe,this.nice_length=F,this.max_chain=x,this.func=m}function ee(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=b,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new d.Buf16(2*M),this.dyn_dtree=new d.Buf16(2*(2*A+1)),this.bl_tree=new d.Buf16(2*(2*B+1)),ue(this.dyn_ltree),ue(this.dyn_dtree),ue(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new d.Buf16($+1),this.heap=new d.Buf16(2*_+1),ue(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new d.Buf16(2*_+1),ue(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function G(z){var fe;return z&&z.state?(z.total_in=z.total_out=0,z.data_type=f,(fe=z.state).pending=0,fe.pending_out=0,fe.wrap<0&&(fe.wrap=-fe.wrap),fe.status=fe.wrap?H:q,z.adler=fe.wrap===2?0:1,fe.last_flush=k,u._tr_init(fe),C):ne(z,N)}function L(z){var fe=G(z);return fe===C&&(function(F){F.window_size=2*F.w_size,ue(F.head),F.max_lazy_match=c[F.level].max_lazy,F.good_match=c[F.level].good_length,F.nice_match=c[F.level].nice_length,F.max_chain_length=c[F.level].max_chain,F.strstart=0,F.block_start=0,F.lookahead=0,F.insert=0,F.match_length=F.prev_length=D-1,F.match_available=0,F.ins_h=0})(z.state),fe}function ie(z,fe,F,x,m,R){if(!z)return N;var X=1;if(fe===g&&(fe=6),x<0?(X=0,x=-x):15<x&&(X=2,x-=16),m<1||w<m||F!==b||x<8||15<x||fe<0||9<fe||R<0||j<R)return ne(z,N);x===8&&(x=9);var oe=new ee;return(z.state=oe).strm=z,oe.wrap=X,oe.gzhead=null,oe.w_bits=x,oe.w_size=1<<oe.w_bits,oe.w_mask=oe.w_size-1,oe.hash_bits=m+7,oe.hash_size=1<<oe.hash_bits,oe.hash_mask=oe.hash_size-1,oe.hash_shift=~~((oe.hash_bits+D-1)/D),oe.window=new d.Buf8(2*oe.w_size),oe.head=new d.Buf16(oe.hash_size),oe.prev=new d.Buf16(oe.w_size),oe.lit_bufsize=1<<m+6,oe.pending_buf_size=4*oe.lit_bufsize,oe.pending_buf=new d.Buf8(oe.pending_buf_size),oe.d_buf=1*oe.lit_bufsize,oe.l_buf=3*oe.lit_bufsize,oe.level=fe,oe.strategy=R,oe.method=F,L(z)}c=[new te(0,0,0,0,function(z,fe){var F=65535;for(F>z.pending_buf_size-5&&(F=z.pending_buf_size-5);;){if(z.lookahead<=1){if(ce(z),z.lookahead===0&&fe===k)return T;if(z.lookahead===0)break}z.strstart+=z.lookahead,z.lookahead=0;var x=z.block_start+F;if((z.strstart===0||z.strstart>=x)&&(z.lookahead=z.strstart-x,z.strstart=x,U(z,!1),z.strm.avail_out===0)||z.strstart-z.block_start>=z.w_size-pe&&(U(z,!1),z.strm.avail_out===0))return T}return z.insert=0,fe===E?(U(z,!0),z.strm.avail_out===0?Q:Y):(z.strstart>z.block_start&&(U(z,!1),z.strm.avail_out),T)}),new te(4,4,8,4,P),new te(4,5,16,8,P),new te(4,6,32,32,P),new te(4,4,16,16,O),new te(8,16,32,32,O),new te(8,16,128,128,O),new te(8,32,128,256,O),new te(32,128,258,1024,O),new te(32,258,258,4096,O)],l.deflateInit=function(z,fe){return ie(z,fe,b,15,8,0)},l.deflateInit2=ie,l.deflateReset=L,l.deflateResetKeep=G,l.deflateSetHeader=function(z,fe){return z&&z.state?z.state.wrap!==2?N:(z.state.gzhead=fe,C):N},l.deflate=function(z,fe){var F,x,m,R;if(!z||!z.state||5<fe||fe<0)return z?ne(z,N):N;if(x=z.state,!z.output||!z.input&&z.avail_in!==0||x.status===666&&fe!==E)return ne(z,z.avail_out===0?-5:N);if(x.strm=z,F=x.last_flush,x.last_flush=fe,x.status===H)if(x.wrap===2)z.adler=0,re(x,31),re(x,139),re(x,8),x.gzhead?(re(x,(x.gzhead.text?1:0)+(x.gzhead.hcrc?2:0)+(x.gzhead.extra?4:0)+(x.gzhead.name?8:0)+(x.gzhead.comment?16:0)),re(x,255&x.gzhead.time),re(x,x.gzhead.time>>8&255),re(x,x.gzhead.time>>16&255),re(x,x.gzhead.time>>24&255),re(x,x.level===9?2:2<=x.strategy||x.level<2?4:0),re(x,255&x.gzhead.os),x.gzhead.extra&&x.gzhead.extra.length&&(re(x,255&x.gzhead.extra.length),re(x,x.gzhead.extra.length>>8&255)),x.gzhead.hcrc&&(z.adler=y(z.adler,x.pending_buf,x.pending,0)),x.gzindex=0,x.status=69):(re(x,0),re(x,0),re(x,0),re(x,0),re(x,0),re(x,x.level===9?2:2<=x.strategy||x.level<2?4:0),re(x,3),x.status=q);else{var X=b+(x.w_bits-8<<4)<<8;X|=(2<=x.strategy||x.level<2?0:x.level<6?1:x.level===6?2:3)<<6,x.strstart!==0&&(X|=32),X+=31-X%31,x.status=q,ae(x,X),x.strstart!==0&&(ae(x,z.adler>>>16),ae(x,65535&z.adler)),z.adler=1}if(x.status===69)if(x.gzhead.extra){for(m=x.pending;x.gzindex<(65535&x.gzhead.extra.length)&&(x.pending!==x.pending_buf_size||(x.gzhead.hcrc&&x.pending>m&&(z.adler=y(z.adler,x.pending_buf,x.pending-m,m)),W(z),m=x.pending,x.pending!==x.pending_buf_size));)re(x,255&x.gzhead.extra[x.gzindex]),x.gzindex++;x.gzhead.hcrc&&x.pending>m&&(z.adler=y(z.adler,x.pending_buf,x.pending-m,m)),x.gzindex===x.gzhead.extra.length&&(x.gzindex=0,x.status=73)}else x.status=73;if(x.status===73)if(x.gzhead.name){m=x.pending;do{if(x.pending===x.pending_buf_size&&(x.gzhead.hcrc&&x.pending>m&&(z.adler=y(z.adler,x.pending_buf,x.pending-m,m)),W(z),m=x.pending,x.pending===x.pending_buf_size)){R=1;break}R=x.gzindex<x.gzhead.name.length?255&x.gzhead.name.charCodeAt(x.gzindex++):0,re(x,R)}while(R!==0);x.gzhead.hcrc&&x.pending>m&&(z.adler=y(z.adler,x.pending_buf,x.pending-m,m)),R===0&&(x.gzindex=0,x.status=91)}else x.status=91;if(x.status===91)if(x.gzhead.comment){m=x.pending;do{if(x.pending===x.pending_buf_size&&(x.gzhead.hcrc&&x.pending>m&&(z.adler=y(z.adler,x.pending_buf,x.pending-m,m)),W(z),m=x.pending,x.pending===x.pending_buf_size)){R=1;break}R=x.gzindex<x.gzhead.comment.length?255&x.gzhead.comment.charCodeAt(x.gzindex++):0,re(x,R)}while(R!==0);x.gzhead.hcrc&&x.pending>m&&(z.adler=y(z.adler,x.pending_buf,x.pending-m,m)),R===0&&(x.status=103)}else x.status=103;if(x.status===103&&(x.gzhead.hcrc?(x.pending+2>x.pending_buf_size&&W(z),x.pending+2<=x.pending_buf_size&&(re(x,255&z.adler),re(x,z.adler>>8&255),z.adler=0,x.status=q)):x.status=q),x.pending!==0){if(W(z),z.avail_out===0)return x.last_flush=-1,C}else if(z.avail_in===0&&J(fe)<=J(F)&&fe!==E)return ne(z,-5);if(x.status===666&&z.avail_in!==0)return ne(z,-5);if(z.avail_in!==0||x.lookahead!==0||fe!==k&&x.status!==666){var oe=x.strategy===2?(function(se,ge){for(var ke;;){if(se.lookahead===0&&(ce(se),se.lookahead===0)){if(ge===k)return T;break}if(se.match_length=0,ke=u._tr_tally(se,0,se.window[se.strstart]),se.lookahead--,se.strstart++,ke&&(U(se,!1),se.strm.avail_out===0))return T}return se.insert=0,ge===E?(U(se,!0),se.strm.avail_out===0?Q:Y):se.last_lit&&(U(se,!1),se.strm.avail_out===0)?T:Z})(x,fe):x.strategy===3?(function(se,ge){for(var ke,Ce,Fe,He,Ye=se.window;;){if(se.lookahead<=le){if(ce(se),se.lookahead<=le&&ge===k)return T;if(se.lookahead===0)break}if(se.match_length=0,se.lookahead>=D&&0<se.strstart&&(Ce=Ye[Fe=se.strstart-1])===Ye[++Fe]&&Ce===Ye[++Fe]&&Ce===Ye[++Fe]){He=se.strstart+le;do;while(Ce===Ye[++Fe]&&Ce===Ye[++Fe]&&Ce===Ye[++Fe]&&Ce===Ye[++Fe]&&Ce===Ye[++Fe]&&Ce===Ye[++Fe]&&Ce===Ye[++Fe]&&Ce===Ye[++Fe]&&Fe<He);se.match_length=le-(He-Fe),se.match_length>se.lookahead&&(se.match_length=se.lookahead)}if(se.match_length>=D?(ke=u._tr_tally(se,1,se.match_length-D),se.lookahead-=se.match_length,se.strstart+=se.match_length,se.match_length=0):(ke=u._tr_tally(se,0,se.window[se.strstart]),se.lookahead--,se.strstart++),ke&&(U(se,!1),se.strm.avail_out===0))return T}return se.insert=0,ge===E?(U(se,!0),se.strm.avail_out===0?Q:Y):se.last_lit&&(U(se,!1),se.strm.avail_out===0)?T:Z})(x,fe):c[x.level].func(x,fe);if(oe!==Q&&oe!==Y||(x.status=666),oe===T||oe===Q)return z.avail_out===0&&(x.last_flush=-1),C;if(oe===Z&&(fe===1?u._tr_align(x):fe!==5&&(u._tr_stored_block(x,0,0,!1),fe===3&&(ue(x.head),x.lookahead===0&&(x.strstart=0,x.block_start=0,x.insert=0))),W(z),z.avail_out===0))return x.last_flush=-1,C}return fe!==E?C:x.wrap<=0?1:(x.wrap===2?(re(x,255&z.adler),re(x,z.adler>>8&255),re(x,z.adler>>16&255),re(x,z.adler>>24&255),re(x,255&z.total_in),re(x,z.total_in>>8&255),re(x,z.total_in>>16&255),re(x,z.total_in>>24&255)):(ae(x,z.adler>>>16),ae(x,65535&z.adler)),W(z),0<x.wrap&&(x.wrap=-x.wrap),x.pending!==0?C:1)},l.deflateEnd=function(z){var fe;return z&&z.state?(fe=z.state.status)!==H&&fe!==69&&fe!==73&&fe!==91&&fe!==103&&fe!==q&&fe!==666?ne(z,N):(z.state=null,fe===q?ne(z,-3):C):N},l.deflateSetDictionary=function(z,fe){var F,x,m,R,X,oe,se,ge,ke=fe.length;if(!z||!z.state||(R=(F=z.state).wrap)===2||R===1&&F.status!==H||F.lookahead)return N;for(R===1&&(z.adler=p(z.adler,fe,ke,0)),F.wrap=0,ke>=F.w_size&&(R===0&&(ue(F.head),F.strstart=0,F.block_start=0,F.insert=0),ge=new d.Buf8(F.w_size),d.arraySet(ge,fe,ke-F.w_size,F.w_size,0),fe=ge,ke=F.w_size),X=z.avail_in,oe=z.next_in,se=z.input,z.avail_in=ke,z.next_in=0,z.input=fe,ce(F);F.lookahead>=D;){for(x=F.strstart,m=F.lookahead-(D-1);F.ins_h=(F.ins_h<<F.hash_shift^F.window[x+D-1])&F.hash_mask,F.prev[x&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=x,x++,--m;);F.strstart=x,F.lookahead=D-1,ce(F)}return F.strstart+=F.lookahead,F.block_start=F.strstart,F.insert=F.lookahead,F.lookahead=0,F.match_length=F.prev_length=D-1,F.match_available=0,z.next_in=oe,z.input=se,z.avail_in=X,F.wrap=R,C},l.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(i,a,l){a.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(i,a,l){a.exports=function(c,d){var u,p,y,v,k,E,C,N,g,j,f,b,w,_,A,B,M,$,D,le,pe,H,q,T,Z;u=c.state,p=c.next_in,T=c.input,y=p+(c.avail_in-5),v=c.next_out,Z=c.output,k=v-(d-c.avail_out),E=v+(c.avail_out-257),C=u.dmax,N=u.wsize,g=u.whave,j=u.wnext,f=u.window,b=u.hold,w=u.bits,_=u.lencode,A=u.distcode,B=(1<<u.lenbits)-1,M=(1<<u.distbits)-1;e:do{w<15&&(b+=T[p++]<<w,w+=8,b+=T[p++]<<w,w+=8),$=_[b&B];t:for(;;){if(b>>>=D=$>>>24,w-=D,(D=$>>>16&255)===0)Z[v++]=65535&$;else{if(!(16&D)){if((64&D)==0){$=_[(65535&$)+(b&(1<<D)-1)];continue t}if(32&D){u.mode=12;break e}c.msg="invalid literal/length code",u.mode=30;break e}le=65535&$,(D&=15)&&(w<D&&(b+=T[p++]<<w,w+=8),le+=b&(1<<D)-1,b>>>=D,w-=D),w<15&&(b+=T[p++]<<w,w+=8,b+=T[p++]<<w,w+=8),$=A[b&M];r:for(;;){if(b>>>=D=$>>>24,w-=D,!(16&(D=$>>>16&255))){if((64&D)==0){$=A[(65535&$)+(b&(1<<D)-1)];continue r}c.msg="invalid distance code",u.mode=30;break e}if(pe=65535&$,w<(D&=15)&&(b+=T[p++]<<w,(w+=8)<D&&(b+=T[p++]<<w,w+=8)),C<(pe+=b&(1<<D)-1)){c.msg="invalid distance too far back",u.mode=30;break e}if(b>>>=D,w-=D,(D=v-k)<pe){if(g<(D=pe-D)&&u.sane){c.msg="invalid distance too far back",u.mode=30;break e}if(q=f,(H=0)===j){if(H+=N-D,D<le){for(le-=D;Z[v++]=f[H++],--D;);H=v-pe,q=Z}}else if(j<D){if(H+=N+j-D,(D-=j)<le){for(le-=D;Z[v++]=f[H++],--D;);if(H=0,j<le){for(le-=D=j;Z[v++]=f[H++],--D;);H=v-pe,q=Z}}}else if(H+=j-D,D<le){for(le-=D;Z[v++]=f[H++],--D;);H=v-pe,q=Z}for(;2<le;)Z[v++]=q[H++],Z[v++]=q[H++],Z[v++]=q[H++],le-=3;le&&(Z[v++]=q[H++],1<le&&(Z[v++]=q[H++]))}else{for(H=v-pe;Z[v++]=Z[H++],Z[v++]=Z[H++],Z[v++]=Z[H++],2<(le-=3););le&&(Z[v++]=Z[H++],1<le&&(Z[v++]=Z[H++]))}break}}break}}while(p<y&&v<E);p-=le=w>>3,b&=(1<<(w-=le<<3))-1,c.next_in=p,c.next_out=v,c.avail_in=p<y?y-p+5:5-(p-y),c.avail_out=v<E?E-v+257:257-(v-E),u.hold=b,u.bits=w}},{}],49:[function(i,a,l){var c=i("../utils/common"),d=i("./adler32"),u=i("./crc32"),p=i("./inffast"),y=i("./inftrees"),v=1,k=2,E=0,C=-2,N=1,g=852,j=592;function f(H){return(H>>>24&255)+(H>>>8&65280)+((65280&H)<<8)+((255&H)<<24)}function b(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new c.Buf16(320),this.work=new c.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function w(H){var q;return H&&H.state?(q=H.state,H.total_in=H.total_out=q.total=0,H.msg="",q.wrap&&(H.adler=1&q.wrap),q.mode=N,q.last=0,q.havedict=0,q.dmax=32768,q.head=null,q.hold=0,q.bits=0,q.lencode=q.lendyn=new c.Buf32(g),q.distcode=q.distdyn=new c.Buf32(j),q.sane=1,q.back=-1,E):C}function _(H){var q;return H&&H.state?((q=H.state).wsize=0,q.whave=0,q.wnext=0,w(H)):C}function A(H,q){var T,Z;return H&&H.state?(Z=H.state,q<0?(T=0,q=-q):(T=1+(q>>4),q<48&&(q&=15)),q&&(q<8||15<q)?C:(Z.window!==null&&Z.wbits!==q&&(Z.window=null),Z.wrap=T,Z.wbits=q,_(H))):C}function B(H,q){var T,Z;return H?(Z=new b,(H.state=Z).window=null,(T=A(H,q))!==E&&(H.state=null),T):C}var M,$,D=!0;function le(H){if(D){var q;for(M=new c.Buf32(512),$=new c.Buf32(32),q=0;q<144;)H.lens[q++]=8;for(;q<256;)H.lens[q++]=9;for(;q<280;)H.lens[q++]=7;for(;q<288;)H.lens[q++]=8;for(y(v,H.lens,0,288,M,0,H.work,{bits:9}),q=0;q<32;)H.lens[q++]=5;y(k,H.lens,0,32,$,0,H.work,{bits:5}),D=!1}H.lencode=M,H.lenbits=9,H.distcode=$,H.distbits=5}function pe(H,q,T,Z){var Q,Y=H.state;return Y.window===null&&(Y.wsize=1<<Y.wbits,Y.wnext=0,Y.whave=0,Y.window=new c.Buf8(Y.wsize)),Z>=Y.wsize?(c.arraySet(Y.window,q,T-Y.wsize,Y.wsize,0),Y.wnext=0,Y.whave=Y.wsize):(Z<(Q=Y.wsize-Y.wnext)&&(Q=Z),c.arraySet(Y.window,q,T-Z,Q,Y.wnext),(Z-=Q)?(c.arraySet(Y.window,q,T-Z,Z,0),Y.wnext=Z,Y.whave=Y.wsize):(Y.wnext+=Q,Y.wnext===Y.wsize&&(Y.wnext=0),Y.whave<Y.wsize&&(Y.whave+=Q))),0}l.inflateReset=_,l.inflateReset2=A,l.inflateResetKeep=w,l.inflateInit=function(H){return B(H,15)},l.inflateInit2=B,l.inflate=function(H,q){var T,Z,Q,Y,ne,J,ue,W,U,re,ae,ye,ce,P,O,te,ee,G,L,ie,z,fe,F,x,m=0,R=new c.Buf8(4),X=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!H||!H.state||!H.output||!H.input&&H.avail_in!==0)return C;(T=H.state).mode===12&&(T.mode=13),ne=H.next_out,Q=H.output,ue=H.avail_out,Y=H.next_in,Z=H.input,J=H.avail_in,W=T.hold,U=T.bits,re=J,ae=ue,fe=E;e:for(;;)switch(T.mode){case N:if(T.wrap===0){T.mode=13;break}for(;U<16;){if(J===0)break e;J--,W+=Z[Y++]<<U,U+=8}if(2&T.wrap&&W===35615){R[T.check=0]=255&W,R[1]=W>>>8&255,T.check=u(T.check,R,2,0),U=W=0,T.mode=2;break}if(T.flags=0,T.head&&(T.head.done=!1),!(1&T.wrap)||(((255&W)<<8)+(W>>8))%31){H.msg="incorrect header check",T.mode=30;break}if((15&W)!=8){H.msg="unknown compression method",T.mode=30;break}if(U-=4,z=8+(15&(W>>>=4)),T.wbits===0)T.wbits=z;else if(z>T.wbits){H.msg="invalid window size",T.mode=30;break}T.dmax=1<<z,H.adler=T.check=1,T.mode=512&W?10:12,U=W=0;break;case 2:for(;U<16;){if(J===0)break e;J--,W+=Z[Y++]<<U,U+=8}if(T.flags=W,(255&T.flags)!=8){H.msg="unknown compression method",T.mode=30;break}if(57344&T.flags){H.msg="unknown header flags set",T.mode=30;break}T.head&&(T.head.text=W>>8&1),512&T.flags&&(R[0]=255&W,R[1]=W>>>8&255,T.check=u(T.check,R,2,0)),U=W=0,T.mode=3;case 3:for(;U<32;){if(J===0)break e;J--,W+=Z[Y++]<<U,U+=8}T.head&&(T.head.time=W),512&T.flags&&(R[0]=255&W,R[1]=W>>>8&255,R[2]=W>>>16&255,R[3]=W>>>24&255,T.check=u(T.check,R,4,0)),U=W=0,T.mode=4;case 4:for(;U<16;){if(J===0)break e;J--,W+=Z[Y++]<<U,U+=8}T.head&&(T.head.xflags=255&W,T.head.os=W>>8),512&T.flags&&(R[0]=255&W,R[1]=W>>>8&255,T.check=u(T.check,R,2,0)),U=W=0,T.mode=5;case 5:if(1024&T.flags){for(;U<16;){if(J===0)break e;J--,W+=Z[Y++]<<U,U+=8}T.length=W,T.head&&(T.head.extra_len=W),512&T.flags&&(R[0]=255&W,R[1]=W>>>8&255,T.check=u(T.check,R,2,0)),U=W=0}else T.head&&(T.head.extra=null);T.mode=6;case 6:if(1024&T.flags&&(J<(ye=T.length)&&(ye=J),ye&&(T.head&&(z=T.head.extra_len-T.length,T.head.extra||(T.head.extra=new Array(T.head.extra_len)),c.arraySet(T.head.extra,Z,Y,ye,z)),512&T.flags&&(T.check=u(T.check,Z,ye,Y)),J-=ye,Y+=ye,T.length-=ye),T.length))break e;T.length=0,T.mode=7;case 7:if(2048&T.flags){if(J===0)break e;for(ye=0;z=Z[Y+ye++],T.head&&z&&T.length<65536&&(T.head.name+=String.fromCharCode(z)),z&&ye<J;);if(512&T.flags&&(T.check=u(T.check,Z,ye,Y)),J-=ye,Y+=ye,z)break e}else T.head&&(T.head.name=null);T.length=0,T.mode=8;case 8:if(4096&T.flags){if(J===0)break e;for(ye=0;z=Z[Y+ye++],T.head&&z&&T.length<65536&&(T.head.comment+=String.fromCharCode(z)),z&&ye<J;);if(512&T.flags&&(T.check=u(T.check,Z,ye,Y)),J-=ye,Y+=ye,z)break e}else T.head&&(T.head.comment=null);T.mode=9;case 9:if(512&T.flags){for(;U<16;){if(J===0)break e;J--,W+=Z[Y++]<<U,U+=8}if(W!==(65535&T.check)){H.msg="header crc mismatch",T.mode=30;break}U=W=0}T.head&&(T.head.hcrc=T.flags>>9&1,T.head.done=!0),H.adler=T.check=0,T.mode=12;break;case 10:for(;U<32;){if(J===0)break e;J--,W+=Z[Y++]<<U,U+=8}H.adler=T.check=f(W),U=W=0,T.mode=11;case 11:if(T.havedict===0)return H.next_out=ne,H.avail_out=ue,H.next_in=Y,H.avail_in=J,T.hold=W,T.bits=U,2;H.adler=T.check=1,T.mode=12;case 12:if(q===5||q===6)break e;case 13:if(T.last){W>>>=7&U,U-=7&U,T.mode=27;break}for(;U<3;){if(J===0)break e;J--,W+=Z[Y++]<<U,U+=8}switch(T.last=1&W,U-=1,3&(W>>>=1)){case 0:T.mode=14;break;case 1:if(le(T),T.mode=20,q!==6)break;W>>>=2,U-=2;break e;case 2:T.mode=17;break;case 3:H.msg="invalid block type",T.mode=30}W>>>=2,U-=2;break;case 14:for(W>>>=7&U,U-=7&U;U<32;){if(J===0)break e;J--,W+=Z[Y++]<<U,U+=8}if((65535&W)!=(W>>>16^65535)){H.msg="invalid stored block lengths",T.mode=30;break}if(T.length=65535&W,U=W=0,T.mode=15,q===6)break e;case 15:T.mode=16;case 16:if(ye=T.length){if(J<ye&&(ye=J),ue<ye&&(ye=ue),ye===0)break e;c.arraySet(Q,Z,Y,ye,ne),J-=ye,Y+=ye,ue-=ye,ne+=ye,T.length-=ye;break}T.mode=12;break;case 17:for(;U<14;){if(J===0)break e;J--,W+=Z[Y++]<<U,U+=8}if(T.nlen=257+(31&W),W>>>=5,U-=5,T.ndist=1+(31&W),W>>>=5,U-=5,T.ncode=4+(15&W),W>>>=4,U-=4,286<T.nlen||30<T.ndist){H.msg="too many length or distance symbols",T.mode=30;break}T.have=0,T.mode=18;case 18:for(;T.have<T.ncode;){for(;U<3;){if(J===0)break e;J--,W+=Z[Y++]<<U,U+=8}T.lens[X[T.have++]]=7&W,W>>>=3,U-=3}for(;T.have<19;)T.lens[X[T.have++]]=0;if(T.lencode=T.lendyn,T.lenbits=7,F={bits:T.lenbits},fe=y(0,T.lens,0,19,T.lencode,0,T.work,F),T.lenbits=F.bits,fe){H.msg="invalid code lengths set",T.mode=30;break}T.have=0,T.mode=19;case 19:for(;T.have<T.nlen+T.ndist;){for(;te=(m=T.lencode[W&(1<<T.lenbits)-1])>>>16&255,ee=65535&m,!((O=m>>>24)<=U);){if(J===0)break e;J--,W+=Z[Y++]<<U,U+=8}if(ee<16)W>>>=O,U-=O,T.lens[T.have++]=ee;else{if(ee===16){for(x=O+2;U<x;){if(J===0)break e;J--,W+=Z[Y++]<<U,U+=8}if(W>>>=O,U-=O,T.have===0){H.msg="invalid bit length repeat",T.mode=30;break}z=T.lens[T.have-1],ye=3+(3&W),W>>>=2,U-=2}else if(ee===17){for(x=O+3;U<x;){if(J===0)break e;J--,W+=Z[Y++]<<U,U+=8}U-=O,z=0,ye=3+(7&(W>>>=O)),W>>>=3,U-=3}else{for(x=O+7;U<x;){if(J===0)break e;J--,W+=Z[Y++]<<U,U+=8}U-=O,z=0,ye=11+(127&(W>>>=O)),W>>>=7,U-=7}if(T.have+ye>T.nlen+T.ndist){H.msg="invalid bit length repeat",T.mode=30;break}for(;ye--;)T.lens[T.have++]=z}}if(T.mode===30)break;if(T.lens[256]===0){H.msg="invalid code -- missing end-of-block",T.mode=30;break}if(T.lenbits=9,F={bits:T.lenbits},fe=y(v,T.lens,0,T.nlen,T.lencode,0,T.work,F),T.lenbits=F.bits,fe){H.msg="invalid literal/lengths set",T.mode=30;break}if(T.distbits=6,T.distcode=T.distdyn,F={bits:T.distbits},fe=y(k,T.lens,T.nlen,T.ndist,T.distcode,0,T.work,F),T.distbits=F.bits,fe){H.msg="invalid distances set",T.mode=30;break}if(T.mode=20,q===6)break e;case 20:T.mode=21;case 21:if(6<=J&&258<=ue){H.next_out=ne,H.avail_out=ue,H.next_in=Y,H.avail_in=J,T.hold=W,T.bits=U,p(H,ae),ne=H.next_out,Q=H.output,ue=H.avail_out,Y=H.next_in,Z=H.input,J=H.avail_in,W=T.hold,U=T.bits,T.mode===12&&(T.back=-1);break}for(T.back=0;te=(m=T.lencode[W&(1<<T.lenbits)-1])>>>16&255,ee=65535&m,!((O=m>>>24)<=U);){if(J===0)break e;J--,W+=Z[Y++]<<U,U+=8}if(te&&(240&te)==0){for(G=O,L=te,ie=ee;te=(m=T.lencode[ie+((W&(1<<G+L)-1)>>G)])>>>16&255,ee=65535&m,!(G+(O=m>>>24)<=U);){if(J===0)break e;J--,W+=Z[Y++]<<U,U+=8}W>>>=G,U-=G,T.back+=G}if(W>>>=O,U-=O,T.back+=O,T.length=ee,te===0){T.mode=26;break}if(32&te){T.back=-1,T.mode=12;break}if(64&te){H.msg="invalid literal/length code",T.mode=30;break}T.extra=15&te,T.mode=22;case 22:if(T.extra){for(x=T.extra;U<x;){if(J===0)break e;J--,W+=Z[Y++]<<U,U+=8}T.length+=W&(1<<T.extra)-1,W>>>=T.extra,U-=T.extra,T.back+=T.extra}T.was=T.length,T.mode=23;case 23:for(;te=(m=T.distcode[W&(1<<T.distbits)-1])>>>16&255,ee=65535&m,!((O=m>>>24)<=U);){if(J===0)break e;J--,W+=Z[Y++]<<U,U+=8}if((240&te)==0){for(G=O,L=te,ie=ee;te=(m=T.distcode[ie+((W&(1<<G+L)-1)>>G)])>>>16&255,ee=65535&m,!(G+(O=m>>>24)<=U);){if(J===0)break e;J--,W+=Z[Y++]<<U,U+=8}W>>>=G,U-=G,T.back+=G}if(W>>>=O,U-=O,T.back+=O,64&te){H.msg="invalid distance code",T.mode=30;break}T.offset=ee,T.extra=15&te,T.mode=24;case 24:if(T.extra){for(x=T.extra;U<x;){if(J===0)break e;J--,W+=Z[Y++]<<U,U+=8}T.offset+=W&(1<<T.extra)-1,W>>>=T.extra,U-=T.extra,T.back+=T.extra}if(T.offset>T.dmax){H.msg="invalid distance too far back",T.mode=30;break}T.mode=25;case 25:if(ue===0)break e;if(ye=ae-ue,T.offset>ye){if((ye=T.offset-ye)>T.whave&&T.sane){H.msg="invalid distance too far back",T.mode=30;break}ce=ye>T.wnext?(ye-=T.wnext,T.wsize-ye):T.wnext-ye,ye>T.length&&(ye=T.length),P=T.window}else P=Q,ce=ne-T.offset,ye=T.length;for(ue<ye&&(ye=ue),ue-=ye,T.length-=ye;Q[ne++]=P[ce++],--ye;);T.length===0&&(T.mode=21);break;case 26:if(ue===0)break e;Q[ne++]=T.length,ue--,T.mode=21;break;case 27:if(T.wrap){for(;U<32;){if(J===0)break e;J--,W|=Z[Y++]<<U,U+=8}if(ae-=ue,H.total_out+=ae,T.total+=ae,ae&&(H.adler=T.check=T.flags?u(T.check,Q,ae,ne-ae):d(T.check,Q,ae,ne-ae)),ae=ue,(T.flags?W:f(W))!==T.check){H.msg="incorrect data check",T.mode=30;break}U=W=0}T.mode=28;case 28:if(T.wrap&&T.flags){for(;U<32;){if(J===0)break e;J--,W+=Z[Y++]<<U,U+=8}if(W!==(4294967295&T.total)){H.msg="incorrect length check",T.mode=30;break}U=W=0}T.mode=29;case 29:fe=1;break e;case 30:fe=-3;break e;case 31:return-4;case 32:default:return C}return H.next_out=ne,H.avail_out=ue,H.next_in=Y,H.avail_in=J,T.hold=W,T.bits=U,(T.wsize||ae!==H.avail_out&&T.mode<30&&(T.mode<27||q!==4))&&pe(H,H.output,H.next_out,ae-H.avail_out)?(T.mode=31,-4):(re-=H.avail_in,ae-=H.avail_out,H.total_in+=re,H.total_out+=ae,T.total+=ae,T.wrap&&ae&&(H.adler=T.check=T.flags?u(T.check,Q,ae,H.next_out-ae):d(T.check,Q,ae,H.next_out-ae)),H.data_type=T.bits+(T.last?64:0)+(T.mode===12?128:0)+(T.mode===20||T.mode===15?256:0),(re==0&&ae===0||q===4)&&fe===E&&(fe=-5),fe)},l.inflateEnd=function(H){if(!H||!H.state)return C;var q=H.state;return q.window&&(q.window=null),H.state=null,E},l.inflateGetHeader=function(H,q){var T;return H&&H.state?(2&(T=H.state).wrap)==0?C:((T.head=q).done=!1,E):C},l.inflateSetDictionary=function(H,q){var T,Z=q.length;return H&&H.state?(T=H.state).wrap!==0&&T.mode!==11?C:T.mode===11&&d(1,q,Z,0)!==T.check?-3:pe(H,q,Z,Z)?(T.mode=31,-4):(T.havedict=1,E):C},l.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(i,a,l){var c=i("../utils/common"),d=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],p=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],y=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];a.exports=function(v,k,E,C,N,g,j,f){var b,w,_,A,B,M,$,D,le,pe=f.bits,H=0,q=0,T=0,Z=0,Q=0,Y=0,ne=0,J=0,ue=0,W=0,U=null,re=0,ae=new c.Buf16(16),ye=new c.Buf16(16),ce=null,P=0;for(H=0;H<=15;H++)ae[H]=0;for(q=0;q<C;q++)ae[k[E+q]]++;for(Q=pe,Z=15;1<=Z&&ae[Z]===0;Z--);if(Z<Q&&(Q=Z),Z===0)return N[g++]=20971520,N[g++]=20971520,f.bits=1,0;for(T=1;T<Z&&ae[T]===0;T++);for(Q<T&&(Q=T),H=J=1;H<=15;H++)if(J<<=1,(J-=ae[H])<0)return-1;if(0<J&&(v===0||Z!==1))return-1;for(ye[1]=0,H=1;H<15;H++)ye[H+1]=ye[H]+ae[H];for(q=0;q<C;q++)k[E+q]!==0&&(j[ye[k[E+q]]++]=q);if(M=v===0?(U=ce=j,19):v===1?(U=d,re-=257,ce=u,P-=257,256):(U=p,ce=y,-1),H=T,B=g,ne=q=W=0,_=-1,A=(ue=1<<(Y=Q))-1,v===1&&852<ue||v===2&&592<ue)return 1;for(;;){for($=H-ne,le=j[q]<M?(D=0,j[q]):j[q]>M?(D=ce[P+j[q]],U[re+j[q]]):(D=96,0),b=1<<H-ne,T=w=1<<Y;N[B+(W>>ne)+(w-=b)]=$<<24|D<<16|le|0,w!==0;);for(b=1<<H-1;W&b;)b>>=1;if(b!==0?(W&=b-1,W+=b):W=0,q++,--ae[H]==0){if(H===Z)break;H=k[E+j[q]]}if(Q<H&&(W&A)!==_){for(ne===0&&(ne=Q),B+=T,J=1<<(Y=H-ne);Y+ne<Z&&!((J-=ae[Y+ne])<=0);)Y++,J<<=1;if(ue+=1<<Y,v===1&&852<ue||v===2&&592<ue)return 1;N[_=W&A]=Q<<24|Y<<16|B-g|0}}return W!==0&&(N[B+W]=H-ne<<24|64<<16|0),f.bits=Q,0}},{"../utils/common":41}],51:[function(i,a,l){a.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(i,a,l){var c=i("../utils/common"),d=0,u=1;function p(m){for(var R=m.length;0<=--R;)m[R]=0}var y=0,v=29,k=256,E=k+1+v,C=30,N=19,g=2*E+1,j=15,f=16,b=7,w=256,_=16,A=17,B=18,M=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],$=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],le=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],pe=new Array(2*(E+2));p(pe);var H=new Array(2*C);p(H);var q=new Array(512);p(q);var T=new Array(256);p(T);var Z=new Array(v);p(Z);var Q,Y,ne,J=new Array(C);function ue(m,R,X,oe,se){this.static_tree=m,this.extra_bits=R,this.extra_base=X,this.elems=oe,this.max_length=se,this.has_stree=m&&m.length}function W(m,R){this.dyn_tree=m,this.max_code=0,this.stat_desc=R}function U(m){return m<256?q[m]:q[256+(m>>>7)]}function re(m,R){m.pending_buf[m.pending++]=255&R,m.pending_buf[m.pending++]=R>>>8&255}function ae(m,R,X){m.bi_valid>f-X?(m.bi_buf|=R<<m.bi_valid&65535,re(m,m.bi_buf),m.bi_buf=R>>f-m.bi_valid,m.bi_valid+=X-f):(m.bi_buf|=R<<m.bi_valid&65535,m.bi_valid+=X)}function ye(m,R,X){ae(m,X[2*R],X[2*R+1])}function ce(m,R){for(var X=0;X|=1&m,m>>>=1,X<<=1,0<--R;);return X>>>1}function P(m,R,X){var oe,se,ge=new Array(j+1),ke=0;for(oe=1;oe<=j;oe++)ge[oe]=ke=ke+X[oe-1]<<1;for(se=0;se<=R;se++){var Ce=m[2*se+1];Ce!==0&&(m[2*se]=ce(ge[Ce]++,Ce))}}function O(m){var R;for(R=0;R<E;R++)m.dyn_ltree[2*R]=0;for(R=0;R<C;R++)m.dyn_dtree[2*R]=0;for(R=0;R<N;R++)m.bl_tree[2*R]=0;m.dyn_ltree[2*w]=1,m.opt_len=m.static_len=0,m.last_lit=m.matches=0}function te(m){8<m.bi_valid?re(m,m.bi_buf):0<m.bi_valid&&(m.pending_buf[m.pending++]=m.bi_buf),m.bi_buf=0,m.bi_valid=0}function ee(m,R,X,oe){var se=2*R,ge=2*X;return m[se]<m[ge]||m[se]===m[ge]&&oe[R]<=oe[X]}function G(m,R,X){for(var oe=m.heap[X],se=X<<1;se<=m.heap_len&&(se<m.heap_len&&ee(R,m.heap[se+1],m.heap[se],m.depth)&&se++,!ee(R,oe,m.heap[se],m.depth));)m.heap[X]=m.heap[se],X=se,se<<=1;m.heap[X]=oe}function L(m,R,X){var oe,se,ge,ke,Ce=0;if(m.last_lit!==0)for(;oe=m.pending_buf[m.d_buf+2*Ce]<<8|m.pending_buf[m.d_buf+2*Ce+1],se=m.pending_buf[m.l_buf+Ce],Ce++,oe===0?ye(m,se,R):(ye(m,(ge=T[se])+k+1,R),(ke=M[ge])!==0&&ae(m,se-=Z[ge],ke),ye(m,ge=U(--oe),X),(ke=$[ge])!==0&&ae(m,oe-=J[ge],ke)),Ce<m.last_lit;);ye(m,w,R)}function ie(m,R){var X,oe,se,ge=R.dyn_tree,ke=R.stat_desc.static_tree,Ce=R.stat_desc.has_stree,Fe=R.stat_desc.elems,He=-1;for(m.heap_len=0,m.heap_max=g,X=0;X<Fe;X++)ge[2*X]!==0?(m.heap[++m.heap_len]=He=X,m.depth[X]=0):ge[2*X+1]=0;for(;m.heap_len<2;)ge[2*(se=m.heap[++m.heap_len]=He<2?++He:0)]=1,m.depth[se]=0,m.opt_len--,Ce&&(m.static_len-=ke[2*se+1]);for(R.max_code=He,X=m.heap_len>>1;1<=X;X--)G(m,ge,X);for(se=Fe;X=m.heap[1],m.heap[1]=m.heap[m.heap_len--],G(m,ge,1),oe=m.heap[1],m.heap[--m.heap_max]=X,m.heap[--m.heap_max]=oe,ge[2*se]=ge[2*X]+ge[2*oe],m.depth[se]=(m.depth[X]>=m.depth[oe]?m.depth[X]:m.depth[oe])+1,ge[2*X+1]=ge[2*oe+1]=se,m.heap[1]=se++,G(m,ge,1),2<=m.heap_len;);m.heap[--m.heap_max]=m.heap[1],(function(Ye,Wt){var ir,Jt,jn,Nt,Nn,gs,mr=Wt.dyn_tree,Kn=Wt.max_code,vs=Wt.stat_desc.static_tree,xs=Wt.stat_desc.has_stree,un=Wt.stat_desc.extra_bits,Gr=Wt.stat_desc.extra_base,de=Wt.stat_desc.max_length,Ee=0;for(Nt=0;Nt<=j;Nt++)Ye.bl_count[Nt]=0;for(mr[2*Ye.heap[Ye.heap_max]+1]=0,ir=Ye.heap_max+1;ir<g;ir++)de<(Nt=mr[2*mr[2*(Jt=Ye.heap[ir])+1]+1]+1)&&(Nt=de,Ee++),mr[2*Jt+1]=Nt,Kn<Jt||(Ye.bl_count[Nt]++,Nn=0,Gr<=Jt&&(Nn=un[Jt-Gr]),gs=mr[2*Jt],Ye.opt_len+=gs*(Nt+Nn),xs&&(Ye.static_len+=gs*(vs[2*Jt+1]+Nn)));if(Ee!==0){do{for(Nt=de-1;Ye.bl_count[Nt]===0;)Nt--;Ye.bl_count[Nt]--,Ye.bl_count[Nt+1]+=2,Ye.bl_count[de]--,Ee-=2}while(0<Ee);for(Nt=de;Nt!==0;Nt--)for(Jt=Ye.bl_count[Nt];Jt!==0;)Kn<(jn=Ye.heap[--ir])||(mr[2*jn+1]!==Nt&&(Ye.opt_len+=(Nt-mr[2*jn+1])*mr[2*jn],mr[2*jn+1]=Nt),Jt--)}})(m,R),P(ge,He,m.bl_count)}function z(m,R,X){var oe,se,ge=-1,ke=R[1],Ce=0,Fe=7,He=4;for(ke===0&&(Fe=138,He=3),R[2*(X+1)+1]=65535,oe=0;oe<=X;oe++)se=ke,ke=R[2*(oe+1)+1],++Ce<Fe&&se===ke||(Ce<He?m.bl_tree[2*se]+=Ce:se!==0?(se!==ge&&m.bl_tree[2*se]++,m.bl_tree[2*_]++):Ce<=10?m.bl_tree[2*A]++:m.bl_tree[2*B]++,ge=se,He=(Ce=0)===ke?(Fe=138,3):se===ke?(Fe=6,3):(Fe=7,4))}function fe(m,R,X){var oe,se,ge=-1,ke=R[1],Ce=0,Fe=7,He=4;for(ke===0&&(Fe=138,He=3),oe=0;oe<=X;oe++)if(se=ke,ke=R[2*(oe+1)+1],!(++Ce<Fe&&se===ke)){if(Ce<He)for(;ye(m,se,m.bl_tree),--Ce!=0;);else se!==0?(se!==ge&&(ye(m,se,m.bl_tree),Ce--),ye(m,_,m.bl_tree),ae(m,Ce-3,2)):Ce<=10?(ye(m,A,m.bl_tree),ae(m,Ce-3,3)):(ye(m,B,m.bl_tree),ae(m,Ce-11,7));ge=se,He=(Ce=0)===ke?(Fe=138,3):se===ke?(Fe=6,3):(Fe=7,4)}}p(J);var F=!1;function x(m,R,X,oe){ae(m,(y<<1)+(oe?1:0),3),(function(se,ge,ke,Ce){te(se),re(se,ke),re(se,~ke),c.arraySet(se.pending_buf,se.window,ge,ke,se.pending),se.pending+=ke})(m,R,X)}l._tr_init=function(m){F||((function(){var R,X,oe,se,ge,ke=new Array(j+1);for(se=oe=0;se<v-1;se++)for(Z[se]=oe,R=0;R<1<<M[se];R++)T[oe++]=se;for(T[oe-1]=se,se=ge=0;se<16;se++)for(J[se]=ge,R=0;R<1<<$[se];R++)q[ge++]=se;for(ge>>=7;se<C;se++)for(J[se]=ge<<7,R=0;R<1<<$[se]-7;R++)q[256+ge++]=se;for(X=0;X<=j;X++)ke[X]=0;for(R=0;R<=143;)pe[2*R+1]=8,R++,ke[8]++;for(;R<=255;)pe[2*R+1]=9,R++,ke[9]++;for(;R<=279;)pe[2*R+1]=7,R++,ke[7]++;for(;R<=287;)pe[2*R+1]=8,R++,ke[8]++;for(P(pe,E+1,ke),R=0;R<C;R++)H[2*R+1]=5,H[2*R]=ce(R,5);Q=new ue(pe,M,k+1,E,j),Y=new ue(H,$,0,C,j),ne=new ue(new Array(0),D,0,N,b)})(),F=!0),m.l_desc=new W(m.dyn_ltree,Q),m.d_desc=new W(m.dyn_dtree,Y),m.bl_desc=new W(m.bl_tree,ne),m.bi_buf=0,m.bi_valid=0,O(m)},l._tr_stored_block=x,l._tr_flush_block=function(m,R,X,oe){var se,ge,ke=0;0<m.level?(m.strm.data_type===2&&(m.strm.data_type=(function(Ce){var Fe,He=4093624447;for(Fe=0;Fe<=31;Fe++,He>>>=1)if(1&He&&Ce.dyn_ltree[2*Fe]!==0)return d;if(Ce.dyn_ltree[18]!==0||Ce.dyn_ltree[20]!==0||Ce.dyn_ltree[26]!==0)return u;for(Fe=32;Fe<k;Fe++)if(Ce.dyn_ltree[2*Fe]!==0)return u;return d})(m)),ie(m,m.l_desc),ie(m,m.d_desc),ke=(function(Ce){var Fe;for(z(Ce,Ce.dyn_ltree,Ce.l_desc.max_code),z(Ce,Ce.dyn_dtree,Ce.d_desc.max_code),ie(Ce,Ce.bl_desc),Fe=N-1;3<=Fe&&Ce.bl_tree[2*le[Fe]+1]===0;Fe--);return Ce.opt_len+=3*(Fe+1)+5+5+4,Fe})(m),se=m.opt_len+3+7>>>3,(ge=m.static_len+3+7>>>3)<=se&&(se=ge)):se=ge=X+5,X+4<=se&&R!==-1?x(m,R,X,oe):m.strategy===4||ge===se?(ae(m,2+(oe?1:0),3),L(m,pe,H)):(ae(m,4+(oe?1:0),3),(function(Ce,Fe,He,Ye){var Wt;for(ae(Ce,Fe-257,5),ae(Ce,He-1,5),ae(Ce,Ye-4,4),Wt=0;Wt<Ye;Wt++)ae(Ce,Ce.bl_tree[2*le[Wt]+1],3);fe(Ce,Ce.dyn_ltree,Fe-1),fe(Ce,Ce.dyn_dtree,He-1)})(m,m.l_desc.max_code+1,m.d_desc.max_code+1,ke+1),L(m,m.dyn_ltree,m.dyn_dtree)),O(m),oe&&te(m)},l._tr_tally=function(m,R,X){return m.pending_buf[m.d_buf+2*m.last_lit]=R>>>8&255,m.pending_buf[m.d_buf+2*m.last_lit+1]=255&R,m.pending_buf[m.l_buf+m.last_lit]=255&X,m.last_lit++,R===0?m.dyn_ltree[2*X]++:(m.matches++,R--,m.dyn_ltree[2*(T[X]+k+1)]++,m.dyn_dtree[2*U(R)]++),m.last_lit===m.lit_bufsize-1},l._tr_align=function(m){ae(m,2,3),ye(m,w,pe),(function(R){R.bi_valid===16?(re(R,R.bi_buf),R.bi_buf=0,R.bi_valid=0):8<=R.bi_valid&&(R.pending_buf[R.pending++]=255&R.bi_buf,R.bi_buf>>=8,R.bi_valid-=8)})(m)}},{"../utils/common":41}],53:[function(i,a,l){a.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(i,a,l){(function(c){(function(d,u){if(!d.setImmediate){var p,y,v,k,E=1,C={},N=!1,g=d.document,j=Object.getPrototypeOf&&Object.getPrototypeOf(d);j=j&&j.setTimeout?j:d,p={}.toString.call(d.process)==="[object process]"?function(_){dt.nextTick(function(){b(_)})}:(function(){if(d.postMessage&&!d.importScripts){var _=!0,A=d.onmessage;return d.onmessage=function(){_=!1},d.postMessage("","*"),d.onmessage=A,_}})()?(k="setImmediate$"+Math.random()+"$",d.addEventListener?d.addEventListener("message",w,!1):d.attachEvent("onmessage",w),function(_){d.postMessage(k+_,"*")}):d.MessageChannel?((v=new MessageChannel).port1.onmessage=function(_){b(_.data)},function(_){v.port2.postMessage(_)}):g&&"onreadystatechange"in g.createElement("script")?(y=g.documentElement,function(_){var A=g.createElement("script");A.onreadystatechange=function(){b(_),A.onreadystatechange=null,y.removeChild(A),A=null},y.appendChild(A)}):function(_){setTimeout(b,0,_)},j.setImmediate=function(_){typeof _!="function"&&(_=new Function(""+_));for(var A=new Array(arguments.length-1),B=0;B<A.length;B++)A[B]=arguments[B+1];var M={callback:_,args:A};return C[E]=M,p(E),E++},j.clearImmediate=f}function f(_){delete C[_]}function b(_){if(N)setTimeout(b,0,_);else{var A=C[_];if(A){N=!0;try{(function(B){var M=B.callback,$=B.args;switch($.length){case 0:M();break;case 1:M($[0]);break;case 2:M($[0],$[1]);break;case 3:M($[0],$[1],$[2]);break;default:M.apply(u,$)}})(A)}finally{f(_),N=!1}}}}function w(_){_.source===d&&typeof _.data=="string"&&_.data.indexOf(k)===0&&b(+_.data.slice(k.length))}})(typeof self>"u"?c===void 0?this:c:self)}).call(this,typeof wn<"u"?wn:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(qh)),qh.exports}var _3=k3();const S3=Of(_3);var Ra={exports:{}},Kh,fx;function E3(){if(fx)return Kh;fx=1;var r={"&":"&amp;",'"':"&quot;","'":"&apos;","<":"&lt;",">":"&gt;"};function e(i){return i&&i.replace?i.replace(/([&"<>'])/g,function(a,l){return r[l]}):i}return Kh=e,Kh}var px;function C3(){if(px)return Ra.exports;px=1;var r=E3(),e=Mf().Stream,i="    ";function a(y,v){typeof v!="object"&&(v={indent:v});var k=v.stream?new e:null,E="",C=!1,N=v.indent?v.indent===!0?i:v.indent:"",g=!0;function j(A){g?dt.nextTick(A):A()}function f(A,B){if(B!==void 0&&(E+=B),A&&!C&&(k=k||new e,C=!0),A&&C){var M=E;j(function(){k.emit("data",M)}),E=""}}function b(A,B){u(f,d(A,N,N?1:0),B)}function w(){if(k){var A=E;j(function(){k.emit("data",A),k.emit("end"),k.readable=!1,k.emit("close")})}}function _(A){var B=A.encoding||"UTF-8",M={version:"1.0",encoding:B};A.standalone&&(M.standalone=A.standalone),b({"?xml":{_attr:M}}),E=E.replace("/>","?>")}return j(function(){g=!1}),v.declaration&&_(v.declaration),y&&y.forEach?y.forEach(function(A,B){var M;B+1===y.length&&(M=w),b(A,M)}):b(y,w),k?(k.readable=!0,k):E}function l(){var y=Array.prototype.slice.call(arguments),v={_elem:d(y)};return v.push=function(k){if(!this.append)throw new Error("not assigned to a parent!");var E=this,C=this._elem.indent;u(this.append,d(k,C,this._elem.icount+(C?1:0)),function(){E.append(!0)})},v.close=function(k){k!==void 0&&this.push(k),this.end&&this.end()},v}function c(y,v){return new Array(v||0).join(y||"")}function d(y,v,k){k=k||0;var E=c(v,k),C,N=y,g=!1;if(typeof y=="object"){var j=Object.keys(y);if(C=j[0],N=y[C],N&&N._elem)return N._elem.name=C,N._elem.icount=k,N._elem.indent=v,N._elem.indents=E,N._elem.interrupt=N,N._elem}var f=[],b=[],w;function _(A){var B=Object.keys(A);B.forEach(function(M){f.push(p(M,A[M]))})}switch(typeof N){case"object":if(N===null)break;N._attr&&_(N._attr),N._cdata&&b.push(("<![CDATA["+N._cdata).replace(/\]\]>/g,"]]]]><![CDATA[>")+"]]>"),N.forEach&&(w=!1,b.push(""),N.forEach(function(A){if(typeof A=="object"){var B=Object.keys(A)[0];B=="_attr"?_(A._attr):b.push(d(A,v,k+1))}else b.pop(),w=!0,b.push(r(A))}),w||b.push(""));break;default:b.push(r(N))}return{name:C,interrupt:g,attributes:f,content:b,icount:k,indents:E,indent:v}}function u(y,v,k){if(typeof v!="object")return y(!1,v);var E=v.interrupt?1:v.content.length;function C(){for(;v.content.length;){var g=v.content.shift();if(g!==void 0){if(N(g))return;u(y,g)}}y(!1,(E>1?v.indents:"")+(v.name?"</"+v.name+">":"")+(v.indent&&!k?`
`:"")),k&&k()}function N(g){return g.interrupt?(g.interrupt.append=y,g.interrupt.end=C,g.interrupt=!1,y(!0),!0):!1}if(y(!1,v.indents+(v.name?"<"+v.name:"")+(v.attributes.length?" "+v.attributes.join(" "):"")+(E?v.name?">":"":v.name?"/>":"")+(v.indent&&E>1?`
`:"")),!E)return y(!1,v.indent?`
`:"");N(v)||C()}function p(y,v){return y+'="'+r(v)+'"'}return Ra.exports=a,Ra.exports.element=Ra.exports.Element=l,Ra.exports}var T3=C3();const Ot=Of(T3),Pa=0,Gh=32,A3=32,R3=(r,e)=>{const i=e.replace(/-/g,"");if(i.length!==A3)throw new Error(`Error: Cannot extract GUID from font filename: ${e}`);const l=i.replace(/(..)/g,"$1 ").trim().split(" ").map(p=>parseInt(p,16));l.reverse();const d=r.slice(Pa,Gh).map((p,y)=>p^l[y%l.length]),u=new Uint8Array(Pa+d.length+Math.max(0,r.length-Gh));return u.set(r.slice(0,Pa)),u.set(d,Pa),u.set(r.slice(Gh),Pa+d.length),u};class P3{format(e,i={stack:[]}){const a=e.prepForXml(i);if(a)return a;throw Error("XMLComponent did not format correctly")}}class z3{replace(e,i,a){let l=e;return i.forEach((c,d)=>{l=l.replace(new RegExp(`{${c.fileName}}`,"g"),(a+d).toString())}),l}getMediaData(e,i){return i.Array.filter(a=>e.search(`{${a.fileName}}`)>0)}}class O3{replace(e,i){let a=e;for(const l of i)a=a.replace(new RegExp(`{${l.reference}-${l.instance}}`,"g"),l.numId.toString());return a}}class I3{constructor(){je(this,"formatter"),je(this,"imageReplacer"),je(this,"numberingReplacer"),this.formatter=new P3,this.imageReplacer=new z3,this.numberingReplacer=new O3}compile(e,i,a=[]){const l=new S3,c=this.xmlifyFile(e,i),d=new Map(Object.entries(c));for(const[,u]of d)if(Array.isArray(u))for(const p of u)l.file(p.path,p.data);else l.file(u.path,u.data);for(const u of a)l.file(u.path,u.data);for(const u of e.Media.Array)u.type!=="svg"?l.file(`word/media/${u.fileName}`,u.data):(l.file(`word/media/${u.fileName}`,u.data),l.file(`word/media/${u.fallback.fileName}`,u.fallback.data));for(const{data:u,name:p,fontKey:y}of e.FontTable.fontOptionsWithKey){const[v]=p.split(".");l.file(`word/fonts/${v}.odttf`,R3(u,y))}return l}xmlifyFile(e,i){const a=e.Document.Relationships.RelationshipCount+1,l=Ot(this.formatter.format(e.Document.View,{viewWrapper:e.Document,file:e,stack:[]}),{indent:i,declaration:{standalone:"yes",encoding:"UTF-8"}}),c=e.Comments.Relationships.RelationshipCount+1,d=Ot(this.formatter.format(e.Comments,{viewWrapper:{View:e.Comments,Relationships:e.Comments.Relationships},file:e,stack:[]}),{indent:i,declaration:{standalone:"yes",encoding:"UTF-8"}}),u=this.imageReplacer.getMediaData(l,e.Media),p=this.imageReplacer.getMediaData(d,e.Media);return{Relationships:{data:(u.forEach((y,v)=>{e.Document.Relationships.createRelationship(a+v,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${y.fileName}`)}),e.Document.Relationships.createRelationship(e.Document.Relationships.RelationshipCount+1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/fontTable","fontTable.xml"),Ot(this.formatter.format(e.Document.Relationships,{viewWrapper:e.Document,file:e,stack:[]}),{indent:i,declaration:{encoding:"UTF-8"}})),path:"word/_rels/document.xml.rels"},Document:{data:(()=>{const y=this.imageReplacer.replace(l,u,a);return this.numberingReplacer.replace(y,e.Numbering.ConcreteNumbering)})(),path:"word/document.xml"},Styles:{data:(()=>{const y=Ot(this.formatter.format(e.Styles,{viewWrapper:e.Document,file:e,stack:[]}),{indent:i,declaration:{standalone:"yes",encoding:"UTF-8"}});return this.numberingReplacer.replace(y,e.Numbering.ConcreteNumbering)})(),path:"word/styles.xml"},Properties:{data:Ot(this.formatter.format(e.CoreProperties,{viewWrapper:e.Document,file:e,stack:[]}),{indent:i,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/core.xml"},Numbering:{data:Ot(this.formatter.format(e.Numbering,{viewWrapper:e.Document,file:e,stack:[]}),{indent:i,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/numbering.xml"},FileRelationships:{data:Ot(this.formatter.format(e.FileRelationships,{viewWrapper:e.Document,file:e,stack:[]}),{indent:i,declaration:{encoding:"UTF-8"}}),path:"_rels/.rels"},HeaderRelationships:e.Headers.map((y,v)=>{const k=Ot(this.formatter.format(y.View,{viewWrapper:y,file:e,stack:[]}),{indent:i,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(k,e.Media).forEach((C,N)=>{y.Relationships.createRelationship(N,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${C.fileName}`)}),{data:Ot(this.formatter.format(y.Relationships,{viewWrapper:y,file:e,stack:[]}),{indent:i,declaration:{encoding:"UTF-8"}}),path:`word/_rels/header${v+1}.xml.rels`}}),FooterRelationships:e.Footers.map((y,v)=>{const k=Ot(this.formatter.format(y.View,{viewWrapper:y,file:e,stack:[]}),{indent:i,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(k,e.Media).forEach((C,N)=>{y.Relationships.createRelationship(N,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${C.fileName}`)}),{data:Ot(this.formatter.format(y.Relationships,{viewWrapper:y,file:e,stack:[]}),{indent:i,declaration:{encoding:"UTF-8"}}),path:`word/_rels/footer${v+1}.xml.rels`}}),Headers:e.Headers.map((y,v)=>{const k=Ot(this.formatter.format(y.View,{viewWrapper:y,file:e,stack:[]}),{indent:i,declaration:{encoding:"UTF-8"}}),E=this.imageReplacer.getMediaData(k,e.Media),C=this.imageReplacer.replace(k,E,0);return{data:this.numberingReplacer.replace(C,e.Numbering.ConcreteNumbering),path:`word/header${v+1}.xml`}}),Footers:e.Footers.map((y,v)=>{const k=Ot(this.formatter.format(y.View,{viewWrapper:y,file:e,stack:[]}),{indent:i,declaration:{encoding:"UTF-8"}}),E=this.imageReplacer.getMediaData(k,e.Media),C=this.imageReplacer.replace(k,E,0);return{data:this.numberingReplacer.replace(C,e.Numbering.ConcreteNumbering),path:`word/footer${v+1}.xml`}}),ContentTypes:{data:Ot(this.formatter.format(e.ContentTypes,{viewWrapper:e.Document,file:e,stack:[]}),{indent:i,declaration:{encoding:"UTF-8"}}),path:"[Content_Types].xml"},CustomProperties:{data:Ot(this.formatter.format(e.CustomProperties,{viewWrapper:e.Document,file:e,stack:[]}),{indent:i,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/custom.xml"},AppProperties:{data:Ot(this.formatter.format(e.AppProperties,{viewWrapper:e.Document,file:e,stack:[]}),{indent:i,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/app.xml"},FootNotes:{data:Ot(this.formatter.format(e.FootNotes.View,{viewWrapper:e.FootNotes,file:e,stack:[]}),{indent:i,declaration:{encoding:"UTF-8"}}),path:"word/footnotes.xml"},FootNotesRelationships:{data:Ot(this.formatter.format(e.FootNotes.Relationships,{viewWrapper:e.FootNotes,file:e,stack:[]}),{indent:i,declaration:{encoding:"UTF-8"}}),path:"word/_rels/footnotes.xml.rels"},Settings:{data:Ot(this.formatter.format(e.Settings,{viewWrapper:e.Document,file:e,stack:[]}),{indent:i,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/settings.xml"},Comments:{data:(()=>{const y=this.imageReplacer.replace(d,p,c);return this.numberingReplacer.replace(y,e.Numbering.ConcreteNumbering)})(),path:"word/comments.xml"},CommentsRelationships:{data:(p.forEach((y,v)=>{e.Comments.Relationships.createRelationship(c+v,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${y.fileName}`)}),Ot(this.formatter.format(e.Comments.Relationships,{viewWrapper:{View:e.Comments,Relationships:e.Comments.Relationships},file:e,stack:[]}),{indent:i,declaration:{encoding:"UTF-8"}})),path:"word/_rels/comments.xml.rels"},FontTable:{data:Ot(this.formatter.format(e.FontTable.View,{viewWrapper:e.Document,file:e,stack:[]}),{indent:i,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/fontTable.xml"},FontTableRelationships:{data:Ot(this.formatter.format(e.FontTable.Relationships,{viewWrapper:e.Document,file:e,stack:[]}),{indent:i,declaration:{encoding:"UTF-8"}}),path:"word/_rels/fontTable.xml.rels"}}}}const F3={WITH_2_BLANKS:"  "},mx=r=>r===!0?F3.WITH_2_BLANKS:r===!1?void 0:r,gw=class ki{static pack(e,i,a){return Z_(this,arguments,function*(l,c,d,u=[]){return this.compiler.compile(l,mx(d),u).generateAsync({type:c,mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})}static toString(e,i,a=[]){return ki.pack(e,"string",i,a)}static toBuffer(e,i,a=[]){return ki.pack(e,"nodebuffer",i,a)}static toBase64String(e,i,a=[]){return ki.pack(e,"base64",i,a)}static toBlob(e,i,a=[]){return ki.pack(e,"blob",i,a)}static toArrayBuffer(e,i,a=[]){return ki.pack(e,"arraybuffer",i,a)}static toStream(e,i,a=[]){const l=new N3.Stream;return this.compiler.compile(e,mx(i),a).generateAsync({type:"nodebuffer",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"}).then(d=>{l.emit("data",d),l.emit("end")}),l}};je(gw,"compiler",new I3);let vw=gw;const wi=r=>Math.round(r/25.4*1440),Gf="0f172a",Fr="475569",qr="e2e8f0",D3="f8fafc",Ws="Carlito",lc=22,$i=20,wl=18,Ii=(r,e={})=>new jt({text:r,bold:!!e.bold,size:e.size??lc,color:e.color??Gf,font:Ws}),ot=(r,e={})=>new at({alignment:e.center?Ft.CENTER:Ft.LEFT,children:[Ii(r,e)],spacing:{before:e.before??0,after:e.after??60}}),ur=(r,e=26)=>new at({spacing:{before:120,after:80},children:[Ii(r,{bold:!0,size:e})]}),Hl=(r,e,i=!1,a=70)=>new fr({children:r,width:{size:e,type:Xt.PERCENTAGE},margins:{top:40,bottom:40,left:a,right:a},shading:i?{fill:D3}:void 0}),Zh=(r,e,i)=>new nn({width:{size:100,type:Xt.PERCENTAGE},borders:{top:{style:We.SINGLE,size:1,color:qr},bottom:{style:We.SINGLE,size:1,color:qr},left:{style:We.SINGLE,size:1,color:qr},right:{style:We.SINGLE,size:1,color:qr},insideH:{style:We.SINGLE,size:1,color:qr},insideV:{style:We.SINGLE,size:1,color:qr}},rows:[new vr({children:r.map((a,l)=>Hl([ot(a,{bold:!0,color:Fr,size:$i,after:30})],i[l],!0,60))}),...e.map(a=>new vr({children:a.map((l,c)=>Hl([ot(String(l??""),{after:30})],i[c],!1,60))}))]}),L3=(r,e,i)=>new nn({width:{size:80,type:Xt.PERCENTAGE},alignment:Ft.CENTER,borders:{top:{style:We.SINGLE,size:1,color:qr},bottom:{style:We.SINGLE,size:1,color:qr},left:{style:We.SINGLE,size:1,color:qr},right:{style:We.SINGLE,size:1,color:qr},insideH:{style:We.SINGLE,size:1,color:qr},insideV:{style:We.SINGLE,size:1,color:qr}},rows:[new vr({children:r.map((a,l)=>Hl([ot(a,{bold:!0,color:Fr,size:$i,after:30})],i[l],!0,60))}),...e.map(a=>new vr({children:a.map((l,c)=>Hl([ot(String(l??""),{after:30})],i[c],!1,60))}))]}),B3=r=>new mw({children:[new at({alignment:Ft.RIGHT,children:[Ii(`Evidenn slo: ${r}`,{size:$i,color:Fr})],spacing:{after:0}})]}),M3=()=>new yw({children:[new at({alignment:Ft.CENTER,children:[Ii(Bn.CURRENT,{size:$i,color:Fr})]})]});function xw(r){const e=Array.isArray(r)?r:[];if(e.some(l=>Array.isArray(l?.children)&&l.children.length)){const l=[],c=(d,u)=>{d.forEach(p=>{l.push({...p,_level:u}),Array.isArray(p.children)&&p.children.length&&c(p.children,u+1)})};return c(e,0),l}const i=l=>l?.parentId??l?.parent_id??l?.parent??null,a=l=>String(l?.id??l?.komponentaId??l?._id??"");if(e.some(l=>i(l)!=null)){const l=new Map,c="__root__";for(const y of e){const v=i(y)==null?c:String(i(y));(l.get(v)||l.set(v,[]).get(v)).push(y)}const d=y=>y.sort((v,k)=>(v.order??v.poradi??v.index??0)-(k.order??k.poradi??k.index??0)),u=[],p=(y,v)=>{d(y).forEach(k=>{u.push({...k,_level:v});const E=l.get(a(k))||[];E.length&&p(E,v+1)})};return p(l.get(c)||[],0),u}return e.map(l=>({...l,_level:Number(l.uroven??l.level??l.depth??0)||0}))}function ww(r){return r<=0?"":r===1?" ":" ".repeat(r-1)+" "}function nr(r,e){for(const i of e){const a=r?.[i]??r?.result?.[i]??r?.result?.value?.[i]??r?.zkouska?.[i]??r?.mereni?.[i];if(a!=null&&String(a).trim()!=="")return a}return""}function In(r,e,i="",a){if(e===""||e===void 0||e===null)return"";const l=a?a(e):String(e);return`${r}: ${i?`${l} ${i}`:l}`}const Fn=r=>{const e=String(r).replace(",",".").trim(),i=Number(e);return Number.isFinite(i)?String(i):String(r)};function U3(r){const e=[];return e.push(In("typ",nr(r,["typ","type","druh"]))),e.push(In("ply",nr(r,["poles","poly","pocet_polu","pocetPolu"]))),e.push(In("dim.",nr(r,["dimenze","dim","prurez"]))),e.push(In("Riso",nr(r,["riso","Riso","izolace","insulation"]),"M",Fn)),e.push(In("Zs",nr(r,["zs","Zs","ochrana","smycka","loop_impedance"]),"",Fn)),e.push(In("t",nr(r,["t","time","trip_time","rcd_time","vybavovaci_cas","vybavovaciCas","cas_vybaveni","cas"]),"ms",Fn)),e.push(In("I",nr(r,["ifi","i_fi","iDelta","i_delta","i_delta_n","idn","In","I","rcd_trip_current","vybavovaci_proud","vybavovaciProud","trip_current"]),"mA",Fn)),e.push(In("U",nr(r,["ui","u_i","ut","u_touch","dotykove_napeti"]),"V",Fn)),e.push(In("Pozn.",nr(r,["poznamka","pozn","note","poznmka"]))),e.filter(Boolean).join("      ")}function Be(r){const e=r==null?"":String(r);return e.trim().length?e:""}function Xh(r){return!r||r.length===0?"":r.join(", ")}function $3(r){const e=document.createElement("div");return e.innerHTML=r,e.textContent||e.innerText||""}const H3=r=>new jt({text:`${r}: `,bold:!0,size:$i,color:Fr,font:Ws}),W3=r=>new jt({text:String(r??""),size:lc,color:Gf,font:Ws}),Jh=(r,e)=>new at({children:[H3(r),W3(e)],spacing:{before:0,after:40}});function Zf(r){const i=[];for(let a=0;a<r.length;a+=2){const l=r.slice(a,a+2);i.push(new vr({children:Array.from({length:2}).map((c,d)=>{const u=l[d];return new fr({children:u?[new at({children:[new jt({text:u[0],size:$i,color:Fr,bold:!0,font:Ws})],spacing:{after:10}}),new at({children:[new jt({text:String(u[1]??""),size:lc,font:Ws})],spacing:{before:0,after:30}})]:[new at({children:[new jt({text:""})]})],width:{size:50,type:Xt.PERCENTAGE},margins:{top:20,bottom:10,left:40,right:40},borders:{top:{style:We.NONE,size:0,color:"FFFFFF"},bottom:{style:We.NONE,size:0,color:"FFFFFF"},left:{style:We.NONE,size:0,color:"FFFFFF"},right:{style:We.NONE,size:0,color:"FFFFFF"}}})})}))}return new nn({width:{size:100,type:Xt.PERCENTAGE},rows:i,borders:{top:{style:We.NONE,size:0,color:"FFFFFF"},bottom:{style:We.NONE,size:0,color:"FFFFFF"},left:{style:We.NONE,size:0,color:"FFFFFF"},right:{style:We.NONE,size:0,color:"FFFFFF"},insideH:{style:We.NONE,size:0,color:"FFFFFF"},insideV:{style:We.NONE,size:0,color:"FFFFFF"}}})}function V3(r){return new nn({width:{size:100,type:Xt.PERCENTAGE},borders:{top:{style:We.NONE,size:0,color:"FFFFFF"},bottom:{style:We.NONE,size:0,color:"FFFFFF"},left:{style:We.NONE,size:0,color:"FFFFFF"},right:{style:We.NONE,size:0,color:"FFFFFF"},insideH:{style:We.NONE,size:0,color:"FFFFFF"},insideV:{style:We.NONE,size:0,color:"FFFFFF"}},rows:[new vr({children:[new fr({children:[new at({alignment:Ft.CENTER,children:[new jt({text:r,bold:!0,size:28,font:Ws})],spacing:{before:60,after:60}})],margins:{top:120,bottom:120,left:140,right:140},borders:{top:{style:We.SINGLE,size:24,color:"CBD5E1"},bottom:{style:We.SINGLE,size:24,color:"CBD5E1"},left:{style:We.SINGLE,size:24,color:"CBD5E1"},right:{style:We.SINGLE,size:24,color:"CBD5E1"}}})]})]})}function q3(r){const e=[["Jmno",r?.jmeno],["Firma",r?.firma],["Ev. . osvden",r?.cislo_osvedceni],["Ev. . oprvnn",r?.cislo_opravneni],["IO",r?.ico],["DI",r?.dic],["Adresa",r?.adresa],["Telefon",r?.phone],["E-mail",r?.email]];return Zf(e)}function K3(r){const e=[["Adresa stavby",Be(r.adresa)],["Pedmt revize",Be(r.objekt)],["Objednatel revize",Be(r.objednatel)]];return Zf(e)}async function G3({safeForm:r,technician:e,normsAll:i,usedInstruments:a,revId:l}){const c=[ot(`slo revizn zprvy: ${Be(r.evidencni||l)}`,{color:Fr,after:40}),ot("Zprva o elektrick instalaci",{center:!0,bold:!0,size:32,after:120}),ot(Be(r.typRevize),{bold:!0,center:!0,after:30}),ot(i.length?`V souladu s ${i.join(", ")}`:"V souladu s Chyb informace",{center:!0,color:Fr})],d=q3(e),u=K3(r),p=a?.length?a.map(pe=>[pe.name,pe.serial,pe.calibration]):[["","",""]],y=Zh(["Pstroj","Vrobn slo","Kalibran list"],p,[50,25,25]),v=(()=>{const pe=r.conclusion?.safety;return pe?pe==="able"?"Elektrick instalace je z hlediska bezpenosti schopna provozu":pe==="not_able"?"Elektrick instalace nen z hlediska bezpenosti schopna provozu":String(pe):"Chyb informace"})(),k=V3(v),E=[ot("Doporuen termn pt revize dle SN 332000-6 ed.2 l. 6.5.2:",{color:Fr,center:!0}),ot(Be(r.conclusion?.validUntil),{bold:!0,center:!0})],C=[new at({pageBreakBefore:!0}),ur("1. Identifikace",26),ur("Montn firma",22),Zf([["Firma",Be(r.montFirma)],["Oprvnn firmy",Be(r.montFirmaAuthorization)]]),ur("Ochrann opaten",22),new nn({width:{size:100,type:Xt.PERCENTAGE},borders:{top:{style:We.NONE,size:0,color:"FFFFFF"},bottom:{style:We.NONE,size:0,color:"FFFFFF"},left:{style:We.NONE,size:0,color:"FFFFFF"},right:{style:We.NONE,size:0,color:"FFFFFF"},insideH:{style:We.NONE,size:0,color:"FFFFFF"},insideV:{style:We.NONE,size:0,color:"FFFFFF"}},rows:[new vr({children:[new fr({children:[Jh("Zkladn ochrana",(r.protection_basic||[]).join(", ")||""),Jh("Ochrana pi porue",(r.protection_fault||[]).join(", ")||""),Jh("Doplkov ochrana",(r.protection_additional||[]).join(", ")||"")],width:{size:100,type:Xt.PERCENTAGE},margins:{top:20,bottom:10,left:40,right:40},borders:{top:{style:We.NONE,size:0,color:"FFFFFF"},bottom:{style:We.NONE,size:0,color:"FFFFFF"},left:{style:We.NONE,size:0,color:"FFFFFF"},right:{style:We.NONE,size:0,color:"FFFFFF"}}})]})]}),ot("Popis a rozsah revidovanho objektu",{bold:!0}),ot($3(r.inspectionDescription||"")),ot(`Jmenovit napt: ${Be(r.voltage)}`),ot(`Druh st: ${Be(r.sit)}`),ot(`Pedloen dokumentace: ${Be(r.documentation)}`),ot("Vnj vlivy",{bold:!0}),ot(Be(r.environment)),ot("Plohy",{bold:!0}),ot(Be(r.extraNotes))],N=[ur("2. Prohldka",26),ot("Soupis provedench kon dle SN 33 2000-6 l. 6.4.2.3",{color:Fr}),...r.performedTasks?.length?r.performedTasks.map(pe=>ot(` ${pe}`,{after:30})):[ot("")]],g=Object.entries(r.tests||{}).map(([pe,H])=>{let q="";return H==null?q="":typeof H=="string"?q=H:typeof H=="object"?q=H.note??H.result?.note??H.result??"":q=String(H),{name:pe,note:String(q||"")}}),j=[ur("3. Zkouen",26),L3(["Nzev zkouky","Poznmka / vsledek"],g.length?g.map(pe=>[pe.name,pe.note]):[["",""]],[40,60])],f=[];(r.boards||[]).length?(f.push(ur("4. Men  rozvade",26)),(r.boards||[]).forEach((pe,H)=>{f.push(ot("",{after:300})),f.push(ot(`Rozvad: ${Be(pe?.name)||`#${H+1}`}`,{bold:!0,size:wl,after:20}));const q=`Vrobce: ${Be(pe?.vyrobce)} | Typ: ${Be(pe?.typ)} | Umstn: ${Be(pe?.umisteni)} | S/N: ${Be(pe?.vyrobniCislo)} | Napt: ${Be(pe?.napeti)} | Odpor: ${Be(pe?.odpor)} | IP: ${Be(pe?.ip)}`;f.push(ot(q,{color:Fr,size:wl,after:60}));const T=xw(pe?.komponenty||[]),Z=(T.length?T:[{_level:0,nazev:""}]).map(Q=>{const Y=ww(Q._level),ne=Be(Q?.nazev||Q?.name)||"",J=Be(Q?.popis||Q?.description||""),ue=nr(Q,["typ","type","druh"]),W=nr(Q,["poles","poly","pocet_polu","pocetPolu"]),U=nr(Q,["dimenze","dim","prurez"]),re=nr(Q,["riso","Riso","izolace","insulation"]),ae=nr(Q,["ochrana","zs","Zs","loop_impedance"]),ye=nr(Q,["vybavovaciCasMs","vybavovaci_cas_ms","rcd_time","trip_time","vybavovaciCas","cas_vybaveni"]),ce=nr(Q,["vybavovaciProudmA","vybavovaci_proud_ma","rcd_trip_current","trip_current","i_fi","ifi"]),P=nr(Q,["poznamka","pozn","note"]),O=[];J&&J!==""&&O.push(J),ue&&O.push(`typ: ${ue}`),W&&O.push(`ply: ${W}`),U&&O.push(`dim.: ${U}`),re&&O.push(`Riso: ${Fn(re)} M`),ae&&O.push(`Zs: ${Fn(ae)} `),ye&&O.push(`t: ${Fn(ye)} ms`),ce&&O.push(`I: ${Fn(ce)} mA`),P&&O.push(`Pozn.: ${P}`);const te=new at({children:[Ii(`${Y}${ne}`,{bold:!0,size:wl})],spacing:{after:20}}),ee=new at({children:[Ii(O.filter(Boolean).join("      "),{size:wl,color:Fr})]});return[te,ee]});f.push(new nn({width:{size:100,type:Xt.PERCENTAGE},borders:{top:{style:We.SINGLE,size:1,color:"e2e8f0"},bottom:{style:We.SINGLE,size:1,color:"e2e8f0"},left:{style:We.SINGLE,size:1,color:"e2e8f0"},right:{style:We.SINGLE,size:1,color:"e2e8f0"},insideH:{style:We.SINGLE,size:1,color:"e5e7eb"},insideV:{style:We.NONE,size:0,color:"FFFFFF"}},rows:Z.map(Q=>new vr({children:[new fr({children:Q,margins:{top:40,bottom:40,left:70,right:70}})]}))}))})):f.push(ur("4. Men  rozvade",26),ot(""));const b=[];(r.rooms||[]).length?(b.push(ur("4. Men  mstnosti",26)),(r.rooms||[]).forEach((pe,H)=>{b.push(ot("",{after:300})),b.push(ot(`Mstnost: ${Be(pe?.name)||`#${H+1}`}`,{bold:!0,after:10})),b.push(ot(`Poznmka: ${Be(pe?.details)}`,{color:Fr,after:20}));const q=(pe?.devices||[]).length?pe.devices.map(T=>[Be(T?.typ),Be(T?.pocet),Be(T?.dimenze),Be(T?.riso),Be(T?.ochrana),Be(T?.podrobnosti||T?.note)]):[["","","","","",""]];b.push(Zh(["Typ","Poet","Dimenze","Riso [M]","Ochrana []","Poznmka"],q,[18,10,18,14,14,26]))})):b.push(ur("4. Men  mstnosti",26),ot(""));const w=(r.defects||[]).length?r.defects.map(pe=>[Be(pe?.description),Be(pe?.standard),Be(pe?.article)]):[["","",""]],_=[new at({pageBreakBefore:!0}),ot("",{after:300}),ur("5. Zvady",26),Zh(["Popis zvady","SN","lnek"],w,[60,20,20])],A=[ot("",{after:300}),ur("6. Zvr",26),ot(Be(r.conclusion?.text)),ot(`Dal revize: ${Be(r.conclusion?.validUntil)}`)],B=Be(r.evidencni||l),M=B3(B),$=new pw({features:{updateFields:!0},styles:{default:{document:{run:{font:Ws,size:lc,color:Gf},paragraph:{spacing:{after:60}}}}},sections:[{properties:{page:{size:{width:wi(210),height:wi(297),orientation:$l.PORTRAIT},margin:{top:wi(14),bottom:wi(14),left:wi(14),right:wi(14)},pageNumbers:{start:1}}},headers:{default:M},footers:{default:M3()},children:[...c,ur("Revizn technik",22),d,ur("Revidovan objekt",22),u,ur("Vsledek revize",22),k,...E,ur("Pouit mic pstroje",22),y,ur("Rozdlovnk",22),ot("Provozovatel  1"),ot("Revizn technik  1"),ot("...................................................."),ot("...................................................."),ot("V ........................................ dne ........................................"),ot("Podpis provozovatele: ______________________________"),ot("Podpis reviznho technika: _________________________"),...C,...N,...j,...f,...b,..._,...A]}]}),D=await vw.toBlob($),le=String(r.evidencni||l||"vystup");m0.saveAs(D,`revizni_zprava_${le}.docx`)}const zl=750,wf=520,Yh="0F172A",Ei="475569",bl="E2E8F0",bw="F8FAFC",Z3="F1F5F9",Xf={top:120,bottom:120,left:120,right:120},jl={top:80,bottom:80,left:90,right:90},X3={top:60,bottom:60,left:80,right:80};async function J3(r,e,i){const a=r||{},l=a.lps||{},c=Array.isArray(a.measuringInstruments)?a.measuringInstruments:[],d=Array.isArray(l.earthResistance)?l.earthResistance:[];Array.isArray(l.continuity)&&l.continuity;const u=Array.isArray(l.spdTests)?l.spdTests:[],p=Array.isArray(l.visualChecks)?l.visualChecks:[],y=Array.isArray(a.defects)?a.defects:[],v=Array.isArray(l.scopeChecks)?l.scopeChecks:[],k={vnejsi:"Vnj ochrana ped bleskem",vnitrni:"Vnitn ochrana ped bleskem",uzemneni:"Uzemnn",pospojovani:"Ekvipotenciln pospojovn",spd:"SPD / pepov ochrana"},E=[Y3(a),_r(60),Sr("Identifikace objektu"),...yx([["Revidovan objekt",ct(a.objekt)],["Adresa objektu",ct(a.adresa)],["Objednatel revize",ct(a.objednatel)],["Majitel / provozovatel",ct(l.owner)],["Projekt zpracoval",ct(l.projectBy)],["slo projektu",ct(l.projectNo)]],jl),_r(60),Sr("Identifikace reviznho technika"),...yx([["Revizn technik",ct(a.technicianName)],["Firma",ct(a.technicianCompanyName)],["Ev. . osvden",ct(a.technicianCertificateNumber)],["Ev. . oprvnn",ct(a.technicianAuthorizationNumber)],["IO / DI",`${ct(a.technicianCompanyIco)} / ${ct(a.technicianCompanyDic)}`],["Kontakt",ct(a.technicianPhone||a.technicianEmail||a.technicianCompanyAddress)],["Adresa",ct(a.technicianCompanyAddress)]],jl),_r(120),Sr("Pouit mic pstroje"),za(["Pstroj","Vrobn slo","Kalibran list"],c.map(g=>[ct(g?.name||g?.measurement_text),ct(g?.serial||g?.measurement_text||g?.serial_no||g?.sn),ct(g?.calibration_code||g?.calibration_list||g?.calibration)]),"Nejsou uvedeny dn pstroje.",!0,jl),_r(120),Sr("Celkov posudek"),bi(iA(a),!0),_r(80),Sr("Rozdlovnk a podpisy"),bi(`Rozdlovnk: ${ct(l.distributionList||"Provozovatel 2x, Revizn technik 1x")}`,!0),_r(40),aA(a,l),_r(120),Sr("Normy, rozsah a zkladn daje"),Q3([["Primrn norma",eA(l.standard)],["Tda LPS",ct(l.class)],["SPD ochrana",tA(l.spdProtectionUsed)],["Typ stechy",ct(l.roofTypeOther||l.roofType)],["Sten krytina",ct(l.roofCoverOther||l.roofCover)],["Poet svod",ct(l.downConductorsCountOther||l.downConductorsCount)]]),new at({style:"Muted",children:[new jt({text:"Rozsah revize: ",bold:!0}),new jt(v.length?v.map(g=>k[g]||g).join(" | "):"Neuvedeno")],spacing:{before:60,after:160}}),Sr("Popis objektu a poznmky"),bi(l.reportText||a.extraNotes||"-"),_r(120),Sr("Men zemnch odpor"),za(["Zemni","Odpor []","Poznmka"],d.map((g,j)=>[ct(g?.label||`Zemni ${j+1}`),g?.valueOhm?`${g.valueOhm} `:"-",ct(g?.note)]),"Zznam o men nen k dispozici.",!0,X3)];Array.isArray(l.scopeChecks)&&l.scopeChecks.includes("spd")&&(l?.spdProtectionUsed==="no"?(E.push(_r(120)),E.push(Sr("SPD / pepov ochrana")),E.push(bi("SPD nen pouita."))):u.length&&(E.push(_r(120)),E.push(Sr("SPD / pepov ochrana")),E.push(za(["Msto","Typ","Vsledek","Poznmka"],u.map((g,j)=>[ct(g?.location||`Stanovit ${j+1}`),ct(g?.type),ct(g?.result),ct(g?.note)]),"Bez zznamu o SPD.")))),p.length&&(E.push(_r(120)),E.push(Sr("Vizuln kontrola")),E.push(za(["Poloka","Stav","Poznmka"],p.map((g,j)=>[ct(g?.text||`Kontrola ${j+1}`),g?.ok?"Vyhovuje":"Nevyhovuje",ct(g?.note)]),"Nebyla zadna dn kontrola."))),E.push(_r(140)),E.push(Sr("Nkres LPS")),E.push(e?new at({children:[new WE({data:e,transformation:sA(i)})],spacing:{after:200}}):bi("Skica LPS nen k dispozici.")),E.push(_r(120)),E.push(Sr("Zjistene zavady"));const C=y.map(g=>[ct(g?.description),ct(g?.standard&&g?.article?`${g.standard} / ${g.article}`:g?.standard||g?.article),ct(g?.recommendation||g?.remedy)]);E.push(za(["Popis","Norma / cl.","Doporucene opatreni"],C,"Zadne zavady.",!1,jl)),E.push(_r(120)),E.push(Sr("Zvr")),E.push(bi(ct(a.conclusion?.text||l.reportText)));const N=new pw({styles:{default:{document:{run:{font:"Calibri",size:22,color:Yh},paragraph:{spacing:{after:120}}}},paragraphStyles:[{id:"Title",basedOn:"Normal",quickFormat:!0,run:{size:40,bold:!0,color:Yh},paragraph:{spacing:{after:120}}},{id:"Subtitle",basedOn:"Normal",quickFormat:!0,run:{size:20,color:Ei},paragraph:{spacing:{after:80}}},{id:"SectionHeading",basedOn:"Normal",quickFormat:!0,run:{size:28,bold:!0,color:Yh},paragraph:{spacing:{before:220,after:120}}},{id:"Muted",basedOn:"Normal",quickFormat:!0,run:{color:Ei}},{id:"TableHeader",basedOn:"Normal",quickFormat:!0,run:{size:20,bold:!0,color:Ei},paragraph:{spacing:{after:0}}}]},sections:[{properties:{},headers:{default:new mw({children:[new at({alignment:Ft.CENTER,children:[new jt({text:`Evidenn slo: ${ct(a.evidencni||l.projectNo)}`,bold:!0}),new jt({text:"    Strana "}),Bn.CURRENT,new jt({text:" / "}),Bn.TOTAL_PAGES]})]})},footers:{default:new yw({children:[new at({alignment:Ft.CENTER,children:[new jt({text:"Strana "}),Bn.CURRENT,new jt({text:" / "}),Bn.TOTAL_PAGES]})]})},children:E}]});return await vw.toBlob(N)}function _r(r){return new at({text:"",spacing:{after:r}})}function Sr(r){return new at({text:r,style:"SectionHeading"})}function Y3(r,e){return new nn({width:{size:100,type:Xt.PERCENTAGE},borders:jw(),rows:[new vr({children:[new fr({borders:Un(),children:[new at({text:"Zprva o revizi LPS",style:"Title",alignment:Ft.CENTER}),new at({style:"Subtitle",alignment:Ft.CENTER,children:[new jt({text:`Typ revize: ${ct(r.typRevize)}`,italics:!0})]}),new at({style:"Muted",alignment:Ft.CENTER,children:[new jt({text:`Zahjen: ${Il(r.date_start)}`}),new jt({text:"   "}),new jt({text:`Dokonen: ${Il(r.date_end)}`}),new jt({text:"   "}),new jt({text:`Vyhotoveno: ${Il(r.date_created)}`})]})]})]})]})}function Q3(r,e=Xf){return new nn({width:{size:100,type:Xt.PERCENTAGE},rows:r.map(([i,a])=>new vr({children:[new fr({width:{size:35,type:Xt.PERCENTAGE},shading:{fill:bw},borders:Un(),margins:e,children:[new at({children:[new jt({text:i,bold:!0,color:Ei})]})]}),new fr({width:{size:65,type:Xt.PERCENTAGE},borders:Un(),margins:e,children:[new at({text:Wl(a)})]})]}))})}function za(r,e,i,a=!1,l=Xf){const c=new vr({children:r.map(u=>new fr({shading:{fill:bw},borders:a?Ol():Un(),margins:l,children:[new at({text:u,style:"TableHeader"})]}))}),d=e.length===0?[new vr({children:[new fr({columnSpan:r.length,borders:a?Ol():Un(),margins:l,children:[new at({text:i,style:"Muted"})]})]})]:e.map((u,p)=>new vr({children:u.map(y=>new fr({shading:p%2===1?{fill:Z3}:void 0,borders:a?Ol():Un(),margins:l,children:[new at({text:Wl(y)})]}))}));return new nn({width:{size:100,type:Xt.PERCENTAGE},rows:[c,...d]})}function bi(r,e=!1){return new nn({width:{size:100,type:Xt.PERCENTAGE},rows:[new vr({children:[new fr({borders:e?Ol():Un(),margins:{top:180,bottom:180,left:180,right:180},shading:{fill:"FFFFFF"},children:[new at({text:ct(r)})]})]})]})}function Ol(){return{top:{style:We.SINGLE,size:4,color:bl},bottom:{style:We.SINGLE,size:4,color:bl},left:{style:We.SINGLE,size:4,color:bl},right:{style:We.SINGLE,size:4,color:bl}}}function Un(){return{top:{style:We.NONE},bottom:{style:We.NONE},left:{style:We.NONE},right:{style:We.NONE}}}function jw(){return{top:{style:We.NONE},bottom:{style:We.NONE},left:{style:We.NONE},right:{style:We.NONE},insideHorizontal:{style:We.NONE},insideVertical:{style:We.NONE}}}function ct(r){if(r===0)return"0";if(!r)return"-";const e=String(r).trim();return e.length>0?e:"-"}function Wl(r){if(r===0)return"0";if(!r)return"-";const e=String(r).trim();return e.length>0?e:"-"}function Il(r){if(!r)return"-";const[e,i,a]=r.split("-");return e&&i&&a?`${a}.${i}.${e}`:r}function eA(r){const e=(r||"").toLowerCase();return e?e.includes("62305")?"SN EN 62305-3 ed.2":e.includes("341390")?"SN 34 1390":r:"-"}function tA(r){return r==="yes"?"Je pouita":r==="no"?"Nen pouita":ct(r)}function rA(r){if(!r)return;const e=r.match(/^data:image\/[a-zA-Z0-9+]+;base64,(.+)$/);if(!e)return;const i=e[1],a=atob(i),l=new Uint8Array(a.length);for(let c=0;c<a.length;c++)l[c]=a.charCodeAt(c);return l}function nA(r){return!r||typeof Image>"u"?Promise.resolve(void 0):new Promise(e=>{const i=new Image;i.onload=()=>{const a=i.naturalHeight/i.naturalWidth||.7,l=Math.min(i.naturalWidth,zl),c=Math.min(l*a,wf);e({width:l,height:c})},i.onerror=()=>e(void 0),i.src=r})}function sA(r){if(!r)return{width:zl,height:Math.min(zl*.6,wf)};const e=Math.min(r.width,zl),i=Math.min(r.height,wf);return{width:e,height:i}}function iA(r){const e=r?.conclusion?.safety,i=r?.lps?.standard,a=i==="CSN_EN_62305"?"SN EN 62305":i==="CSN_34_1390"?"SN 34 1390":"zvolen norm";return e==="able"?`Instalovan hromosvodn zazen vyhovuje poadavkm normy ${a} a jeho sousti jsou ve funknm stavu.`:e==="not_able"?`Instalovan hromosvodn zazen nevyhovuje poadavkm normy ${a} a jeho sousti nejsou ve funknm stavu.`:ct(e||r?.conclusion?.safetyText)}function yx(r,e=Xf){const i=[{type:Ul.LEFT,position:4500},{type:Ul.LEFT,position:9e3}],a=[];for(let l=0;l<r.length;l+=2){const c=r.slice(l,l+2),d=[];c[0]&&(d.push(new jt({text:`${c[0][0]}: `,bold:!0,color:Ei})),d.push(new jt({text:Wl(c[0][1])}))),c[1]&&(d.push(new jt({text:"	"})),d.push(new jt({text:`${c[1][0]}: `,bold:!0,color:Ei})),d.push(new jt({text:Wl(c[1][1])}))),a.push(new at({tabStops:i,children:d,spacing:{after:60},leftTabStop:4500,margins:e}))}return a}function aA(r,e){const i=ct(e.signatureCity||r.signatureCity),a=Il(r.date_created);return new nn({width:{size:100,type:Xt.PERCENTAGE},borders:jw(),rows:[new vr({children:[new fr({borders:Un(),children:[new at({text:`V ${i} dne ${a}`,spacing:{after:80}}),new at({text:"Podpis provozovatele:",spacing:{after:20}}),new at({text:"______________________________",spacing:{after:60}})]}),new fr({borders:Un(),children:[new at({text:"",spacing:{after:80}}),new at({text:"Podpis reviznho technika:",spacing:{after:20}}),new at({text:"______________________________",spacing:{after:60}}),new at({text:"Raztko:",spacing:{after:20}}),new at({text:"",spacing:{after:60},alignment:Ft.CENTER})]})]})]})}async function oA(r){const e=r.form||{},i=e?.lps?.sketchPng||e?.sketchPng,a=rA(i),l=await nA(i),c=await J3(e,a,l),d=String(e?.evidencni||r.revId||"lps");m0.saveAs(c,`lps_revizni_zprava_${d}.docx`)}const lA={width:"210mm",minHeight:"297mm",padding:"18mm 24mm 24mm",background:"#fff"},cA={vnejsi:"Vnj ochrana ped bleskem",vnitrni:"Vnitn ochrana ped bleskem",uzemneni:"Uzemnn",pospojovani:"Ekvipotenciln pospojovn",spd:"SPD / pepov ochrana"},Vr=({children:r})=>n.jsx("h2",{className:"text-lg font-semibold text-slate-800 mb-3 tracking-wide",children:r}),It=({label:r,value:e})=>n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-xs uppercase tracking-wide text-slate-500",children:r}),n.jsx("span",{className:"text-sm font-medium text-slate-900",children:e||""})]}),ji=({headers:r,rows:e,emptyText:i})=>n.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-200",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-slate-50 text-slate-600",children:n.jsx("tr",{children:r.map(a=>n.jsx("th",{className:"px-3 py-2 text-left font-semibold uppercase tracking-wide text-xs",children:a},a))})}),n.jsx("tbody",{children:e.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:r.length,className:"px-3 py-4 text-center text-slate-400 text-sm",children:i})}):e.map((a,l)=>n.jsx("tr",{className:l%2===0?"bg-white":"bg-slate-50/70",children:a.map((c,d)=>n.jsx("td",{className:"px-3 py-2 align-top text-slate-800",children:c},d))},l))})]})}),Nl=r=>{if(!r)return"";const[e,i,a]=r.split("-");return e&&i&&a?`${a}.${i}.${e}`:r},uA=r=>{const e=(r||"").toLowerCase();return e?e.includes("62305")?"SN EN 62305-3 ed.2":e.includes("341390")?"SN 34 1390":r||"":""},lt=r=>{if(r===0)return"0";if(!r)return"";const e=String(r).trim();return e.length>0?e:""};function dA({safeForm:r,technician:e,isPrintView:i}){const a=r?.lps||{},l=V.useMemo(()=>Array.isArray(r?.measuringInstruments)?r.measuringInstruments:[],[r?.measuringInstruments]),c=Array.isArray(a?.scopeChecks)?a.scopeChecks:[],d=Array.isArray(a?.earthResistance)?a.earthResistance:[],u=Array.isArray(a?.continuity)?a.continuity:[],p=Array.isArray(a?.spdTests)?a.spdTests:[],y=Array.isArray(a?.visualChecks)?a.visualChecks:[],v=Array.isArray(r?.defects)?r.defects:[];V.useMemo(()=>{const M={};return l.forEach($=>{$?.id!=null&&(M[String($.id)]=$)}),M},[l]);const k=l.map((M,$)=>[n.jsx("span",{className:"font-medium text-slate-900",children:lt(M.name)},`inst-${$}-name`),n.jsx("span",{children:lt(M.serial)},`inst-${$}-serial`),n.jsx("span",{children:lt(M.calibration_code)},`inst-${$}-cal`)]),E=d.map((M,$)=>[lt(M?.label||`Zemni ${$+1}`),M?.valueOhm?`${M.valueOhm} `:"",lt(M?.note)]),C=u.map((M,$)=>[lt(M?.conductor||`Svod ${$+1}`),M?.valueMilliOhm?`${M.valueMilliOhm} m`:"",lt(M?.note)]),N=p.map((M,$)=>[lt(M?.location||`Stanovit ${$+1}`),lt(M?.type),lt(M?.result),lt(M?.note)]),g=y.map((M,$)=>[lt(M?.text||`Kontrola ${$+1}`),M?.ok?"OK":"NOK",lt(M?.note)]),j=v.map((M,$)=>[n.jsx("span",{className:"font-medium text-slate-900",children:lt(M?.description)},`def-${$}-text`),lt(M?.standard||M?.article),lt(M?.recommendation||M?.remedy)]),f=c.map(M=>cA[M]||M),b=lt(r?.typRevize),w=a?.spdProtectionUsed==="yes"?"Je pouita":a?.spdProtectionUsed==="no"?"Nen pouita":"Neuvedeno",_={...lA,boxShadow:i?"none":"0 30px 80px rgba(15,23,42,0.18)",borderRadius:i?0:28,marginBottom:i?"0":"3rem",pageBreakAfter:"always"},A=lt(r?.conclusion?.text||a?.reportTextConclusion||""),B=lt(r?.conclusion?.validUntil||a?.nextRevision||"");return n.jsx("div",{className:"flex justify-center bg-slate-100/60 py-8 print:bg-white print:py-0",children:n.jsxs("article",{style:_,className:"text-slate-900",children:[n.jsxs("header",{className:"border-b border-slate-200 pb-4 mb-6 flex flex-col gap-3 md:flex-row md:items-end md:justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"uppercase text-xs tracking-[0.35em] text-slate-500",children:"Revizn zprva"}),n.jsx("h1",{className:"text-3xl md:text-4xl font-semibold text-slate-900",children:"Zprva o revizi LPS"}),n.jsxs("div",{className:"mt-2 text-sm text-slate-600",children:["Typ revize: ",b]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("span",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Evidenn slo"}),n.jsx("div",{className:"text-2xl font-bold text-slate-900",children:lt(r?.evidencni)}),n.jsxs("div",{className:"mt-4 text-xs text-slate-600 space-y-1",children:[n.jsxs("div",{children:["Datum zahjen: ",Nl(r?.date_start)]}),n.jsxs("div",{children:["Datum ukonen: ",Nl(r?.date_end)]}),n.jsxs("div",{children:["Datum vyhotoven: ",Nl(r?.date_created)]})]})]})]}),n.jsxs("section",{className:"mb-6",children:[n.jsx(Vr,{children:"Identifikace objektu"}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm mb-4",children:[n.jsx(It,{label:"Revidovan objekt",value:lt(r?.objekt)}),n.jsx(It,{label:"Adresa objektu",value:lt(r?.adresa)}),n.jsx(It,{label:"Objednatel revize",value:lt(r?.objednatel)}),n.jsx(It,{label:"Majitel / provozovatel",value:lt(a?.owner)}),n.jsx(It,{label:"Projekt zpracoval",value:lt(a?.projectBy)}),n.jsx(It,{label:"slo projektu",value:lt(a?.projectNo)})]}),n.jsx(Vr,{children:"Identifikace reviznho technika"}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[n.jsx(It,{label:"Revizn technik",value:lt(e.jmeno)}),n.jsx(It,{label:"Firma",value:lt(e.firma)}),n.jsx(It,{label:"Ev. . osvden",value:lt(e.cislo_osvedceni)}),n.jsx(It,{label:"Ev. . oprvnn",value:lt(e.cislo_opravneni)}),n.jsx(It,{label:"I",value:lt(e.ico)}),n.jsx(It,{label:"DI",value:lt(e.dic)}),n.jsx(It,{label:"Kontakt",value:lt(e.phone||e.email||e.adresa)}),n.jsx(It,{label:"Adresa",value:lt(e.adresa)})]})]}),n.jsxs("section",{className:"mb-6",children:[n.jsx(Vr,{children:"Pouit mic pstroje"}),n.jsx(ji,{headers:["Pstroj","Vrobn slo","Kalibran list"],rows:k,emptyText:"Nejsou uvedeny dn pstroje."})]}),n.jsxs("section",{className:"mb-6",children:[n.jsx(Vr,{children:"Normy, rozsah a zkladn daje"}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[n.jsx(It,{label:"Primrn norma",value:uA(a?.standard)}),n.jsx(It,{label:"Tda LPS",value:lt(a?.class)}),n.jsx(It,{label:"SPD ochrana",value:w}),n.jsx(It,{label:"Typ stechy",value:lt(a?.roofTypeOther||a?.roofType)}),n.jsx(It,{label:"Sten krytina",value:lt(a?.roofCoverOther||a?.roofCover)}),n.jsx(It,{label:"Poet svod",value:lt(a?.downConductorsCountOther||a?.downConductorsCount)})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("span",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Rozsah revize"}),n.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:f.length===0?n.jsx("span",{className:"text-sm text-slate-500",children:"Neuvedeno"}):f.map(M=>n.jsx("span",{className:"px-3 py-1 rounded-full bg-slate-100 text-slate-700 text-xs font-semibold",children:M},M))})]})]}),n.jsxs("section",{className:"mb-6",children:[n.jsx(Vr,{children:"Popis objektu a poznmky"}),n.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 text-sm leading-relaxed text-slate-800 min-h-[80px]",children:lt(a?.reportText||r?.extraNotes||"")})]}),n.jsxs("section",{className:"mb-6",children:[n.jsx(Vr,{children:"Men zemnch odpor"}),n.jsx(ji,{headers:["Zemni","Odpor []","Poznmka"],rows:E,emptyText:"Zznam o men nen k dispozici."})]}),C.length>0&&n.jsxs("section",{className:"mb-6",children:[n.jsx(Vr,{children:"Kontinuita svod"}),n.jsx(ji,{headers:["Svod","Hodnota [m]","Poznmka"],rows:C,emptyText:"Kontinuita nebyla zadna."})]}),N.length>0&&n.jsxs("section",{className:"mb-6",children:[n.jsx(Vr,{children:"SPD / pepov ochrana"}),n.jsx(ji,{headers:["Msto","Typ","Vsledek","Poznmka"],rows:N,emptyText:"Bez zznamu o SPD."})]}),g.length>0&&n.jsxs("section",{className:"mb-6",children:[n.jsx(Vr,{children:"Vizuln kontrola"}),n.jsx(ji,{headers:["Poloka","Stav","Poznmka"],rows:g,emptyText:"Nebyla zadna dn kontrola."})]}),j.length>0&&n.jsxs("section",{className:"mb-6",children:[n.jsx(Vr,{children:"Zjitn zvady"}),n.jsx(ji,{headers:["Popis","Norma / l.","Doporuen opaten"],rows:j,emptyText:"Nebyla zadna dn zvada."})]}),n.jsxs("section",{className:"mb-6",children:[n.jsx(Vr,{children:"Celkov posudek"}),n.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 text-sm text-slate-800 space-y-3",children:[n.jsx("p",{children:A}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[n.jsx(It,{label:"Doporuen termn pt revize",value:Nl(B)}),n.jsx(It,{label:"Rozdlovnk",value:lt(a?.distributionList||"Provozovatel 2x, Revizn technik 1x")})]})]})]}),n.jsxs("section",{className:"mb-0",children:[n.jsx(Vr,{children:"Nkres LPS"}),a?.sketchPng?n.jsx("img",{src:a.sketchPng,alt:"Skica LPS",className:"w-full max-h-[220mm] object-contain rounded-2xl border border-slate-200 bg-white"}):n.jsx("div",{className:"rounded-2xl border border-dashed border-slate-300 bg-slate-50 text-slate-500 text-sm p-6 text-center",children:"Skica LPS zatm nen k dispozici."})]})]})})}function Is({children:r}){return n.jsx("h2",{className:"text-xl font-bold mb-2",children:r})}function Zt({children:r}){return n.jsx("th",{className:"py-2 px-3",children:r})}function St({children:r,colSpan:e}){return n.jsx("td",{className:"py-1.5 px-3 align-top",colSpan:e,children:r})}function qt({label:r,value:e}){return n.jsxs("div",{children:[n.jsx("div",{className:"text-[13px] text-slate-500",children:r}),n.jsx("div",{className:"font-medium",children:Be(e)})]})}function hA({value:r}){return!r||!String(r).trim().length?n.jsx("div",{className:"italic text-slate-400",children:""}):n.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:r}})}function fA({evidencni:r,revId:e,typRevize:i,normsAll:a}){return n.jsxs("header",{className:"mb-4",style:{breakInside:"avoid"},children:[n.jsxs("div",{className:"mt-1 text-sm text-left",children:["slo revizn zprvy: ",n.jsx("strong",{children:Be(r||e)})]}),n.jsxs("div",{className:"w-full text-center mt-1",children:[n.jsx("h1",{className:"text-2xl font-bold tracking-wide",children:"Zprva o revizi elektrick instalace"}),n.jsx("div",{className:"text-base font-semibold mt-1",children:Be(i)}),n.jsx("div",{className:"mt-1 text-xs text-slate-500",children:a.length?n.jsxs(n.Fragment,{children:["V souladu s ",a.join(", ")]}):n.jsx(n.Fragment,{children:"V souladu s Chyb informace"})})]}),n.jsx("hr",{className:"mt-3 border-slate-200"})]})}function pA({tech:r}){return n.jsxs("section",{style:{breakInside:"avoid"},children:[n.jsx("h2",{className:"font-semibold text-lg mb-2",children:"Revizn technik"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[n.jsx(qt,{label:"Jmno",value:r.jmeno}),n.jsx(qt,{label:"Firma",value:r.firma}),n.jsx(qt,{label:"Ev. . osvden",value:r.cislo_osvedceni}),n.jsx(qt,{label:"IO",value:r.ico}),n.jsx(qt,{label:"Ev. . oprvnn",value:r.cislo_opravneni}),n.jsx(qt,{label:"DI",value:r.dic}),n.jsx(qt,{label:"Adresa",value:r.adresa}),n.jsx(qt,{label:"Telefon",value:r.phone}),n.jsx(qt,{label:"E-mail",value:r.email})]})]})}function mA(){const{revId:r}=Ba(),{form:e}=Mi(),i=V.useRef(null),{profile:a,company:l}=ps(),d=new URLSearchParams(window.location.search).get("print")==="1";V.useEffect(()=>{const j=new URLSearchParams(window.location.search);if(j.get("print")==="1"&&j.get("auto")==="1"){(async()=>{await new Promise(b=>requestAnimationFrame(()=>b(null)));try{document.fonts?.ready&&await document.fonts.ready}catch{}setTimeout(()=>window.print(),150)})();const f=()=>{j.get("close")==="1"&&window.close()};return window.addEventListener("afterprint",f),()=>window.removeEventListener("afterprint",f)}},[]),V.useEffect(()=>{const j=new URLSearchParams(window.location.search);if(j.get("print")==="1"&&j.get("vector")==="1")return document.documentElement.classList.add("print-vector"),()=>document.documentElement.classList.remove("print-vector")},[]);const u=V.useMemo(()=>({evidencni:"",objekt:"",adresa:"",objednatel:"",montFirma:"",montFirmaAuthorization:"",typRevize:"",sit:"",voltage:"",date_start:"",date_end:"",date_created:"",documentation:"",environment:"",extraNotes:"",protection_basic:[],protection_fault:[],protection_additional:[],norms:[],customNorm1:"",customNorm2:"",customNorm3:"",boards:[],rooms:[],defects:[],performedTasks:[],inspectionTemplate:"",inspectionDescription:"",tests:{},measuringInstruments:[],instruments:[],conclusion:{text:"",safety:"",validUntil:""},...e||{}}),[e]),p=!!(u?.lps&&Object.keys(u.lps).length>0)||String(u?.typRevize||"").toLowerCase().includes("lps"),y=V.useMemo(()=>{const j=a||{},f=l||{};return{jmeno:j.fullName||j.name||"Chyb informace",firma:f.name||f.companyName||"Chyb informace",cislo_osvedceni:j.certificateNumber||j.certificate_number||"Chyb informace",cislo_opravneni:j.authorizationNumber||j.authorization_number||"Chyb informace",ico:f.ico||f.icoNumber||"Chyb informace",dic:f.dic||f.taxId||"Chyb informace",adresa:f.address||j.address||"Chyb informace",phone:j.phone||f.phone||"Chyb informace",email:j.email||f.email||"Chyb informace"}},[a,l]);V.useCallback(j=>{(j==="lps_info"||j==="lps_measure")&&setLpsActiveTab(j);const f=document.getElementById(j);f&&f.scrollIntoView({behavior:"smooth",block:"start"})},[]);const v=V.useMemo(()=>{const j=[u.customNorm1,u.customNorm2,u.customNorm3].filter(f=>f&&String(f).trim().length>0);return[...u.norms||[],...j]},[u.norms,u.customNorm1,u.customNorm2,u.customNorm3]),k=V.useMemo(()=>{const j=u.tests||{};return Object.entries(j).map(([f,b])=>{let w="";return b==null?w="":typeof b=="string"?w=b:typeof b=="object"?w=b.note??b.result?.note??b.result??"":w=String(b),{name:f,note:String(w||"")}})},[u.tests]),E=V.useMemo(()=>{const j=u.conclusion?.safety;return j?j==="able"?"Elektrick instalace je z hlediska bezpenosti schopna provozu":j==="not_able"?"Elektrick instalace nen z hlediska bezpenosti schopna provozu":String(j):"Chyb informace"},[u.conclusion?.safety]),C=V.useMemo(()=>{const j=Array.isArray(u.measuringInstruments)&&u.measuringInstruments.length?u.measuringInstruments:Array.isArray(u.instruments)?u.instruments:[];return(j.some(w=>typeof w?.checked=="boolean")?j.filter(w=>w?.checked):j).map(w=>({id:String(w?.id??w?._id??w?.uuid??Math.random()),name:Be(w?.name),serial:Be(w?.serial||w?.serial_no||w?.sn),calibration:Be(w?.calibration_list||w?.calibration||w?.calibration_code),measurement_text:Be(w?.measurement_text||w?.measurement||w?.rozsah),calibration_valid_until:Be(w?.calibration_valid_until),note:Be(w?.note)}))},[u.measuringInstruments,u.instruments]),N=async()=>{try{await G3({safeForm:u,technician:y,normsAll:v,usedInstruments:C,revId:r})}catch(j){alert(`Nepodailo se vygenerovat DOCX: ${j?.message||j}`)}},g=async()=>{await oA({form:u,revId:r})};return p?n.jsx("div",{className:"min-h-screen bg-white text-slate-900",children:n.jsxs("div",{className:"flex",id:"app-chrome",children:[!d&&n.jsx("div",{className:"print:hidden",children:n.jsx(Tr,{mode:"summary"})}),n.jsxs("main",{className:d?"flex-1":"flex-1 p-6 md:p-10",children:[!d&&n.jsx("div",{className:"flex justify-end gap-3 mb-4 print:hidden",children:n.jsx("button",{onClick:g,className:"px-4 py-2 rounded bg-indigo-700 text-white",children:"Export do Wordu"})}),n.jsx(dA,{safeForm:u,technician:y,isPrintView:d})]})]})}):n.jsx("div",{className:"min-h-screen bg-white text-slate-900",children:n.jsxs("div",{className:"flex",id:"app-chrome",children:[!d&&n.jsx("div",{className:"print:hidden",children:n.jsx(Tr,{mode:"summary"})}),n.jsxs("main",{className:d?"flex-1":"flex-1 p-6 md:p-10",children:[!d&&n.jsx("div",{className:"flex justify-end gap-3 mb-4 print:hidden",children:n.jsx("button",{onClick:N,className:"px-4 py-2 rounded bg-indigo-600 text-white",children:"Export do Wordu"})}),n.jsx("style",{children:`
            @font-face{ font-family:'Carlito'; src:url('/fonts/Carlito-Regular.woff2') format('woff2'); font-weight:400; font-style:normal; font-display:swap; }
            @font-face{ font-family:'Carlito'; src:url('/fonts/Carlito-Bold.woff2') format('woff2'); font-weight:700; font-style:normal; font-display:swap; }
            @font-face{ font-family:'Carlito'; src:url('/fonts/Carlito-Italic.woff2') format('woff2'); font-weight:400; font-style:italic; font-display:swap; }
            @font-face{ font-family:'Carlito'; src:url('/fonts/Carlito-BoldItalic.woff2') format('woff2'); font-weight:700; font-style:italic; font-display:swap; }
            body { font-family: Carlito, Calibri, Arial, sans-serif; background:#fff; }

            .a4 {
              width: 210mm;
              min-height: 297mm;
              margin: 12mm auto;
              background: #fff;
              color:#0f172a;
              padding: 12mm 14mm 20mm;
              box-shadow: 0 4px 18px rgba(0,0,0,.12);
              border-radius: 2px;
            }
            .a4 + .a4 { page-break-before: always; }
            .print-only { display: none; }

            @media print {
              .break-before-page { break-before: page; }
            }

            @page { size: A4; margin: 0; }
            @media print {
              html, body { -webkit-print-color-adjust: exact; print-color-adjust: exact; background: #fff !important; }
              .print\\:hidden { display:none !important; }
              .a4 {
                margin: 0 !important;
                box-shadow: none !important;
                border: 0 !important;
                page-break-after: always;
              }
              .print-only { display:block !important; }

              .print-vector .a4, .print-vector .a4 * {
                -webkit-transform:none !important; transform:none !important;
                filter:none !important; -webkit-filter:none !important;
                text-shadow:none !important; box-shadow:none !important;
                backdrop-filter:none !important; opacity:1 !important;
              }
            }
          `}),n.jsxs("div",{id:"report-content",ref:i,children:[n.jsxs("section",{className:"a4",children:[n.jsx(fA,{evidencni:u.evidencni,revId:r,typRevize:u.typRevize,normsAll:v}),n.jsx(pA,{tech:y}),n.jsx("hr",{className:"my-5 border-slate-200"}),n.jsxs("section",{className:"mt-3",style:{breakInside:"avoid"},children:[n.jsx("h2",{className:"font-semibold text-lg mb-2",children:"Revidovan objekt"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-sm",children:[n.jsx(qt,{label:"Adresa stavby",value:u.adresa}),n.jsx(qt,{label:"Pedmt revize",value:u.objekt}),n.jsx(qt,{label:"Objednatel revize",value:u.objednatel})]})]}),n.jsxs("section",{className:"mt-4",style:{breakInside:"avoid"},children:[n.jsx("h2",{className:"font-semibold text-lg mb-2",children:"Zvr"}),n.jsx("div",{className:"border rounded-md p-3 bg-white",style:{breakInside:"avoid"},children:n.jsx("div",{className:"whitespace-pre-line text-sm",children:u.conclusion?.text||"-"})})]}),n.jsxs("section",{className:"mt-4",style:{breakInside:"avoid"},children:[n.jsx("h2",{className:"font-semibold text-lg mb-2",children:"Pouit mic pstroje"}),n.jsxs("table",{className:"w-full text-sm border",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"text-left",children:[n.jsx(Zt,{children:"Pstroj"}),n.jsx(Zt,{children:"Vrobn slo"}),n.jsx(Zt,{children:"Kalibran list"})]})}),n.jsx("tbody",{children:(()=>{const j=(u.measuringInstruments&&u.measuringInstruments.length?u.measuringInstruments:u.instruments)||[],b=j.some(w=>typeof w?.checked=="boolean")?j.filter(w=>w?.checked):j;return b.length?b.map((w,_)=>n.jsxs("tr",{children:[n.jsx(St,{children:Be(w?.name)}),n.jsx(St,{children:Be(w?.serial||w?.serial_no||w?.sn)}),n.jsx(St,{children:Be(w?.calibration_list||w?.calibration||w?.calibration_code)})]},_)):n.jsxs("tr",{children:[n.jsx(St,{children:""}),n.jsx(St,{children:""}),n.jsx(St,{children:""})]})})()})]})]}),n.jsxs("section",{className:"mt-4",style:{breakInside:"avoid"},children:[n.jsx("h2",{className:"font-semibold text-lg mb-2",children:"Mic pstroje (pouit)"}),n.jsx("div",{className:"w-[80%] mx-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"text-left",children:[n.jsx(Zt,{children:"Pstroj"}),n.jsx(Zt,{children:"Co m"}),n.jsx(Zt,{children:"Kal. list"}),n.jsx(Zt,{children:"Sriov slo"}),n.jsx(Zt,{children:"Platnost"})]})}),n.jsx("tbody",{children:C.length?C.map((j,f)=>n.jsxs("tr",{className:f%2===0?"bg-white":"bg-slate-50/60",children:[n.jsx(St,{children:j.name}),n.jsx(St,{children:j.measurement_text}),n.jsx(St,{children:j.calibration}),n.jsx(St,{children:j.serial}),n.jsx(St,{children:j.calibration_valid_until})]},j.id||f)):n.jsx("tr",{children:n.jsx(St,{colSpan:5,children:""})})})]})})]}),n.jsx("section",{className:"mt-4",style:{breakInside:"avoid"},children:n.jsxs("div",{className:"text-sm text-center",children:[n.jsx("p",{children:"Doporuen termn pt revize dle SN332000-6 ed.2 l.6.5.2:"}),n.jsx("p",{children:n.jsx("strong",{children:Be(u.conclusion?.validUntil)})})]})}),n.jsxs("section",{className:"mt-3",style:{breakInside:"avoid"},children:[n.jsx("h2",{className:"font-semibold text-lg mb-2",children:"Celkov posudek"}),n.jsx("div",{className:"border-2 border-slate-700 rounded-md p-3 mt-1 mb-4",style:{breakInside:"avoid"},children:n.jsx("div",{className:"whitespace-pre-line text-base font-semibold text-center",children:E})})]}),n.jsxs("section",{className:"mt-4",style:{breakInside:"avoid"},children:[n.jsx("h2",{className:"font-semibold text-sm mb-2",children:"Rozdlovnk"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 text-sm gap-2",children:[n.jsx("div",{children:"Provozovatel  1"}),n.jsx("div",{children:"Revizn technik  1"})]}),n.jsxs("div",{className:"text-sm mt-2",children:[n.jsx("div",{children:"...................................................."}),n.jsx("div",{children:"...................................................."})]}),n.jsxs("div",{className:"mt-5 text-sm",children:[n.jsx("div",{className:"mb-2",children:"V ........................................ dne ........................................"}),n.jsxs("div",{className:"grid grid-cols-2 gap-6 items-end",children:[n.jsx("div",{children:n.jsx("div",{className:"border-t border-slate-300 pt-1",children:"Podpis provozovatele"})}),n.jsx("div",{className:"text-right",children:n.jsx("div",{className:"border-t border-slate-300 pt-1 inline-block",children:"Podpis reviznho technika"})})]})]})]})]}),n.jsxs("section",{className:"a4",children:[n.jsx(Is,{children:"1. Identifikace"}),n.jsxs("section",{className:"mb-4",children:[n.jsx("h2",{className:"font-semibold mb-2",children:"Montn firma"}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-2 text-sm",children:[n.jsx(qt,{label:"Firma",value:u.montFirma}),n.jsx(qt,{label:"Oprvnn firmy",value:u.montFirmaAuthorization})]})]}),n.jsxs("section",{className:"mb-4",children:[n.jsx("h2",{className:"font-semibold mb-2",children:"Ochrann opaten"}),n.jsxs("div",{className:"space-y-1 text-sm",children:[n.jsx(qt,{label:"Zkladn ochrana",value:Xh(u.protection_basic)}),n.jsx(qt,{label:"Ochrana pi porue",value:Xh(u.protection_fault)}),n.jsx(qt,{label:"Doplkov ochrana",value:Xh(u.protection_additional)})]})]}),n.jsxs("section",{className:"mb-4",children:[n.jsx("h2",{className:"font-semibold mb-2",children:"Popis a rozsah revidovanho objektu"}),n.jsx(hA,{value:u.inspectionDescription})]}),n.jsxs("section",{className:"mb-4 text-sm space-y-1",children:[n.jsx(qt,{label:"Jmenovit napt",value:u.voltage}),n.jsx(qt,{label:"Druh st",value:u.sit}),n.jsx(qt,{label:"Pedloen dokumentace",value:u.documentation})]}),n.jsxs("section",{className:"mb-4",children:[n.jsx("h2",{className:"font-semibold mb-2",children:"Vnj vlivy"}),n.jsx("div",{className:"text-sm whitespace-pre-line",children:Be(u.environment)})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"font-semibold mb-2",children:"Plohy"}),n.jsx("div",{className:"text-sm whitespace-pre-line",children:Be(u.extraNotes)})]}),n.jsx("hr",{className:"my-6 border-slate-200"}),n.jsx(Is,{children:"2. Prohldka"}),n.jsxs("section",{className:"mb-2",children:[n.jsx("div",{className:"font-medium mb-1",children:"Soupis provedench kon dle SN 33 2000-6 l. 6.4.2.3"}),u.performedTasks?.length?n.jsx("ul",{className:"list-disc ml-6 text-sm",children:u.performedTasks.map((j,f)=>n.jsx("li",{children:j},f))}):n.jsx("div",{className:"text-sm italic text-slate-400",children:""})]})]}),n.jsxs("section",{className:"a4",children:[n.jsx(Is,{children:"3. Zkouen"}),n.jsx("section",{className:"mb-6",children:n.jsx("div",{className:"w-[80%] mx-auto",style:{breakInside:"avoid"},children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"text-left",children:[n.jsx(Zt,{children:"Nzev zkouky"}),n.jsx(Zt,{children:"Poznmka / vsledek"})]})}),n.jsx("tbody",{children:k.length?k.map((j,f)=>n.jsxs("tr",{className:f%2===0?"bg-white":"bg-slate-50/60",children:[n.jsx(St,{children:j.name}),n.jsx(St,{children:j.note})]},f)):n.jsxs("tr",{children:[n.jsx(St,{children:""}),n.jsx(St,{})]})})]})})}),n.jsx(Is,{children:"4. Men  rozvade"}),u.boards?.length?n.jsx("div",{className:"space-y-6",children:u.boards.map((j,f)=>{const b=xw(j?.komponenty||[]);return n.jsxs("div",{className:"mt-6",children:[n.jsxs("div",{className:"font-semibold",children:["Rozvad: ",Be(j?.name)||`#${f+1}`]}),n.jsxs("div",{className:"text-sm text-slate-600",children:["Vrobce: ",Be(j?.vyrobce)," | Typ: ",Be(j?.typ)," | Umstn: ",Be(j?.umisteni)," | S/N:"," ",Be(j?.vyrobniCislo)," | Napt: ",Be(j?.napeti)," | Odpor: ",Be(j?.odpor)," | IP:"," ",Be(j?.ip)]}),n.jsx("div",{className:"mt-2 border border-slate-200 rounded divide-y","data-paginate":"board-box",children:(b.length?b:[{_level:0,nazev:""}]).map((w,_)=>{const A=ww(w._level),B=Be(w?.nazev||w?.name),M=Be(w?.popis||w?.description||""),$=U3(w);return n.jsx("div",{className:_%2===0?"bg-white":"bg-slate-50/60",style:{breakInside:"avoid",paddingLeft:12+(w._level||0)*18},children:n.jsxs("div",{className:"py-2 px-3",children:[n.jsxs("div",{className:"font-medium",children:[n.jsx("span",{className:"font-mono text-slate-500 whitespace-pre mr-1",children:A}),B]}),n.jsxs("div",{className:"text-xs text-slate-600 mt-0.5",children:[M!=="Chyb informace"&&n.jsx("span",{className:"mr-2",children:M}),$]})]})},_)})})]},f)})}):n.jsx("div",{className:"italic text-slate-400",children:""})]}),n.jsxs("section",{className:"a4",children:[n.jsx(Is,{children:"4. Men  mstnosti"}),u.rooms?.length?n.jsx("div",{className:"space-y-6",children:u.rooms.map((j,f)=>n.jsxs("div",{className:"mt-6",children:[n.jsxs("div",{className:"font-semibold",children:["Mstnost: ",Be(j?.name)||`#${f+1}`]}),n.jsxs("div",{className:"text-sm text-slate-600",children:["Poznmka: ",Be(j?.details)]}),n.jsxs("table",{className:"w-full text-sm border mt-2",style:{breakInside:"avoid"},children:[n.jsx("thead",{children:n.jsxs("tr",{className:"text-left",children:[n.jsx(Zt,{children:"Typ"}),n.jsx(Zt,{children:"Poet"}),n.jsx(Zt,{children:"Dimenze"}),n.jsx(Zt,{children:"Riso [M]"}),n.jsx(Zt,{children:"Ochrana []"}),n.jsx(Zt,{children:"Poznmka"})]})}),n.jsx("tbody",{children:j.devices?.length?j.devices.map((b,w)=>n.jsxs("tr",{className:w%2===0?"bg-white":"bg-slate-50/60",children:[n.jsx(St,{children:Be(b?.typ)}),n.jsx(St,{children:Be(b?.pocet)}),n.jsx(St,{children:Be(b?.dimenze)}),n.jsx(St,{children:Be(b?.riso)}),n.jsx(St,{children:Be(b?.ochrana)}),n.jsx(St,{children:Be(b?.podrobnosti||b?.note)})]},w)):n.jsx("tr",{children:n.jsx(St,{colSpan:6,children:""})})})]})]},f))}):n.jsx("div",{className:"italic text-slate-400",children:""}),n.jsx("hr",{className:"my-10 border-slate-200"}),n.jsxs("section",{className:"break-before-page",children:[n.jsx(Is,{children:"5. Zvady"}),u.defects?.length?n.jsxs("table",{className:"w-full text-sm",style:{breakInside:"avoid"},children:[n.jsx("thead",{children:n.jsxs("tr",{className:"text-left",children:[n.jsx(Zt,{children:"Popis zvady"}),n.jsx(Zt,{children:"SN"}),n.jsx(Zt,{children:"lnek"})]})}),n.jsx("tbody",{children:u.defects.map((j,f)=>n.jsxs("tr",{className:f%2===0?"bg-white":"bg-slate-50/60",children:[n.jsx(St,{children:Be(j?.description)}),n.jsx(St,{children:Be(j?.standard)}),n.jsx(St,{children:Be(j?.article)})]},f))})]}):n.jsx("div",{className:"italic text-slate-400",children:""})]}),n.jsx("hr",{className:"my-6 border-slate-200"}),n.jsx(Is,{children:"6. Zvr"}),n.jsx("section",{style:{breakInside:"avoid"},children:n.jsxs("div",{className:"space-y-4 text-sm",children:[n.jsx("div",{className:"whitespace-pre-line",children:Be(u.conclusion?.text)}),n.jsx("div",{className:"border-2 border-slate-700 rounded-md p-3",children:n.jsx("div",{className:"text-xl font-extrabold tracking-wide text-center",children:E})}),n.jsxs("div",{children:["Dal revize: ",n.jsx("strong",{children:Be(u.conclusion?.validUntil)})]})]})})]})]})]})]})})}function yA(){const{revId:r}=Ba(),e=Number(r);return n.jsx(zf,{revId:e,children:n.jsx(mA,{})})}function gA(){const[r,e]=V.useState([]),[i,a]=V.useState([]),[l,c]=V.useState([]),[d,u]=V.useState(),[p,y]=V.useState(),[v,k]=V.useState("");async function E(){const $=await Ke.get("/catalog/types");e($.data)}async function C($){const D=await Ke.get("/catalog/manufacturers",{params:{type_id:$}});a(D.data)}async function N($){const D=await Ke.get("/catalog/models",{params:{manufacturer_id:$,q:v||void 0}});c(D.data)}V.useEffect(()=>{E().catch(()=>e([]))},[]),V.useEffect(()=>{d&&(C(d).catch(()=>a([])),y(void 0),c([]))},[d]),V.useEffect(()=>{p&&N(p).catch(()=>c([]))},[p,v]);async function g(){const $=prompt("Nzev typu")?.trim();if(!$)return;const D=await Ke.post("/catalog/types",{name:$});e([D.data,...r])}async function j($){const D=prompt("Pejmenovat typ",$.name)?.trim();if(!D)return;const le=await Ke.put(`/catalog/types/${$.id}`,{name:D});e(r.map(pe=>pe.id===$.id?le.data:pe))}async function f($){confirm("Smazat typ?")&&(await Ke.delete(`/catalog/types/${$.id}`),e(r.filter(D=>D.id!==$.id)),u(void 0),a([]),c([]))}async function b(){if(!d)return alert("Vyber typ");const $=prompt("Nzev vrobce")?.trim();if(!$)return;const D=await Ke.post("/catalog/manufacturers",{name:$,type_id:d});a([D.data,...i])}async function w($){const D=prompt("Pejmenovat vrobce",$.name)?.trim();if(!D)return;const le=await Ke.put(`/catalog/manufacturers/${$.id}`,{name:D});a(i.map(pe=>pe.id===$.id?le.data:pe))}async function _($){confirm("Smazat vrobce?")&&(await Ke.delete(`/catalog/manufacturers/${$.id}`),a(i.filter(D=>D.id!==$.id)),c([]))}async function A(){if(!p)return alert("Vyber vrobce");const $=prompt("Nzev modelu")?.trim();if(!$)return;const D=await Ke.post("/catalog/models/",{name:$,manufacturer_id:p});c([D.data,...l])}async function B($){const D=prompt("Pejmenovat model",$.name)?.trim();if(!D)return;const le=await Ke.put(`/catalog/models/${$.id}`,{name:D});c(l.map(pe=>pe.id===$.id?le.data:pe))}async function M($){confirm("Smazat model?")&&(await Ke.delete(`/catalog/models/${$.id}`),c(l.filter(D=>D.id!==$.id)))}return n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"font-semibold",children:"Typy"}),n.jsx("button",{className:"text-sm bg-blue-600 text-white px-2 py-1 rounded",onClick:g,children:""})]}),n.jsxs("div",{className:"border rounded divide-y bg-white",children:[r.map($=>n.jsxs("div",{className:`p-2 cursor-pointer flex justify-between items-center ${d===$.id?"bg-blue-50":""}`,onClick:()=>u($.id),children:[n.jsx("span",{children:$.name}),n.jsxs("span",{className:"text-sm whitespace-nowrap",children:[n.jsx("button",{className:"mx-1 text-blue-700",onClick:D=>{D.stopPropagation(),j($)},children:""}),n.jsx("button",{className:"mx-1 text-red-700",onClick:D=>{D.stopPropagation(),f($)},children:""})]})]},$.id)),r.length===0&&n.jsx("div",{className:"p-3 text-gray-500 text-sm",children:"dn typy"})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"font-semibold",children:"Vrobci"}),n.jsx("button",{className:"text-sm bg-blue-600 text-white px-2 py-1 rounded",onClick:b,children:""})]}),n.jsxs("div",{className:"border rounded divide-y bg-white",children:[i.map($=>n.jsxs("div",{className:`p-2 cursor-pointer flex justify-between items-center ${p===$.id?"bg-blue-50":""}`,onClick:()=>y($.id),children:[n.jsx("span",{children:$.name}),n.jsxs("span",{className:"text-sm whitespace-nowrap",children:[n.jsx("button",{className:"mx-1 text-blue-700",onClick:D=>{D.stopPropagation(),w($)},children:""}),n.jsx("button",{className:"mx-1 text-red-700",onClick:D=>{D.stopPropagation(),_($)},children:""})]})]},$.id)),(!d||i.length===0)&&n.jsx("div",{className:"p-3 text-gray-500 text-sm",children:"Vyber typ"})]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsx("h3",{className:"font-semibold",children:"Modely"})}),n.jsxs("div",{className:"flex gap-2 mb-2",children:[n.jsx("input",{className:"border rounded p-1 text-sm flex-1",placeholder:"Hledat",value:v,onChange:$=>k($.target.value)}),n.jsx("button",{className:"text-sm bg-blue-600 text-white px-2 py-1 rounded",onClick:A,children:""})]}),n.jsxs("div",{className:"border rounded divide-y bg-white",children:[l.map($=>n.jsxs("div",{className:"p-2 flex justify-between items-center",children:[n.jsx("span",{children:$.name}),n.jsxs("span",{className:"text-sm whitespace-nowrap",children:[n.jsx("button",{className:"mx-1 text-blue-700",onClick:()=>B($),children:""}),n.jsx("button",{className:"mx-1 text-red-700",onClick:()=>M($),children:""})]})]},$.id)),(!p||l.length===0)&&n.jsx("div",{className:"p-3 text-gray-500 text-sm",children:"Vyber vrobce"})]})]})]})}function fs(r){return String(r??"").toLowerCase()}function kl(r){const e=r?.response?.data;if(!e)return r?.message||"Neznm chyba";if(typeof e=="string")return e;if(e?.detail){if(typeof e.detail=="string")return e.detail;try{return JSON.stringify(e.detail)}catch{return"Chyba"}}try{return JSON.stringify(e)}catch{return"Chyba"}}function _l(r){return Array.from(new Set(r.filter(Boolean))).sort((e,i)=>e.localeCompare(i))}function gx({value:r,onChange:e,onSave:i,onClose:a,suggestions:l,idPrefix:c}){return n.jsx("tr",{className:"bg-blue-50 border-t",children:n.jsx("td",{className:"p-0",colSpan:7,children:n.jsxs("div",{className:"p-3 grid grid-cols-1 md:grid-cols-3 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-gray-600",children:"Pstroj"}),n.jsx("input",{list:`${c}-names`,className:"w-full p-2 border rounded",value:r.name??"",onChange:d=>e("name",d.target.value)}),n.jsx("datalist",{id:`${c}-names`,children:l.names.map(d=>n.jsx("option",{value:d},d))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-gray-600",children:"Vrobce"}),n.jsx("input",{list:`${c}-mans`,className:"w-full p-2 border rounded",value:r.manufacturer??"",onChange:d=>e("manufacturer",d.target.value)}),n.jsx("datalist",{id:`${c}-mans`,children:l.manufacturers.map(d=>n.jsx("option",{value:d},d))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-gray-600",children:"Typ"}),n.jsx("input",{list:`${c}-models`,className:"w-full p-2 border rounded",value:r.model??"",onChange:d=>e("model",d.target.value)}),n.jsx("datalist",{id:`${c}-models`,children:l.models.map(d=>n.jsx("option",{value:d},d))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-gray-600",children:"Tda"}),n.jsx("input",{className:"w-full p-2 border rounded",value:r.trida??"",onChange:d=>e("trida",d.target.value)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-gray-600",children:"IP"}),n.jsx("input",{list:`${c}-ips`,className:"w-full p-2 border rounded",value:r.ip??"",onChange:d=>e("ip",d.target.value)}),n.jsx("datalist",{id:`${c}-ips`,children:l.ips.map(d=>n.jsx("option",{value:d},d))})]}),n.jsxs("div",{className:"md:col-span-3",children:[n.jsx("label",{className:"text-xs text-gray-600",children:"Poznmka"}),n.jsx("textarea",{rows:3,className:"w-full p-2 border rounded",value:r.note??"",onChange:d=>e("note",d.target.value)})]}),n.jsxs("div",{className:"md:col-span-3 flex justify-end gap-2",children:[n.jsx("button",{className:"px-4 py-2 bg-gray-200 rounded",onClick:a,children:"Zavt"}),n.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",onClick:i,children:"Uloit"})]})]})})})}function vA({q:r,setQ:e,onAdd:i}){return n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2 mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{placeholder:"Hledat (nzev, vrobce, typ, IP, tda)",className:"w-80 max-w-full p-2 border rounded",value:r,onChange:a=>e(a.target.value)}),r&&n.jsx("button",{className:"px-3 py-2 bg-gray-200 rounded",onClick:()=>e(""),title:"Vyistit",children:""})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",onClick:i,children:"+ Nov pstroj"})})]})}function xA(){const[r,e]=V.useState([]),[i,a]=V.useState(!1),[l,c]=V.useState(null),[d,u]=V.useState(""),[p,y]=V.useState("name"),[v,k]=V.useState("asc"),[E,C]=V.useState(null),[N,g]=V.useState({}),[j,f]=V.useState(!1),[b,w]=V.useState({name:"",manufacturer:"",model:"",trida:"",ip:"",note:""});V.useEffect(()=>{let Z=!0;return(async()=>{a(!0),c(null);try{const Q=await Ke.get("/devices",{params:{offset:0,limit:1e3}});Z&&e(Array.isArray(Q.data)?Q.data:[])}catch(Q){Z&&c(kl(Q))}finally{Z&&a(!1)}})(),()=>{Z=!1}},[]);const _=V.useMemo(()=>({names:_l(r.map(Z=>Z.name)),manufacturers:_l(r.map(Z=>Z.manufacturer)),models:_l(r.map(Z=>Z.model)),ips:_l(r.map(Z=>Z.ip??""))}),[r]),A=V.useMemo(()=>{const Z=fs(d);let Q=r.filter(Y=>Z?fs(Y.name).includes(Z)||fs(Y.manufacturer).includes(Z)||fs(Y.model).includes(Z)||fs(Y.trida).includes(Z)||fs(Y.ip).includes(Z):!0);return Q.sort((Y,ne)=>{const J=fs(Y[p]),ue=fs(ne[p]);return J<ue?v==="asc"?-1:1:J>ue?v==="asc"?1:-1:0}),Q},[r,d,p,v]);function B(Z){p===Z?k(Q=>Q==="asc"?"desc":"asc"):(y(Z),k("asc"))}function M(Z){E===Z.id?(C(null),g({})):(C(Z.id),g({id:Z.id,name:Z.name,manufacturer:Z.manufacturer,model:Z.model,trida:Z.trida??"",ip:Z.ip??"",note:Z.note??""}))}function $(Z,Q){g(Y=>({...Y,[Z]:Q}))}async function D(){if(!N.id)return;const Z={name:N.name??"",manufacturer:N.manufacturer??"",model:N.model??"",trida:N.trida??null,ip:N.ip??null,note:N.note??null};try{await Ke.patch(`/devices/${N.id}`,Z),e(Q=>Q.map(Y=>Y.id===N.id?{...Y,...Z}:Y))}catch(Q){alert(kl(Q))}}async function le(Z){if(confirm("Opravdu smazat tento pstroj?"))try{await Ke.delete(`/devices/${Z}`),e(Q=>Q.filter(Y=>Y.id!==Z)),E===Z&&(C(null),g({}))}catch(Q){alert(kl(Q))}}function pe(){f(!0)}function H(){f(!1),w({name:"",manufacturer:"",model:"",trida:"",ip:"",note:""})}function q(Z,Q){w(Y=>({...Y,[Z]:Q}))}async function T(){const Z={name:b.name?.trim()||"",manufacturer:b.manufacturer?.trim()||"",model:b.model?.trim()||"",trida:b.trida?String(b.trida):null,ip:b.ip?String(b.ip):null,note:b.note?String(b.note):null};if(!Z.name||!Z.manufacturer||!Z.model){alert("Vypl nzev, vrobce a typ.");return}try{const Q=await Ke.post("/devices",Z);e(Y=>[{...Q.data},...Y]),H()}catch(Q){alert(kl(Q))}}return n.jsxs("div",{className:"bg-white rounded shadow p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Pstroje"}),i&&n.jsx("span",{className:"text-sm text-gray-500",children:"Natm"})]}),l&&n.jsx("div",{className:"mb-3 text-sm text-red-700 bg-red-50 border border-red-200 p-2 rounded",children:l}),n.jsx(vA,{q:d,setQ:u,onAdd:pe}),j&&n.jsx("div",{className:"mb-3 border rounded overflow-hidden",children:n.jsx("table",{className:"w-full text-sm",children:n.jsx("tbody",{children:n.jsx(gx,{value:b,onChange:q,onSave:T,onClose:H,suggestions:_,idPrefix:"create"})})})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm border",children:[n.jsx("thead",{className:"bg-gray-100",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 text-left w-14",children:"#"}),n.jsx(Oa,{label:"Pstroj",active:p==="name",dir:v,onClick:()=>B("name")}),n.jsx(Oa,{label:"Vrobce",active:p==="manufacturer",dir:v,onClick:()=>B("manufacturer")}),n.jsx(Oa,{label:"Typ",active:p==="model",dir:v,onClick:()=>B("model")}),n.jsx(Oa,{label:"Tda",active:p==="trida",dir:v,onClick:()=>B("trida")}),n.jsx(Oa,{label:"IP",active:p==="ip",dir:v,onClick:()=>B("ip")}),n.jsx("th",{className:"p-2 text-left w-28",children:"Akce"})]})}),n.jsxs("tbody",{children:[A.map(Z=>n.jsxs(nt.Fragment,{children:[n.jsxs("tr",{className:`border-t cursor-pointer hover:bg-blue-50 ${E===Z.id?"bg-blue-50":""}`,onClick:()=>M(Z),children:[n.jsx("td",{className:"p-2",children:Z.id}),n.jsx("td",{className:"p-2",children:Z.name}),n.jsx("td",{className:"p-2",children:Z.manufacturer}),n.jsx("td",{className:"p-2",children:Z.model}),n.jsx("td",{className:"p-2",children:Z.trida||""}),n.jsx("td",{className:"p-2",children:Z.ip||""}),n.jsx("td",{className:"p-2",children:n.jsx("button",{className:"text-red-600 hover:underline",onClick:Q=>{Q.stopPropagation(),le(Z.id)},children:"Smazat"})})]}),E===Z.id&&n.jsx(gx,{value:N,onChange:$,onSave:D,onClose:()=>{C(null),g({})},suggestions:_,idPrefix:`edit-${Z.id}`})]},Z.id)),A.length===0&&!i&&n.jsx("tr",{children:n.jsx("td",{className:"p-4 text-center text-gray-500",colSpan:7,children:"dn zznamy."})})]})]})})]})}function Oa({label:r,active:e,dir:i,onClick:a}){return n.jsx("th",{className:"p-2 text-left select-none",children:n.jsxs("button",{type:"button",onClick:a,className:`inline-flex items-center gap-1 ${e?"text-blue-700":"text-gray-800"}`,title:"Seadit",children:[n.jsx("span",{children:r}),e&&n.jsx("span",{children:i==="asc"?"":""})]})})}function wA(){const[r,e]=V.useState([]),[i,a]=V.useState([]),[l,c]=V.useState(!1),[d,u]=V.useState(null),[p,y]=V.useState(""),[v,k]=V.useState(null),[E,C]=V.useState({family_id:"",spec:""}),[N,g]=V.useState(!1),[j,f]=V.useState(""),[b,w]=V.useState("");V.useEffect(()=>{_()},[]);async function _(){c(!0),u(null);try{const[Q,Y]=await Promise.all([Ke.get("/cables/families"),Ke.get("/cables",{params:{offset:0,limit:5e3}})]);a(Array.isArray(Q.data)?Q.data:[]),e(Array.isArray(Y.data)?Y.data:[])}catch(Q){console.warn("Cables load failed:",Q?.response?.data||Q),u("Nepodailo se nast katalog kabel.")}finally{c(!1)}}function A(Q){return(Q.label??`${Q.family??""} ${Q.spec??""}`.trim())||""}const B=V.useMemo(()=>{const Q=p.trim().toLowerCase();return Q?r.filter(Y=>{const ne=(Y.family||"").toLowerCase(),J=(Y.spec||"").toLowerCase(),ue=(A(Y)||"").toLowerCase();return ne.includes(Q)||J.includes(Q)||ue.includes(Q)}):r},[r,p]),M=Q=>{const Y=Q.trim().toLowerCase();if(!Y)return null;const ne=i.find(J=>J.name.trim().toLowerCase()===Y);return ne?ne.id:null},$=V.useMemo(()=>{const Q=j.trim().toLowerCase(),Y=Q?r.filter(ne=>(ne.family||"").trim().toLowerCase()===Q).map(ne=>ne.spec):r.map(ne=>ne.spec);return Array.from(new Set(Y.filter(Boolean))).sort((ne,J)=>String(ne).localeCompare(String(J),"cs"))},[r,j]);async function D(){const Q=j.trim(),Y=b.trim();if(!Q||!Y)return;let ne=M(Q);if(!ne)try{const J=await Ke.post("/cables/families",{name:Q});ne=J.data.id,a(ue=>[...ue,J.data])}catch(J){if(await _(),ne=M(Q),!ne){console.warn("Create family failed:",J?.response?.data||J),alert("Vytvoen rodiny se nepodailo.");return}}try{const J=await Ke.post("/cables",{family_id:ne,spec:Y});e(ue=>[J.data,...ue]),f(Q),w(""),g(!1)}catch(J){console.warn("Create cable failed:",J?.response?.data||J),J?.response?.status===409?alert("Tato kombinace rodiny a specifikace u existuje."):alert("Vytvoen kabelu se nepodailo.")}}function le(Q){Q.key==="Enter"?(Q.preventDefault(),D()):Q.key==="Escape"&&(g(!1),f(""),w(""))}function pe(Q){k(Q.id),C({family_id:Q.family_id??"",spec:Q.spec??""})}function H(){k(null),C({family_id:"",spec:""})}async function q(Q){if(!(!E.spec.trim()||E.family_id===""||Number.isNaN(Number(E.family_id))))try{const Y={family_id:Number(E.family_id),spec:E.spec.trim()},ne=await Ke.patch(`/cables/${Q}`,Y);e(J=>J.map(ue=>ue.id===Q?ne.data:ue)),k(null),C({family_id:"",spec:""})}catch(Y){console.warn("Save cable failed:",Y?.response?.data||Y),alert("Uloen se nepodailo.")}}async function T(Q){if(confirm("Opravdu smazat kabel?"))try{await Ke.delete(`/cables/${Q}`),e(Y=>Y.filter(ne=>ne.id!==Q))}catch(Y){console.warn("Delete cable failed:",Y?.response?.data||Y),alert("Smazn se nepodailo.")}}const Z=V.useMemo(()=>{const Q=new Map;return i.forEach(Y=>Q.set(Y.id,Y.name)),Q},[i]);return n.jsxs("section",{className:"bg-white p-4 rounded shadow",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-4",children:[n.jsx("div",{className:"flex-1",children:n.jsx("input",{className:"w-full p-2 border rounded",placeholder:"Hledat (rodina, spec, label)",value:p,onChange:Q=>y(Q.target.value)})}),n.jsxs("div",{className:"flex items-center gap-2 self-end md:self-auto",children:[n.jsx("button",{className:"px-3 py-2 border rounded text-sm",onClick:()=>void _(),title:"Obnovit",children:""}),N?n.jsx("button",{className:"px-3 py-2 bg-gray-300 rounded text-sm",onClick:()=>{g(!1),f(""),w("")},title:"Zruit pidn",children:""}):n.jsx("button",{className:"px-3 py-2 bg-blue-600 text-white rounded text-sm",onClick:()=>g(!0),title:"Pidat kabel",children:" Pidat kabel"})]})]}),N&&n.jsxs("div",{className:"grid md:grid-cols-3 gap-3 mb-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Rodina"}),n.jsx("input",{list:"familiesOptions",className:"w-full p-2 border rounded",placeholder:"nap. CYKY",value:j,onChange:Q=>f(Q.target.value),onKeyDown:le}),n.jsx("datalist",{id:"familiesOptions",children:i.map(Q=>n.jsx("option",{value:Q.name},Q.id))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Spec (dimenze)"}),n.jsx("input",{list:"specOptions",className:"w-full p-2 border rounded",placeholder:"nap. 32,5",value:b,onChange:Q=>w(Q.target.value),onKeyDown:le}),n.jsx("datalist",{id:"specOptions",children:$.map(Q=>n.jsx("option",{value:Q},Q))})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{className:"w-full md:w-auto px-4 py-2 bg-blue-600 text-white rounded",onClick:()=>void D(),disabled:!j.trim()||!b.trim(),title:"Uloit nov kabel",children:" Uloit"})})]}),d&&n.jsx("div",{className:"mb-3 text-red-700 bg-red-50 border border-red-200 p-2 rounded",children:d}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm border",children:[n.jsx("thead",{className:"bg-gray-100",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 text-left w-56",children:"Rodina"}),n.jsx("th",{className:"p-2 text-left w-40",children:"Spec (dimenze)"}),n.jsx("th",{className:"p-2 text-left",children:"Label"}),n.jsx("th",{className:"p-2 text-center w-28",children:"Akce"})]})}),n.jsxs("tbody",{children:[B.map(Q=>{const Y=v===Q.id;return n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"p-2",children:Y?n.jsxs("select",{className:"w-full p-2 border rounded",value:E.family_id,onChange:ne=>C(J=>({...J,family_id:ne.target.value?Number(ne.target.value):""})),children:[n.jsx("option",{value:"",children:" vyber rodinu "}),i.map(ne=>n.jsx("option",{value:ne.id,children:ne.name},ne.id))]}):Q.family||n.jsx("span",{className:"text-gray-400",children:"(bez rodiny)"})}),n.jsx("td",{className:"p-2",children:Y?n.jsx("input",{className:"w-full p-2 border rounded",value:E.spec,onChange:ne=>C(J=>({...J,spec:ne.target.value}))}):Q.spec}),n.jsx("td",{className:"p-2",children:Y?n.jsx("div",{className:"text-gray-600",children:A({family:E.family_id!==""?Z.get(Number(E.family_id)):Q.family??"",spec:E.spec,label:null})}):A(Q)}),n.jsx("td",{className:"p-2 text-center space-x-2",children:Y?n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"px-2 py-1 bg-blue-600 text-white rounded",onClick:()=>void q(Q.id),disabled:E.family_id===""||!E.spec.trim(),title:"Uloit",children:""}),n.jsx("button",{className:"px-2 py-1 bg-gray-300 rounded",onClick:H,title:"Zruit",children:""})]}):n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"px-2 py-1 border rounded",onClick:()=>pe(Q),title:"Upravit",children:""}),n.jsx("button",{className:"px-2 py-1 bg-red-600 text-white rounded",onClick:()=>void T(Q.id),title:"Smazat",children:""})]})})]},Q.id)}),!l&&B.length===0&&n.jsx("tr",{children:n.jsx("td",{className:"p-4 text-center text-gray-500",colSpan:4,children:"Nic nenalezeno."})}),l&&n.jsx("tr",{children:n.jsx("td",{className:"p-4 text-center text-gray-500",colSpan:4,children:"Natm"})})]})]})})]})}function bA(){const[r,e]=V.useState("komponenty");return n.jsxs("div",{className:"flex min-h-screen bg-gradient-to-br from-gray-100 to-blue-50",children:[n.jsx(Tr,{mode:"catalog"}),n.jsxs("main",{className:"flex-1 p-6",children:[n.jsx("h1",{className:"text-3xl font-bold text-blue-800 mb-4",children:" Katalog"}),n.jsxs("div",{className:"mb-4 flex gap-2",children:[n.jsx("button",{className:`px-4 py-2 rounded ${r==="komponenty"?"bg-blue-600 text-white":"bg-white"}`,onClick:()=>e("komponenty"),children:"Komponenty"}),n.jsx("button",{className:`px-4 py-2 rounded ${r==="pristroje"?"bg-blue-600 text-white":"bg-white"}`,onClick:()=>e("pristroje"),children:"Pstroje"}),n.jsx("button",{className:`px-4 py-2 rounded ${r==="kabely"?"bg-blue-600 text-white":"bg-white"}`,onClick:()=>e("kabely"),children:"Kabely"})]}),n.jsxs("div",{className:"bg-white rounded shadow p-4",children:[r==="komponenty"&&n.jsx(gA,{}),r==="pristroje"&&n.jsx(xA,{}),r==="kabely"&&n.jsx(wA,{})]})]})]})}function Fs({children:r}){const e=on(),{token:i}=Dr(),{user:a}=ps();return e.pathname==="/login"?r:!(i||a)?n.jsx(rf,{to:"/login",replace:!0,state:{from:e}}):r}function Ia({children:r}){const e=on(),{token:i}=Dr(),{profile:a,loading:l}=ps();return i?l?n.jsx("div",{className:"p-6 text-gray-600",children:"Natm"}):a?.isAdmin?r:n.jsx(rf,{to:"/",replace:!0}):n.jsx(rf,{to:"/login",replace:!0,state:{from:e}})}function jA(){const[r,e]=V.useState([]),[i,a]=V.useState(!0),[l,c]=V.useState({});V.useEffect(()=>{let u=!0;return(async()=>{a(!0);try{const p=await Ke.get("/admin/users"),y=Array.isArray(p.data)?p.data:[];u&&e(y)}finally{u&&a(!1)}})(),()=>{u=!1}},[]);async function d(u){if(c(p=>({...p,[u]:{...p[u]||{},loading:!0}})),l[u]?.projects)c(p=>({...p,[u]:{...p[u]||{},loading:!1,projects:p[u]?.projects}}));else{const p=await Ke.get("/admin/projects",{params:{owner_id:u}}),y=Array.isArray(p.data)?p.data:[];c(v=>({...v,[u]:{projects:y,vvByProject:{},loading:!1}}));for(const v of y)try{const k=await Ke.get(`/admin/projects/${v.id}/vv`),E=Array.isArray(k.data)?k.data:[];c(C=>({...C,[u]:{...C[u]||{},projects:C[u]?.projects,vvByProject:{...C[u]?.vvByProject||{},[v.id]:E}}}))}catch{}}}return n.jsxs("div",{className:"flex",children:[n.jsx(Tr,{mode:"dashboard"}),n.jsxs("main",{className:"flex-1 p-4 compact-main",children:[n.jsx("h1",{children:"Administrace"}),n.jsx("div",{className:"mt-4 bg-white rounded shadow divide-y",children:i?n.jsx("div",{className:"p-3 text-gray-500",children:"Natm techniky"}):r.length===0?n.jsx("div",{className:"p-3 text-gray-500",children:"dn technici"}):r.map(u=>{const p=l[u.id],y=!!(p&&p.projects);return n.jsxs("div",{className:"p-3",children:[n.jsxs("button",{className:"w-full text-left flex items-center justify-between",onClick:()=>d(u.id),children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:u.name||`Uivatel #${u.id}`}),n.jsx("div",{className:"text-xs text-gray-500",children:u.email})]}),n.jsx("span",{className:"text-sm text-gray-600",children:y?"Skrt":"Zobrazit"})]}),y&&n.jsx("div",{className:"mt-3",children:(p?.projects||[]).length===0?n.jsx("div",{className:"text-gray-500",children:"dn projekty"}):n.jsx("div",{className:"border rounded divide-y",children:(p?.projects||[]).map(v=>n.jsxs("div",{className:"p-2",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:v.address||`Projekt #${v.id}`}),n.jsx("div",{className:"text-xs text-gray-500",children:v.client||""})]})}),n.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-semibold mb-1",children:"Revize"}),n.jsxs("div",{className:"border rounded divide-y",children:[(v.revisions||[]).map(k=>n.jsxs("div",{className:"p-2 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:k.number||`Revize #${k.id}`}),n.jsxs("div",{className:"text-xs text-gray-500",children:[k.type||"","  ",k.status||""]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("a",{className:"px-3 py-1 bg-indigo-600 text-white rounded",href:`#/summary/${k.id}`,children:"Souhrn"}),n.jsx("a",{className:"px-3 py-1 bg-gray-200 rounded",href:`#/revize/${k.id}`,children:"Otevt"})]})]},k.id)),(v.revisions||[]).length===0&&n.jsx("div",{className:"p-2 text-gray-500",children:"dn revize"})]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-semibold mb-1",children:"Protokoly VV"}),n.jsxs("div",{className:"border rounded divide-y",children:[((p?.vvByProject||{})[v.id]||[]).map(k=>n.jsxs("div",{className:"p-2 flex items-center justify-between",children:[n.jsx("div",{children:k.number||k.id}),n.jsx("a",{className:"px-3 py-1 bg-gray-200 rounded",href:`#/vv/${k.id}`,children:"Otevt"})]},k.id)),(!(p?.vvByProject||{})[v.id]||((p?.vvByProject||{})[v.id]||[]).length===0)&&n.jsx("div",{className:"p-2 text-gray-500",children:"dn protokoly"})]})]})]})]},v.id))})})]},u.id)})})]})]})}function NA(){const[r,e]=V.useState([]),[i,a]=V.useState(!0),[l,c]=V.useState(""),[d,u]=V.useState(!0),[p,y]=V.useState(null);async function v(){a(!0);try{const N={};l&&(N.q=l);const g=await Ke.get("/admin/defects",{params:N});e(Array.isArray(g.data)?g.data:[])}finally{a(!1)}}V.useEffect(()=>{v()},[]);const k=V.useMemo(()=>(r||[]).filter(N=>d?N.moderation_status==="pending":!0),[r,d]);async function E(N){y(N);try{await Ke.post(`/defects/${N}/approve`),await v()}finally{y(null)}}async function C(N){const g=window.prompt("Dvod zamtnut (voliteln):","");y(N);try{await Ke.post(`/defects/${N}/reject`,{reason:g||""}),await v()}finally{y(null)}}return n.jsxs("div",{className:"flex",children:[n.jsx(Tr,{mode:"dashboard"}),n.jsxs("main",{className:"flex-1 p-4 compact-main",children:[n.jsx("h1",{children:"Nvrhy zvad"}),n.jsxs("div",{className:"flex items-center gap-2 mt-3 mb-4",children:[n.jsx("input",{className:"border rounded px-2 py-1",value:l,onChange:N=>c(N.target.value),placeholder:"Hledat popis/norma/lnek"}),n.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded",onClick:v,children:"Hledat"}),n.jsxs("label",{className:"ml-4 text-sm flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:d,onChange:N=>u(N.target.checked)}),"Pouze ekajc"]})]}),i?n.jsx("div",{className:"text-gray-500",children:"Natm"}):n.jsxs("div",{className:"bg-white rounded shadow divide-y",children:[k.map(N=>n.jsxs("div",{className:"p-3 flex gap-3 items-center",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium",children:N.description}),n.jsxs("div",{className:"text-xs text-gray-500",children:[N.standard||""," ",N.article?` l. ${N.article}`:"","  ",N.visibility,"  ",N.moderation_status,N.reject_reason?`  dvod: ${N.reject_reason}`:""]})]}),N.moderation_status==="pending"&&n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{disabled:p===N.id,className:"px-3 py-1 bg-green-600 text-white rounded disabled:opacity-60",onClick:()=>E(N.id),children:"Schvlit"}),n.jsx("button",{disabled:p===N.id,className:"px-3 py-1 bg-red-600 text-white rounded disabled:opacity-60",onClick:()=>C(N.id),children:"Zamtnout"})]})]},N.id)),k.length===0&&n.jsx("div",{className:"p-4 text-gray-500",children:"dn poloky"})]})]})]})}function kA(){const[r,e]=V.useState([]),[i,a]=V.useState(!0);return V.useEffect(()=>{let l=!0;return(async()=>{a(!0);try{const c=await Ke.get("/admin/revisions");l&&e(c.data||[])}finally{l&&a(!1)}})(),()=>{l=!1}},[]),n.jsxs("div",{className:"flex",children:[n.jsx(Tr,{mode:"dashboard"}),n.jsxs("main",{className:"flex-1 p-4 compact-main",children:[n.jsx("h1",{children:"Revize vech uivatel"}),i?n.jsx("div",{className:"text-gray-500 mt-4",children:"Natm"}):n.jsxs("div",{className:"bg-white rounded shadow divide-y mt-3",children:[r.map(l=>n.jsxs("div",{className:"p-3 flex items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:l.number||`Revize #${l.id}`}),n.jsxs("div",{className:"text-xs text-gray-500",children:[l.type||"","  ",l.status||"","  projekt #",l.project_id]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("a",{className:"px-3 py-1 bg-indigo-600 text-white rounded",href:`#/summary/${l.id}`,children:"Souhrn"}),n.jsx("a",{className:"px-3 py-1 bg-gray-200 rounded",href:`#/revize/${l.id}`,children:"Otevt"})]})]},l.id)),r.length===0&&n.jsx("div",{className:"p-4 text-gray-500",children:"dn revize"})]})]})]})}function _A(){const[r,e]=V.useState([]),[i,a]=V.useState(!0),[l,c]=V.useState(""),[d,u]=V.useState(!1),[p,y]=V.useState(null);async function v(){a(!0);try{const N=await Ke.get("/admin/defects",{params:l?{q:l}:void 0});e(Array.isArray(N.data)?N.data:[])}finally{a(!1)}}V.useEffect(()=>{v()},[]);const k=V.useMemo(()=>r.filter(N=>d?N.visibility==="global":!0),[r,d]);async function E(N){y(N.id);try{await Ke.put(`/defects/${N.id}`,{description:(N.description||"").trim(),standard:(N.standard||"").trim()||null,article:(N.article||"").trim()||null}),await v()}finally{y(null)}}async function C(N){if(confirm("Opravdu smazat zvadu?")){y(N);try{await Ke.delete(`/defects/${N}`),await v()}finally{y(null)}}}return n.jsxs("div",{className:"flex",children:[n.jsx(Tr,{mode:"dashboard"}),n.jsxs("main",{className:"flex-1 p-4 compact-main",children:[n.jsx("h1",{children:"Editor zvad"}),n.jsxs("div",{className:"flex items-center gap-2 mt-3 mb-4",children:[n.jsx("input",{className:"border rounded px-2 py-1",value:l,onChange:N=>c(N.target.value),placeholder:"Hledat popis/norma/lnek"}),n.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded",onClick:v,children:"Hledat"}),n.jsxs("label",{className:"ml-4 text-sm flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:d,onChange:N=>u(N.target.checked)}),"Pouze globln"]})]}),i?n.jsx("div",{className:"text-gray-500",children:"Natm"}):n.jsxs("div",{className:"bg-white rounded shadow divide-y",children:[k.map((N,g)=>n.jsx(SA,{defect:N,onSave:E,onDelete:C,busy:p===N.id},N.id)),k.length===0&&n.jsx("div",{className:"p-4 text-gray-500",children:"dn poloky"})]})]})]})}function SA({defect:r,onSave:e,onDelete:i,busy:a}){const[l,c]=V.useState(r);return V.useEffect(()=>c(r),[r]),n.jsxs("div",{className:"p-3 grid grid-cols-12 gap-2 items-center",children:[n.jsx("div",{className:"col-span-5",children:n.jsx("input",{className:"w-full border rounded px-2 py-1",value:l.description,onChange:d=>c({...l,description:d.target.value})})}),n.jsx("div",{className:"col-span-2",children:n.jsx("input",{className:"w-full border rounded px-2 py-1",value:l.standard||"",onChange:d=>c({...l,standard:d.target.value}),placeholder:"Norma"})}),n.jsx("div",{className:"col-span-2",children:n.jsx("input",{className:"w-full border rounded px-2 py-1",value:l.article||"",onChange:d=>c({...l,article:d.target.value}),placeholder:"lnek"})}),n.jsx("div",{className:"col-span-1 text-xs text-gray-600",children:l.visibility}),n.jsxs("div",{className:"col-span-2 flex gap-2 justify-end",children:[n.jsx("button",{className:"px-3 py-1 bg-green-600 text-white rounded disabled:opacity-60",onClick:()=>e(l),disabled:a,children:"Uloit"}),n.jsx("button",{className:"px-3 py-1 bg-red-600 text-white rounded disabled:opacity-60",onClick:()=>i(l.id),disabled:a,children:"Smazat"})]})]})}const Qh={name:"",email:"",password:"",phone:"",certificate_number:"",authorization_number:"",is_admin:!1,is_verified:!0,lookup_ticr:!1};function EA(){const[r,e]=V.useState([]),[i,a]=V.useState(!0),[l,c]=V.useState(""),[d,u]=V.useState(""),[p,y]=V.useState(""),[v,k]=V.useState(null),[E,C]=V.useState(null),[N,g]=V.useState(null),[j,f]=V.useState(null),[b,w]=V.useState(null),[_,A]=V.useState(!1),[B,M]=V.useState(Qh),[$,D]=V.useState(!1),[le,pe]=V.useState(null);V.useEffect(()=>{if(!j)return;const J=setTimeout(()=>f(null),2500);return()=>clearTimeout(J)},[j]);async function H(){a(!0);try{const J={};l&&(J.q=l),d&&(J.verified=d==="true"),p&&(J.role=p);const ue=await Ke.get("/admin/users",{params:J});e(Array.isArray(ue.data)?ue.data:[])}finally{a(!1)}}V.useEffect(()=>{H()},[]);function q(J){return ue=>{const W=ue.target.type==="checkbox"?ue.target.checked:ue.target.value;M(U=>({...U,[J]:W}))}}async function T(J){if(J.preventDefault(),pe(null),!B.name.trim()||!B.email.trim()||!B.password){pe("Vypln prosim jmeno, e-mail a heslo.");return}D(!0);try{const ue={name:B.name.trim(),email:B.email.trim(),password:B.password,phone:B.phone.trim()||void 0,certificate_number:B.certificate_number.trim()||void 0,authorization_number:B.authorization_number.trim()||void 0,is_admin:B.is_admin,is_verified:B.is_verified,lookup_ticr:B.lookup_ticr&&!!B.certificate_number.trim()};await Ke.post("/admin/users",ue),f({type:"success",message:"Uzivatel byl vytvoren."}),M(Qh),A(!1),await H()}catch(ue){const W=ue?.response?.data?.detail||ue?.message||"Vytvoreni se nezdarilo.";pe(W)}finally{D(!1)}}async function Z(J){k(J);try{await Ke.post(`/admin/users/${J}/verify`),await H()}finally{k(null),w(null)}}async function Q(J){k(J.id);try{await Ke.patch(`/admin/users/${J.id}`,{is_admin:!J.is_admin}),await H()}finally{k(null),w(null)}}async function Y(J){k(J.id),w(J.id);try{const ue=await Ke.post(`/admin/rt/verify/${J.id}`);C({user:J,data:ue.data}),await H()}finally{k(null),w(null)}}async function ne(J){k(J);try{await Ke.post("/admin/users/delete",{id:J}).catch(async ue=>{const W=ue?.response?.status;if(W===404)await Ke.post(`/admin/users/${J}/delete`);else if(W===405)await Ke.delete(`/admin/users/${J}`);else throw ue}),f({type:"success",message:"Uzivatel byl smazan."}),await H()}catch(ue){const W=ue?.response?.data?.detail||ue?.message||"Mazani selhalo.";f({type:"error",message:W})}finally{k(null),w(null)}}return n.jsxs("div",{className:"grid",style:{gridTemplateColumns:"16rem 1fr"},children:[n.jsx(Tr,{mode:"dashboard"}),n.jsxs("main",{className:"p-4",children:[n.jsx("h1",{children:"Technici"}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-3 mb-4",children:[n.jsx("input",{className:"border rounded px-2 py-1",value:l,onChange:J=>c(J.target.value),placeholder:"Hledat jmeno/e-mail/telefon"}),n.jsxs("select",{className:"border rounded px-2 py-1",value:d,onChange:J=>u(J.target.value),children:[n.jsx("option",{value:"",children:"Overeni - vsichni"}),n.jsx("option",{value:"true",children:"Jen overeni"}),n.jsx("option",{value:"false",children:"Jen cekajici"})]}),n.jsxs("select",{className:"border rounded px-2 py-1",value:p,onChange:J=>y(J.target.value),children:[n.jsx("option",{value:"",children:"Role - vsichni"}),n.jsx("option",{value:"admin",children:"Admin"}),n.jsx("option",{value:"user",children:"Uzivatel"})]}),n.jsx("button",{className:"px-2 py-1 text-sm bg-blue-600 text-white rounded",onClick:H,children:"Filtrovat"}),n.jsx("button",{className:"px-2 py-1 text-sm bg-emerald-600 text-white rounded",onClick:()=>{A(J=>!J),pe(null)},children:_?"Zavrit formular":"Novy uzivatel"})]}),_&&n.jsxs("form",{className:"bg-white border rounded p-4 mb-4 space-y-3",onSubmit:T,children:[n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("label",{className:"flex flex-col text-sm gap-1",children:["Jmeno",n.jsx("input",{className:"border rounded px-2 py-1",value:B.name,onChange:q("name"),placeholder:"Napr. Jan Novak",required:!0})]}),n.jsxs("label",{className:"flex flex-col text-sm gap-1",children:["E-mail",n.jsx("input",{className:"border rounded px-2 py-1",value:B.email,onChange:q("email"),placeholder:"napr.jan@firma.cz",type:"email",required:!0})]}),n.jsxs("label",{className:"flex flex-col text-sm gap-1",children:["Heslo",n.jsx("input",{className:"border rounded px-2 py-1",value:B.password,onChange:q("password"),type:"password",required:!0})]}),n.jsxs("label",{className:"flex flex-col text-sm gap-1",children:["Telefon",n.jsx("input",{className:"border rounded px-2 py-1",value:B.phone,onChange:q("phone"),placeholder:"Napr. 601123456"})]}),n.jsxs("label",{className:"flex flex-col text-sm gap-1",children:["Cislo osvedceni",n.jsx("input",{className:"border rounded px-2 py-1",value:B.certificate_number,onChange:q("certificate_number"),placeholder:"Napr. 1234/XX"})]}),n.jsxs("label",{className:"flex flex-col text-sm gap-1",children:["Cislo opravneni",n.jsx("input",{className:"border rounded px-2 py-1",value:B.authorization_number,onChange:q("authorization_number"),placeholder:"Volitelne"})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:B.is_admin,onChange:q("is_admin")}),"Je administrator"]}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:B.is_verified,onChange:q("is_verified")}),"Overeny ucet"]}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:B.lookup_ticr,onChange:q("lookup_ticr"),disabled:!B.certificate_number.trim()}),"Overit ihned v TICR (vyzaduje cislo osvedceni)"]})]}),le&&n.jsx("div",{className:"text-sm text-red-600",children:le}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{type:"button",className:"px-3 py-1 text-sm border rounded",onClick:()=>{M(Qh),A(!1),pe(null)},children:"Zrusit"}),n.jsx("button",{type:"submit",className:"px-3 py-1 text-sm bg-emerald-600 text-white rounded",disabled:$,children:$?"Vytvarim...":"Ulozit uzivatele"})]})]}),i?n.jsx("div",{className:"text-gray-500",children:"Nacitavam..."}):n.jsxs("div",{className:"bg-white rounded shadow divide-y",children:[r.length===0&&n.jsx("div",{className:"p-4 text-gray-500",children:"Zadny uzivatel"}),r.map(J=>n.jsxs("div",{className:"p-3 grid grid-cols-12 gap-2 items-center",children:[n.jsxs("div",{className:"col-span-4",children:[n.jsx("div",{className:"font-medium",children:J.name||`Uzivatel #${J.id}`}),n.jsx("div",{className:"text-xs text-gray-500",children:J.email}),J.phone&&n.jsx("div",{className:"text-xs text-gray-500",children:J.phone})]}),n.jsxs("div",{className:"col-span-3 text-sm",children:[n.jsxs("div",{children:["Overeni: ",J.is_verified?"Ano":"Ne"]}),n.jsxs("div",{children:["Role: ",J.is_admin?"Admin":"Uzivatel"]})]}),n.jsxs("div",{className:"col-span-3 text-xs text-gray-600",children:[n.jsxs("div",{children:["Ev. c. osvedceni: ",J.certificate_number||"-"]}),n.jsxs("div",{children:["Ev. c. opravneni: ",J.authorization_number||"-"]})]}),n.jsxs("div",{className:"col-span-2 text-xs text-gray-600",children:[J.rt_status==="verified"?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-green-600 text-2xl leading-none",children:""}),n.jsx("span",{className:"font-medium",children:"Overeno TICR"})]}):n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-red-600 text-2xl leading-none",children:""}),n.jsx("span",{className:"font-medium",children:"Neni v databazi TICR"})]}),n.jsxs("div",{children:["Platnost do: ",J.rt_valid_until||"-"]})]}),n.jsxs("div",{className:"col-span-2 flex gap-2 justify-end",children:[!J.is_verified&&n.jsx("button",{className:"px-2 py-1 text-sm bg-green-600 text-white rounded",disabled:v===J.id,onClick:()=>Z(J.id),children:"Schvalit"}),n.jsx("button",{className:"px-2 py-1 text-sm bg-gray-200 rounded",disabled:v===J.id,onClick:()=>Q(J),children:J.is_admin?"Odebrat admina":"Udelat adminem"}),n.jsx("button",{className:"px-2 py-1 text-sm bg-blue-600 text-white rounded",disabled:b===J.id,onClick:()=>Y(J),children:b===J.id?n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(df,{className:"w-4 h-4 animate-spin"}),"Overuji..."]}):"Overit v TICR"}),n.jsx("button",{className:"px-2 py-1 text-sm bg-red-600 text-white rounded",disabled:v===J.id,onClick:()=>g(J),title:"Smazat technika",children:"Smazat"})]})]},J.id))]}),E&&n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 grid place-items-center",onClick:()=>C(null),children:n.jsxs("div",{className:"bg-white p-6 rounded shadow w-full max-w-xl",onClick:J=>J.stopPropagation(),children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Vysledek overeni v TICR"}),E.data?.rt_status==="verified"?n.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-green-600",children:""}),n.jsx("span",{children:"Byl v databazi TICR nalezen revizni technik:"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Jmeno:"})," ",E.data?.match?.full_name||E.user?.name||"-"]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Cislo osvedceni:"})," ",E.data?.match?.certificate_number||E.user?.certificate_number||"-"]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Cislo opravneni:"})," ",E.data?.match?.authorization_number||E.user?.authorization_number||"-"]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Rozsah/obory:"})," ",(E.data?.match?.scope||[]).join(", ")||"-"]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Platnost do:"})," ",E.data?.rt_valid_until||E.data?.valid_until||"-"]})]}):n.jsx("div",{className:"text-sm text-gray-700",children:"Technik nebyl v databazi TICR nalezen."}),n.jsx("div",{className:"flex justify-end gap-2 mt-4",children:n.jsx("button",{className:"px-4 py-2 bg-gray-200 rounded",onClick:()=>C(null),children:"Zavrit"})})]})}),N&&n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 grid place-items-center",onClick:()=>g(null),children:n.jsxs("div",{className:"bg-white p-6 rounded shadow w-full max-w-md",onClick:J=>J.stopPropagation(),children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Smazat technika?"}),n.jsx("p",{className:"text-sm text-gray-700 mb-4",children:"Tato akce je nevratna. Smaze se uzivatel a vsechna navazana data."}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{className:"px-4 py-2 bg-gray-200 rounded",onClick:()=>g(null),children:"Zrusit"}),n.jsx("button",{className:"px-4 py-2 bg-red-600 text-white rounded",onClick:()=>{const J=N.id;g(null),ne(J)},children:"Smazat"})]})]})})]}),j&&n.jsx("div",{className:`fixed bottom-4 right-4 px-4 py-2 rounded shadow text-white ${j.type==="success"?"bg-green-600":"bg-red-600"}`,children:j.message})]})}function CA(){const{token:r}=Dr(),{setActiveCompany:e,refreshUser:i}=ps(),[a,l]=V.useState({name:"",email:"",certificate_number:"",authorization_number:"",address:"",ico:"",dic:"",birth_date:"",phone:"",active_company_id:null}),[c,d]=V.useState(!1),[u,p]=V.useState(!1),[y,v]=V.useState(null),[k,E]=V.useState(null),[C,N]=V.useState([]),[g,j]=V.useState(!1),[f,b]=V.useState(null),[w,_]=V.useState({id:0,name:"",address:"",ico:"",dic:"",email:"",phone:"",note:""}),A=V.useMemo(()=>C.find(q=>q.id===a.active_company_id)||null,[C,a.active_company_id]);V.useEffect(()=>{r&&(async()=>{d(!0),v(null);try{const[q,T]=await Promise.all([fetch(yt("/users/me"),{headers:{...Dt(r)}}),fetch(yt("/users/companies"),{headers:{...Dt(r)}})]);if(!q.ok)throw new Error(await q.text());if(!T.ok)throw new Error(await T.text());const Z=await q.json(),Q=await T.json();l(Y=>({...Y,...Z})),N(Array.isArray(Q)?Q:[])}catch{v("Nepodailo se nast profil.")}finally{d(!1)}})()},[r]);async function B(){if(r){p(!0),v(null),E(null);try{const q=await fetch(yt("/users/me"),{method:"PATCH",headers:{"Content-Type":"application/json",...Dt(r)},body:JSON.stringify(a)});if(!q.ok)throw new Error(await q.text());const T=await q.json();l(Z=>({...Z,...T})),E("Uloeno."),await i()}catch{v("Uloen profilu selhalo.")}finally{p(!1),setTimeout(()=>E(null),1200)}}}function M(){b("new"),_({id:0,name:"",address:"",ico:"",dic:"",email:"",phone:"",note:""})}function $(q){b(q.id),_({...q})}function D(){b(null),_({id:0,name:"",address:"",ico:"",dic:"",email:"",phone:"",note:""})}async function le(){if(!r)return;const q=f==="new";try{const T=yt(q?"/users/companies":`/users/companies/${w.id}`),Q=await fetch(T,{method:q?"POST":"PATCH",headers:{"Content-Type":"application/json",...Dt(r)},body:JSON.stringify({name:w.name,address:w.address,ico:w.ico,dic:w.dic,email:w.email,phone:w.phone,note:w.note})});if(!Q.ok)throw new Error(await Q.text());j(!0);const ne=await(await fetch(yt("/users/companies"),{headers:{...Dt(r)}})).json();N(Array.isArray(ne)?ne:[]),j(!1),D(),await i()}catch{j(!1),alert("Uloen firmy selhalo.")}}async function pe(q){if(r&&confirm("Opravdu smazat tento subjekt?"))try{const T=await fetch(yt(`/users/companies/${q}`),{method:"DELETE",headers:{...Dt(r)}});if(!T.ok)throw new Error(await T.text());const Q=await(await fetch(yt("/users/companies"),{headers:{...Dt(r)}})).json();N(Array.isArray(Q)?Q:[]);const ne=await(await fetch(yt("/users/me"),{headers:{...Dt(r)}})).json();l(J=>({...J,...ne})),await i()}catch{alert("Mazn selhalo.")}}async function H(q){try{await e(q),l(T=>({...T,active_company_id:q}))}catch{alert("Nepodailo se pepnout aktivn firmu.")}}return n.jsxs("div",{className:"flex min-h-screen bg-gradient-to-br from-gray-100 to-blue-50",children:[n.jsx(Tr,{mode:"summary"}),n.jsxs("main",{className:"flex-1 p-6",children:[n.jsx("h1",{className:"text-2xl font-semibold mb-4",children:" Profil & subjekt"}),n.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6 items-start",children:[n.jsxs("section",{className:"bg-white rounded shadow p-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Technik"}),c?n.jsx("div",{children:"Natm"}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[["name","Jmno"],["email","E-mail"],["certificate_number","slo osvden"],["authorization_number","slo oprvnn"],["address","Adresa (domovsk)"],["ico","IO (OSV)"],["dic","DI (OSV)"],["birth_date","Datum narozen (YYYY-MM-DD)"],["phone","Telefon"]].map(([q,T])=>n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:T}),n.jsx("input",{className:"w-full p-2 border rounded",value:a[q]||"",onChange:Z=>l(Q=>({...Q,[q]:Z.target.value}))})]},q))}),n.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[y&&n.jsx("span",{className:"text-red-600 self-center",children:y}),k&&n.jsx("span",{className:"text-green-700 self-center",children:k}),n.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",onClick:B,disabled:u,children:"Uloit profil"})]})]})]}),n.jsxs("section",{className:"bg-white rounded shadow p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Firma / subjekt"}),f===null?n.jsx("button",{className:"px-3 py-2 bg-blue-600 text-white rounded",onClick:M,children:"Pidat subjekt"}):n.jsx("div",{className:"text-sm text-gray-600",children:"Ukld nov / upravovan subjekt"})]}),n.jsxs("div",{className:"border rounded p-3 mb-4 bg-green-50/40",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"font-medium",children:["Aktivn subjekt:"," ",n.jsx("span",{className:"text-green-800",children:A?A.name:"nen zvolen"})]}),A&&n.jsx("button",{className:"text-sm px-3 py-1 border rounded hover:bg-white",onClick:()=>$(A),children:"Upravit aktivn"})]}),A&&n.jsxs("div",{className:"text-sm text-gray-700 mt-2 grid grid-cols-1 md:grid-cols-2 gap-x-6",children:[n.jsxs("div",{children:["Adresa: ",A.address||"-"]}),n.jsxs("div",{children:["IO: ",A.ico||"-"]}),n.jsxs("div",{children:["DI: ",A.dic||"-"]}),n.jsxs("div",{children:["Kontakt: ",[A.email,A.phone].filter(Boolean).join("  ")||"-"]}),A.note&&n.jsxs("div",{className:"md:col-span-2",children:["Pozn.: ",A.note]})]})]}),f!==null&&n.jsxs("div",{className:"border rounded p-3 mb-4 grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsx(Ds,{label:"Nzev subjektu",children:n.jsx("input",{className:"w-full p-2 border rounded",value:w.name,onChange:q=>_(T=>({...T,name:q.target.value})),placeholder:"nap. OSV Jan Novk / Elektro s.r.o."})}),n.jsx(Ds,{label:"Adresa",children:n.jsx("input",{className:"w-full p-2 border rounded",value:w.address||"",onChange:q=>_(T=>({...T,address:q.target.value}))})}),n.jsx(Ds,{label:"IO",children:n.jsx("input",{className:"w-full p-2 border rounded",value:w.ico||"",onChange:q=>_(T=>({...T,ico:q.target.value}))})}),n.jsx(Ds,{label:"DI",children:n.jsx("input",{className:"w-full p-2 border rounded",value:w.dic||"",onChange:q=>_(T=>({...T,dic:q.target.value}))})}),n.jsx(Ds,{label:"E-mail",children:n.jsx("input",{className:"w-full p-2 border rounded",value:w.email||"",onChange:q=>_(T=>({...T,email:q.target.value}))})}),n.jsx(Ds,{label:"Telefon",children:n.jsx("input",{className:"w-full p-2 border rounded",value:w.phone||"",onChange:q=>_(T=>({...T,phone:q.target.value}))})}),n.jsx("div",{className:"md:col-span-2",children:n.jsx(Ds,{label:"Poznmka",children:n.jsx("input",{className:"w-full p-2 border rounded",value:w.note||"",onChange:q=>_(T=>({...T,note:q.target.value}))})})}),n.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[n.jsx("button",{className:"px-3 py-2 bg-gray-200 rounded",onClick:D,children:"Zruit"}),n.jsx("button",{className:"px-3 py-2 bg-blue-600 text-white rounded",onClick:le,disabled:!w.name.trim(),children:"Uloit subjekt"})]})]}),n.jsx("div",{className:"border rounded overflow-hidden",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 text-left",children:"Nzev"}),n.jsx("th",{className:"p-2 text-left",children:"Adresa"}),n.jsx("th",{className:"p-2 text-left",children:"IO"}),n.jsx("th",{className:"p-2 text-left",children:"DI"}),n.jsx("th",{className:"p-2 text-left",children:"Kontakt"}),n.jsx("th",{className:"p-2 text-center w-44",children:"Akce"})]})}),n.jsxs("tbody",{children:[g&&n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Natm"})}),!g&&C.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Zatm dn subjekty. Pidej prvn pes tlatko nahoe vpravo."})}),C.map(q=>{const T=q.id===a.active_company_id;return n.jsxs("tr",{className:`border-top ${T?"bg-green-50":""}`,children:[n.jsx("td",{className:"p-2",children:q.name}),n.jsx("td",{className:"p-2",children:q.address||""}),n.jsx("td",{className:"p-2",children:q.ico||""}),n.jsx("td",{className:"p-2",children:q.dic||""}),n.jsx("td",{className:"p-2",children:[q.email,q.phone].filter(Boolean).join("  ")}),n.jsx("td",{className:"p-2 text-center",children:n.jsxs("div",{className:"inline-flex items-center gap-3",children:[n.jsx("button",{title:T?"Aktivn":"Nastavit jako aktivn",onClick:()=>!T&&H(q.id),className:`p-1 rounded ${T?"text-green-700":"text-gray-600 hover:bg-gray-100"}`,children:T?"":""}),n.jsx("button",{title:"Upravit",onClick:()=>$(q),className:"p-1 rounded text-blue-700 hover:bg-blue-50",children:""}),n.jsx("button",{title:"Smazat",onClick:()=>pe(q.id),className:"p-1 rounded text-red-600 hover:bg-red-50",children:""})]})})]},q.id)})]})]})})]})]})]})]})}function Ds({label:r,children:e}){return n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"block text-sm text-gray-600 mb-1",children:r}),e]})}function TA(){const{token:r}=Dr(),[e,i]=V.useState([]),[a,l]=V.useState(!0),[c,d]=V.useState(!1),[u,p]=V.useState(null),[y,v]=V.useState(null),[k,E]=V.useState({id:"",name:"",measurement_text:"",calibration_code:"",serial:"",calibration_valid_until:"",note:""}),N=V.useMemo(()=>!!y&&y!=="new",[y])?"Upravit pstroj":"Pidat pstroj";async function g(){if(r){l(!0),p(null);try{const A=await fetch(yt("/users/instruments"),{headers:{...Dt(r)}});if(!A.ok)throw new Error(await A.text());const B=await A.json();i(Array.isArray(B)?B:[])}catch{p("Naten selhalo.")}finally{l(!1)}}}V.useEffect(()=>{g()},[r]);function j(){v("new"),E({id:"",name:"",measurement_text:"",calibration_code:"",serial:"",calibration_valid_until:"",note:""})}function f(A){v(A.id),E({...A})}function b(){v(null),p(null)}async function w(){if(r){if(!k.name?.trim()){p('Pole "Nzev pstroje" je povinn.');return}if(!k.measurement_text?.trim()){p('Pole "Men" je povinn.');return}if(!k.calibration_code?.trim()){p('Pole "Kalibran list" je povinn.');return}d(!0),p(null);try{const A=y==="new",B=yt(A?"/users/instruments":`/users/instruments/${k.id}`),M=A?"POST":"PATCH",$={name:k.name,measurement_text:k.measurement_text,calibration_code:k.calibration_code,serial:k.serial||null,calibration_valid_until:k.calibration_valid_until||null,note:k.note||null},D=await fetch(B,{method:M,headers:{"Content-Type":"application/json",...Dt(r)},body:JSON.stringify($)});if(!D.ok)throw new Error(await D.text());await g(),b()}catch(A){p(A?.message||"Uloen selhalo.")}finally{d(!1)}}}async function _(A){if(r&&confirm("Opravdu smazat pstroj?"))try{const B=await fetch(yt(`/users/instruments/${A}`),{method:"DELETE",headers:{...Dt(r)}});if(!B.ok)throw new Error(await B.text());await g()}catch(B){alert(B?.message||"Mazn selhalo.")}}return n.jsxs("div",{className:"min-h-screen flex bg-gray-100",children:[n.jsx(Tr,{mode:"dashboard"}),n.jsxs("main",{className:"flex-1 p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h1",{className:"text-2xl font-semibold",children:"Mic pstroje"}),y===null&&n.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",onClick:j,children:"+ Pidat pstroj"})]}),y!==null&&n.jsxs("section",{className:"bg-white rounded shadow p-4 mb-6",children:[n.jsx("h2",{className:"text-lg font-semibold mb-3",children:N}),u&&n.jsx("div",{className:"mb-2 text-red-600",children:u}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ni,{label:"Nzev pstroje",children:n.jsx("input",{className:"w-full p-2 border rounded",value:k.name||"",onChange:A=>E(B=>({...B,name:A.target.value})),placeholder:"nap. Metrel MI 3155"})}),n.jsx(Ni,{label:"Kalibran list / evidenn slo",children:n.jsx("input",{className:"w-full p-2 border rounded",value:k.calibration_code||"",onChange:A=>E(B=>({...B,calibration_code:A.target.value})),placeholder:"nap. 2025-03/123"})}),n.jsx(Ni,{label:"Sriov slo (voliteln)",children:n.jsx("input",{className:"w-full p-2 border rounded",value:k.serial||"",onChange:A=>E(B=>({...B,serial:A.target.value})),placeholder:"nap. M3155-001234"})}),n.jsx(Ni,{label:"Platnost kalibrace do (YYYY-MM-DD, voliteln)",children:n.jsx("input",{className:"w-full p-2 border rounded",value:k.calibration_valid_until||"",onChange:A=>E(B=>({...B,calibration_valid_until:A.target.value})),placeholder:"nap. 2026-12-31"})}),n.jsx(Ni,{label:"Men",children:n.jsx("input",{className:"w-full p-2 border rounded",value:k.measurement_text||"",onChange:A=>E(B=>({...B,measurement_text:A.target.value})),placeholder:"nap. R (), Zs (), In (mA), "})}),n.jsx(Ni,{label:"Poznmka (voliteln)",children:n.jsx("input",{className:"w-full p-2 border rounded",value:k.note||"",onChange:A=>E(B=>({...B,note:A.target.value})),placeholder:"voliteln popis"})})]}),n.jsxs("div",{className:"mt-4 flex gap-2",children:[n.jsx("button",{className:"px-4 py-2 bg-gray-200 rounded",onClick:b,disabled:c,children:"Zruit"}),n.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded",onClick:w,disabled:c,children:c?"Ukldm":"Uloit"})]})]}),n.jsx("section",{className:"bg-white rounded shadow",children:a?n.jsx("div",{className:"p-4 text-gray-500",children:"Natm"}):e.length===0?n.jsx("div",{className:"p-4 text-gray-500",children:"dn pstroje"}):n.jsx("div",{className:"divide-y",children:e.map(A=>n.jsxs("div",{className:"p-3 grid grid-cols-12 gap-2 items-center",children:[n.jsxs("div",{className:"col-span-5",children:[n.jsx("div",{className:"font-medium",children:A.name}),n.jsx("div",{className:"text-xs text-gray-500",children:A.serial||"-"})]}),n.jsxs("div",{className:"col-span-4 text-xs text-gray-600",children:[n.jsxs("div",{children:["Kalibran: ",A.calibration_code||"-"]}),n.jsxs("div",{children:["Platnost: ",A.calibration_valid_until||"-"]})]}),n.jsxs("div",{className:"col-span-3 flex gap-2 justify-end",children:[n.jsx("button",{className:"px-3 py-1 bg-gray-200 rounded",onClick:()=>f(A),children:"Upravit"}),n.jsx("button",{className:"px-3 py-1 bg-red-600 text-white rounded",onClick:()=>_(A.id),children:"Smazat"})]})]},A.id))})})]})]})}function Ni({label:r,children:e}){return n.jsxs("label",{className:"block",children:[n.jsx("div",{className:"text-sm text-slate-500 mb-1",children:r}),e]})}const Nw=()=>crypto?.randomUUID?.()??Math.random().toString(36).slice(2),vx=()=>({objectName:"",address:"",preparedBy:"",date:new Date().toISOString().slice(0,10),submittedDocs:"",objectDescription:"",committee:[{role:"Pedseda",name:""}],spaces:[{id:Nw(),name:"Hlavn prostor",note:"",selections:{},measures:"",intervals:""}]}),AA=r=>r==="A"?"A  Podmnky prosted":r==="B"?"B  Vyuit a rizika":"C  Stavebn vlastnosti",RA=["A","B","C"];function PA(r){const e={};for(const[i,a]of Object.entries(r)){const l=i.match(/^([A-Z]{2})[0-9A-Z]+$/);if(!l)continue;const c=l[1];e[c]||(e[c]={code:c,name:a.name,group:a.group,items:[]}),e[c].name=a.name,e[c].group=a.group,e[c].items.push({code:i,meaning:a.meaning,normal:a.normal,requirements:a.requirements||[]})}for(const i of Object.values(e))i.items.sort((a,l)=>a.code.localeCompare(l.code,"cs-CZ",{numeric:!0}));return Object.values(e).sort((i,a)=>i.group===a.group?i.code.localeCompare(a.code):i.group.localeCompare(a.group))}const xx=["Kryt / IP","Voda","Prach","Materily a koroze","Rozvde","Svtidla","Ochrana / RCD / pospojovn","Teplota","Slunen zen / UV","Por a vbuch","Ostatn"];function kw(r){return r.toLocaleLowerCase("cs").normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g," ").replace(/[.;,:]+$/g,"").trim()}function zA(r){const e=kw(r);return/\bip(x?\d)|\bkryti\b/.test(e)?"Kryt / IP":/(kapajici|postrik|trysk|vlna|ponor|voda|ipx\d)/.test(e)?"Voda":/\bprach|\bip5x|\bip6x/.test(e)?"Prach":/(koro|povrch|materi|nater|pokoven|galvan)/.test(e)?"Materily a koroze":/(rozvad[e]c)/.test(e)?"Rozvde":/(svitid)/.test(e)?"Svtidla":/(rcd|proud.*chranic|pospoj|ochran|uzem)/.test(e)?"Ochrana / RCD / pospojovn":/(teplot)/.test(e)?"Teplota":/(slunec|uv)/.test(e)?"Slunen zen / UV":/(ex |exd|60079|vybuch|horlav)/.test(e)?"Por a vbuch":"Ostatn"}function OA(r){const e=new Set,i=xx.reduce((a,l)=>(a[l]=[],a),{});for(const a of r){const l=kw(a);!l||e.has(l)||(e.add(l),i[zA(a)].push(a.trim()))}return xx.map(a=>({category:a,items:i[a]})).filter(a=>a.items.length)}function IA(r,e){const i=Math.ceil(r.length/e),a=Array.from({length:e},()=>[]);for(let c=0;c<r.length;c++)a[c%e].push(r[c]);const l=[];for(let c=0;c<i;c++){const d=[];for(let u=0;u<e;u++)d.push(a[u][c]);l.push(d)}return l}function FA(){const{id:r}=Ba(),e=qs(),{token:i}=Dr(),[a,l]=V.useState(null),[c,d]=V.useState(vx()),[u,p]=V.useState(!1),[y,v]=V.useState(null),[k,E]=V.useState([]),[C,N]=V.useState(null),[g,j]=V.useState(null);V.useEffect(()=>{if(!r||!i)return;let T=!0;return p(!0),(async()=>{try{const Z=await fetch(yt(`/vv/${r}`),{headers:{...Dt(i)}});if(!Z.ok)throw new Error(`${Z.status} ${Z.statusText}`);const Q=await Z.json();if(!T)return;l(Q);const ne={...vx(),...Q?.data_json||{}};ne.submittedDocs===void 0&&(ne.submittedDocs=""),ne.objectDescription===void 0&&(ne.objectDescription=""),d(ne),j(ne.spaces?.[0]?.id||null)}catch(Z){console.error("VV GET error:",Z),alert("Nepodailo se nast dokument VV. (GET)")}finally{T&&p(!1)}})(),()=>{T=!1}},[r,i]),V.useEffect(()=>{let T=!0;return(async()=>{try{const Z=await fetch("/vv_data/vv_data.json",{cache:"no-store"});if(!Z.ok)throw new Error(`${Z.status} ${Z.statusText}`);const Q=await Z.json();if(!Q||typeof Q!="object"||Array.isArray(Q))throw new Error("Neplatn data: oekvn objekt AA1:{} atd.");let Y=0;const ne={};for(const[J,ue]of Object.entries(Q))typeof J=="string"&&/^[A-Z]{2}[0-9A-Z]+$/.test(J)&&ue&&typeof ue.group=="string"&&typeof ue.name=="string"&&typeof ue.meaning=="string"&&typeof ue.normal=="boolean"&&Array.isArray(ue.requirements)?ne[J]=ue:Y++;if(!Object.keys(ne).length)throw new Error("Neplatn data: przdn slovnk.");if(!T)return;v(ne),E(PA(ne)),N(Y?`Varovn: peskoeno ${Y} neplatnch poloek`:null)}catch(Z){if(console.error("VV JSON load error:",Z),!T)return;N(`Nelze nast vv_data/vv_data.json: ${Z?.message||String(Z)}.
(Ujisti se, e soubor je v public/vv_data/vv_data.json a oteve se jako JSON.)`)}})(),()=>{T=!1}},[]);const f=V.useRef(null),b=V.useRef(""),w=T=>{if(!a?.id||!i)return;const Z=JSON.stringify(T);Z!==b.current&&(f.current&&window.clearTimeout(f.current),f.current=window.setTimeout(async()=>{try{const Q=await fetch(yt(`/vv/${a.id}`),{method:"PUT",headers:{"Content-Type":"application/json",...Dt(i)},body:JSON.stringify({data_json:T})});if(!Q.ok)throw new Error(await Q.text());b.current=Z}catch(Q){console.error("VV PUT error:",Q)}},800))},_=T=>{const Z={...c,...T};d(Z),w(Z)},A=(T,Z)=>{const Q=c.spaces.map(ne=>ne.id===T?{...ne,...Z}:ne),Y={...c,spaces:Q};d(Y),w(Y)},B=()=>{const T={id:Nw(),name:`Prostor ${c.spaces.length+1}`,note:"",selections:{},measures:"",intervals:""},Z={...c,spaces:[...c.spaces,T]};d(Z),j(T.id),w(Z)},M=T=>{if(!T||c.spaces.length===1)return;const Z=c.spaces.filter(Y=>Y.id!==T),Q={...c,spaces:Z};d(Q),j(Z[0]?.id||null),w(Q)},$=c.spaces.find(T=>T.id===(g||""))||c.spaces[0],D=T=>{if(!y)return[];const Z=[];for(const Q of k){const Y=T.selections[Q.code];if(!Y)continue;const ne=y[Y];ne&&Z.push(...ne.requirements||[])}return Z},le=V.useMemo(()=>OA(D($)),[g,JSON.stringify($?.selections),y,k]),pe=()=>{const T=new Blob([JSON.stringify(c,null,2)],{type:"application/json"}),Z=URL.createObjectURL(T),Q=document.createElement("a");Q.href=Z,Q.download=`vv-${a?.number||a?.id||"protokol"}.json`,Q.click(),URL.revokeObjectURL(Z)},H=()=>window.print(),q=Zj;return n.jsxs("div",{className:"flex min-h-screen bg-gradient-to-br from-gray-100 to-blue-50",children:[n.jsx("div",{className:"app-sidebar",children:n.jsx(Tr,{mode:"summary"})}),n.jsxs("main",{className:"compact-main flex-1 space-y-4 p-4 md:p-6",children:[n.jsx("style",{children:`
          @media print {
            @page { size: A4; margin: 10mm 12mm; }
            .no-print, .app-sidebar { display: none !important; }
            .print-sheet { display: block !important; }
            body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
            * { page-break-inside: avoid; }
          }
        `}),n.jsxs("div",{className:"no-print mb-3 flex items-center gap-2",children:[n.jsx("button",{onClick:()=>e("/"),className:"rounded-lg border bg-white px-3 py-1.5 hover:bg-slate-50",title:"Zpt na projekty",children:" Zpt"}),n.jsxs("div",{className:"ml-auto flex gap-2",children:[n.jsxs("button",{onClick:pe,className:"inline-flex items-center gap-2 rounded-lg border bg-white px-3 py-1.5 hover:shadow-sm",title:"Export JSON",children:[n.jsx(Yk,{className:"h-4 w-4"})," JSON"]}),n.jsxs("button",{onClick:H,className:"inline-flex items-center gap-2 rounded-lg border bg-white px-3 py-1.5 hover:shadow-sm",title:"Tisk do PDF",children:[n.jsx(i_,{className:"h-4 w-4"})," PDF"]})]})]}),C&&n.jsx("div",{className:"no-print mb-4 rounded-lg border border-amber-300 bg-amber-50 text-amber-800 px-4 py-3 text-sm whitespace-pre-line",children:C}),y&&n.jsxs("div",{className:"no-print grid gap-3 md:grid-cols-3",children:[n.jsxs("div",{className:"md:col-span-2 rounded-lg border bg-white p-4 shadow-sm",children:[n.jsx("h2",{className:"mb-3 text-lg font-semibold",children:"Identifikace"}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("label",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"text-sm",children:"Objekt / Nzev"}),n.jsx("input",{value:c.objectName,onChange:T=>_({objectName:T.target.value}),className:"rounded-lg border px-3 py-1.5"})]}),n.jsxs("label",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"text-sm",children:"Adresa"}),n.jsx("input",{value:c.address,onChange:T=>_({address:T.target.value}),className:"rounded-lg border px-3 py-1.5"})]}),n.jsxs("label",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"text-sm",children:"Zpracoval"}),n.jsx("input",{value:c.preparedBy,onChange:T=>_({preparedBy:T.target.value}),className:"rounded-lg border px-3 py-1.5"})]}),n.jsxs("label",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"text-sm",children:"Datum"}),n.jsx("input",{type:"date",value:c.date,onChange:T=>_({date:T.target.value}),className:"rounded-lg border px-3 py-1.5"})]})]}),n.jsxs("div",{className:"mt-4 grid gap-3",children:[n.jsxs("label",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"text-sm font-medium",children:"Pedloen dokumentace"}),n.jsx("textarea",{className:"min-h-[80px] rounded-lg border px-3 py-1.5",value:c.submittedDocs||"",onChange:T=>_({submittedDocs:T.target.value}),placeholder:"Projektov dokumentace, vkresy, prohlen o shod, seznam zazen"})]}),n.jsxs("label",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"text-sm font-medium",children:"Strun popis objektu"}),n.jsx("textarea",{className:"min-h-[80px] rounded-lg border px-3 py-1.5",value:c.objectDescription||"",onChange:T=>_({objectDescription:T.target.value}),placeholder:"Typ budovy, vyuit, technologie, specifika provozu"})]})]})]}),n.jsxs("div",{className:"rounded-lg border bg-white p-4 shadow-sm",children:[n.jsxs("h2",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:["Komise ",n.jsx(sd,{className:"h-4 w-4 opacity-60"})]}),n.jsxs("div",{className:"space-y-2",children:[c.committee.map((T,Z)=>n.jsxs("div",{className:"grid grid-cols-3 gap-2 items-center",children:[n.jsxs("select",{className:"rounded-lg border px-2 py-1.5",value:T.role,onChange:Q=>{const Y=[...c.committee];Y[Z]={...T,role:Q.target.value},_({committee:Y})},children:[n.jsx("option",{value:"Pedseda",children:"Pedseda"}),n.jsx("option",{value:"len",children:"len"})]}),n.jsx("input",{className:"rounded-lg border px-3 py-1.5 col-span-2",value:T.name,onChange:Q=>{const Y=[...c.committee];Y[Z]={...T,name:Q.target.value},_({committee:Y})},placeholder:"Jmno a pjmen"})]},Z)),n.jsxs("div",{className:"flex gap-2 pt-2",children:[n.jsxs("button",{onClick:()=>_({committee:[...c.committee,{role:"len",name:""}]}),className:"inline-flex items-center gap-2 rounded-lg border px-3 py-1.5 hover:shadow-sm",children:[n.jsx(rg,{className:"h-4 w-4"}),"Pidat lena"]}),c.committee.length>1&&n.jsxs("button",{onClick:()=>_({committee:c.committee.slice(0,-1)}),className:"inline-flex items-center gap-2 rounded-lg border px-3 py-1.5 hover:shadow-sm",children:[n.jsx(ng,{className:"h-4 w-4"}),"Odebrat"]})]})]})]}),n.jsxs("aside",{className:"rounded-lg border bg-white p-4 shadow-sm h-max",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h2",{className:"font-semibold text-lg",children:"Prostory"}),n.jsxs("button",{onClick:B,className:"inline-flex items-center gap-2 rounded-lg border px-3 py-1.5 hover:shadow-sm",children:[n.jsx(rg,{className:"h-4 w-4"}),"Nov"]})]}),n.jsx("div",{className:"space-y-2",children:c.spaces.map(T=>n.jsxs("button",{onClick:()=>j(T.id),className:`w-full text-left rounded-lg border px-3 py-1.5 hover:shadow-sm ${g===T.id?"bg-slate-50 border-slate-300":""}`,children:[n.jsx("div",{className:"font-medium",children:T.name}),T.note&&n.jsx("div",{className:"text-xs text-slate-500 line-clamp-2",children:T.note})]},T.id))}),c.spaces.length>1&&n.jsxs("button",{onClick:()=>M(g),className:"mt-3 inline-flex items-center gap-2 rounded-lg border px-3 py-1.5 hover:shadow-sm",children:[n.jsx(ng,{className:"h-4 w-4"}),"Smazat vybran"]})]}),n.jsxs("section",{className:"md:col-span-2 rounded-lg border bg-white p-4 shadow-sm",children:[n.jsxs("div",{className:"text-xs text-slate-500 mb-2 flex items-center gap-2",children:[n.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border px-2 py-0.5 bg-purple-50 border-purple-200 text-purple-800",children:[n.jsx(tg,{className:"h-3 w-3"})," normln vliv"]}),n.jsx("span",{children:"Fialov podbarveno jsou tdy povaovan za normln."})]}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-2 mb-3",children:[n.jsxs("label",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"text-sm",children:"Nzev prostoru"}),n.jsx("input",{className:"rounded-lg border px-3 py-1.5",value:$.name,onChange:T=>A($.id,{name:T.target.value})})]}),n.jsxs("label",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"text-sm",children:"Poznmka"}),n.jsx("input",{className:"rounded-lg border px-3 py-1.5",value:$.note||"",onChange:T=>A($.id,{note:T.target.value})})]})]}),RA.map(T=>n.jsxs("section",{className:"mt-6",children:[n.jsx("h3",{className:"font-semibold mb-2 text-slate-700",children:AA(T)}),n.jsx("div",{className:"divide-y rounded-lg border",children:k.filter(Z=>Z.group===T).map(Z=>{const Q=$.selections[Z.code],Y=Q?y?.[Q]:void 0,ne=Z.items.filter(J=>y?.[J.code]?.normal).map(J=>J.code).join(", ");return n.jsxs("div",{className:"p-3 grid md:grid-cols-[240px_1fr] gap-4",children:[n.jsxs("div",{className:"font-medium flex items-center gap-2",children:[n.jsx("span",{className:"font-mono text-xs bg-slate-100 rounded px-1.5 py-0.5",children:Z.code}),n.jsx("span",{className:"text-slate-700",children:Z.name})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"flex flex-wrap gap-2",children:Z.items.map(J=>{const ue=y[J.code],W=Q===J.code,U=!!ue?.normal,re="cursor-pointer inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-sm hover:shadow-sm transition",ae=U?" bg-purple-50 border-purple-200 text-purple-900":" bg-white",ye=W?" ring-1 ring-blue-300 bg-blue-50 border-blue-300":"";return n.jsxs("label",{className:`${re}${ae}${ye}`,title:ue.meaning,children:[n.jsx("input",{type:"radio",className:"hidden",name:`sel-${$.id}-${Z.code}`,checked:W,onChange:()=>A($.id,{selections:{...$.selections,[Z.code]:J.code}})}),n.jsx("span",{className:"font-mono text-xs bg-slate-100 rounded px-1.5 py-0.5",children:J.code}),n.jsx("span",{children:`${J.code}  ${ue.meaning}`}),U&&n.jsxs("span",{className:"inline-flex items-center gap-1 text-[11px] px-2 py-0.5 rounded-full bg-purple-100 border border-purple-200 text-purple-900",children:[n.jsx(tg,{className:"h-3 w-3"})," normln"]})]},J.code)})}),Q&&Y&&n.jsx("div",{className:"rounded-lg border bg-slate-50 p-3 text-sm",children:n.jsxs("div",{className:"grid md:grid-cols-[160px_1fr] gap-2",children:[n.jsx("div",{className:"text-slate-600",children:"Vybran tda"}),n.jsx("div",{className:"font-mono",children:Q}),n.jsx("div",{className:"text-slate-600",children:"Normln vliv?"}),n.jsx("div",{children:Y.normal?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded bg-emerald-100 text-emerald-700",children:[n.jsx(Gk,{className:"h-4 w-4"}),"Ano"]}):n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded bg-amber-100 text-amber-700",children:[n.jsx(l_,{className:"h-4 w-4"}),"Ne"]})}),n.jsx("div",{className:"text-slate-600",children:"Vznam"}),n.jsx("div",{children:Y.meaning||""}),n.jsx("div",{className:"text-slate-600",children:"Poadavky"}),n.jsx("div",{children:Y.requirements?.length?n.jsx("ul",{className:"list-disc ml-5 space-y-1",children:Y.requirements.map((J,ue)=>n.jsx("li",{children:J},ue))}):""}),n.jsx("div",{className:"text-slate-600",children:"Vlivy povaovan za normln"}),n.jsx("div",{className:"font-mono",children:ne||""})]})})]})]},Z.code)})})]},T)),n.jsxs("section",{className:"mt-6 grid md:grid-cols-2 gap-4",children:[n.jsxs("label",{className:"flex flex-col gap-2",children:[n.jsxs("div",{className:"font-semibold flex items-center gap-2",children:["Nvrh technickch opaten"," ",n.jsx(sd,{className:"h-4 w-4 opacity-60"})]}),n.jsx("textarea",{className:"min-h-[120px] rounded-lg border px-3 py-1.5",value:$.measures||"",onChange:T=>A($.id,{measures:T.target.value}),placeholder:"Dopl konkrtn technick opaten (IP, materily, ochrany, znaen, revizn body)"})]}),n.jsxs("label",{className:"flex flex-col gap-2",children:[n.jsxs("div",{className:"font-semibold flex items-center gap-2",children:["Nvrh termn pravidelnch reviz"," ",n.jsx(sd,{className:"h-4 w-4 opacity-60"})]}),n.jsx("textarea",{className:"min-h-[120px] rounded-lg border px-3 py-1.5",value:$.intervals||"",onChange:T=>A($.id,{intervals:T.target.value}),placeholder:"Nap. kad 3 roky (bn prostory); astji v agresivnm prosted  dle NV 190/2022 Sb. a norem."})]})]}),n.jsxs("section",{className:"mt-6",children:[n.jsx("h3",{className:"font-semibold mb-2 text-slate-700",children:"Souhrn poadavk (vybran prostor)  setdno"}),le.length?n.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:le.map(T=>n.jsxs("div",{className:"rounded-lg border p-3",children:[n.jsx("div",{className:"font-medium mb-2",children:T.category}),n.jsx("ul",{className:"list-disc ml-5 space-y-1",children:T.items.map((Z,Q)=>n.jsx("li",{children:Z},Q))})]},T.category))}):n.jsx("div",{className:"text-slate-500",children:""})]})]})]}),y&&n.jsx("div",{className:"print-sheet hidden",children:n.jsxs("div",{style:{maxWidth:"175mm",margin:"0 auto",fontSize:"11px",lineHeight:1.25,paddingTop:"6mm",paddingBottom:"6mm"},children:[n.jsx("div",{style:{textAlign:"center",fontWeight:700,fontSize:"15px",marginBottom:"2.5mm"},children:"PROTOKOL o uren vnjch vliv"}),n.jsxs("div",{style:{textAlign:"center",marginBottom:"3mm"},children:[c.objectName||"","  ",c.address||""," "," ",c.date||"","  Zpracoval: ",c.preparedBy||"",a?.number?n.jsxs(n.Fragment,{children:["  slo: ",a.number]}):null]}),(c.submittedDocs||c.objectDescription)&&n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4mm",marginBottom:"3mm"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:600,marginBottom:"1mm"},children:"Pedloen dokumentace"}),n.jsx("div",{style:{whiteSpace:"pre-wrap"},children:c.submittedDocs||""})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:600,marginBottom:"1mm"},children:"Strun popis objektu"}),n.jsx("div",{style:{whiteSpace:"pre-wrap"},children:c.objectDescription||""})]})]}),n.jsx("table",{style:{width:"100%",marginBottom:"3mm",borderCollapse:"collapse"},children:n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{style:{width:"28mm",border:"1px solid #333",padding:"3px"},children:"Pedseda"}),n.jsx("td",{style:{border:"1px solid #333",padding:"3px"},children:c.committee.find(T=>T.role==="Pedseda")?.name||""})]}),n.jsxs("tr",{children:[n.jsx("td",{style:{border:"1px solid #333",padding:"3px"},children:"lenov"}),n.jsx("td",{style:{border:"1px solid #333",padding:"3px"},children:c.committee.filter(T=>T.role==="len").map(T=>T.name).filter(Boolean).join(", ")||""})]})]})}),n.jsxs("div",{style:{fontWeight:600,marginBottom:"1mm"},children:["Uren vnjch vliv  ",$?.name||""]}),n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"3mm"},children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:{border:"1px solid #333",padding:"3px",textAlign:"left"},children:"Vliv"}),n.jsx("th",{style:{border:"1px solid #333",padding:"3px",textAlign:"left"},children:"Oznaen"}),n.jsx("th",{style:{border:"1px solid #333",padding:"3px",textAlign:"left"},children:"Normln tdy"})]})}),n.jsx("tbody",{children:k.map(T=>{const Z=$?.selections[T.code]||"",Q=T.items.filter(Y=>y[Y.code]?.normal).map(Y=>Y.code).join(", ");return n.jsxs("tr",{children:[n.jsxs("td",{style:{border:"1px solid #333",padding:"3px"},children:[n.jsx("span",{style:{fontFamily:"monospace"},children:T.code})," "," ",T.name]}),n.jsx("td",{style:{border:"1px solid #333",padding:"3px",fontFamily:"monospace"},children:Z||""}),n.jsx("td",{style:{border:"1px solid #333",padding:"3px",fontFamily:"monospace"},children:Q||""})]},T.code)})})]}),n.jsx("div",{style:{fontWeight:600,marginBottom:"1mm"},children:"Souhrn poadavk vyplvajcch z urench vliv"}),le.length?le.map((T,Z)=>{const Q=T.items.length>14?3:2,Y=IA(T.items,Q);return n.jsxs("div",{style:{marginBottom:"2mm"},children:[n.jsx("div",{style:{fontWeight:600,margin:"0 0 0.5mm 0"},children:T.category}),n.jsx("table",{style:{width:"100%",borderCollapse:"collapse"},children:n.jsx("tbody",{children:Y.map((ne,J)=>n.jsx("tr",{children:ne.map((ue,W)=>n.jsx("td",{style:{border:"1px solid #333",padding:"2px 3px",width:`${100/Q}%`},children:ue?n.jsxs("span",{children:[" ",ue]}):n.jsx("span",{children:""})},W))},J))})})]},Z)}):n.jsx("div",{style:{color:"#555"},children:""}),n.jsx("div",{style:{marginTop:"5mm"},children:"V ____________ dne ____________"}),n.jsx("div",{style:{display:"flex",gap:"8mm",marginTop:"10mm"},children:c.committee.map((T,Z)=>n.jsx("div",{style:{flex:1},children:n.jsxs("div",{style:{borderTop:"1px solid #333",paddingTop:"3mm",textAlign:"center"},children:[T.name||"__________",n.jsx("br",{}),n.jsx("span",{style:{fontSize:"10px"},children:T.role})]})},Z))})]})}),n.jsxs("div",{className:"no-print text-sm text-slate-500 mt-6",children:["Backend: ",n.jsx("span",{className:"font-mono",children:q})," "," ",u?"Natm":"Pipraveno"]})]})]})}const ef=18,tf=24,DA=20;function LA(){const{form:r,setForm:e}=Mi(),i=nt.useRef(null),a=nt.useRef(null),[l,c]=nt.useState("#0f172a"),[d,u]=nt.useState(2),[p,y]=nt.useState(!0),[v,k]=nt.useState("select"),[E,C]=nt.useState(1),[N,g]=nt.useState(0),[j,f]=nt.useState([]),[b,w]=nt.useState([]),[_,A]=nt.useState("crosshair"),[B,M]=nt.useState({x:0,y:0}),[$,D]=nt.useState(!1),[le,pe]=nt.useState(null),[H,q]=nt.useState(null),T=nt.useRef(null),Z=nt.useMemo(()=>{const de=r?.lps||{};return Array.isArray(de.earthResistance)?[...de.earthResistance]:Array.isArray(de.downConductorsMeasurements)?[...de.downConductorsMeasurements]:Array.isArray(de.continuity)?[...de.continuity]:[]},[r]),Q=nt.useMemo(()=>Z.map((de,Ee)=>{let _e;if(de&&typeof de=="object"){const Te=de.label??de.conductor??de.path??de.name??de.title??de.location??(typeof de.text=="string"?de.text:void 0);typeof Te=="string"&&(_e=Te.trim())}else typeof de=="string"&&(_e=de.trim());return _e&&_e.length?_e:`Zemni ${Ee+1}`}),[Z]),Y=nt.useMemo(()=>Q.join("||"),[Q]),ne=Q.length,J=nt.useRef([]),ue=nt.useRef([]),W=nt.useRef(()=>{}),U=nt.useRef(()=>{}),re=nt.useRef([]),ae=nt.useRef([]),ye=nt.useRef({down:!1}),ce=nt.useRef(null),P=nt.useRef(null),O=nt.useCallback(()=>ae.current.filter(de=>de.type==="earth").length,[]),te=nt.useCallback(de=>{T.current&&clearTimeout(T.current);const Ee=Date.now();q({id:Ee,text:de}),T.current=setTimeout(()=>{q(_e=>_e&&_e.id===Ee?null:_e)},4e3)},[q]);nt.useEffect(()=>()=>{T.current&&clearTimeout(T.current)},[]),nt.useEffect(()=>{const de=r?.lps?.sketchJson,Ee=r?.lps?.sketchIcons;Array.isArray(de)&&(re.current=de),Array.isArray(Ee)&&(ae.current=Ee);const _e=(ae.current.filter(Te=>Te.type==="earth").length||0)+1;C(_e),ge()},[]);const ee=nt.useCallback(()=>{const de=i.current,Ee=a.current;if(!de||!Ee)return;const _e=Ee.getBoundingClientRect(),Te=Math.max(window.devicePixelRatio||1,1),Le=Math.max(320,Math.floor(_e.width)),Oe=Math.max(280,Math.floor(_e.height));de.width=Math.floor(Le*Te),de.height=Math.floor(Oe*Te),de.style.width=`${Le}px`,de.style.height=`${Oe}px`,ge()},[]);nt.useEffect(()=>{ee();const de=()=>ee();return window.addEventListener("resize",de),()=>window.removeEventListener("resize",de)},[ee]),nt.useEffect(()=>{A(v==="select"?"grab":"crosshair")},[v]),nt.useEffect(()=>{J.current=j},[j]),nt.useEffect(()=>{ue.current=b},[b]),nt.useEffect(()=>{if(!Q.length)return;const de=ae.current;let Ee=!1,_e=0;const Te=de.map(Le=>{if(Le.type!=="earth")return Le;const Oe=Q[_e];return _e+=1,!Oe||Le.label===Oe?Le:(Ee=!0,{...Le,label:Oe})});Ee&&(ae.current=Te,ge(),ke())},[Y]),nt.useEffect(()=>{pe(de=>!de||de.type!=="earth"||v!=="icon_earth"?de:{...de,label:String(E),rotation:N})},[E,N,v]),nt.useEffect(()=>{v==="text"||v.startsWith("icon_")||pe(null)},[v]);const G=()=>i.current?.getContext("2d"),L=()=>Math.max(window.devicePixelRatio||1,1),ie=de=>{const Ee=i.current;return{x:de.x*Ee.width,y:de.y*Ee.height}},z=(de,Ee)=>{const _e=i.current;return{x:Math.max(0,Math.min(1,de/_e.width)),y:Math.max(0,Math.min(1,Ee/_e.height))}},fe=()=>DA*L(),F=(de,Ee)=>{const _e=fe();return{x:Math.round(de/_e)*_e,y:Math.round(Ee/_e)*_e}},x=(de,Ee,_e,Te)=>{const Le=_e-de,Oe=Te-Ee,De=Math.atan2(Oe,Le),Ze=Math.PI/4,Xe=Math.round(De/Ze)*Ze,Je=Math.hypot(Le,Oe),Qe=fe(),st=Math.max(Qe,Math.round(Je/Qe)*Qe),pt=de+Math.cos(Xe)*st,xt=Ee+Math.sin(Xe)*st;return F(pt,xt)},m=()=>{const de=G(),Ee=i.current;!de||!Ee||de.clearRect(0,0,Ee.width,Ee.height)},R=()=>{const de=G(),Ee=i.current;if(!de||!Ee)return;const _e=L();re.current.forEach((Te,Le)=>{de.save(),de.strokeStyle=Te.color,de.lineWidth=Te.width*_e,de.lineJoin="round",de.lineCap="round",de.setLineDash(Te.style==="dashed"?[6*_e,6*_e]:[]),de.beginPath();let Oe=!1;if(Te.style.startsWith("rect")){const De=ie(Te.points[0]),Ze=ie(Te.points[1]||Te.points[0]);let Xe=De.x,Je=De.y,Qe=Ze.x,st=Ze.y;if(Te.style==="rect_square"){const kt=Math.abs(Qe-Xe),Rr=Math.abs(st-Je),Zs=Math.max(kt,Rr);Qe=Xe+Math.sign(Qe-Xe)*Zs,st=Je+Math.sign(st-Je)*Zs}const pt=F(Math.min(Xe,Qe),Math.min(Je,st)),xt=F(Math.max(Xe,Qe),Math.max(Je,st));de.rect(pt.x,pt.y,Math.max(1,xt.x-pt.x),Math.max(1,xt.y-pt.y)),Oe=!0}if(!Oe){const De=ie(Te.points[0]);de.moveTo(De.x,De.y);for(let Ze=1;Ze<Te.points.length;Ze++){const Xe=ie(Te.points[Ze]);de.lineTo(Xe.x,Xe.y)}}de.stroke(),ue.current.includes(Le)&&(de.setLineDash([6*_e,4*_e]),de.strokeStyle="#2563eb",de.lineWidth=Math.max(de.lineWidth,2*_e),de.stroke()),de.restore()})},X=(de,Ee,_e,Te)=>{const Le=ie({x:Ee.x,y:Ee.y});if(de.save(),de.translate(Le.x,Le.y),Te?.ghost&&(de.globalAlpha=.55,de.setLineDash([4*_e,4*_e])),Ee.type==="earth"){const Oe=ef*_e,De=Ee.rotation??N,Ze=De*Math.PI/180,Xe=(De%360+360)%360;de.rotate(Ze),de.strokeStyle=Te?.ghost?"#16a34a90":"#16a34a",de.lineWidth=2*_e,de.beginPath(),de.arc(0,0,Oe,0,Math.PI*2),de.stroke(),de.beginPath(),de.moveTo(0,-Oe*.85),de.lineTo(0,-Oe*.1),de.stroke();const Je=Oe*.05,Qe=Oe*.35,st=Oe*.62,pt=Oe*1.4,xt=Oe*1,kt=Oe*.6;de.beginPath(),de.moveTo(-pt/2,Je),de.lineTo(pt/2,Je),de.moveTo(-xt/2,Qe),de.lineTo(xt/2,Qe),de.moveTo(-kt/2,st),de.lineTo(kt/2,st),de.stroke(),Ee.label&&(de.save(),de.rotate(-Ze),de.font=`${16*_e}px ui-sans-serif, system-ui, Segoe UI`,de.fillStyle=Te?.ghost?"rgba(15,23,42,0.7)":"#0f172a",de.textAlign="center",Xe>90&&Xe<270?(de.textBaseline="bottom",de.fillText(Ee.label,0,-Oe-12*_e)):(de.textBaseline="top",de.fillText(Ee.label,0,Oe+12*_e)),de.restore())}else if(Ee.type==="air"){const Oe=16*_e;de.strokeStyle=Te?.ghost?"#0f172a88":"#0f172a",de.lineWidth=1.5*_e,de.beginPath(),de.moveTo(0,-Oe),de.lineTo(Oe,Oe),de.lineTo(-Oe,Oe),de.closePath(),de.stroke();const De=typeof Ee.label=="string"?Ee.label.trim():"";De&&(de.font=`${(Te?.ghost?14:18)*_e}px ui-sans-serif, system-ui, Segoe UI`,de.textAlign="center",de.textBaseline="top",de.fillStyle=Te?.ghost?"rgba(15,23,42,0.65)":"#0f172a",de.fillText(De,0,Oe+6*_e))}else if(Ee.type==="antenna"){const Oe=22*_e,De=12*_e;de.strokeStyle=Te?.ghost?"#0f172a88":"#0f172a",de.lineWidth=1.5*_e,de.beginPath(),de.moveTo(0,-Oe),de.lineTo(0,Oe),de.moveTo(-De,-Oe+5*_e),de.lineTo(De,-Oe+5*_e),de.stroke()}else if(Ee.type==="text"){const Oe=(Ee.text||"").trim();Oe&&(de.font=`${12*_e}px ui-sans-serif, system-ui, Segoe UI`,de.textBaseline="middle",de.textAlign="left",de.lineWidth=4*_e,de.strokeStyle="rgba(255,255,255,0.85)",de.strokeText(Oe,0,0),de.fillStyle=Te?.ghost?"rgba(15,23,42,0.6)":"#0f172a",de.fillText(Oe,0,0))}return de.restore(),Le},oe=()=>{const de=G(),Ee=i.current;if(!de||!Ee)return;const _e=L();ae.current.forEach((Te,Le)=>{const Oe=X(de,Te,_e);J.current.includes(Le)&&(de.save(),de.strokeStyle="#2563eb",de.lineWidth=1*_e,de.setLineDash([4*_e,4*_e]),de.beginPath(),de.arc(Oe.x,Oe.y,tf*_e,0,Math.PI*2),de.stroke(),de.restore())}),le&&X(de,le,_e,{ghost:!0})},se=()=>{const de=G(),Ee=i.current,_e=P.current;if(!de||!Ee||!_e)return;const Te=L(),Le=Math.min(_e.start.x,_e.current.x),Oe=Math.min(_e.start.y,_e.current.y),De=Math.abs(_e.start.x-_e.current.x),Ze=Math.abs(_e.start.y-_e.current.y);de.save(),de.strokeStyle="rgba(59,130,246,0.9)",de.fillStyle="rgba(59,130,246,0.12)",de.lineWidth=Math.max(1,1*Te),de.setLineDash([6*Te,4*Te]),de.strokeRect(Le,Oe,De,Ze),de.fillRect(Le,Oe,De,Ze),de.restore()},ge=()=>{m(),R(),oe(),se()},ke=()=>{e(de=>({...de,lps:{...(de||{}).lps||{},sketchJson:re.current,sketchIcons:ae.current,sketchPng:i.current?.toDataURL("image/png")||""}}))};nt.useEffect(()=>{W.current=ge,U.current=ke},[ge,ke]);const Ce=de=>{const Ee=i.current,_e=Ee.getBoundingClientRect();return{x:(de.clientX-_e.left)/_e.width*Ee.width,y:(de.clientY-_e.top)/_e.height*Ee.height}},Fe=(de,Ee)=>{const _e=L();for(let Te=ae.current.length-1;Te>=0;Te-=1){const Le=ae.current[Te],Oe=ie({x:Le.x,y:Le.y}),De=Le.type==="earth"?ef*_e+8:tf*_e;if(Math.abs(de-Oe.x)<=De&&Math.abs(Ee-Oe.y)<=De)return Te}return null},He=(de,Ee,_e,Te,Le,Oe)=>{const De=Le-_e,Ze=Oe-Te,Xe=De*De+Ze*Ze||1;let Je=((de-_e)*De+(Ee-Te)*Ze)/Xe;Je=Math.max(0,Math.min(1,Je));const Qe=_e+Je*De,st=Te+Je*Ze;return Math.hypot(de-Qe,Ee-st)},Ye=(de,Ee)=>{const _e=L();for(let Te=re.current.length-1;Te>=0;Te-=1){const Le=re.current[Te];if(Le.style.startsWith("rect")){const Je=ie(Le.points[0]),Qe=ie(Le.points[1]||Le.points[0]);let st=Je.x,pt=Je.y,xt=Qe.x,kt=Qe.y;if(Le.style==="rect_square"){const kn=Math.abs(xt-st),Ja=Math.abs(kt-pt),Hi=Math.max(kn,Ja);xt=st+Math.sign(xt-st||1)*Hi,kt=pt+Math.sign(kt-pt||1)*Hi}const Rr=Math.min(st,xt)-8*_e,Zs=Math.max(st,xt)+8*_e,cc=Math.min(pt,kt)-8*_e,uc=Math.max(pt,kt)+8*_e;if(de>=Rr&&de<=Zs&&Ee>=cc&&Ee<=uc)return Te;continue}const Oe=ie(Le.points[0]),De=ie(Le.points[1]||Le.points[0]),Ze=He(de,Ee,Oe.x,Oe.y,De.x,De.y),Xe=Math.max(10,Le.width*_e*1.5);if(Ze<=Xe)return Te}return null},Wt=de=>{const Ee=L();if(de.style.startsWith("rect")){const De=ie(de.points[0]),Ze=ie(de.points[1]||de.points[0]);let Xe=De.x,Je=De.y,Qe=Ze.x,st=Ze.y;if(de.style==="rect_square"){const xt=Math.abs(Qe-Xe),kt=Math.abs(st-Je),Rr=Math.max(xt,kt);Qe=Xe+Math.sign(Qe-Xe||1)*Rr,st=Je+Math.sign(st-Je||1)*Rr}const pt=6*Ee;return{x1:Math.min(Xe,Qe)-pt,x2:Math.max(Xe,Qe)+pt,y1:Math.min(Je,st)-pt,y2:Math.max(Je,st)+pt}}const _e=de.points.map(De=>ie(De)),Te=_e.map(De=>De.x),Le=_e.map(De=>De.y),Oe=Math.max(6*Ee,de.width*Ee*1.5);return{x1:Math.min(...Te)-Oe,x2:Math.max(...Te)+Oe,y1:Math.min(...Le)-Oe,y2:Math.max(...Le)+Oe}},ir=de=>{const Ee=i.current,_e=Ce(de),Te=F(_e.x,_e.y);M(Te);const Le=z(Te.x,Te.y);if(Ee.setPointerCapture(de.pointerId),Ee.focus(),D(!0),v==="select"){const Xe=de.shiftKey||de.ctrlKey||de.metaKey,Je=Fe(_e.x,_e.y);if(Je!==null){const Qe=J.current;if(Xe){const kt=Qe.includes(Je)?Qe.filter(Rr=>Rr!==Je):[...Qe,Je];J.current=kt,f(kt),!kt.length&&!ue.current.length&&A("crosshair");return}const st=Qe.includes(Je)?Qe:[Je];Qe.includes(Je)||(f(st),J.current=st,w([]),ue.current=[]);const pt={};st.forEach(xt=>{const kt=ae.current[xt];kt&&(pt[xt]={x:kt.x,y:kt.y})}),ce.current={indices:[...st],startPx:_e,originals:pt},P.current=null,A("grabbing")}else{const Qe=Ye(_e.x,_e.y);if(Qe!==null){if(Xe){const st=ue.current,xt=st.includes(Qe)?st.filter(kt=>kt!==Qe):[...st,Qe];ue.current=xt,w(xt),!xt.length&&!J.current.length&&A("crosshair");return}f([]),J.current=[],w([Qe]),ue.current=[Qe],ce.current=null,P.current=null,A("crosshair")}else ce.current=null,P.current={start:_e,current:_e},J.current.length&&(J.current=[],f([])),ue.current.length&&(ue.current=[],w([])),A("crosshair")}return}if(v==="text"){const Xe=window.prompt("Zadejte text","Text");if(Xe&&Xe.trim()){const Je={type:"text",x:Le.x,y:Le.y,text:Xe.trim()};ae.current=[...ae.current,Je];const Qe=ae.current.length-1;f([Qe]),J.current=[Qe],w([]),ue.current=[],ge(),ke()}return}if(v.startsWith("icon_")){const Xe=v==="icon_earth"?"earth":v==="icon_air"?"air":"antenna";if(Xe==="earth"){const st=O();if(!ne){te("Pro zemnie zatm nemte dn zznamy v tabulce men. Nejprve je doplte."),pe(null);return}if(st>=ne){te("Pro tento zemni nemte men. Pidejte ho do tabulky a zkuste to znovu."),pe(null);return}}const Je={type:Xe,x:Le.x,y:Le.y};if(Xe==="earth"){const st=O();Je.label=Q[st]||`Zemni ${st+1}`,Je.rotation=N,C(pt=>pt+1)}ae.current=[...ae.current,Je];const Qe=ae.current.length-1;f([Qe]),J.current=[Qe],w([]),ue.current=[],pe(null),ge(),ke();return}const De={color:l,width:d,style:v==="solid"?"solid":v==="dashed"?"dashed":v==="rect"?"rect":"rect_square",points:[Le,Le]};ye.current={down:!0,stroke:De,start:Le},re.current=[...re.current,De];const Ze=re.current.length-1;w([Ze]),ue.current=[Ze],f([]),J.current=[]},Jt=de=>{const Ee=Ce(de),_e=F(Ee.x,Ee.y);if(M(_e),v==="text"||v.startsWith("icon_")){const Te=z(_e.x,_e.y);if(v==="text")pe({type:"text",x:Te.x,y:Te.y,text:"Text"});else{const Le=v==="icon_earth"?"earth":v==="icon_air"?"air":"antenna";if(Le==="earth"){const Oe=O();if(!ne||Oe>=ne)pe(null);else{const De={type:Le,x:Te.x,y:Te.y,label:Q[Oe]||`Zemni ${Oe+1}`,rotation:N};pe(De)}}else{const Oe={type:Le,x:Te.x,y:Te.y};pe(Oe)}}}else!ye.current.down&&!ce.current&&!P.current&&pe(null);if(ce.current){const Te=i.current,Le={x:(Ee.x-ce.current.startPx.x)/Te.width,y:(Ee.y-ce.current.startPx.y)/Te.height},Oe=[...ae.current];ce.current.indices.forEach(De=>{const Ze=ce.current?.originals[De],Xe=Oe[De];!Ze||!Xe||(Oe[De]={...Xe,x:Math.max(0,Math.min(1,Ze.x+Le.x)),y:Math.max(0,Math.min(1,Ze.y+Le.y))})}),ae.current=Oe,ge();return}if(P.current){const Te=P.current;P.current={start:Te.start,current:Ee},ge();return}if(ye.current.down&&ye.current.stroke&&ye.current.start){const Te=ye.current.start,Le=ie(Te),Oe=ye.current.stroke.style.startsWith("rect")?F(_e.x,_e.y):x(Le.x,Le.y,_e.x,_e.y),De=z(Oe.x,Oe.y);ye.current.stroke.points=[Te,De],ge()}},jn=()=>{if(!P.current)return;const de=P.current;P.current=null;const Ee={x1:Math.min(de.start.x,de.current.x),x2:Math.max(de.start.x,de.current.x),y1:Math.min(de.start.y,de.current.y),y2:Math.max(de.start.y,de.current.y)},_e=(De,Ze)=>!(De.x2<Ze.x1||De.x1>Ze.x2||De.y2<Ze.y1||De.y1>Ze.y2),Te=L(),Le=ae.current.map((De,Ze)=>{if(!De)return null;const Xe=ie({x:De.x,y:De.y}),Je=De.type==="earth"?ef*Te+8:tf*Te,Qe={x1:Xe.x-Je,x2:Xe.x+Je,y1:Xe.y-Je,y2:Xe.y+Je};return _e(Qe,Ee)?Ze:null}).filter(De=>De!==null),Oe=re.current.map((De,Ze)=>{const Xe=Wt(De);return _e(Xe,Ee)?Ze:null}).filter(De=>De!==null);J.current=Le,ue.current=Oe,f(Le),w(Oe),A(Le.length||Oe.length?"grab":"crosshair"),ge()},Nt=de=>{const Ee=i.current;if(Ee)try{Ee.releasePointerCapture(de.pointerId)}catch{}if(ce.current){ce.current=null,v==="select"&&A("grab"),ge(),ke();return}if(P.current){jn();return}ye.current.down&&(ye.current={down:!1},ge(),ke())},Nn=de=>{Nt(de),pe(null)};nt.useEffect(()=>{if(!$)return;const de=Ee=>{const _e=J.current,Te=ue.current;if(Ee.key==="Escape"){Ee.preventDefault(),P.current=null,ce.current=null,k("select"),A(_e.length||Te.length?"grab":"crosshair");return}if((Ee.key==="Delete"||Ee.key==="Backspace")&&(_e.length||Te.length)){if(Ee.preventDefault(),_e.length){const Le=new Set(_e);ae.current=ae.current.filter((Oe,De)=>!Le.has(De))}if(Te.length){const Le=new Set(Te);re.current=re.current.filter((Oe,De)=>!Le.has(De))}J.current=[],ue.current=[],f([]),w([]),W.current(),U.current();return}if(Ee.key==="ArrowUp"||Ee.key==="ArrowDown"||Ee.key==="ArrowLeft"||Ee.key==="ArrowRight"){const Le=Ee.shiftKey?.02:.01,Oe=Ee.key==="ArrowLeft"?-Le:Ee.key==="ArrowRight"?Le:0,De=Ee.key==="ArrowUp"?-Le:Ee.key==="ArrowDown"?Le:0;if(_e.length){Ee.preventDefault();const Ze=[...ae.current];_e.forEach(Xe=>{const Je=Ze[Xe];Je&&(Ze[Xe]={...Je,x:Math.max(0,Math.min(1,Je.x+Oe)),y:Math.max(0,Math.min(1,Je.y+De))})}),ae.current=Ze,W.current(),U.current();return}if(Te.length){Ee.preventDefault();const Ze=[...re.current];Te.forEach(Xe=>{const Je=Ze[Xe];if(!Je)return;const Qe=Je.points.map(st=>({x:Math.max(0,Math.min(1,st.x+Oe)),y:Math.max(0,Math.min(1,st.y+De))}));Ze[Xe]={...Je,points:Qe}}),re.current=Ze,W.current(),U.current();return}}if((Ee.key==="r"||Ee.key==="R")&&_e.length){let Le=!1;const Oe=[...ae.current];_e.forEach(De=>{const Ze=Oe[De];Ze&&Ze.type==="earth"&&(Oe[De]={...Ze,rotation:(((Ze.rotation??0)+90)%360+360)%360},Le=!0)}),Le&&(Ee.preventDefault(),ae.current=Oe,W.current(),U.current())}};return window.addEventListener("keydown",de),()=>window.removeEventListener("keydown",de)},[$,f,w,k]);const gs=()=>{if(!J.current.length)return;const de=[...ae.current];let Ee=!1;J.current.forEach(_e=>{const Te=de[_e];Te&&Te.type==="earth"&&(de[_e]={...Te,rotation:(((Te.rotation??0)+90)%360+360)%360},Ee=!0)}),Ee&&(ae.current=de,ge(),ke())},mr=()=>{if(J.current.length!==1)return;const de=J.current[0],Ee=ae.current[de];if(!Ee||Ee.type!=="text")return;const _e=window.prompt("Upravit text",Ee.text||"");if(_e==null)return;const Te=[...ae.current];Te[de]={...Ee,text:_e.trim()},ae.current=Te,ge(),ke()},Kn=()=>{const de=new Set(J.current),Ee=new Set(ue.current);!de.size&&!Ee.size||(de.size&&(ae.current=ae.current.filter((_e,Te)=>!de.has(Te))),Ee.size&&(re.current=re.current.filter((_e,Te)=>!Ee.has(Te))),J.current=[],ue.current=[],f([]),w([]),ge(),ke())},vs=()=>{if(ae.current.length>0){ae.current=ae.current.slice(0,-1);const de=J.current.filter(Ee=>Ee<ae.current.length);de.length!==J.current.length&&(J.current=de,f(de)),ge(),ke();return}if(re.current.length>0){re.current=re.current.slice(0,-1);const de=ue.current.filter(Ee=>Ee<re.current.length);de.length!==ue.current.length&&(ue.current=de,w(de)),ge(),ke()}},xs=()=>{re.current=[],ae.current=[],ce.current=null,P.current=null,ye.current={down:!1},C(1),f([]),J.current=[],w([]),ue.current=[],pe(null),ge(),ke()},un=(de,Ee="primary")=>{const _e="px-3 py-1.5 text-sm border border-slate-200 first:rounded-l-lg last:rounded-r-lg -ml-px";return de?Ee==="green"?`${_e} bg-emerald-600 text-white`:Ee==="purple"?`${_e} bg-purple-600 text-white`:`${_e} bg-slate-900 text-white`:`${_e} bg-white text-slate-700 ${Ee==="green"?"hover:bg-emerald-50":Ee==="purple"?"hover:bg-purple-50":"hover:bg-slate-50"}`},Gr=()=>{if(!j.length&&!b.length)return null;const de=j.map(Te=>({idx:Te,icon:ae.current[Te]})).filter(Te=>!!Te.icon);if(!de.length&&!b.length)return null;const Ee=de.some(Te=>Te.icon.type==="earth"),_e=de.length===1&&de[0].icon.type==="text";return n.jsxs("div",{className:"inline-flex items-center bg-white border rounded-xl overflow-hidden shadow-sm",children:[Ee&&n.jsx("button",{className:"px-3 py-1.5 hover:bg-slate-50",onClick:gs,children:"Otoit 90"}),_e&&n.jsx("button",{className:"px-3 py-1.5 hover:bg-slate-50",onClick:mr,children:"Upravit text"}),n.jsx("button",{className:"px-3 py-1.5 text-red-600 hover:bg-red-50",onClick:Kn,children:"Smazat"})]})};return n.jsxs("div",{className:"space-y-4",children:[H&&n.jsx("div",{className:"fixed bottom-6 right-6 z-40",children:n.jsxs("div",{className:"max-w-xs bg-white/95 border border-amber-200 text-amber-800 px-4 py-3 rounded-2xl shadow-xl flex items-start gap-3",children:[n.jsx("span",{className:"text-xl leading-none pt-0.5",children:""}),n.jsx("div",{className:"text-sm font-medium flex-1",children:H.text}),n.jsx("button",{type:"button",className:"text-amber-600 hover:text-amber-800",onClick:()=>q(null),"aria-label":"Zavt upozornn",children:""})]})}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("aside",{className:"w-60 bg-white/80 backdrop-blur border rounded-2xl shadow-sm p-4 space-y-6",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs font-semibold uppercase text-slate-500 tracking-wide",children:"Kreslm"}),n.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[n.jsx("button",{className:un(v==="solid"),onClick:()=>k("solid"),children:"Pdorys"}),n.jsx("button",{className:un(v==="dashed"),onClick:()=>k("dashed"),children:"Vodi (rkovan)"}),n.jsx("button",{className:un(v==="rect"),onClick:()=>k("rect"),children:"Obdlnk"}),n.jsx("button",{className:un(v==="rect_square"),onClick:()=>k("rect_square"),children:"tverec"})]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs font-semibold uppercase text-slate-500 tracking-wide",children:"Ikony"}),n.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[n.jsxs("button",{className:`rounded-2xl border p-3 text-center ${v==="icon_earth"?"bg-emerald-100 border-emerald-400":"hover:bg-slate-50"}`,onClick:()=>k("icon_earth"),children:[n.jsx("div",{className:"text-lg font-semibold",children:""}),n.jsx("div",{className:"text-[11px] text-slate-500",children:"Zemni"})]}),n.jsxs("button",{className:`rounded-2xl border p-3 text-center ${v==="icon_air"?"bg-emerald-100 border-emerald-400":"hover:bg-slate-50"}`,onClick:()=>k("icon_air"),children:[n.jsx("div",{className:"text-lg",children:""}),n.jsx("div",{className:"text-[11px] text-slate-500",children:"Jma / svod"})]}),n.jsxs("button",{className:`rounded-2xl border p-3 text-center ${v==="icon_antenna"?"bg-emerald-100 border-emerald-400":"hover:bg-slate-50"}`,onClick:()=>k("icon_antenna"),children:[n.jsx("div",{className:"text-lg",children:""}),n.jsx("div",{className:"text-[11px] text-slate-500",children:"Antna"})]}),n.jsxs("button",{className:`rounded-2xl border p-3 text-center ${v==="text"?"bg-purple-100 border-purple-300":"hover:bg-slate-50"}`,onClick:()=>k("text"),children:[n.jsx("div",{className:"text-lg font-semibold",children:"T"}),n.jsx("div",{className:"text-[11px] text-slate-500",children:"Popisky"})]})]})]}),n.jsxs("div",{className:"space-y-3 text-sm text-slate-600",children:[n.jsx("div",{className:"font-semibold text-slate-500 uppercase tracking-wide text-xs",children:"Informace"}),n.jsxs("div",{className:"rounded-xl border p-3 bg-slate-50 text-xs leading-5 space-y-1",children:[n.jsx("div",{children:"Mtko: 1 m = 50 px"}),n.jsxs("div",{children:["Vchoz rotace zemnie: ",N,""]}),n.jsxs("div",{children:["Zemni #",E]})]}),n.jsx("button",{className:"w-full rounded-xl border px-3 py-2 text-sm hover:bg-slate-50",onClick:()=>g(de=>(de+90)%360),children:" Otoit nov zemni"}),n.jsx("button",{className:`w-full rounded-xl border px-3 py-2 text-sm ${v==="select"?"bg-slate-900 text-white":"hover:bg-slate-50"}`,onClick:()=>k("select"),children:" Vbr a pesun"})]})]}),n.jsxs("div",{className:"flex-1 space-y-3",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 bg-white/80 backdrop-blur border rounded-2xl shadow-sm px-4 py-2",children:[Gr(),n.jsx("button",{className:"px-3 py-1.5 rounded-xl border hover:bg-slate-50",onClick:vs,children:" Undo"}),n.jsx("button",{className:"px-3 py-1.5 rounded-xl border hover:bg-slate-50",onClick:xs,children:" Vymazat ve"}),n.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-600 ml-auto",children:["Barva",n.jsx("input",{type:"color",value:l,onChange:de=>c(de.target.value),className:"h-8 w-8 p-0 border rounded"})]}),n.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-600",children:["ka",n.jsx("input",{type:"range",min:1,max:8,step:1,value:d,onChange:de=>u(parseInt(de.target.value,10)||2)}),n.jsxs("span",{className:"text-xs text-slate-500 w-12 text-right",children:[d,"px"]})]}),n.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-600",children:[n.jsx("input",{type:"checkbox",checked:p,onChange:de=>y(de.target.checked)})," Mka"]})]}),n.jsx("div",{ref:a,className:"relative rounded-2xl border bg-white overflow-hidden shadow-sm",style:p?{backgroundImage:"repeating-linear-gradient(0deg, #e5e7eb 0, #e5e7eb 1px, transparent 1px, transparent 20px),repeating-linear-gradient(90deg, #e5e7eb 0, #e5e7eb 1px, transparent 1px, transparent 20px)",backgroundSize:"20px 20px",height:"480px"}:{height:"480px"},children:n.jsx("canvas",{ref:i,onPointerDown:ir,onPointerMove:Jt,onPointerUp:Nt,onPointerLeave:Nn,onFocus:()=>D(!0),onBlur:()=>D(!1),className:"absolute inset-0 touch-none",tabIndex:0,style:{cursor:_}})}),n.jsxs("div",{className:"flex justify-between text-xs text-slate-500 font-medium",children:[n.jsx("span",{children:"Mtko: 1m = 50px"}),n.jsxs("span",{children:["1m = 50px  X: ",B.x.toFixed(0)," px  Y: ",B.y.toFixed(0)," px"]})]})]})]})]})}function Ut({label:r,children:e}){return n.jsxs("label",{className:"block",children:[n.jsx("div",{className:"text-sm text-slate-600 mb-1",children:r}),e]})}function BA(){const{form:r,setForm:e}=Mi(),{profile:i,company:a,refreshCompanies:l,loadingCompanies:c}=ps(),d=V.useRef(a),u=V.useRef(i);V.useEffect(()=>{d.current=a},[a]),V.useEffect(()=>{u.current=i},[i]);const p=f=>b=>e(w=>({...w||{},[f]:b.target.value})),y=f=>b=>e(w=>({...w||{},lps:{...(w||{}).lps||{},[f]:b.target.value}})),v=f=>{e(b=>{const w=Array.isArray(b?.lps?.scopeChecks)?b.lps.scopeChecks:[],_=new Set(w);return _.has(f)?_.delete(f):_.add(f),{...b,lps:{...(b||{}).lps||{},scopeChecks:Array.from(_)}}})},k=async()=>{try{await l?.()}catch{}await new Promise(B=>setTimeout(B,0));const f=d.current,b=u.current,_=!!f&&(f.name||"").toUpperCase()!=="OSV"?f:null,A=_?.name||b?.fullName||b?.name||f?.name||"";e(B=>({...B||{},technicianSubjectType:_?"company":"osvc",technicianCompanyId:_?.id??null,technicianCompanyName:A,technicianCompanyIco:_?.ico||b?.ico||"",technicianCompanyDic:_?.dic||b?.dic||"",technicianCompanyAddress:_?.address||b?.address||"",technicianName:b?.fullName||b?.name||B?.technicianName||"",technicianCertificateNumber:b?.certificateNumber||B?.technicianCertificateNumber||"",technicianAuthorizationNumber:b?.authorizationNumber||B?.technicianAuthorizationNumber||""}))};V.useEffect(()=>{const f=r||{};f.technicianCompanyName||f.technicianCompanyIco||f.technicianName||k()},[]);const E=r?.evidencni||"",C=["Jedn se o ","Jmac soustava je ","Zemni je pipojen","Stecha objektu je ","Svody ","Tda LPS ","Ochrana SPD "],N=f=>f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),g=f=>{let b=f||"";for(const w of C){const _=new RegExp(`(?:^|[\r
])${N(w)}[^.]*\\.\\s*`,"g");b=b.replace(_,"")}return b.trim()},j=f=>{const b=[],w=(()=>{const M=(f?.objectType||"").toString();return M==="jin"?(f?.objectTypeOther||"").toString().trim()||void 0:M||void 0})(),_=(()=>{const M=(f?.floorsCountOther||"").toString().trim();if(M)return M;if(f?.floorsCount!=null&&f.floorsCount!=="")return String(f.floorsCount)})();if(w||_){const M=w?w+" ":"",$=_?`${_} `:"";b.push(`Jedn se o ${M}objekt o ${$}nadzemnch podlach.`)}if(f?.airTerminationType){let M=`Jmac soustava je ${f.airTerminationType}`;f?.earthingType&&(M+=` a je pipojena k zemnii ${f.earthingType}`),M+=".",b.push(M)}const A=(()=>{const M=(f?.downConductorsCountOther||"").toString().trim();if(M)return M;if(f?.downConductorsCount!=null&&f.downConductorsCount!=="")return String(f.downConductorsCount)})(),B=(()=>{const M=(f?.conductorMaterial||"").toString();return M==="jin"?(f?.conductorMaterialOther||"").toString().trim()||void 0:M||void 0})();if(A||B){const M=A?` k ${A} svodm`:"",$=B?` pomoc vodie ${B}`:"";b.push(`Zemni je pipojen${M}${$}.`)}if(f?.roofType||f?.roofCover){const M=(()=>{const le=(f?.roofType||"").toString();return le==="jin"?(f?.roofTypeOther||"").toString().trim()||"jin":le||""})(),$=(()=>{const le=(f?.roofCover||"").toString();if(le==="jin")return(f?.roofCoverOther||"").toString().trim()||"jinou";switch(le){case"asfaltov":return"asfaltovou";case"plechov":return"plechovou";case"betonov/plen":return"betonovou/plenou";default:return le}})(),D=f?.roofCover?` a je pokryta ${$} krytinou`:"";b.push(`Stecha objektu je ${M}${D}.`)}if(f?.downConductorsProtection){const M=f.downConductorsProtection;M==="nechrnny"?b.push("Svody nejsou chrnny."):M==="pasivn"?b.push("Svody jsou chrnny pasivn."):M==="helnkem"?b.push("Svody jsou chrnny helnkem."):M==="trubkou"?b.push("Svody jsou chrnny trubkou."):b.push(`Svody jsou ${M}.`)}return f?.class&&(f.class==="nen ureno"?b.push("Tda LPS nen urena."):b.push(`Tda LPS je stanovena ${f.class}.`)),(f?.spdProtectionUsed||"").toString()&&b.push(f.spdProtectionUsed==="yes"?"Ochrana SPD je pouita.":"Ochrana SPD nen pouita."),b.join(" ")};return V.useEffect(()=>{const f=r?.lps||{},b=j(f),w=(f.reportText||"").toString(),A=[g(w),b].filter(Boolean).join(`

`);A!==w&&e(B=>({...B||{},lps:{...(B||{}).lps||{},reportText:A}}))},[r?.lps?.objectType,r?.lps?.objectTypeOther,r?.lps?.floorsCount,r?.lps?.floorsCountOther,r?.lps?.airTerminationType,r?.lps?.downConductorsCount,r?.lps?.downConductorsCountOther,r?.lps?.conductorMaterial,r?.lps?.conductorMaterialOther,r?.lps?.earthingType,r?.lps?.roofType,r?.lps?.roofTypeOther,r?.lps?.roofCover,r?.lps?.roofCoverOther,r?.lps?.downConductorsProtection,r?.lps?.class,r?.lps?.spdProtectionUsed]),n.jsxs("div",{className:"space-y-6 text-sm",children:[n.jsxs("section",{className:"bg-white rounded shadow p-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-3",children:"LPS  Zkladn daje"}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[n.jsx(Ut,{label:"Evidenn slo",children:n.jsx("input",{value:E,readOnly:!0,className:"w-full p-2 border rounded bg-gray-100"})}),n.jsx(Ut,{label:"Norma",children:n.jsxs("select",{className:"w-full p-2 border rounded",value:r?.lps?.standard||"",onChange:f=>e(b=>({...b||{},lps:{...(b||{}).lps||{},standard:f.target.value}})),children:[n.jsx("option",{value:"",children:"- vyberte -"}),n.jsx("option",{value:"CSN_EN_62305",children:"SN EN 62305 (14)"}),n.jsx("option",{value:"CSN_34_1390",children:"SN 34 1390"})]})}),n.jsx(Ut,{label:"Zahjen revize",children:n.jsx("input",{type:"date",className:"w-full p-2 border rounded",value:r.date_start||"",onChange:p("date_start")})}),n.jsx(Ut,{label:"Ukonen revize",children:n.jsx("input",{type:"date",className:"w-full p-2 border rounded",value:r.date_end||"",onChange:p("date_end")})}),n.jsx(Ut,{label:"Vypracovn revize",children:n.jsx("input",{type:"date",className:"w-full p-2 border rounded",value:r.date_created||"",onChange:p("date_created")})}),n.jsx(Ut,{label:"Typ revize",children:n.jsxs("select",{className:"w-full p-2 border rounded",value:r.typRevize||"",onChange:p("typRevize"),children:[n.jsx("option",{value:"",children:"- vyberte -"}),n.jsx("option",{children:"VCHOZ"}),n.jsx("option",{children:"PRAVIDELN"}),n.jsx("option",{children:"MIMODN"})]})})]}),n.jsx("div",{className:"mt-4",children:n.jsx(h0,{})})]}),n.jsxs("section",{className:"bg-white rounded shadow p-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Rozsah revize"}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-2 text-sm",children:[n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:Array.isArray(r?.lps?.scopeChecks)&&r.lps.scopeChecks.includes("vnejsi"),onChange:()=>v("vnejsi")})," Vnj ochrana ped bleskem"]}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:Array.isArray(r?.lps?.scopeChecks)&&r.lps.scopeChecks.includes("vnitrni"),onChange:()=>v("vnitrni")})," Vnitn ochrana ped bleskem"]}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:Array.isArray(r?.lps?.scopeChecks)&&r.lps.scopeChecks.includes("uzemneni"),onChange:()=>v("uzemneni")})," Uzemnn"]}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:Array.isArray(r?.lps?.scopeChecks)&&r.lps.scopeChecks.includes("pospojovani"),onChange:()=>v("pospojovani")})," Ekvipotenciln pospojovn"]}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:Array.isArray(r?.lps?.scopeChecks)&&r.lps.scopeChecks.includes("spd"),onChange:()=>v("spd")})," SPD / pepov ochrana"]})]})]}),n.jsxs("section",{className:"bg-white rounded shadow p-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Identifikace objektu a subjekt"}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[n.jsx(Ut,{label:"Revidovan objekt",children:n.jsx("input",{className:"w-full p-2 border rounded",value:r.objekt||"",onChange:p("objekt")})}),n.jsx(Ut,{label:"Umstn / adresa objektu",children:n.jsx("input",{className:"w-full p-2 border rounded",value:r.adresa||"",onChange:p("adresa")})}),n.jsx(Ut,{label:"Majitel / provozovatel objektu",children:n.jsx("input",{className:"w-full p-2 border rounded",value:r?.lps?.owner||"",onChange:y("owner")})}),n.jsx(Ut,{label:"Objednatel revize",children:n.jsx("input",{className:"w-full p-2 border rounded",value:r.objednatel||"",onChange:p("objednatel")})}),n.jsx(Ut,{label:"Projekt zpracoval (firma / I)",children:n.jsx("input",{className:"w-full p-2 border rounded",value:r?.lps?.projectBy||"",onChange:y("projectBy"),placeholder:"PROJEKTOL s.r.o., I "})}),n.jsx(Ut,{label:"Projekt .",children:n.jsx("input",{className:"w-full p-2 border rounded",value:r?.lps?.projectNo||"",onChange:y("projectNo")})}),n.jsx(Ut,{label:"Mont LPS provedla (firma)",children:n.jsx("input",{className:"w-full p-2 border rounded",value:r?.lps?.assemblyBy||"",onChange:y("assemblyBy")})}),n.jsx(Ut,{label:"slo oprvnn montn firmy",children:n.jsx("input",{className:"w-full p-2 border rounded",value:r?.lps?.assemblyPermit||"",onChange:y("assemblyPermit")})})]})]}),n.jsxs("section",{className:"bg-white rounded shadow p-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Identifikace reviznho technika"}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[n.jsx(Ut,{label:"Jmno reviznho technika",children:n.jsx("input",{className:"w-full p-2 border rounded",value:r.technicianName||"",onChange:p("technicianName")})}),n.jsx(Ut,{label:"Ev. . osvden",children:n.jsx("input",{className:"w-full p-2 border rounded",value:r.technicianCertificateNumber||"",onChange:p("technicianCertificateNumber")})}),n.jsx(Ut,{label:"Ev. . oprvnn",children:n.jsx("input",{className:"w-full p-2 border rounded",value:r.technicianAuthorizationNumber||"",onChange:p("technicianAuthorizationNumber")})}),n.jsx(Ut,{label:"Firma",children:n.jsx("input",{className:"w-full p-2 border rounded",value:r.technicianCompanyName||"",onChange:p("technicianCompanyName")})}),n.jsx(Ut,{label:"I",children:n.jsx("input",{className:"w-full p-2 border rounded",value:r.technicianCompanyIco||"",onChange:p("technicianCompanyIco")})}),n.jsx(Ut,{label:"DI",children:n.jsx("input",{className:"w-full p-2 border rounded",value:r.technicianCompanyDic||"",onChange:p("technicianCompanyDic")})}),n.jsx(Ut,{label:"Adresa (firma)",children:n.jsx("input",{className:"w-full p-2 border rounded",value:r.technicianCompanyAddress||"",onChange:p("technicianCompanyAddress")})})]}),n.jsx("div",{className:"mt-3",children:n.jsx("button",{className:"px-3 py-2 bg-indigo-600 text-white rounded",onClick:f=>{f.preventDefault(),k()},children:c?"Natm":"Nast aktivn subjekt"})})]}),n.jsxs("section",{className:"bg-white rounded shadow p-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Popis objektu"}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium mb-1",children:"Typ objektu"}),["zdn","devn","jin"].map(f=>n.jsx("button",{type:"button",className:`${(r?.lps?.objectType||"")===f?"bg-indigo-600 text-white border-indigo-600":"bg-white text-slate-700 border-slate-300 hover:bg-slate-50"} mr-2 mb-2 border rounded-full px-3 py-1 text-xs`,onClick:()=>e(b=>({...b,lps:{...(b||{}).lps||{},objectType:f}})),children:f},f)),(r?.lps?.objectType||"")==="jin"&&n.jsx("input",{className:"mt-2 w-full p-2 border rounded",placeholder:"dopite",value:r?.lps?.objectTypeOther||"",onChange:y("objectTypeOther")})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium mb-1",children:"Poet nadzemnch podla"}),[1,2,3,4].map(f=>n.jsx("button",{type:"button",className:`${r?.lps?.floorsCount===f&&!r?.lps?.floorsCountOther?"bg-indigo-600 text-white border-indigo-600":"bg-white text-slate-700 border-slate-300 hover:bg-slate-50"} mr-2 mb-2 border rounded-full px-3 py-1 text-xs`,onClick:()=>e(b=>({...b,lps:{...(b||{}).lps||{},floorsCount:f,floorsCountOther:""}})),children:f},f)),n.jsx("span",{className:"inline-flex items-center gap-2 align-middle ml-1",children:(()=>{const f=(r?.lps?.floorsCountOther||"").toString(),b=f.trim().length>0||![1,2,3,4].includes(r?.lps?.floorsCount||0);return n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",className:`${b?"bg-indigo-600 text-white border-indigo-600":"bg-white text-slate-700 border-slate-300 hover:bg-slate-50"} mr-2 mb-2 border rounded-full px-3 py-1 text-xs`,onClick:()=>e(w=>({...w,lps:{...(w||{}).lps||{},floorsCount:"",floorsCountOther:f||""}})),children:"Jin"}),n.jsx("input",{type:"number",min:0,className:"w-20 p-1 border rounded",value:f,onChange:w=>e(_=>({..._,lps:{...(_||{}).lps||{},floorsCount:"",floorsCountOther:w.target.value}})),placeholder:"slo"})]})})()})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium mb-1",children:"Jmac soustava"}),["hebenov","tyov","zvsn","mov"].map(f=>n.jsx("button",{type:"button",className:`${(r?.lps?.airTerminationType||"")===f?"bg-indigo-600 text-white border-indigo-600":"bg-white text-slate-700 border-slate-300 hover:bg-slate-50"} mr-2 mb-2 border rounded-full px-3 py-1 text-xs`,onClick:()=>e(b=>({...b,lps:{...(b||{}).lps||{},airTerminationType:f}})),children:f},f))]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium mb-1",children:"Zemni"}),["typ A","typ B"].map(f=>n.jsx("button",{type:"button",className:`${(r?.lps?.earthingType||"")===f?"bg-indigo-600 text-white border-indigo-600":"bg-white text-slate-700 border-slate-300 hover:bg-slate-50"} mr-2 mb-2 border rounded-full px-3 py-1 text-xs`,onClick:()=>e(b=>({...b,lps:{...(b||{}).lps||{},earthingType:f}})),children:f},f))]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium mb-1",children:"Poet svod"}),[2,3,4,6,8].map(f=>n.jsx("button",{type:"button",className:`${r?.lps?.downConductorsCount===f&&!r?.lps?.downConductorsCountOther?"bg-indigo-600 text-white border-indigo-600":"bg-white text-slate-700 border-slate-300 hover:bg-slate-50"} mr-2 mb-2 border rounded-full px-3 py-1 text-xs`,onClick:()=>e(b=>({...b,lps:{...(b||{}).lps||{},downConductorsCount:f,downConductorsCountOther:""}})),children:f},f)),n.jsx("span",{className:"inline-flex items-center gap-2 align-middle ml-1",children:(()=>{const f=(r?.lps?.downConductorsCountOther||"").toString(),b=f.trim().length>0||![2,3,4,6,8].includes(r?.lps?.downConductorsCount||0);return n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",className:`${b?"bg-indigo-600 text-white border-indigo-600":"bg-white text-slate-700 border-slate-300 hover:bg-slate-50"} mr-2 mb-2 border rounded-full px-3 py-1 text-xs`,onClick:()=>e(w=>({...w,lps:{...(w||{}).lps||{},downConductorsCount:"",downConductorsCountOther:f||""}})),children:"Jin"}),n.jsx("input",{type:"number",min:0,className:"w-20 p-1 border rounded",value:f,onChange:w=>e(_=>({..._,lps:{...(_||{}).lps||{},downConductorsCount:"",downConductorsCountOther:w.target.value}})),placeholder:"slo"})]})})()})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium mb-1",children:"Materil vodie"}),["FeZn 10mm","AlMgSi 8mm","jin"].map(f=>n.jsx("button",{type:"button",className:`${(r?.lps?.conductorMaterial||"")===f?"bg-indigo-600 text-white border-indigo-600":"bg-white text-slate-700 border-slate-300 hover:bg-slate-50"} mr-2 mb-2 border rounded-full px-3 py-1 text-xs`,onClick:()=>e(b=>({...b,lps:{...(b||{}).lps||{},conductorMaterial:f}})),children:f},f)),(r?.lps?.conductorMaterial||"")==="jin"&&n.jsx("input",{className:"mt-2 w-full p-2 border rounded",placeholder:"dopite",value:r?.lps?.conductorMaterialOther||"",onChange:y("conductorMaterialOther")})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium mb-1",children:"Stecha"}),["sedlov","valbov","pultov","jin"].map(f=>n.jsx("button",{type:"button",className:`${(r?.lps?.roofType||"")===f?"bg-indigo-600 text-white border-indigo-600":"bg-white text-slate-700 border-slate-300 hover:bg-slate-50"} mr-2 mb-2 border rounded-full px-3 py-1 text-xs`,onClick:()=>e(b=>({...b,lps:{...(b||{}).lps||{},roofType:f}})),children:f},f)),(r?.lps?.roofType||"")==="jin"&&n.jsx("input",{className:"mt-2 w-full p-2 border rounded",placeholder:"dopite typ stechy (nap. mansardov)",value:r?.lps?.roofTypeOther||"",onChange:y("roofTypeOther")})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium mb-1",children:"Krytina"}),["asfaltov","plechov","betonov/plen","jin"].map(f=>n.jsx("button",{type:"button",className:`${(r?.lps?.roofCover||"")===f?"bg-indigo-600 text-white border-indigo-600":"bg-white text-slate-700 border-slate-300 hover:bg-slate-50"} mr-2 mb-2 border rounded-full px-3 py-1 text-xs`,onClick:()=>e(b=>({...b,lps:{...(b||{}).lps||{},roofCover:f}})),children:f},f)),(r?.lps?.roofCover||"")==="jin"&&n.jsx("input",{className:"mt-2 w-full p-2 border rounded",placeholder:"dopite (akuzativ, nap. hlinkovou)",value:r?.lps?.roofCoverOther||"",onChange:y("roofCoverOther")})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium mb-1",children:"Ochrana svod"}),["pasivn","helnkem","trubkou","nechrnny"].map(f=>n.jsx("button",{type:"button",className:`${(r?.lps?.downConductorsProtection||"")===f?"bg-indigo-600 text-white border-indigo-600":"bg-white text-slate-700 border-slate-300 hover:bg-slate-50"} mr-2 mb-2 border rounded-full px-3 py-1 text-xs`,onClick:()=>e(b=>({...b,lps:{...(b||{}).lps||{},downConductorsProtection:f}})),children:f},f))]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium mb-1",children:"Ochrana SPD"}),["je pouita","nen pouita"].map(f=>{const b=f==="je pouita"?"yes":"no",w=(r?.lps?.spdProtectionUsed||"")===b;return n.jsx("button",{type:"button",className:`${w?"bg-indigo-600 text-white border-indigo-600":"bg-white text-slate-700 border-slate-300 hover:bg-slate-50"} mr-2 mb-2 border rounded-full px-3 py-1 text-xs`,onClick:()=>e(_=>({..._,lps:{...(_||{}).lps||{},spdProtectionUsed:b}})),children:f},f)})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium mb-1",children:"Tda LPS"}),["I","II","III","IV","nen ureno"].map(f=>n.jsx("button",{type:"button",className:`${(r?.lps?.class||"")===f?"bg-indigo-600 text-white border-indigo-600":"bg-white text-slate-700 border-slate-300 hover:bg-slate-50"} mr-2 mb-2 border rounded-full px-3 py-1 text-xs`,onClick:()=>e(b=>({...b,lps:{...(b||{}).lps||{},class:f}})),children:f},f))]})]}),n.jsx("div",{className:"mt-3",children:n.jsx("textarea",{rows:8,className:"w-full p-2 border rounded",value:r?.lps?.reportText||"",onChange:y("reportText"),placeholder:"Popis revidovanho objektu a soustavy LPS"})})]})]})}function MA(){const{revId:r}=Ba(),[e,i]=nt.useState("lps_info");return n.jsx(zf,{revId:parseInt(r||"0",10),children:n.jsxs("div",{className:"flex min-h-screen bg-gradient-to-br from-gray-100 to-blue-50",children:[n.jsx(Tr,{mode:"summary",active:e,onSelect:a=>i(a)}),n.jsx("main",{className:"compact-main flex-1 overflow-auto p-4 md:p-6",children:n.jsx("div",{className:"compact-card space-y-4",children:e==="lps_info"?n.jsx(BA,{}):n.jsxs(n.Fragment,{children:[n.jsx(f0,{}),n.jsx(p0,{}),n.jsx(hf,{}),n.jsx(ff,{}),n.jsxs("section",{className:"bg-white rounded shadow p-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Nrt LPS"}),n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Nakreslete schma LPS / situaci. Kreslen probh na mce, vhodn i pro tablet."}),n.jsx(LA,{})]})]})})})]})})}const UA=window?.__APP_CONFIG__?.routerMode||void 0||"browser",$A=UA==="hash"?Dj:Fj;k1.createRoot(document.getElementById("root")).render(n.jsx(nt.StrictMode,{children:n.jsx(rN,{children:n.jsx(iN,{children:n.jsx(Fk,{children:n.jsx($A,{children:n.jsxs(fj,{children:[n.jsx(dr,{path:"/login",element:n.jsx(d_,{})}),n.jsx(dr,{path:"/register",element:n.jsx(h_,{})}),n.jsx(dr,{path:"/",element:n.jsx(Fs,{children:n.jsx(p_,{})})}),n.jsx(dr,{path:"/revize/:revId",element:n.jsx(Fs,{children:n.jsx(U_,{})})}),n.jsx(dr,{path:"/revize-lps/:revId",element:n.jsx(Fs,{children:n.jsx(MA,{})})}),n.jsx(dr,{path:"/summary/:revId",element:n.jsx(yA,{})}),n.jsx(dr,{path:"/katalog",element:n.jsx(Fs,{children:n.jsx(bA,{})})}),n.jsx(dr,{path:"/profil",element:n.jsx(Fs,{children:n.jsx(CA,{})})}),n.jsx(dr,{path:"/instruments",element:n.jsx(Fs,{children:n.jsx(TA,{})})}),n.jsx(dr,{path:"/vv/:id",element:n.jsx(Fs,{children:n.jsx(FA,{})})}),n.jsx(dr,{path:"/admin",element:n.jsx(Ia,{children:n.jsx(jA,{})})}),n.jsx(dr,{path:"/admin/users",element:n.jsx(Ia,{children:n.jsx(EA,{})})}),n.jsx(dr,{path:"/admin/defects",element:n.jsx(Ia,{children:n.jsx(NA,{})})}),n.jsx(dr,{path:"/admin/revisions",element:n.jsx(Ia,{children:n.jsx(kA,{})})}),n.jsx(dr,{path:"/admin/defects-editor",element:n.jsx(Ia,{children:n.jsx(_A,{})})})]})})})})})}));
